/*! For license information please see main.bc2a89f9.js.LICENSE.txt */
!function(){var e={3361:function(e,g,t){"use strict";t.d(g,{Z:function(){return oe}});var n=function(){function e(e){var g=this;this._insertTag=function(e){var t;t=0===g.tags.length?g.insertionPoint?g.insertionPoint.nextSibling:g.prepend?g.container.firstChild:g.before:g.tags[g.tags.length-1].nextSibling,g.container.insertBefore(e,t),g.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var g=e.prototype;return g.hydrate=function(e){e.forEach(this._insertTag)},g.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var g=document.createElement("style");return g.setAttribute("data-emotion",e.key),void 0!==e.nonce&&g.setAttribute("nonce",e.nonce),g.appendChild(document.createTextNode("")),g.setAttribute("data-s",""),g}(this));var g=this.tags[this.tags.length-1];if(this.isSpeedy){var t=function(e){if(e.sheet)return e.sheet;for(var g=0;g<document.styleSheets.length;g++)if(document.styleSheets[g].ownerNode===e)return document.styleSheets[g]}(g);try{t.insertRule(e,t.cssRules.length)}catch(n){0}}else g.appendChild(document.createTextNode(e));this.ctr++},g.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),I=Math.abs,o=String.fromCharCode,l=Object.assign;function C(e){return e.trim()}function r(e,g,t){return e.replace(g,t)}function a(e,g){return e.indexOf(g)}function i(e,g){return 0|e.charCodeAt(g)}function c(e,g,t){return e.slice(g,t)}function s(e){return e.length}function u(e){return e.length}function d(e,g){return g.push(e),e}var A=1,m=1,b=0,Z=0,p=0,h="";function G(e,g,t,n,I,o,l){return{value:e,root:g,parent:t,type:n,props:I,children:o,line:A,column:m,length:l,return:""}}function y(e,g){return l(G("",null,null,"",null,null,0),e,{length:-e.length},g)}function B(){return p=Z>0?i(h,--Z):0,m--,10===p&&(m=1,A--),p}function f(){return p=Z<b?i(h,Z++):0,m++,10===p&&(m=1,A++),p}function v(){return i(h,Z)}function S(){return Z}function W(e,g){return c(h,e,g)}function V(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function R(e){return A=m=1,b=s(h=e),Z=0,[]}function X(e){return h="",e}function k(e){return C(W(Z-1,H(91===e?e+2:40===e?e+1:e)))}function J(e){for(;(p=v())&&p<33;)f();return V(e)>2||V(p)>3?"":" "}function Y(e,g){for(;--g&&f()&&!(p<48||p>102||p>57&&p<65||p>70&&p<97););return W(e,S()+(g<6&&32==v()&&32==f()))}function H(e){for(;f();)switch(p){case e:return Z;case 34:case 39:34!==e&&39!==e&&H(p);break;case 40:41===e&&H(e);break;case 92:f()}return Z}function w(e,g){for(;f()&&e+p!==57&&(e+p!==84||47!==v()););return"/*"+W(g,Z-1)+"*"+o(47===e?e:f())}function N(e){for(;!V(v());)f();return W(e,Z)}var F="-ms-",K="-moz-",x="-webkit-",z="comm",E="rule",M="decl",U="@import",Q="@keyframes";function L(e,g){for(var t="",n=u(e),I=0;I<n;I++)t+=g(e[I],I,e,g)||"";return t}function T(e,g,t,n){switch(e.type){case U:case M:return e.return=e.return||e.value;case z:return"";case Q:return e.return=e.value+"{"+L(e.children,n)+"}";case E:e.value=e.props.join(",")}return s(t=L(e.children,n))?e.return=e.value+"{"+t+"}":""}function D(e){return X(j("",null,null,null,[""],e=R(e),0,[0],e))}function j(e,g,t,n,I,l,C,c,u){for(var A=0,m=0,b=C,Z=0,p=0,h=0,G=1,y=1,W=1,V=0,R="",X=I,H=l,F=n,K=R;y;)switch(h=V,V=f()){case 40:if(108!=h&&58==i(K,b-1)){-1!=a(K+=r(k(V),"&","&\f"),"&\f")&&(W=-1);break}case 34:case 39:case 91:K+=k(V);break;case 9:case 10:case 13:case 32:K+=J(h);break;case 92:K+=Y(S()-1,7);continue;case 47:switch(v()){case 42:case 47:d(O(w(f(),S()),g,t),u);break;default:K+="/"}break;case 123*G:c[A++]=s(K)*W;case 125*G:case 59:case 0:switch(V){case 0:case 125:y=0;case 59+m:p>0&&s(K)-b&&d(p>32?q(K+";",n,t,b-1):q(r(K," ","")+";",n,t,b-2),u);break;case 59:K+=";";default:if(d(F=P(K,g,t,A,m,I,c,R,X=[],H=[],b),l),123===V)if(0===m)j(K,g,F,F,X,l,b,c,H);else switch(99===Z&&110===i(K,3)?100:Z){case 100:case 109:case 115:j(e,F,F,n&&d(P(e,F,F,0,0,I,c,R,I,X=[],b),H),I,H,b,c,n?X:H);break;default:j(K,F,F,F,[""],H,0,c,H)}}A=m=p=0,G=W=1,R=K="",b=C;break;case 58:b=1+s(K),p=h;default:if(G<1)if(123==V)--G;else if(125==V&&0==G++&&125==B())continue;switch(K+=o(V),V*G){case 38:W=m>0?1:(K+="\f",-1);break;case 44:c[A++]=(s(K)-1)*W,W=1;break;case 64:45===v()&&(K+=k(f())),Z=v(),m=b=s(R=K+=N(S())),V++;break;case 45:45===h&&2==s(K)&&(G=0)}}return l}function P(e,g,t,n,o,l,a,i,s,d,A){for(var m=o-1,b=0===o?l:[""],Z=u(b),p=0,h=0,y=0;p<n;++p)for(var B=0,f=c(e,m+1,m=I(h=a[p])),v=e;B<Z;++B)(v=C(h>0?b[B]+" "+f:r(f,/&\f/g,b[B])))&&(s[y++]=v);return G(e,g,t,0===o?E:i,s,d,A)}function O(e,g,t){return G(e,g,t,z,o(p),c(e,2,-2),0)}function q(e,g,t,n){return G(e,g,t,M,c(e,0,n),c(e,n+1,-1),n)}var _=function(e,g,t){for(var n=0,I=0;n=I,I=v(),38===n&&12===I&&(g[t]=1),!V(I);)f();return W(e,Z)},$=function(e,g){return X(function(e,g){var t=-1,n=44;do{switch(V(n)){case 0:38===n&&12===v()&&(g[t]=1),e[t]+=_(Z-1,g,t);break;case 2:e[t]+=k(n);break;case 4:if(44===n){e[++t]=58===v()?"&\f":"",g[t]=e[t].length;break}default:e[t]+=o(n)}}while(n=f());return e}(R(e),g))},ee=new WeakMap,ge=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var g=e.value,t=e.parent,n=e.column===t.column&&e.line===t.line;"rule"!==t.type;)if(!(t=t.parent))return;if((1!==e.props.length||58===g.charCodeAt(0)||ee.get(t))&&!n){ee.set(e,!0);for(var I=[],o=$(g,I),l=t.props,C=0,r=0;C<o.length;C++)for(var a=0;a<l.length;a++,r++)e.props[r]=I[C]?o[C].replace(/&\f/g,l[a]):l[a]+" "+o[C]}}},te=function(e){if("decl"===e.type){var g=e.value;108===g.charCodeAt(0)&&98===g.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,g){switch(function(e,g){return 45^i(e,0)?(((g<<2^i(e,0))<<2^i(e,1))<<2^i(e,2))<<2^i(e,3):0}(e,g)){case 5103:return x+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return x+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return x+e+K+e+F+e+e;case 6828:case 4268:return x+e+F+e+e;case 6165:return x+e+F+"flex-"+e+e;case 5187:return x+e+r(e,/(\w+).+(:[^]+)/,x+"box-$1$2"+F+"flex-$1$2")+e;case 5443:return x+e+F+"flex-item-"+r(e,/flex-|-self/,"")+e;case 4675:return x+e+F+"flex-line-pack"+r(e,/align-content|flex-|-self/,"")+e;case 5548:return x+e+F+r(e,"shrink","negative")+e;case 5292:return x+e+F+r(e,"basis","preferred-size")+e;case 6060:return x+"box-"+r(e,"-grow","")+x+e+F+r(e,"grow","positive")+e;case 4554:return x+r(e,/([^-])(transform)/g,"$1"+x+"$2")+e;case 6187:return r(r(r(e,/(zoom-|grab)/,x+"$1"),/(image-set)/,x+"$1"),e,"")+e;case 5495:case 3959:return r(e,/(image-set\([^]*)/,x+"$1$`$1");case 4968:return r(r(e,/(.+:)(flex-)?(.*)/,x+"box-pack:$3"+F+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+x+e+e;case 4095:case 3583:case 4068:case 2532:return r(e,/(.+)-inline(.+)/,x+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(s(e)-1-g>6)switch(i(e,g+1)){case 109:if(45!==i(e,g+4))break;case 102:return r(e,/(.+:)(.+)-([^]+)/,"$1"+x+"$2-$3$1"+K+(108==i(e,g+3)?"$3":"$2-$3"))+e;case 115:return~a(e,"stretch")?ne(r(e,"stretch","fill-available"),g)+e:e}break;case 4949:if(115!==i(e,g+1))break;case 6444:switch(i(e,s(e)-3-(~a(e,"!important")&&10))){case 107:return r(e,":",":"+x)+e;case 101:return r(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+x+(45===i(e,14)?"inline-":"")+"box$3$1"+x+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(i(e,g+11)){case 114:return x+e+F+r(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return x+e+F+r(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return x+e+F+r(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return x+e+F+e+e}return e}var Ie=[function(e,g,t,n){if(e.length>-1&&!e.return)switch(e.type){case M:e.return=ne(e.value,e.length);break;case Q:return L([y(e,{value:r(e.value,"@","@"+x)})],n);case E:if(e.length)return function(e,g){return e.map(g).join("")}(e.props,(function(g){switch(function(e,g){return(e=g.exec(e))?e[0]:e}(g,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return L([y(e,{props:[r(g,/:(read-\w+)/,":"+K+"$1")]})],n);case"::placeholder":return L([y(e,{props:[r(g,/:(plac\w+)/,":"+x+"input-$1")]}),y(e,{props:[r(g,/:(plac\w+)/,":"+K+"$1")]}),y(e,{props:[r(g,/:(plac\w+)/,F+"input-$1")]})],n)}return""}))}}],oe=function(e){var g=e.key;if("css"===g){var t=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(t,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var I=e.stylisPlugins||Ie;var o,l,C={},r=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+g+' "]'),(function(e){for(var g=e.getAttribute("data-emotion").split(" "),t=1;t<g.length;t++)C[g[t]]=!0;r.push(e)}));var a,i,c=[T,(i=function(e){a.insert(e)},function(e){e.root||(e=e.return)&&i(e)})],s=function(e){var g=u(e);return function(t,n,I,o){for(var l="",C=0;C<g;C++)l+=e[C](t,n,I,o)||"";return l}}([ge,te].concat(I,c));l=function(e,g,t,n){a=t,L(D(e?e+"{"+g.styles+"}":g.styles),s),n&&(d.inserted[g.name]=!0)};var d={key:g,sheet:new n({key:g,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:C,registered:{},insert:l};return d.sheet.hydrate(r),d}},9797:function(e,g){"use strict";g.Z=function(e){var g=Object.create(null);return function(t){return void 0===g[t]&&(g[t]=e(t)),g[t]}}},9886:function(e,g,t){"use strict";t.d(g,{T:function(){return C},w:function(){return l}});var n=t(2791),I=t(3361),o=(t(9140),t(2561),(0,n.createContext)("undefined"!==typeof HTMLElement?(0,I.Z)({key:"css"}):null));o.Provider;var l=function(e){return(0,n.forwardRef)((function(g,t){var I=(0,n.useContext)(o);return e(g,I,t)}))},C=(0,n.createContext)({})},9140:function(e,g,t){"use strict";t.d(g,{O:function(){return A}});var n=function(e){for(var g,t=0,n=0,I=e.length;I>=4;++n,I-=4)g=1540483477*(65535&(g=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(g>>>16)<<16),t=1540483477*(65535&(g^=g>>>24))+(59797*(g>>>16)<<16)^1540483477*(65535&t)+(59797*(t>>>16)<<16);switch(I){case 3:t^=(255&e.charCodeAt(n+2))<<16;case 2:t^=(255&e.charCodeAt(n+1))<<8;case 1:t=1540483477*(65535&(t^=255&e.charCodeAt(n)))+(59797*(t>>>16)<<16)}return(((t=1540483477*(65535&(t^=t>>>13))+(59797*(t>>>16)<<16))^t>>>15)>>>0).toString(36)},I={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},o=t(9797),l=/[A-Z]|^ms/g,C=/_EMO_([^_]+?)_([^]*?)_EMO_/g,r=function(e){return 45===e.charCodeAt(1)},a=function(e){return null!=e&&"boolean"!==typeof e},i=(0,o.Z)((function(e){return r(e)?e:e.replace(l,"-$&").toLowerCase()})),c=function(e,g){switch(e){case"animation":case"animationName":if("string"===typeof g)return g.replace(C,(function(e,g,t){return u={name:g,styles:t,next:u},g}))}return 1===I[e]||r(e)||"number"!==typeof g||0===g?g:g+"px"};function s(e,g,t){if(null==t)return"";if(void 0!==t.__emotion_styles)return t;switch(typeof t){case"boolean":return"";case"object":if(1===t.anim)return u={name:t.name,styles:t.styles,next:u},t.name;if(void 0!==t.styles){var n=t.next;if(void 0!==n)for(;void 0!==n;)u={name:n.name,styles:n.styles,next:u},n=n.next;return t.styles+";"}return function(e,g,t){var n="";if(Array.isArray(t))for(var I=0;I<t.length;I++)n+=s(e,g,t[I])+";";else for(var o in t){var l=t[o];if("object"!==typeof l)null!=g&&void 0!==g[l]?n+=o+"{"+g[l]+"}":a(l)&&(n+=i(o)+":"+c(o,l)+";");else if(!Array.isArray(l)||"string"!==typeof l[0]||null!=g&&void 0!==g[l[0]]){var C=s(e,g,l);switch(o){case"animation":case"animationName":n+=i(o)+":"+C+";";break;default:n+=o+"{"+C+"}"}}else for(var r=0;r<l.length;r++)a(l[r])&&(n+=i(o)+":"+c(o,l[r])+";")}return n}(e,g,t);case"function":if(void 0!==e){var I=u,o=t(e);return u=I,s(e,g,o)}}if(null==g)return t;var l=g[t];return void 0!==l?l:t}var u,d=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var A=function(e,g,t){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var I=!0,o="";u=void 0;var l=e[0];null==l||void 0===l.raw?(I=!1,o+=s(t,g,l)):o+=l[0];for(var C=1;C<e.length;C++)o+=s(t,g,e[C]),I&&(o+=l[C]);d.lastIndex=0;for(var r,a="";null!==(r=d.exec(o));)a+="-"+r[1];return{name:n(o)+a,styles:o,next:u}}},2561:function(e,g,t){"use strict";var n;t.d(g,{L:function(){return l},j:function(){return C}});var I=t(2791),o=!!(n||(n=t.t(I,2))).useInsertionEffect&&(n||(n=t.t(I,2))).useInsertionEffect,l=o||function(e){return e()},C=o||I.useLayoutEffect},5438:function(e,g,t){"use strict";t.d(g,{My:function(){return o},fp:function(){return n},hC:function(){return I}});function n(e,g,t){var n="";return t.split(" ").forEach((function(t){void 0!==e[t]?g.push(e[t]+";"):n+=t+" "})),n}var I=function(e,g,t){var n=e.key+"-"+g.name;!1===t&&void 0===e.registered[n]&&(e.registered[n]=g.styles)},o=function(e,g,t){I(e,g,t);var n=e.key+"-"+g.name;if(void 0===e.inserted[g.name]){var o=g;do{e.insert(g===o?"."+n:"",o,e.sheet,!0);o=o.next}while(void 0!==o)}}},2419:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var I=n(t(5649)),o=t(184),l=(0,I.default)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");g.Z=l},7247:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var I=n(t(5649)),o=t(184),l=(0,I.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");g.Z=l},1883:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var I=n(t(5649)),o=t(184),l=(0,I.default)((0,o.jsx)("path",{d:"M7 3H4v3H2V1h5v2zm15 3V1h-5v2h3v3h2zM7 21H4v-3H2v5h5v-2zm13-3v3h-3v2h5v-5h-2zm-1 0c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v12zM15 8H9v2h6V8zm0 3H9v2h6v-2zm0 3H9v2h6v-2z"}),"DocumentScanner");g.Z=l},8683:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var I=n(t(5649)),o=t(184),l=(0,I.default)((0,o.jsx)("path",{d:"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z"}),"Flip");g.Z=l},7317:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var I=n(t(5649)),o=t(184),l=(0,I.default)((0,o.jsx)("path",{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"}),"KeyboardBackspace");g.Z=l},403:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var I=n(t(5649)),o=t(184),l=(0,I.default)((0,o.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOutlined");g.Z=l},8008:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var I=n(t(5649)),o=t(184),l=(0,I.default)((0,o.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");g.Z=l},8698:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var I=n(t(5649)),o=t(184),l=(0,I.default)((0,o.jsx)("path",{d:"M19 3H4.99c-1.11 0-1.98.9-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10zm-3-5h-2V7h-4v3H8l4 4 4-4z"}),"MoveToInbox");g.Z=l},1370:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var I=n(t(5649)),o=t(184),l=(0,I.default)((0,o.jsx)("path",{d:"M18.39 14.56C16.71 13.7 14.53 13 12 13s-4.71.7-6.39 1.56C4.61 15.07 4 16.1 4 17.22V20h16v-2.78c0-1.12-.61-2.15-1.61-2.66zM9.78 12h4.44c1.21 0 2.14-1.06 1.98-2.26l-.32-2.45C15.57 5.39 13.92 4 12 4S8.43 5.39 8.12 7.29L7.8 9.74c-.16 1.2.77 2.26 1.98 2.26z"}),"Person2");g.Z=l},36:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var I=n(t(5649)),o=t(184),l=(0,I.default)((0,o.jsx)("path",{d:"M9.5 6.5v3h-3v-3h3M11 5H5v6h6V5zm-1.5 9.5v3h-3v-3h3M11 13H5v6h6v-6zm6.5-6.5v3h-3v-3h3M19 5h-6v6h6V5zm-6 8h1.5v1.5H13V13zm1.5 1.5H16V16h-1.5v-1.5zM16 13h1.5v1.5H16V13zm-3 3h1.5v1.5H13V16zm1.5 1.5H16V19h-1.5v-1.5zM16 16h1.5v1.5H16V16zm1.5-1.5H19V16h-1.5v-1.5zm0 3H19V19h-1.5v-1.5zM22 7h-2V4h-3V2h5v5zm0 15v-5h-2v3h-3v2h5zM2 22h5v-2H4v-3H2v5zM2 2v5h2V4h3V2H2z"}),"QrCodeScanner");g.Z=l},5221:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;!function(e,g){if(!g&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=l(g);if(t&&t.has(e))return t.get(e);var n={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var C=I?Object.getOwnPropertyDescriptor(e,o):null;C&&(C.get||C.set)?Object.defineProperty(n,o,C):n[o]=e[o]}n.default=e,t&&t.set(e,n)}(t(2791));var I=n(t(5649)),o=t(184);function l(e){if("function"!==typeof WeakMap)return null;var g=new WeakMap,t=new WeakMap;return(l=function(e){return e?t:g})(e)}var C=(0,I.default)((0,o.jsx)("path",{d:"M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"}),"Telegram");g.Z=C},5649:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),Object.defineProperty(g,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=t(4421)},9259:function(e,g,t){"use strict";t.d(g,{Z:function(){return Z}});var n=t(7462),I=t(3366),o=t(2791),l=t(8182),C=t(4419),r=t(4036),a=t(1402),i=t(6934),c=t(5878),s=t(1217);function u(e){return(0,s.Z)("MuiSvgIcon",e)}(0,c.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var d=t(184),A=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],m=(0,i.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,"inherit"!==t.color&&g["color".concat((0,r.Z)(t.color))],g["fontSize".concat((0,r.Z)(t.fontSize))]]}})((function(e){var g,t,n,I,o,l,C,r,a,i,c,s,u,d,A,m,b,Z=e.theme,p=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(g=Z.transitions)||null==(t=g.create)?void 0:t.call(g,"fill",{duration:null==(n=Z.transitions)||null==(I=n.duration)?void 0:I.shorter}),fontSize:{inherit:"inherit",small:(null==(o=Z.typography)||null==(l=o.pxToRem)?void 0:l.call(o,20))||"1.25rem",medium:(null==(C=Z.typography)||null==(r=C.pxToRem)?void 0:r.call(C,24))||"1.5rem",large:(null==(a=Z.typography)||null==(i=a.pxToRem)?void 0:i.call(a,35))||"2.1875rem"}[p.fontSize],color:null!=(c=null==(s=(Z.vars||Z).palette)||null==(u=s[p.color])?void 0:u.main)?c:{action:null==(d=(Z.vars||Z).palette)||null==(A=d.action)?void 0:A.active,disabled:null==(m=(Z.vars||Z).palette)||null==(b=m.action)?void 0:b.disabled,inherit:void 0}[p.color]}})),b=o.forwardRef((function(e,g){var t=(0,a.Z)({props:e,name:"MuiSvgIcon"}),o=t.children,i=t.className,c=t.color,s=void 0===c?"inherit":c,b=t.component,Z=void 0===b?"svg":b,p=t.fontSize,h=void 0===p?"medium":p,G=t.htmlColor,y=t.inheritViewBox,B=void 0!==y&&y,f=t.titleAccess,v=t.viewBox,S=void 0===v?"0 0 24 24":v,W=(0,I.Z)(t,A),V=(0,n.Z)({},t,{color:s,component:Z,fontSize:h,instanceFontSize:e.fontSize,inheritViewBox:B,viewBox:S}),R={};B||(R.viewBox=S);var X=function(e){var g=e.color,t=e.fontSize,n=e.classes,I={root:["root","inherit"!==g&&"color".concat((0,r.Z)(g)),"fontSize".concat((0,r.Z)(t))]};return(0,C.Z)(I,u,n)}(V);return(0,d.jsxs)(m,(0,n.Z)({as:Z,className:(0,l.Z)(X.root,i),focusable:"false",color:G,"aria-hidden":!f||void 0,role:f?"img":void 0,ref:g},R,W,{ownerState:V,children:[o,f?(0,d.jsx)("title",{children:f}):null]}))}));b.muiName="SvgIcon";var Z=b},6532:function(e,g){"use strict";var t,n=Symbol.for("react.element"),I=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),a=Symbol.for("react.context"),i=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),s=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function b(e){if("object"===typeof e&&null!==e){var g=e.$$typeof;switch(g){case n:switch(e=e.type){case o:case C:case l:case s:case u:return e;default:switch(e=e&&e.$$typeof){case i:case a:case c:case A:case d:case r:return e;default:return g}}case I:return g}}}t=Symbol.for("react.module.reference")},8457:function(e,g,t){"use strict";t(6532)},1979:function(e,g,t){"use strict";t.d(g,{Z:function(){return x}});var n=t(7462),I=t(3366),o=t(6189),l=t(2466),C=t(5080),r=t(7416),a=t(104),i=t(4942);function c(e,g){var t;return(0,n.Z)({toolbar:(t={minHeight:56},(0,i.Z)(t,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,i.Z)(t,e.up("sm"),{minHeight:64}),t)},g)}var s=t(2065),u={black:"#000",white:"#fff"},d={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},A={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},m={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},b={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Z={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},p={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},h={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},G=["mode","contrastThreshold","tonalOffset"],y={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:u.white,default:u.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},B={text:{primary:u.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:u.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function f(e,g,t,n){var I=n.light||n,o=n.dark||1.5*n;e[g]||(e.hasOwnProperty(t)?e[g]=e[t]:"light"===g?e.light=(0,s.$n)(e.main,I):"dark"===g&&(e.dark=(0,s._j)(e.main,o)))}function v(e){var g=e.mode,t=void 0===g?"light":g,C=e.contrastThreshold,r=void 0===C?3:C,a=e.tonalOffset,i=void 0===a?.2:a,c=(0,I.Z)(e,G),v=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Z[200],light:Z[50],dark:Z[400]}:{main:Z[700],light:Z[400],dark:Z[800]}}(t),S=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:A[200],light:A[50],dark:A[400]}:{main:A[500],light:A[300],dark:A[700]}}(t),W=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[500],light:m[300],dark:m[700]}:{main:m[700],light:m[400],dark:m[800]}}(t),V=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[400],light:p[300],dark:p[700]}:{main:p[700],light:p[500],dark:p[900]}}(t),R=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:h[400],light:h[300],dark:h[700]}:{main:h[800],light:h[500],dark:h[900]}}(t),X=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:b[400],light:b[300],dark:b[700]}:{main:"#ed6c02",light:b[500],dark:b[900]}}(t);function k(e){return(0,s.mi)(e,B.text.primary)>=r?B.text.primary:y.text.primary}var J=function(e){var g=e.color,t=e.name,I=e.mainShade,l=void 0===I?500:I,C=e.lightShade,r=void 0===C?300:C,a=e.darkShade,c=void 0===a?700:a;if(!(g=(0,n.Z)({},g)).main&&g[l]&&(g.main=g[l]),!g.hasOwnProperty("main"))throw new Error((0,o.Z)(11,t?" (".concat(t,")"):"",l));if("string"!==typeof g.main)throw new Error((0,o.Z)(12,t?" (".concat(t,")"):"",JSON.stringify(g.main)));return f(g,"light",r,i),f(g,"dark",c,i),g.contrastText||(g.contrastText=k(g.main)),g},Y={dark:B,light:y};return(0,l.Z)((0,n.Z)({common:(0,n.Z)({},u),mode:t,primary:J({color:v,name:"primary"}),secondary:J({color:S,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:J({color:W,name:"error"}),warning:J({color:X,name:"warning"}),info:J({color:V,name:"info"}),success:J({color:R,name:"success"}),grey:d,contrastThreshold:r,getContrastText:k,augmentColor:J,tonalOffset:i},Y[t]),c)}var S=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var W={textTransform:"uppercase"},V='"Roboto", "Helvetica", "Arial", sans-serif';function R(e,g){var t="function"===typeof g?g(e):g,o=t.fontFamily,C=void 0===o?V:o,r=t.fontSize,a=void 0===r?14:r,i=t.fontWeightLight,c=void 0===i?300:i,s=t.fontWeightRegular,u=void 0===s?400:s,d=t.fontWeightMedium,A=void 0===d?500:d,m=t.fontWeightBold,b=void 0===m?700:m,Z=t.htmlFontSize,p=void 0===Z?16:Z,h=t.allVariants,G=t.pxToRem,y=(0,I.Z)(t,S);var B=a/14,f=G||function(e){return"".concat(e/p*B,"rem")},v=function(e,g,t,I,o){return(0,n.Z)({fontFamily:C,fontWeight:e,fontSize:f(g),lineHeight:t},C===V?{letterSpacing:"".concat((l=I/g,Math.round(1e5*l)/1e5),"em")}:{},o,h);var l},R={h1:v(c,96,1.167,-1.5),h2:v(c,60,1.2,-.5),h3:v(u,48,1.167,0),h4:v(u,34,1.235,.25),h5:v(u,24,1.334,0),h6:v(A,20,1.6,.15),subtitle1:v(u,16,1.75,.15),subtitle2:v(A,14,1.57,.1),body1:v(u,16,1.5,.15),body2:v(u,14,1.43,.15),button:v(A,14,1.75,.4,W),caption:v(u,12,1.66,.4),overline:v(u,12,2.66,1,W)};return(0,l.Z)((0,n.Z)({htmlFontSize:p,pxToRem:f,fontFamily:C,fontSize:a,fontWeightLight:c,fontWeightRegular:u,fontWeightMedium:A,fontWeightBold:b},R),y,{clone:!1})}var X=.2,k=.14,J=.12;function Y(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(X,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(k,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(J,")")].join(",")}var H=["none",Y(0,2,1,-1,0,1,1,0,0,1,3,0),Y(0,3,1,-2,0,2,2,0,0,1,5,0),Y(0,3,3,-2,0,3,4,0,0,1,8,0),Y(0,2,4,-1,0,4,5,0,0,1,10,0),Y(0,3,5,-1,0,5,8,0,0,1,14,0),Y(0,3,5,-1,0,6,10,0,0,1,18,0),Y(0,4,5,-2,0,7,10,1,0,2,16,1),Y(0,5,5,-3,0,8,10,1,0,3,14,2),Y(0,5,6,-3,0,9,12,1,0,3,16,2),Y(0,6,6,-3,0,10,14,1,0,4,18,3),Y(0,6,7,-4,0,11,15,1,0,4,20,3),Y(0,7,8,-4,0,12,17,2,0,5,22,4),Y(0,7,8,-4,0,13,19,2,0,5,24,4),Y(0,7,9,-4,0,14,21,2,0,5,26,4),Y(0,8,9,-5,0,15,22,2,0,6,28,5),Y(0,8,10,-5,0,16,24,2,0,6,30,5),Y(0,8,11,-5,0,17,26,2,0,6,32,5),Y(0,9,11,-5,0,18,28,2,0,7,34,6),Y(0,9,12,-6,0,19,29,2,0,7,36,6),Y(0,10,13,-6,0,20,31,3,0,8,38,7),Y(0,10,13,-6,0,21,33,3,0,8,40,7),Y(0,10,14,-6,0,22,35,3,0,8,42,7),Y(0,11,14,-7,0,23,36,3,0,9,44,8),Y(0,11,15,-7,0,24,38,3,0,9,46,8)],w=t(1314),N={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},F=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=e.mixins,t=void 0===g?{}:g,i=e.palette,s=void 0===i?{}:i,u=e.transitions,d=void 0===u?{}:u,A=e.typography,m=void 0===A?{}:A,b=(0,I.Z)(e,F);if(e.vars)throw new Error((0,o.Z)(18));var Z=v(s),p=(0,C.Z)(e),h=(0,l.Z)(p,{mixins:c(p.breakpoints,t),palette:Z,shadows:H.slice(),typography:R(Z,m),transitions:(0,w.ZP)(d),zIndex:(0,n.Z)({},N)});h=(0,l.Z)(h,b);for(var G=arguments.length,y=new Array(G>1?G-1:0),B=1;B<G;B++)y[B-1]=arguments[B];return(h=y.reduce((function(e,g){return(0,l.Z)(e,g)}),h)).unstable_sxConfig=(0,n.Z)({},r.Z,null==b?void 0:b.unstable_sxConfig),h.unstable_sx=function(e){return(0,a.Z)({sx:e,theme:this})},h}var x=K},1314:function(e,g,t){"use strict";t.d(g,{ZP:function(){return i},x9:function(){return C}});var n=t(3366),I=t(7462),o=["duration","easing","delay"],l={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},C={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function r(e){return"".concat(Math.round(e),"ms")}function a(e){if(!e)return 0;var g=e/36;return Math.round(10*(4+15*Math.pow(g,.25)+g/5))}function i(e){var g=(0,I.Z)({},l,e.easing),t=(0,I.Z)({},C,e.duration);return(0,I.Z)({getAutoHeightDuration:a,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=I.duration,C=void 0===l?t.standard:l,a=I.easing,i=void 0===a?g.easeInOut:a,c=I.delay,s=void 0===c?0:c;(0,n.Z)(I,o);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof C?C:r(C)," ").concat(i," ").concat("string"===typeof s?s:r(s))})).join(",")}},e,{easing:g,duration:t})}},6482:function(e,g,t){"use strict";var n=(0,t(1979).Z)();g.Z=n},6934:function(e,g,t){"use strict";t.d(g,{Dz:function(){return l},FO:function(){return o}});var n=t(4046),I=t(6482),o=function(e){return(0,n.x9)(e)&&"classes"!==e},l=n.x9,C=(0,n.ZP)({defaultTheme:I.Z,rootShouldForwardProp:o});g.ZP=C},1402:function(e,g,t){"use strict";t.d(g,{Z:function(){return o}});var n=t(7078),I=t(6482);function o(e){var g=e.props,t=e.name;return(0,n.Z)({props:g,name:t,defaultTheme:I.Z})}},4036:function(e,g,t){"use strict";var n=t(7312);g.Z=n.Z},4223:function(e,g,t){"use strict";t.d(g,{Z:function(){return C}});var n=t(7462),I=t(2791),o=t(9259),l=t(184);function C(e,g){function t(t,I){return(0,l.jsx)(o.Z,(0,n.Z)({"data-testid":"".concat(g,"Icon"),ref:I},t,{children:e}))}return t.muiName=o.Z.muiName,I.memo(I.forwardRef(t))}},3199:function(e,g,t){"use strict";var n=t(3981);g.Z=n.Z},4421:function(e,g,t){"use strict";t.r(g),t.d(g,{capitalize:function(){return I.Z},createChainedFunction:function(){return o},createSvgIcon:function(){return l.Z},debounce:function(){return C.Z},deprecatedPropType:function(){return r},isMuiElement:function(){return a.Z},ownerDocument:function(){return i.Z},ownerWindow:function(){return c.Z},requirePropFactory:function(){return s},setRef:function(){return u},unstable_ClassNameGenerator:function(){return G},unstable_useEnhancedEffect:function(){return d.Z},unstable_useId:function(){return A.Z},unsupportedProp:function(){return m},useControlled:function(){return b.Z},useEventCallback:function(){return Z.Z},useForkRef:function(){return p.Z},useIsFocusVisible:function(){return h.Z}});var n=t(5902),I=t(4036),o=t(8949).Z,l=t(4223),C=t(3199);var r=function(e,g){return function(){return null}},a=t(9103),i=t(8301),c=t(7602);t(7462);var s=function(e,g){return function(){return null}},u=t(2971).Z,d=t(162),A=t(7384);var m=function(e,g,t,n,I){return null},b=t(8744),Z=t(9683),p=t(2071),h=t(3031),G={configure:function(e){n.Z.configure(e)}}},9103:function(e,g,t){"use strict";t.d(g,{Z:function(){return I}});var n=t(2791);var I=function(e,g){return n.isValidElement(e)&&-1!==g.indexOf(e.type.muiName)}},8301:function(e,g,t){"use strict";var n=t(9723);g.Z=n.Z},7602:function(e,g,t){"use strict";var n=t(7979);g.Z=n.Z},8744:function(e,g,t){"use strict";t.d(g,{Z:function(){return o}});var n=t(9439),I=t(2791);var o=function(e){var g=e.controlled,t=e.default,o=(e.name,e.state,I.useRef(void 0!==g).current),l=I.useState(t),C=(0,n.Z)(l,2),r=C[0],a=C[1];return[o?g:r,I.useCallback((function(e){o||a(e)}),[])]}},162:function(e,g,t){"use strict";var n=t(5721);g.Z=n.Z},9683:function(e,g,t){"use strict";var n=t(8956);g.Z=n.Z},2071:function(e,g,t){"use strict";var n=t(7563);g.Z=n.Z},7384:function(e,g,t){"use strict";var n=t(6248);g.Z=n.Z},3031:function(e,g,t){"use strict";t.d(g,{Z:function(){return s}});var n,I=t(2791),o=!0,l=!1,C={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function r(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function a(){o=!1}function i(){"hidden"===this.visibilityState&&l&&(o=!0)}function c(e){var g=e.target;try{return g.matches(":focus-visible")}catch(t){}return o||function(e){var g=e.type,t=e.tagName;return!("INPUT"!==t||!C[g]||e.readOnly)||"TEXTAREA"===t&&!e.readOnly||!!e.isContentEditable}(g)}var s=function(){var e=I.useCallback((function(e){var g;null!=e&&((g=e.ownerDocument).addEventListener("keydown",r,!0),g.addEventListener("mousedown",a,!0),g.addEventListener("pointerdown",a,!0),g.addEventListener("touchstart",a,!0),g.addEventListener("visibilitychange",i,!0))}),[]),g=I.useRef(!1);return{isFocusVisibleRef:g,onFocus:function(e){return!!c(e)&&(g.current=!0,!0)},onBlur:function(){return!!g.current&&(l=!0,window.clearTimeout(n),n=window.setTimeout((function(){l=!1}),100),g.current=!1,!0)},ref:e}}},8023:function(e,g,t){"use strict";var n=t(2791).createContext(null);g.Z=n},9598:function(e,g,t){"use strict";t.d(g,{Z:function(){return o}});var n=t(2791),I=t(8023);function o(){return n.useContext(I.Z)}},2421:function(e,g,t){"use strict";t.d(g,{ZP:function(){return h},Co:function(){return G}});var n=t(2791),I=t(7462),o=t(9797),l=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,C=(0,o.Z)((function(e){return l.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),r=t(9886),a=t(5438),i=t(9140),c=t(2561),s=C,u=function(e){return"theme"!==e},d=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?s:u},A=function(e,g,t){var n;if(g){var I=g.shouldForwardProp;n=e.__emotion_forwardProp&&I?function(g){return e.__emotion_forwardProp(g)&&I(g)}:I}return"function"!==typeof n&&t&&(n=e.__emotion_forwardProp),n},m=function(e){var g=e.cache,t=e.serialized,n=e.isStringTag;(0,a.hC)(g,t,n);(0,c.L)((function(){return(0,a.My)(g,t,n)}));return null},b=function e(g,t){var o,l,C=g.__emotion_real===g,c=C&&g.__emotion_base||g;void 0!==t&&(o=t.label,l=t.target);var s=A(g,t,C),u=s||d(c),b=!u("as");return function(){var Z=arguments,p=C&&void 0!==g.__emotion_styles?g.__emotion_styles.slice(0):[];if(void 0!==o&&p.push("label:"+o+";"),null==Z[0]||void 0===Z[0].raw)p.push.apply(p,Z);else{0,p.push(Z[0][0]);for(var h=Z.length,G=1;G<h;G++)p.push(Z[G],Z[0][G])}var y=(0,r.w)((function(e,g,t){var I=b&&e.as||c,o="",C=[],A=e;if(null==e.theme){for(var Z in A={},e)A[Z]=e[Z];A.theme=(0,n.useContext)(r.T)}"string"===typeof e.className?o=(0,a.fp)(g.registered,C,e.className):null!=e.className&&(o=e.className+" ");var h=(0,i.O)(p.concat(C),g.registered,A);o+=g.key+"-"+h.name,void 0!==l&&(o+=" "+l);var G=b&&void 0===s?d(I):u,y={};for(var B in e)b&&"as"===B||G(B)&&(y[B]=e[B]);return y.className=o,y.ref=t,(0,n.createElement)(n.Fragment,null,(0,n.createElement)(m,{cache:g,serialized:h,isStringTag:"string"===typeof I}),(0,n.createElement)(I,y))}));return y.displayName=void 0!==o?o:"Styled("+("string"===typeof c?c:c.displayName||c.name||"Component")+")",y.defaultProps=g.defaultProps,y.__emotion_real=y,y.__emotion_base=c,y.__emotion_styles=p,y.__emotion_forwardProp=s,Object.defineProperty(y,"toString",{value:function(){return"."+l}}),y.withComponent=function(g,n){return e(g,(0,I.Z)({},t,n,{shouldForwardProp:A(y,n,!0)})).apply(void 0,p)},y}},Z=b.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Z[e]=Z(e)}));var p=Z;function h(e,g){return p(e,g)}var G=function(e,g){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=g(e.__emotion_styles))}},1184:function(e,g,t){"use strict";t.d(g,{L7:function(){return C},P$:function(){return r},VO:function(){return n},W8:function(){return l},k9:function(){return o}});var n={xs:0,sm:600,md:900,lg:1200,xl:1536},I={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(n[e],"px)")}};function o(e,g,t){var o=e.theme||{};if(Array.isArray(g)){var l=o.breakpoints||I;return g.reduce((function(e,n,I){return e[l.up(l.keys[I])]=t(g[I]),e}),{})}if("object"===typeof g){var C=o.breakpoints||I;return Object.keys(g).reduce((function(e,I){if(-1!==Object.keys(C.values||n).indexOf(I)){e[C.up(I)]=t(g[I],I)}else{var o=I;e[o]=g[o]}return e}),{})}return t(g)}function l(){var e,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==(e=g.keys)?void 0:e.reduce((function(e,t){return e[g.up(t)]={},e}),{}))||{}}function C(e,g){return e.reduce((function(e,g){var t=e[g];return(!t||0===Object.keys(t).length)&&delete e[g],e}),g)}function r(e){var g,t=e.values,n=e.breakpoints,I=e.base||function(e,g){if("object"!==typeof e)return{};var t={},n=Object.keys(g);return Array.isArray(e)?n.forEach((function(g,n){n<e.length&&(t[g]=!0)})):n.forEach((function(g){null!=e[g]&&(t[g]=!0)})),t}(t,n),o=Object.keys(I);return 0===o.length?t:o.reduce((function(e,n,I){return Array.isArray(t)?(e[n]=null!=t[I]?t[I]:t[g],g=I):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[g],g=n):e[n]=t,e}),{})}},2065:function(e,g,t){"use strict";t.d(g,{$n:function(){return c},Fq:function(){return a},_j:function(){return i},mi:function(){return r}});var n=t(6189);function I(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(g,e),t)}function o(e){if(e.type)return e;if("#"===e.charAt(0))return o(function(e){e=e.slice(1);var g=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),t=e.match(g);return t&&1===t[0].length&&(t=t.map((function(e){return e+e}))),t?"rgb".concat(4===t.length?"a":"","(").concat(t.map((function(e,g){return g<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var g=e.indexOf("("),t=e.substring(0,g);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(t))throw new Error((0,n.Z)(9,e));var I,l=e.substring(g+1,e.length-1);if("color"===t){if(I=(l=l.split(" ")).shift(),4===l.length&&"/"===l[3].charAt(0)&&(l[3]=l[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(I))throw new Error((0,n.Z)(10,I))}else l=l.split(",");return{type:t,values:l=l.map((function(e){return parseFloat(e)})),colorSpace:I}}function l(e){var g=e.type,t=e.colorSpace,n=e.values;return-1!==g.indexOf("rgb")?n=n.map((function(e,g){return g<3?parseInt(e,10):e})):-1!==g.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),n=-1!==g.indexOf("color")?"".concat(t," ").concat(n.join(" ")):"".concat(n.join(", ")),"".concat(g,"(").concat(n,")")}function C(e){var g="hsl"===(e=o(e)).type||"hsla"===e.type?o(function(e){var g=(e=o(e)).values,t=g[0],n=g[1]/100,I=g[2]/100,C=n*Math.min(I,1-I),r=function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+t/30)%12;return I-C*Math.max(Math.min(g-3,9-g,1),-1)},a="rgb",i=[Math.round(255*r(0)),Math.round(255*r(8)),Math.round(255*r(4))];return"hsla"===e.type&&(a+="a",i.push(g[3])),l({type:a,values:i})}(e)).values:e.values;return g=g.map((function(g){return"color"!==e.type&&(g/=255),g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4)})),Number((.2126*g[0]+.7152*g[1]+.0722*g[2]).toFixed(3))}function r(e,g){var t=C(e),n=C(g);return(Math.max(t,n)+.05)/(Math.min(t,n)+.05)}function a(e,g){return e=o(e),g=I(g),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(g):e.values[3]=g,l(e)}function i(e,g){if(e=o(e),g=I(g),-1!==e.type.indexOf("hsl"))e.values[2]*=1-g;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var t=0;t<3;t+=1)e.values[t]*=1-g;return l(e)}function c(e,g){if(e=o(e),g=I(g),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*g;else if(-1!==e.type.indexOf("rgb"))for(var t=0;t<3;t+=1)e.values[t]+=(255-e.values[t])*g;else if(-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*g;return l(e)}},4046:function(e,g,t){"use strict";t.d(g,{ZP:function(){return B},x9:function(){return G}});var n=t(3433),I=t(9439),o=t(3366),l=t(7462),C=t(2421),r=t(5080),a=t(7312),i=["variant"];function c(e){return 0===e.length}function s(e){var g=e.variant,t=(0,o.Z)(e,i),n=g||"";return Object.keys(t).sort().forEach((function(g){n+="color"===g?c(n)?e[g]:(0,a.Z)(e[g]):"".concat(c(n)?g:(0,a.Z)(g)).concat((0,a.Z)(e[g].toString()))})),n}var u=t(104),d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],A=["theme"],m=["theme"];function b(e){return 0===Object.keys(e).length}var Z=function(e,g){return g.components&&g.components[e]&&g.components[e].styleOverrides?g.components[e].styleOverrides:null},p=function(e,g){var t=[];g&&g.components&&g.components[e]&&g.components[e].variants&&(t=g.components[e].variants);var n={};return t.forEach((function(e){var g=s(e.props);n[g]=e.style})),n},h=function(e,g,t,n){var I,o,l=e.ownerState,C=void 0===l?{}:l,r=[],a=null==t||null==(I=t.components)||null==(o=I[n])?void 0:o.variants;return a&&a.forEach((function(t){var n=!0;Object.keys(t.props).forEach((function(g){C[g]!==t.props[g]&&e[g]!==t.props[g]&&(n=!1)})),n&&r.push(g[s(t.props)])})),r};function G(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var y=(0,r.Z)();function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=e.defaultTheme,t=void 0===g?y:g,r=e.rootShouldForwardProp,a=void 0===r?G:r,i=e.slotShouldForwardProp,c=void 0===i?G:i,s=function(e){var g=b(e.theme)?t:e.theme;return(0,u.Z)((0,l.Z)({},e,{theme:g}))};return s.__mui_systemSx=!0,function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,C.Co)(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var r=g.name,i=g.slot,u=g.skipVariantsResolver,y=g.skipSx,B=g.overridesResolver,f=(0,o.Z)(g,d),v=void 0!==u?u:i&&"Root"!==i||!1,S=y||!1;var W=G;"Root"===i?W=a:i?W=c:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(W=void 0);var V=(0,C.ZP)(e,(0,l.Z)({shouldForwardProp:W,label:undefined},f)),R=function(e){for(var g=arguments.length,C=new Array(g>1?g-1:0),a=1;a<g;a++)C[a-1]=arguments[a];var i=C?C.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(g){var n=g.theme,I=(0,o.Z)(g,A);return e((0,l.Z)({theme:b(n)?t:n},I))}:e})):[],c=e;r&&B&&i.push((function(e){var g=b(e.theme)?t:e.theme,n=Z(r,g);if(n){var o={};return Object.entries(n).forEach((function(t){var n=(0,I.Z)(t,2),C=n[0],r=n[1];o[C]="function"===typeof r?r((0,l.Z)({},e,{theme:g})):r})),B(e,o)}return null})),r&&!v&&i.push((function(e){var g=b(e.theme)?t:e.theme;return h(e,p(r,g),g,r)})),S||i.push(s);var u=i.length-C.length;if(Array.isArray(e)&&u>0){var d=new Array(u).fill("");(c=[].concat((0,n.Z)(e),(0,n.Z)(d))).raw=[].concat((0,n.Z)(e.raw),(0,n.Z)(d))}else"function"===typeof e&&e.__emotion_real!==e&&(c=function(g){var n=g.theme,I=(0,o.Z)(g,m);return e((0,l.Z)({theme:b(n)?t:n},I))});return V.apply(void 0,[c].concat((0,n.Z)(i)))};return V.withConfig&&(R.withConfig=V.withConfig),R}}},5080:function(e,g,t){"use strict";t.d(g,{Z:function(){return d}});var n=t(7462),I=t(3366),o=t(2466),l=t(4942),C=["values","unit","step"],r=function(e){var g=Object.keys(e).map((function(g){return{key:g,val:e[g]}}))||[];return g.sort((function(e,g){return e.val-g.val})),g.reduce((function(e,g){return(0,n.Z)({},e,(0,l.Z)({},g.key,g.val))}),{})};var a={borderRadius:4},i=t(5682);var c=t(104),s=t(7416),u=["breakpoints","palette","spacing","shape"];var d=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=e.breakpoints,t=void 0===g?{}:g,l=e.palette,d=void 0===l?{}:l,A=e.spacing,m=e.shape,b=void 0===m?{}:m,Z=(0,I.Z)(e,u),p=function(e){var g=e.values,t=void 0===g?{xs:0,sm:600,md:900,lg:1200,xl:1536}:g,o=e.unit,l=void 0===o?"px":o,a=e.step,i=void 0===a?5:a,c=(0,I.Z)(e,C),s=r(t),u=Object.keys(s);function d(e){var g="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(g).concat(l,")")}function A(e){var g="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(g-i/100).concat(l,")")}function m(e,g){var n=u.indexOf(g);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(l,") and ")+"(max-width:".concat((-1!==n&&"number"===typeof t[u[n]]?t[u[n]]:g)-i/100).concat(l,")")}return(0,n.Z)({keys:u,values:s,up:d,down:A,between:m,only:function(e){return u.indexOf(e)+1<u.length?m(e,u[u.indexOf(e)+1]):d(e)},not:function(e){var g=u.indexOf(e);return 0===g?d(u[1]):g===u.length-1?A(u[g]):m(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:l},c)}(t),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var g=(0,i.hB)({spacing:e}),t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0===t.length?[1]:t).map((function(e){var t=g(e);return"number"===typeof t?"".concat(t,"px"):t})).join(" ")};return t.mui=!0,t}(A),G=(0,o.Z)({breakpoints:p,direction:"ltr",components:{},palette:(0,n.Z)({mode:"light"},d),spacing:h,shape:(0,n.Z)({},a,b)},Z),y=arguments.length,B=new Array(y>1?y-1:0),f=1;f<y;f++)B[f-1]=arguments[f];return(G=B.reduce((function(e,g){return(0,o.Z)(e,g)}),G)).unstable_sxConfig=(0,n.Z)({},s.Z,null==Z?void 0:Z.unstable_sxConfig),G.unstable_sx=function(e){return(0,c.Z)({sx:e,theme:this})},G}},8247:function(e,g,t){"use strict";var n=t(2466);g.Z=function(e,g){return g?(0,n.Z)(e,g,{clone:!1}):e}},5682:function(e,g,t){"use strict";t.d(g,{hB:function(){return A},eI:function(){return d},NA:function(){return m},e6:function(){return p},o3:function(){return h}});var n=t(9439),I=t(1184),o=t(8529),l=t(8247);var C={m:"margin",p:"padding"},r={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},a={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},i=function(e){var g={};return function(t){return void 0===g[t]&&(g[t]=e(t)),g[t]}}((function(e){if(e.length>2){if(!a[e])return[e];e=a[e]}var g=e.split(""),t=(0,n.Z)(g,2),I=t[0],o=t[1],l=C[I],i=r[o]||"";return Array.isArray(i)?i.map((function(e){return l+e})):[l+i]})),c=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],s=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],u=[].concat(c,s);function d(e,g,t,n){var I,l=null!=(I=(0,o.DW)(e,g,!1))?I:t;return"number"===typeof l?function(e){return"string"===typeof e?e:l*e}:Array.isArray(l)?function(e){return"string"===typeof e?e:l[e]}:"function"===typeof l?l:function(){}}function A(e){return d(e,"spacing",8)}function m(e,g){if("string"===typeof g||null==g)return g;var t=e(Math.abs(g));return g>=0?t:"number"===typeof t?-t:"-".concat(t)}function b(e,g,t,n){if(-1===g.indexOf(t))return null;var o=function(e,g){return function(t){return e.reduce((function(e,n){return e[n]=m(g,t),e}),{})}}(i(t),n),l=e[t];return(0,I.k9)(e,l,o)}function Z(e,g){var t=A(e.theme);return Object.keys(e).map((function(n){return b(e,g,n,t)})).reduce(l.Z,{})}function p(e){return Z(e,c)}function h(e){return Z(e,s)}function G(e){return Z(e,u)}p.propTypes={},p.filterProps=c,h.propTypes={},h.filterProps=s,G.propTypes={},G.filterProps=u},8529:function(e,g,t){"use strict";t.d(g,{DW:function(){return l},Jq:function(){return C}});var n=t(4942),I=t(7312),o=t(1184);function l(e,g){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!g||"string"!==typeof g)return null;if(e&&e.vars&&t){var n="vars.".concat(g).split(".").reduce((function(e,g){return e&&e[g]?e[g]:null}),e);if(null!=n)return n}return g.split(".").reduce((function(e,g){return e&&null!=e[g]?e[g]:null}),e)}function C(e,g,t){var n,I=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;return n="function"===typeof e?e(t):Array.isArray(e)?e[t]||I:l(e,t)||I,g&&(n=g(n,I,e)),n}g.ZP=function(e){var g=e.prop,t=e.cssProperty,r=void 0===t?e.prop:t,a=e.themeKey,i=e.transform,c=function(e){if(null==e[g])return null;var t=e[g],c=l(e.theme,a)||{};return(0,o.k9)(e,t,(function(e){var t=C(c,i,e);return e===t&&"string"===typeof e&&(t=C(c,i,"".concat(g).concat("default"===e?"":(0,I.Z)(e)),e)),!1===r?t:(0,n.Z)({},r,t)}))};return c.propTypes={},c.filterProps=[g],c}},7416:function(e,g,t){"use strict";t.d(g,{Z:function(){return k}});var n=t(5682),I=t(8529),o=t(8247);var l=function(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];var n=g.reduce((function(e,g){return g.filterProps.forEach((function(t){e[t]=g})),e}),{}),I=function(e){return Object.keys(e).reduce((function(g,t){return n[t]?(0,o.Z)(g,n[t](e)):g}),{})};return I.propTypes={},I.filterProps=g.reduce((function(e,g){return e.concat(g.filterProps)}),[]),I},C=t(1184);function r(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var a=(0,I.ZP)({prop:"border",themeKey:"borders",transform:r}),i=(0,I.ZP)({prop:"borderTop",themeKey:"borders",transform:r}),c=(0,I.ZP)({prop:"borderRight",themeKey:"borders",transform:r}),s=(0,I.ZP)({prop:"borderBottom",themeKey:"borders",transform:r}),u=(0,I.ZP)({prop:"borderLeft",themeKey:"borders",transform:r}),d=(0,I.ZP)({prop:"borderColor",themeKey:"palette"}),A=(0,I.ZP)({prop:"borderTopColor",themeKey:"palette"}),m=(0,I.ZP)({prop:"borderRightColor",themeKey:"palette"}),b=(0,I.ZP)({prop:"borderBottomColor",themeKey:"palette"}),Z=(0,I.ZP)({prop:"borderLeftColor",themeKey:"palette"}),p=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var g=(0,n.eI)(e.theme,"shape.borderRadius",4,"borderRadius");return(0,C.k9)(e,e.borderRadius,(function(e){return{borderRadius:(0,n.NA)(g,e)}}))}return null};p.propTypes={},p.filterProps=["borderRadius"];l(a,i,c,s,u,d,A,m,b,Z,p);var h=function(e){if(void 0!==e.gap&&null!==e.gap){var g=(0,n.eI)(e.theme,"spacing",8,"gap");return(0,C.k9)(e,e.gap,(function(e){return{gap:(0,n.NA)(g,e)}}))}return null};h.propTypes={},h.filterProps=["gap"];var G=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var g=(0,n.eI)(e.theme,"spacing",8,"columnGap");return(0,C.k9)(e,e.columnGap,(function(e){return{columnGap:(0,n.NA)(g,e)}}))}return null};G.propTypes={},G.filterProps=["columnGap"];var y=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var g=(0,n.eI)(e.theme,"spacing",8,"rowGap");return(0,C.k9)(e,e.rowGap,(function(e){return{rowGap:(0,n.NA)(g,e)}}))}return null};y.propTypes={},y.filterProps=["rowGap"];l(h,G,y,(0,I.ZP)({prop:"gridColumn"}),(0,I.ZP)({prop:"gridRow"}),(0,I.ZP)({prop:"gridAutoFlow"}),(0,I.ZP)({prop:"gridAutoColumns"}),(0,I.ZP)({prop:"gridAutoRows"}),(0,I.ZP)({prop:"gridTemplateColumns"}),(0,I.ZP)({prop:"gridTemplateRows"}),(0,I.ZP)({prop:"gridTemplateAreas"}),(0,I.ZP)({prop:"gridArea"}));function B(e,g){return"grey"===g?g:e}l((0,I.ZP)({prop:"color",themeKey:"palette",transform:B}),(0,I.ZP)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:B}),(0,I.ZP)({prop:"backgroundColor",themeKey:"palette",transform:B}));function f(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var v=(0,I.ZP)({prop:"width",transform:f}),S=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return(0,C.k9)(e,e.maxWidth,(function(g){var t,n,I;return{maxWidth:(null==(t=e.theme)||null==(n=t.breakpoints)||null==(I=n.values)?void 0:I[g])||C.VO[g]||f(g)}}))}return null};S.filterProps=["maxWidth"];var W=(0,I.ZP)({prop:"minWidth",transform:f}),V=(0,I.ZP)({prop:"height",transform:f}),R=(0,I.ZP)({prop:"maxHeight",transform:f}),X=(0,I.ZP)({prop:"minHeight",transform:f}),k=((0,I.ZP)({prop:"size",cssProperty:"width",transform:f}),(0,I.ZP)({prop:"size",cssProperty:"height",transform:f}),l(v,S,W,V,R,X,(0,I.ZP)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:r},borderTop:{themeKey:"borders",transform:r},borderRight:{themeKey:"borders",transform:r},borderBottom:{themeKey:"borders",transform:r},borderLeft:{themeKey:"borders",transform:r},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:p},color:{themeKey:"palette",transform:B},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:B},backgroundColor:{themeKey:"palette",transform:B},p:{style:n.o3},pt:{style:n.o3},pr:{style:n.o3},pb:{style:n.o3},pl:{style:n.o3},px:{style:n.o3},py:{style:n.o3},padding:{style:n.o3},paddingTop:{style:n.o3},paddingRight:{style:n.o3},paddingBottom:{style:n.o3},paddingLeft:{style:n.o3},paddingX:{style:n.o3},paddingY:{style:n.o3},paddingInline:{style:n.o3},paddingInlineStart:{style:n.o3},paddingInlineEnd:{style:n.o3},paddingBlock:{style:n.o3},paddingBlockStart:{style:n.o3},paddingBlockEnd:{style:n.o3},m:{style:n.e6},mt:{style:n.e6},mr:{style:n.e6},mb:{style:n.e6},ml:{style:n.e6},mx:{style:n.e6},my:{style:n.e6},margin:{style:n.e6},marginTop:{style:n.e6},marginRight:{style:n.e6},marginBottom:{style:n.e6},marginLeft:{style:n.e6},marginX:{style:n.e6},marginY:{style:n.e6},marginInline:{style:n.e6},marginInlineStart:{style:n.e6},marginInlineEnd:{style:n.e6},marginBlock:{style:n.e6},marginBlockStart:{style:n.e6},marginBlockEnd:{style:n.e6},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:h},rowGap:{style:y},columnGap:{style:G},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:f},maxWidth:{style:S},minWidth:{transform:f},height:{transform:f},maxHeight:{transform:f},minHeight:{transform:f},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},104:function(e,g,t){"use strict";var n=t(4942),I=t(7312),o=t(8247),l=t(8529),C=t(1184),r=t(7416);var a=function(){function e(e,g,t,o){var r,a=(r={},(0,n.Z)(r,e,g),(0,n.Z)(r,"theme",t),r),i=o[e];if(!i)return(0,n.Z)({},e,g);var c=i.cssProperty,s=void 0===c?e:c,u=i.themeKey,d=i.transform,A=i.style;if(null==g)return null;var m=(0,l.DW)(t,u)||{};if(A)return A(a);return(0,C.k9)(a,g,(function(g){var t=(0,l.Jq)(m,d,g);return g===t&&"string"===typeof g&&(t=(0,l.Jq)(m,d,"".concat(e).concat("default"===g?"":(0,I.Z)(g)),g)),!1===s?t:(0,n.Z)({},s,t)}))}return function g(t){var I,l=t||{},a=l.sx,i=l.theme,c=void 0===i?{}:i;if(!a)return null;var s=null!=(I=c.unstable_sxConfig)?I:r.Z;function u(t){var I=t;if("function"===typeof t)I=t(c);else if("object"!==typeof t)return t;if(!I)return null;var l=(0,C.W8)(c.breakpoints),r=Object.keys(l),a=l;return Object.keys(I).forEach((function(t){var l,r,i=(l=I[t],r=c,"function"===typeof l?l(r):l);if(null!==i&&void 0!==i)if("object"===typeof i)if(s[t])a=(0,o.Z)(a,e(t,i,c,s));else{var u=(0,C.k9)({theme:c},i,(function(e){return(0,n.Z)({},t,e)}));!function(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];var n=g.reduce((function(e,g){return e.concat(Object.keys(g))}),[]),I=new Set(n);return g.every((function(e){return I.size===Object.keys(e).length}))}(u,i)?a=(0,o.Z)(a,u):a[t]=g({sx:i,theme:c})}else a=(0,o.Z)(a,e(t,i,c,s))})),(0,C.L7)(r,a)}return Array.isArray(a)?a.map(u):u(a)}}();a.filterProps=["sx"],g.Z=a},418:function(e,g,t){"use strict";var n=t(5080),I=t(9120),o=(0,n.Z)();g.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return(0,I.Z)(e)}},7078:function(e,g,t){"use strict";t.d(g,{Z:function(){return o}});var n=t(5735);var I=t(418);function o(e){var g=e.props,t=e.name,o=e.defaultTheme,l=function(e){var g=e.theme,t=e.name,I=e.props;return g&&g.components&&g.components[t]&&g.components[t].defaultProps?(0,n.Z)(g.components[t].defaultProps,I):I}({theme:(0,I.Z)(o),name:t,props:g});return l}},9120:function(e,g,t){"use strict";var n=t(9598);g.Z=function(){var e,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,n.Z)();return t&&(e=t,0!==Object.keys(e).length)?t:g}},5902:function(e,g){"use strict";var t=function(e){return e},n=function(){var e=t;return{configure:function(g){e=g},generate:function(g){return e(g)},reset:function(){e=t}}}();g.Z=n},7312:function(e,g,t){"use strict";t.d(g,{Z:function(){return I}});var n=t(6189);function I(e){if("string"!==typeof e)throw new Error((0,n.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},4419:function(e,g,t){"use strict";function n(e,g,t){var n={};return Object.keys(e).forEach((function(I){n[I]=e[I].reduce((function(e,n){return n&&(e.push(g(n)),t&&t[n]&&e.push(t[n])),e}),[]).join(" ")})),n}t.d(g,{Z:function(){return n}})},8949:function(e,g,t){"use strict";function n(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];return g.reduce((function(e,g){return null==g?e:function(){for(var t=arguments.length,n=new Array(t),I=0;I<t;I++)n[I]=arguments[I];e.apply(this,n),g.apply(this,n)}}),(function(){}))}t.d(g,{Z:function(){return n}})},3981:function(e,g,t){"use strict";function n(e){var g,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function n(){for(var n=this,I=arguments.length,o=new Array(I),l=0;l<I;l++)o[l]=arguments[l];clearTimeout(g),g=setTimeout((function(){e.apply(n,o)}),t)}return n.clear=function(){clearTimeout(g)},n}t.d(g,{Z:function(){return n}})},2466:function(e,g,t){"use strict";t.d(g,{P:function(){return I},Z:function(){return l}});var n=t(7462);function I(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function o(e){if(!I(e))return e;var g={};return Object.keys(e).forEach((function(t){g[t]=o(e[t])})),g}function l(e,g){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},C=t.clone?(0,n.Z)({},e):e;return I(e)&&I(g)&&Object.keys(g).forEach((function(n){"__proto__"!==n&&(I(g[n])&&n in e&&I(e[n])?C[n]=l(e[n],g[n],t):t.clone?C[n]=I(g[n])?o(g[n]):g[n]:C[n]=g[n])})),C}},6189:function(e,g,t){"use strict";function n(e){for(var g="https://mui.com/production-error/?code="+e,t=1;t<arguments.length;t+=1)g+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+e+"; visit "+g+" for the full message."}t.d(g,{Z:function(){return n}})},1217:function(e,g,t){"use strict";t.d(g,{Z:function(){return o}});var n=t(5902),I={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function o(e,g){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",o=I[g];return o?"".concat(t,"-").concat(o):"".concat(n.Z.generate(e),"-").concat(g)}},5878:function(e,g,t){"use strict";t.d(g,{Z:function(){return I}});var n=t(1217);function I(e,g){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",I={};return g.forEach((function(g){I[g]=(0,n.Z)(e,g,t)})),I}},9723:function(e,g,t){"use strict";function n(e){return e&&e.ownerDocument||document}t.d(g,{Z:function(){return n}})},7979:function(e,g,t){"use strict";t.d(g,{Z:function(){return I}});var n=t(9723);function I(e){return(0,n.Z)(e).defaultView||window}},5735:function(e,g,t){"use strict";t.d(g,{Z:function(){return I}});var n=t(7462);function I(e,g){var t=(0,n.Z)({},g);return Object.keys(e).forEach((function(o){if(o.toString().match(/^(components|slots)$/))t[o]=(0,n.Z)({},e[o],t[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){var l=e[o]||{},C=g[o];t[o]={},C&&Object.keys(C)?l&&Object.keys(l)?(t[o]=(0,n.Z)({},C),Object.keys(l).forEach((function(e){t[o][e]=I(l[e],C[e])}))):t[o]=C:t[o]=l}else void 0===t[o]&&(t[o]=e[o])})),t}},2971:function(e,g,t){"use strict";function n(e,g){"function"===typeof e?e(g):e&&(e.current=g)}t.d(g,{Z:function(){return n}})},5721:function(e,g,t){"use strict";var n=t(2791),I="undefined"!==typeof window?n.useLayoutEffect:n.useEffect;g.Z=I},8956:function(e,g,t){"use strict";t.d(g,{Z:function(){return o}});var n=t(2791),I=t(5721);function o(e){var g=n.useRef(e);return(0,I.Z)((function(){g.current=e})),n.useCallback((function(){return g.current.apply(void 0,arguments)}),[])}},7563:function(e,g,t){"use strict";t.d(g,{Z:function(){return o}});var n=t(2791),I=t(2971);function o(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];return n.useMemo((function(){return g.every((function(e){return null==e}))?null:function(e){g.forEach((function(g){(0,I.Z)(g,e)}))}}),g)}},6248:function(e,g,t){"use strict";var n;t.d(g,{Z:function(){return r}});var I=t(9439),o=t(2791),l=0;var C=(n||(n=t.t(o,2))).useId;function r(e){if(void 0!==C){var g=C();return null!=e?e:g}return function(e){var g=o.useState(e),t=(0,I.Z)(g,2),n=t[0],C=t[1],r=e||n;return o.useEffect((function(){null==n&&C("mui-".concat(l+=1))}),[n]),r}(e)}},8182:function(e,g,t){"use strict";function n(e){var g,t,I="";if("string"==typeof e||"number"==typeof e)I+=e;else if("object"==typeof e)if(Array.isArray(e))for(g=0;g<e.length;g++)e[g]&&(t=n(e[g]))&&(I&&(I+=" "),I+=t);else for(g in e)e[g]&&(I&&(I+=" "),I+=g);return I}g.Z=function(){for(var e,g,t=0,I="";t<arguments.length;)(e=arguments[t++])&&(g=n(e))&&(I&&(I+=" "),I+=g);return I}},2110:function(e,g,t){"use strict";var n=t(8309),I={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},l={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},C={};function r(e){return n.isMemo(e)?l:C[e.$$typeof]||I}C[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},C[n.Memo]=l;var a=Object.defineProperty,i=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,d=Object.prototype;e.exports=function e(g,t,n){if("string"!==typeof t){if(d){var I=u(t);I&&I!==d&&e(g,I,n)}var l=i(t);c&&(l=l.concat(c(t)));for(var C=r(g),A=r(t),m=0;m<l.length;++m){var b=l[m];if(!o[b]&&(!n||!n[b])&&(!A||!A[b])&&(!C||!C[b])){var Z=s(t,b);try{a(g,b,Z)}catch(p){}}}}return g}},746:function(e,g){"use strict";var t="function"===typeof Symbol&&Symbol.for,n=t?Symbol.for("react.element"):60103,I=t?Symbol.for("react.portal"):60106,o=t?Symbol.for("react.fragment"):60107,l=t?Symbol.for("react.strict_mode"):60108,C=t?Symbol.for("react.profiler"):60114,r=t?Symbol.for("react.provider"):60109,a=t?Symbol.for("react.context"):60110,i=t?Symbol.for("react.async_mode"):60111,c=t?Symbol.for("react.concurrent_mode"):60111,s=t?Symbol.for("react.forward_ref"):60112,u=t?Symbol.for("react.suspense"):60113,d=t?Symbol.for("react.suspense_list"):60120,A=t?Symbol.for("react.memo"):60115,m=t?Symbol.for("react.lazy"):60116,b=t?Symbol.for("react.block"):60121,Z=t?Symbol.for("react.fundamental"):60117,p=t?Symbol.for("react.responder"):60118,h=t?Symbol.for("react.scope"):60119;function G(e){if("object"===typeof e&&null!==e){var g=e.$$typeof;switch(g){case n:switch(e=e.type){case i:case c:case o:case C:case l:case u:return e;default:switch(e=e&&e.$$typeof){case a:case s:case m:case A:case r:return e;default:return g}}case I:return g}}}function y(e){return G(e)===c}g.AsyncMode=i,g.ConcurrentMode=c,g.ContextConsumer=a,g.ContextProvider=r,g.Element=n,g.ForwardRef=s,g.Fragment=o,g.Lazy=m,g.Memo=A,g.Portal=I,g.Profiler=C,g.StrictMode=l,g.Suspense=u,g.isAsyncMode=function(e){return y(e)||G(e)===i},g.isConcurrentMode=y,g.isContextConsumer=function(e){return G(e)===a},g.isContextProvider=function(e){return G(e)===r},g.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},g.isForwardRef=function(e){return G(e)===s},g.isFragment=function(e){return G(e)===o},g.isLazy=function(e){return G(e)===m},g.isMemo=function(e){return G(e)===A},g.isPortal=function(e){return G(e)===I},g.isProfiler=function(e){return G(e)===C},g.isStrictMode=function(e){return G(e)===l},g.isSuspense=function(e){return G(e)===u},g.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===c||e===C||e===l||e===u||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===A||e.$$typeof===r||e.$$typeof===a||e.$$typeof===s||e.$$typeof===Z||e.$$typeof===p||e.$$typeof===h||e.$$typeof===b)},g.typeOf=G},8309:function(e,g,t){"use strict";e.exports=t(746)},4463:function(e,g,t){"use strict";var n=t(2791),I=t(5296);function o(e){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)g+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,C={};function r(e,g){a(e,g),a(e+"Capture",g)}function a(e,g){for(C[e]=g,e=0;e<g.length;e++)l.add(g[e])}var i=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),c=Object.prototype.hasOwnProperty,s=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function A(e,g,t,n,I,o,l){this.acceptsBooleans=2===g||3===g||4===g,this.attributeName=n,this.attributeNamespace=I,this.mustUseProperty=t,this.propertyName=e,this.type=g,this.sanitizeURL=o,this.removeEmptyString=l}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new A(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var g=e[0];m[g]=new A(g,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new A(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new A(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new A(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new A(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new A(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new A(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new A(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function Z(e){return e[1].toUpperCase()}function p(e,g,t,n){var I=m.hasOwnProperty(g)?m[g]:null;(null!==I?0!==I.type:n||!(2<g.length)||"o"!==g[0]&&"O"!==g[0]||"n"!==g[1]&&"N"!==g[1])&&(function(e,g,t,n){if(null===g||"undefined"===typeof g||function(e,g,t,n){if(null!==t&&0===t.type)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,g,t,n))return!0;if(n)return!1;if(null!==t)switch(t.type){case 3:return!g;case 4:return!1===g;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}(g,t,I,n)&&(t=null),n||null===I?function(e){return!!c.call(d,e)||!c.call(u,e)&&(s.test(e)?d[e]=!0:(u[e]=!0,!1))}(g)&&(null===t?e.removeAttribute(g):e.setAttribute(g,""+t)):I.mustUseProperty?e[I.propertyName]=null===t?3!==I.type&&"":t:(g=I.attributeName,n=I.attributeNamespace,null===t?e.removeAttribute(g):(t=3===(I=I.type)||4===I&&!0===t?"":""+t,n?e.setAttributeNS(n,g,t):e.setAttribute(g,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var g=e.replace(b,Z);m[g]=new A(g,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var g=e.replace(b,Z);m[g]=new A(g,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var g=e.replace(b,Z);m[g]=new A(g,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new A(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new A(e,1,!1,e.toLowerCase(),null,!0,!0)}));var h=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),y=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),W=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),J=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var Y=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var H=Symbol.iterator;function w(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=H&&e[H]||e["@@iterator"])?e:null}var N,F=Object.assign;function K(e){if(void 0===N)try{throw Error()}catch(t){var g=t.stack.trim().match(/\n( *(at )?)/);N=g&&g[1]||""}return"\n"+N+e}var x=!1;function z(e,g){if(!e||x)return"";x=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(g,[])}catch(a){var n=a}Reflect.construct(e,[],g)}else{try{g.call()}catch(a){n=a}e.call(g.prototype)}else{try{throw Error()}catch(a){n=a}e()}}catch(a){if(a&&n&&"string"===typeof a.stack){for(var I=a.stack.split("\n"),o=n.stack.split("\n"),l=I.length-1,C=o.length-1;1<=l&&0<=C&&I[l]!==o[C];)C--;for(;1<=l&&0<=C;l--,C--)if(I[l]!==o[C]){if(1!==l||1!==C)do{if(l--,0>--C||I[l]!==o[C]){var r="\n"+I[l].replace(" at new "," at ");return e.displayName&&r.includes("<anonymous>")&&(r=r.replace("<anonymous>",e.displayName)),r}}while(1<=l&&0<=C);break}}}finally{x=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?K(e):""}function E(e){switch(e.tag){case 5:return K(e.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function M(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case B:return"Fragment";case y:return"Portal";case v:return"Profiler";case f:return"StrictMode";case R:return"Suspense";case X:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case W:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case V:var g=e.render;return(e=e.displayName)||(e=""!==(e=g.displayName||g.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(g=e.displayName||null)?g:M(e.type)||"Memo";case J:g=e._payload,e=e._init;try{return M(e(g))}catch(t){}}return null}function U(e){var g=e.type;switch(e.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=g.render).displayName||e.name||"",g.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(g);case 8:return g===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof g)return g.displayName||g.name||null;if("string"===typeof g)return g}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function L(e){var g=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===g||"radio"===g)}function T(e){e._valueTracker||(e._valueTracker=function(e){var g=L(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,g),n=""+e[g];if(!e.hasOwnProperty(g)&&"undefined"!==typeof t&&"function"===typeof t.get&&"function"===typeof t.set){var I=t.get,o=t.set;return Object.defineProperty(e,g,{configurable:!0,get:function(){return I.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,g,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[g]}}}}(e))}function D(e){if(!e)return!1;var g=e._valueTracker;if(!g)return!0;var t=g.getValue(),n="";return e&&(n=L(e)?e.checked?"true":"false":e.value),(e=n)!==t&&(g.setValue(e),!0)}function j(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(g){return e.body}}function P(e,g){var t=g.checked;return F({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function O(e,g){var t=null==g.defaultValue?"":g.defaultValue,n=null!=g.checked?g.checked:g.defaultChecked;t=Q(null!=g.value?g.value:t),e._wrapperState={initialChecked:n,initialValue:t,controlled:"checkbox"===g.type||"radio"===g.type?null!=g.checked:null!=g.value}}function q(e,g){null!=(g=g.checked)&&p(e,"checked",g,!1)}function _(e,g){q(e,g);var t=Q(g.value),n=g.type;if(null!=t)"number"===n?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");g.hasOwnProperty("value")?ee(e,g.type,t):g.hasOwnProperty("defaultValue")&&ee(e,g.type,Q(g.defaultValue)),null==g.checked&&null!=g.defaultChecked&&(e.defaultChecked=!!g.defaultChecked)}function $(e,g,t){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var n=g.type;if(!("submit"!==n&&"reset"!==n||void 0!==g.value&&null!==g.value))return;g=""+e._wrapperState.initialValue,t||g===e.value||(e.value=g),e.defaultValue=g}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ee(e,g,t){"number"===g&&j(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var ge=Array.isArray;function te(e,g,t,n){if(e=e.options,g){g={};for(var I=0;I<t.length;I++)g["$"+t[I]]=!0;for(t=0;t<e.length;t++)I=g.hasOwnProperty("$"+e[t].value),e[t].selected!==I&&(e[t].selected=I),I&&n&&(e[t].defaultSelected=!0)}else{for(t=""+Q(t),g=null,I=0;I<e.length;I++){if(e[I].value===t)return e[I].selected=!0,void(n&&(e[I].defaultSelected=!0));null!==g||e[I].disabled||(g=e[I])}null!==g&&(g.selected=!0)}}function ne(e,g){if(null!=g.dangerouslySetInnerHTML)throw Error(o(91));return F({},g,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ie(e,g){var t=g.value;if(null==t){if(t=g.children,g=g.defaultValue,null!=t){if(null!=g)throw Error(o(92));if(ge(t)){if(1<t.length)throw Error(o(93));t=t[0]}g=t}null==g&&(g=""),t=g}e._wrapperState={initialValue:Q(t)}}function oe(e,g){var t=Q(g.value),n=Q(g.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==g.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=n&&(e.defaultValue=""+n)}function le(e){var g=e.textContent;g===e._wrapperState.initialValue&&""!==g&&null!==g&&(e.value=g)}function Ce(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function re(e,g){return null==e||"http://www.w3.org/1999/xhtml"===e?Ce(g):"http://www.w3.org/2000/svg"===e&&"foreignObject"===g?"http://www.w3.org/1999/xhtml":e}var ae,ie,ce=(ie=function(e,g){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=g;else{for((ae=ae||document.createElement("div")).innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=ae.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;g.firstChild;)e.appendChild(g.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,g,t,n){MSApp.execUnsafeLocalFunction((function(){return ie(e,g)}))}:ie);function se(e,g){if(g){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=g)}e.textContent=g}var ue={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function Ae(e,g,t){return null==g||"boolean"===typeof g||""===g?"":t||"number"!==typeof g||0===g||ue.hasOwnProperty(e)&&ue[e]?(""+g).trim():g+"px"}function me(e,g){for(var t in e=e.style,g)if(g.hasOwnProperty(t)){var n=0===t.indexOf("--"),I=Ae(t,g[t],n);"float"===t&&(t="cssFloat"),n?e.setProperty(t,I):e[t]=I}}Object.keys(ue).forEach((function(e){de.forEach((function(g){g=g+e.charAt(0).toUpperCase()+e.substring(1),ue[g]=ue[e]}))}));var be=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ze(e,g){if(g){if(be[e]&&(null!=g.children||null!=g.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=g.dangerouslySetInnerHTML){if(null!=g.children)throw Error(o(60));if("object"!==typeof g.dangerouslySetInnerHTML||!("__html"in g.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=g.style&&"object"!==typeof g.style)throw Error(o(62))}}function pe(e,g){if(-1===e.indexOf("-"))return"string"===typeof g.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var he=null;function Ge(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ye=null,Be=null,fe=null;function ve(e){if(e=pI(e)){if("function"!==typeof ye)throw Error(o(280));var g=e.stateNode;g&&(g=GI(g),ye(e.stateNode,e.type,g))}}function Se(e){Be?fe?fe.push(e):fe=[e]:Be=e}function We(){if(Be){var e=Be,g=fe;if(fe=Be=null,ve(e),g)for(e=0;e<g.length;e++)ve(g[e])}}function Ve(e,g){return e(g)}function Re(){}var Xe=!1;function ke(e,g,t){if(Xe)return e(g,t);Xe=!0;try{return Ve(e,g,t)}finally{Xe=!1,(null!==Be||null!==fe)&&(Re(),We())}}function Je(e,g){var t=e.stateNode;if(null===t)return null;var n=GI(t);if(null===n)return null;t=n[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(t&&"function"!==typeof t)throw Error(o(231,g,typeof t));return t}var Ye=!1;if(i)try{var He={};Object.defineProperty(He,"passive",{get:function(){Ye=!0}}),window.addEventListener("test",He,He),window.removeEventListener("test",He,He)}catch(ie){Ye=!1}function we(e,g,t,n,I,o,l,C,r){var a=Array.prototype.slice.call(arguments,3);try{g.apply(t,a)}catch(i){this.onError(i)}}var Ne=!1,Fe=null,Ke=!1,xe=null,ze={onError:function(e){Ne=!0,Fe=e}};function Ee(e,g,t,n,I,o,l,C,r){Ne=!1,Fe=null,we.apply(ze,arguments)}function Me(e){var g=e,t=e;if(e.alternate)for(;g.return;)g=g.return;else{e=g;do{0!==(4098&(g=e).flags)&&(t=g.return),e=g.return}while(e)}return 3===g.tag?t:null}function Ue(e){if(13===e.tag){var g=e.memoizedState;if(null===g&&(null!==(e=e.alternate)&&(g=e.memoizedState)),null!==g)return g.dehydrated}return null}function Qe(e){if(Me(e)!==e)throw Error(o(188))}function Le(e){return null!==(e=function(e){var g=e.alternate;if(!g){if(null===(g=Me(e)))throw Error(o(188));return g!==e?null:e}for(var t=e,n=g;;){var I=t.return;if(null===I)break;var l=I.alternate;if(null===l){if(null!==(n=I.return)){t=n;continue}break}if(I.child===l.child){for(l=I.child;l;){if(l===t)return Qe(I),e;if(l===n)return Qe(I),g;l=l.sibling}throw Error(o(188))}if(t.return!==n.return)t=I,n=l;else{for(var C=!1,r=I.child;r;){if(r===t){C=!0,t=I,n=l;break}if(r===n){C=!0,n=I,t=l;break}r=r.sibling}if(!C){for(r=l.child;r;){if(r===t){C=!0,t=l,n=I;break}if(r===n){C=!0,n=l,t=I;break}r=r.sibling}if(!C)throw Error(o(189))}}if(t.alternate!==n)throw Error(o(190))}if(3!==t.tag)throw Error(o(188));return t.stateNode.current===t?e:g}(e))?Te(e):null}function Te(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var g=Te(e);if(null!==g)return g;e=e.sibling}return null}var De=I.unstable_scheduleCallback,je=I.unstable_cancelCallback,Pe=I.unstable_shouldYield,Oe=I.unstable_requestPaint,qe=I.unstable_now,_e=I.unstable_getCurrentPriorityLevel,$e=I.unstable_ImmediatePriority,eg=I.unstable_UserBlockingPriority,gg=I.unstable_NormalPriority,tg=I.unstable_LowPriority,ng=I.unstable_IdlePriority,Ig=null,og=null;var lg=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(Cg(e)/rg|0)|0},Cg=Math.log,rg=Math.LN2;var ag=64,ig=4194304;function cg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function sg(e,g){var t=e.pendingLanes;if(0===t)return 0;var n=0,I=e.suspendedLanes,o=e.pingedLanes,l=268435455&t;if(0!==l){var C=l&~I;0!==C?n=cg(C):0!==(o&=l)&&(n=cg(o))}else 0!==(l=t&~I)?n=cg(l):0!==o&&(n=cg(o));if(0===n)return 0;if(0!==g&&g!==n&&0===(g&I)&&((I=n&-n)>=(o=g&-g)||16===I&&0!==(4194240&o)))return g;if(0!==(4&n)&&(n|=16&t),0!==(g=e.entangledLanes))for(e=e.entanglements,g&=n;0<g;)I=1<<(t=31-lg(g)),n|=e[t],g&=~I;return n}function ug(e,g){switch(e){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;default:return-1}}function dg(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ag(){var e=ag;return 0===(4194240&(ag<<=1))&&(ag=64),e}function mg(e){for(var g=[],t=0;31>t;t++)g.push(e);return g}function bg(e,g,t){e.pendingLanes|=g,536870912!==g&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[g=31-lg(g)]=t}function Zg(e,g){var t=e.entangledLanes|=g;for(e=e.entanglements;t;){var n=31-lg(t),I=1<<n;I&g|e[n]&g&&(e[n]|=g),t&=~I}}var pg=0;function hg(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Gg,yg,Bg,fg,vg,Sg=!1,Wg=[],Vg=null,Rg=null,Xg=null,kg=new Map,Jg=new Map,Yg=[],Hg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wg(e,g){switch(e){case"focusin":case"focusout":Vg=null;break;case"dragenter":case"dragleave":Rg=null;break;case"mouseover":case"mouseout":Xg=null;break;case"pointerover":case"pointerout":kg.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jg.delete(g.pointerId)}}function Ng(e,g,t,n,I,o){return null===e||e.nativeEvent!==o?(e={blockedOn:g,domEventName:t,eventSystemFlags:n,nativeEvent:o,targetContainers:[I]},null!==g&&(null!==(g=pI(g))&&yg(g)),e):(e.eventSystemFlags|=n,g=e.targetContainers,null!==I&&-1===g.indexOf(I)&&g.push(I),e)}function Fg(e){var g=ZI(e.target);if(null!==g){var t=Me(g);if(null!==t)if(13===(g=t.tag)){if(null!==(g=Ue(t)))return e.blockedOn=g,void vg(e.priority,(function(){Bg(t)}))}else if(3===g&&t.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function Kg(e){if(null!==e.blockedOn)return!1;for(var g=e.targetContainers;0<g.length;){var t=Pg(e.domEventName,e.eventSystemFlags,g[0],e.nativeEvent);if(null!==t)return null!==(g=pI(t))&&yg(g),e.blockedOn=t,!1;var n=new(t=e.nativeEvent).constructor(t.type,t);he=n,t.target.dispatchEvent(n),he=null,g.shift()}return!0}function xg(e,g,t){Kg(e)&&t.delete(g)}function zg(){Sg=!1,null!==Vg&&Kg(Vg)&&(Vg=null),null!==Rg&&Kg(Rg)&&(Rg=null),null!==Xg&&Kg(Xg)&&(Xg=null),kg.forEach(xg),Jg.forEach(xg)}function Eg(e,g){e.blockedOn===g&&(e.blockedOn=null,Sg||(Sg=!0,I.unstable_scheduleCallback(I.unstable_NormalPriority,zg)))}function Mg(e){function g(g){return Eg(g,e)}if(0<Wg.length){Eg(Wg[0],e);for(var t=1;t<Wg.length;t++){var n=Wg[t];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Vg&&Eg(Vg,e),null!==Rg&&Eg(Rg,e),null!==Xg&&Eg(Xg,e),kg.forEach(g),Jg.forEach(g),t=0;t<Yg.length;t++)(n=Yg[t]).blockedOn===e&&(n.blockedOn=null);for(;0<Yg.length&&null===(t=Yg[0]).blockedOn;)Fg(t),null===t.blockedOn&&Yg.shift()}var Ug=h.ReactCurrentBatchConfig,Qg=!0;function Lg(e,g,t,n){var I=pg,o=Ug.transition;Ug.transition=null;try{pg=1,Dg(e,g,t,n)}finally{pg=I,Ug.transition=o}}function Tg(e,g,t,n){var I=pg,o=Ug.transition;Ug.transition=null;try{pg=4,Dg(e,g,t,n)}finally{pg=I,Ug.transition=o}}function Dg(e,g,t,n){if(Qg){var I=Pg(e,g,t,n);if(null===I)Qn(e,g,n,jg,t),wg(e,n);else if(function(e,g,t,n,I){switch(g){case"focusin":return Vg=Ng(Vg,e,g,t,n,I),!0;case"dragenter":return Rg=Ng(Rg,e,g,t,n,I),!0;case"mouseover":return Xg=Ng(Xg,e,g,t,n,I),!0;case"pointerover":var o=I.pointerId;return kg.set(o,Ng(kg.get(o)||null,e,g,t,n,I)),!0;case"gotpointercapture":return o=I.pointerId,Jg.set(o,Ng(Jg.get(o)||null,e,g,t,n,I)),!0}return!1}(I,e,g,t,n))n.stopPropagation();else if(wg(e,n),4&g&&-1<Hg.indexOf(e)){for(;null!==I;){var o=pI(I);if(null!==o&&Gg(o),null===(o=Pg(e,g,t,n))&&Qn(e,g,n,jg,t),o===I)break;I=o}null!==I&&n.stopPropagation()}else Qn(e,g,n,null,t)}}var jg=null;function Pg(e,g,t,n){if(jg=null,null!==(e=ZI(e=Ge(n))))if(null===(g=Me(e)))e=null;else if(13===(t=g.tag)){if(null!==(e=Ue(g)))return e;e=null}else if(3===t){if(g.stateNode.current.memoizedState.isDehydrated)return 3===g.tag?g.stateNode.containerInfo:null;e=null}else g!==e&&(e=null);return jg=e,null}function Og(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_e()){case $e:return 1;case eg:return 4;case gg:case tg:return 16;case ng:return 536870912;default:return 16}default:return 16}}var qg=null,_g=null,$g=null;function et(){if($g)return $g;var e,g,t=_g,n=t.length,I="value"in qg?qg.value:qg.textContent,o=I.length;for(e=0;e<n&&t[e]===I[e];e++);var l=n-e;for(g=1;g<=l&&t[n-g]===I[o-g];g++);return $g=I.slice(e,1<g?1-g:void 0)}function gt(e){var g=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===g&&(e=13):e=g,10===e&&(e=13),32<=e||13===e?e:0}function tt(){return!0}function nt(){return!1}function It(e){function g(g,t,n,I,o){for(var l in this._reactName=g,this._targetInst=n,this.type=t,this.nativeEvent=I,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(l)&&(g=e[l],this[l]=g?g(I):I[l]);return this.isDefaultPrevented=(null!=I.defaultPrevented?I.defaultPrevented:!1===I.returnValue)?tt:nt,this.isPropagationStopped=nt,this}return F(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tt)},persist:function(){},isPersistent:tt}),g}var ot,lt,Ct,rt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},at=It(rt),it=F({},rt,{view:0,detail:0}),ct=It(it),st=F({},it,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ft,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ct&&(Ct&&"mousemove"===e.type?(ot=e.screenX-Ct.screenX,lt=e.screenY-Ct.screenY):lt=ot=0,Ct=e),ot)},movementY:function(e){return"movementY"in e?e.movementY:lt}}),ut=It(st),dt=It(F({},st,{dataTransfer:0})),At=It(F({},it,{relatedTarget:0})),mt=It(F({},rt,{animationName:0,elapsedTime:0,pseudoElement:0})),bt=F({},rt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zt=It(bt),pt=It(F({},rt,{data:0})),ht={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bt(e){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(e):!!(e=yt[e])&&!!g[e]}function ft(){return Bt}var vt=F({},it,{key:function(e){if(e.key){var g=ht[e.key]||e.key;if("Unidentified"!==g)return g}return"keypress"===e.type?13===(e=gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Gt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ft,charCode:function(e){return"keypress"===e.type?gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),St=It(vt),Wt=It(F({},st,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Vt=It(F({},it,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ft})),Rt=It(F({},rt,{propertyName:0,elapsedTime:0,pseudoElement:0})),Xt=F({},st,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kt=It(Xt),Jt=[9,13,27,32],Yt=i&&"CompositionEvent"in window,Ht=null;i&&"documentMode"in document&&(Ht=document.documentMode);var wt=i&&"TextEvent"in window&&!Ht,Nt=i&&(!Yt||Ht&&8<Ht&&11>=Ht),Ft=String.fromCharCode(32),Kt=!1;function xt(e,g){switch(e){case"keyup":return-1!==Jt.indexOf(g.keyCode);case"keydown":return 229!==g.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zt(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Et=!1;var Mt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(e){var g=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===g?!!Mt[e.type]:"textarea"===g}function Qt(e,g,t,n){Se(n),0<(g=Tn(g,"onChange")).length&&(t=new at("onChange","change",null,t,n),e.push({event:t,listeners:g}))}var Lt=null,Tt=null;function Dt(e){Kn(e,0)}function jt(e){if(D(hI(e)))return e}function Pt(e,g){if("change"===e)return g}var Ot=!1;if(i){var qt;if(i){var _t="oninput"in document;if(!_t){var $t=document.createElement("div");$t.setAttribute("oninput","return;"),_t="function"===typeof $t.oninput}qt=_t}else qt=!1;Ot=qt&&(!document.documentMode||9<document.documentMode)}function en(){Lt&&(Lt.detachEvent("onpropertychange",gn),Tt=Lt=null)}function gn(e){if("value"===e.propertyName&&jt(Tt)){var g=[];Qt(g,Tt,e,Ge(e)),ke(Dt,g)}}function tn(e,g,t){"focusin"===e?(en(),Tt=t,(Lt=g).attachEvent("onpropertychange",gn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return jt(Tt)}function In(e,g){if("click"===e)return jt(g)}function on(e,g){if("input"===e||"change"===e)return jt(g)}var ln="function"===typeof Object.is?Object.is:function(e,g){return e===g&&(0!==e||1/e===1/g)||e!==e&&g!==g};function Cn(e,g){if(ln(e,g))return!0;if("object"!==typeof e||null===e||"object"!==typeof g||null===g)return!1;var t=Object.keys(e),n=Object.keys(g);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var I=t[n];if(!c.call(g,I)||!ln(e[I],g[I]))return!1}return!0}function rn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function an(e,g){var t,n=rn(e);for(e=0;n;){if(3===n.nodeType){if(t=e+n.textContent.length,e<=g&&t>=g)return{node:n,offset:g-e};e=t}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rn(n)}}function cn(e,g){return!(!e||!g)&&(e===g||(!e||3!==e.nodeType)&&(g&&3===g.nodeType?cn(e,g.parentNode):"contains"in e?e.contains(g):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(g))))}function sn(){for(var e=window,g=j();g instanceof e.HTMLIFrameElement;){try{var t="string"===typeof g.contentWindow.location.href}catch(n){t=!1}if(!t)break;g=j((e=g.contentWindow).document)}return g}function un(e){var g=e&&e.nodeName&&e.nodeName.toLowerCase();return g&&("input"===g&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===g||"true"===e.contentEditable)}function dn(e){var g=sn(),t=e.focusedElem,n=e.selectionRange;if(g!==t&&t&&t.ownerDocument&&cn(t.ownerDocument.documentElement,t)){if(null!==n&&un(t))if(g=n.start,void 0===(e=n.end)&&(e=g),"selectionStart"in t)t.selectionStart=g,t.selectionEnd=Math.min(e,t.value.length);else if((e=(g=t.ownerDocument||document)&&g.defaultView||window).getSelection){e=e.getSelection();var I=t.textContent.length,o=Math.min(n.start,I);n=void 0===n.end?o:Math.min(n.end,I),!e.extend&&o>n&&(I=n,n=o,o=I),I=an(t,o);var l=an(t,n);I&&l&&(1!==e.rangeCount||e.anchorNode!==I.node||e.anchorOffset!==I.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&((g=g.createRange()).setStart(I.node,I.offset),e.removeAllRanges(),o>n?(e.addRange(g),e.extend(l.node,l.offset)):(g.setEnd(l.node,l.offset),e.addRange(g)))}for(g=[],e=t;e=e.parentNode;)1===e.nodeType&&g.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<g.length;t++)(e=g[t]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var An=i&&"documentMode"in document&&11>=document.documentMode,mn=null,bn=null,Zn=null,pn=!1;function hn(e,g,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;pn||null==mn||mn!==j(n)||("selectionStart"in(n=mn)&&un(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Zn&&Cn(Zn,n)||(Zn=n,0<(n=Tn(bn,"onSelect")).length&&(g=new at("onSelect","select",null,g,t),e.push({event:g,listeners:n}),g.target=mn)))}function Gn(e,g){var t={};return t[e.toLowerCase()]=g.toLowerCase(),t["Webkit"+e]="webkit"+g,t["Moz"+e]="moz"+g,t}var yn={animationend:Gn("Animation","AnimationEnd"),animationiteration:Gn("Animation","AnimationIteration"),animationstart:Gn("Animation","AnimationStart"),transitionend:Gn("Transition","TransitionEnd")},Bn={},fn={};function vn(e){if(Bn[e])return Bn[e];if(!yn[e])return e;var g,t=yn[e];for(g in t)if(t.hasOwnProperty(g)&&g in fn)return Bn[e]=t[g];return e}i&&(fn=document.createElement("div").style,"AnimationEvent"in window||(delete yn.animationend.animation,delete yn.animationiteration.animation,delete yn.animationstart.animation),"TransitionEvent"in window||delete yn.transitionend.transition);var Sn=vn("animationend"),Wn=vn("animationiteration"),Vn=vn("animationstart"),Rn=vn("transitionend"),Xn=new Map,kn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jn(e,g){Xn.set(e,g),r(g,[e])}for(var Yn=0;Yn<kn.length;Yn++){var Hn=kn[Yn];Jn(Hn.toLowerCase(),"on"+(Hn[0].toUpperCase()+Hn.slice(1)))}Jn(Sn,"onAnimationEnd"),Jn(Wn,"onAnimationIteration"),Jn(Vn,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(Rn,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),r("onBeforeInput",["compositionend","keypress","textInput","paste"]),r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nn=new Set("cancel close invalid load scroll toggle".split(" ").concat(wn));function Fn(e,g,t){var n=e.type||"unknown-event";e.currentTarget=t,function(e,g,t,n,I,l,C,r,a){if(Ee.apply(this,arguments),Ne){if(!Ne)throw Error(o(198));var i=Fe;Ne=!1,Fe=null,Ke||(Ke=!0,xe=i)}}(n,g,void 0,e),e.currentTarget=null}function Kn(e,g){g=0!==(4&g);for(var t=0;t<e.length;t++){var n=e[t],I=n.event;n=n.listeners;e:{var o=void 0;if(g)for(var l=n.length-1;0<=l;l--){var C=n[l],r=C.instance,a=C.currentTarget;if(C=C.listener,r!==o&&I.isPropagationStopped())break e;Fn(I,C,a),o=r}else for(l=0;l<n.length;l++){if(r=(C=n[l]).instance,a=C.currentTarget,C=C.listener,r!==o&&I.isPropagationStopped())break e;Fn(I,C,a),o=r}}}if(Ke)throw e=xe,Ke=!1,xe=null,e}function xn(e,g){var t=g[AI];void 0===t&&(t=g[AI]=new Set);var n=e+"__bubble";t.has(n)||(Un(g,e,2,!1),t.add(n))}function zn(e,g,t){var n=0;g&&(n|=4),Un(t,e,n,g)}var En="_reactListening"+Math.random().toString(36).slice(2);function Mn(e){if(!e[En]){e[En]=!0,l.forEach((function(g){"selectionchange"!==g&&(Nn.has(g)||zn(g,!1,e),zn(g,!0,e))}));var g=9===e.nodeType?e:e.ownerDocument;null===g||g[En]||(g[En]=!0,zn("selectionchange",!1,g))}}function Un(e,g,t,n){switch(Og(g)){case 1:var I=Lg;break;case 4:I=Tg;break;default:I=Dg}t=I.bind(null,g,t,e),I=void 0,!Ye||"touchstart"!==g&&"touchmove"!==g&&"wheel"!==g||(I=!0),n?void 0!==I?e.addEventListener(g,t,{capture:!0,passive:I}):e.addEventListener(g,t,!0):void 0!==I?e.addEventListener(g,t,{passive:I}):e.addEventListener(g,t,!1)}function Qn(e,g,t,n,I){var o=n;if(0===(1&g)&&0===(2&g)&&null!==n)e:for(;;){if(null===n)return;var l=n.tag;if(3===l||4===l){var C=n.stateNode.containerInfo;if(C===I||8===C.nodeType&&C.parentNode===I)break;if(4===l)for(l=n.return;null!==l;){var r=l.tag;if((3===r||4===r)&&((r=l.stateNode.containerInfo)===I||8===r.nodeType&&r.parentNode===I))return;l=l.return}for(;null!==C;){if(null===(l=ZI(C)))return;if(5===(r=l.tag)||6===r){n=o=l;continue e}C=C.parentNode}}n=n.return}ke((function(){var n=o,I=Ge(t),l=[];e:{var C=Xn.get(e);if(void 0!==C){var r=at,a=e;switch(e){case"keypress":if(0===gt(t))break e;case"keydown":case"keyup":r=St;break;case"focusin":a="focus",r=At;break;case"focusout":a="blur",r=At;break;case"beforeblur":case"afterblur":r=At;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":r=ut;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":r=dt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":r=Vt;break;case Sn:case Wn:case Vn:r=mt;break;case Rn:r=Rt;break;case"scroll":r=ct;break;case"wheel":r=kt;break;case"copy":case"cut":case"paste":r=Zt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":r=Wt}var i=0!==(4&g),c=!i&&"scroll"===e,s=i?null!==C?C+"Capture":null:C;i=[];for(var u,d=n;null!==d;){var A=(u=d).stateNode;if(5===u.tag&&null!==A&&(u=A,null!==s&&(null!=(A=Je(d,s))&&i.push(Ln(d,A,u)))),c)break;d=d.return}0<i.length&&(C=new r(C,a,null,t,I),l.push({event:C,listeners:i}))}}if(0===(7&g)){if(r="mouseout"===e||"pointerout"===e,(!(C="mouseover"===e||"pointerover"===e)||t===he||!(a=t.relatedTarget||t.fromElement)||!ZI(a)&&!a[dI])&&(r||C)&&(C=I.window===I?I:(C=I.ownerDocument)?C.defaultView||C.parentWindow:window,r?(r=n,null!==(a=(a=t.relatedTarget||t.toElement)?ZI(a):null)&&(a!==(c=Me(a))||5!==a.tag&&6!==a.tag)&&(a=null)):(r=null,a=n),r!==a)){if(i=ut,A="onMouseLeave",s="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(i=Wt,A="onPointerLeave",s="onPointerEnter",d="pointer"),c=null==r?C:hI(r),u=null==a?C:hI(a),(C=new i(A,d+"leave",r,t,I)).target=c,C.relatedTarget=u,A=null,ZI(I)===n&&((i=new i(s,d+"enter",a,t,I)).target=u,i.relatedTarget=c,A=i),c=A,r&&a)e:{for(s=a,d=0,u=i=r;u;u=Dn(u))d++;for(u=0,A=s;A;A=Dn(A))u++;for(;0<d-u;)i=Dn(i),d--;for(;0<u-d;)s=Dn(s),u--;for(;d--;){if(i===s||null!==s&&i===s.alternate)break e;i=Dn(i),s=Dn(s)}i=null}else i=null;null!==r&&jn(l,C,r,i,!1),null!==a&&null!==c&&jn(l,c,a,i,!0)}if("select"===(r=(C=n?hI(n):window).nodeName&&C.nodeName.toLowerCase())||"input"===r&&"file"===C.type)var m=Pt;else if(Ut(C))if(Ot)m=on;else{m=nn;var b=tn}else(r=C.nodeName)&&"input"===r.toLowerCase()&&("checkbox"===C.type||"radio"===C.type)&&(m=In);switch(m&&(m=m(e,n))?Qt(l,m,t,I):(b&&b(e,C,n),"focusout"===e&&(b=C._wrapperState)&&b.controlled&&"number"===C.type&&ee(C,"number",C.value)),b=n?hI(n):window,e){case"focusin":(Ut(b)||"true"===b.contentEditable)&&(mn=b,bn=n,Zn=null);break;case"focusout":Zn=bn=mn=null;break;case"mousedown":pn=!0;break;case"contextmenu":case"mouseup":case"dragend":pn=!1,hn(l,t,I);break;case"selectionchange":if(An)break;case"keydown":case"keyup":hn(l,t,I)}var Z;if(Yt)e:{switch(e){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else Et?xt(e,t)&&(p="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(p="onCompositionStart");p&&(Nt&&"ko"!==t.locale&&(Et||"onCompositionStart"!==p?"onCompositionEnd"===p&&Et&&(Z=et()):(_g="value"in(qg=I)?qg.value:qg.textContent,Et=!0)),0<(b=Tn(n,p)).length&&(p=new pt(p,e,null,t,I),l.push({event:p,listeners:b}),Z?p.data=Z:null!==(Z=zt(t))&&(p.data=Z))),(Z=wt?function(e,g){switch(e){case"compositionend":return zt(g);case"keypress":return 32!==g.which?null:(Kt=!0,Ft);case"textInput":return(e=g.data)===Ft&&Kt?null:e;default:return null}}(e,t):function(e,g){if(Et)return"compositionend"===e||!Yt&&xt(e,g)?(e=et(),$g=_g=qg=null,Et=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Nt&&"ko"!==g.locale?null:g.data}}(e,t))&&(0<(n=Tn(n,"onBeforeInput")).length&&(I=new pt("onBeforeInput","beforeinput",null,t,I),l.push({event:I,listeners:n}),I.data=Z))}Kn(l,g)}))}function Ln(e,g,t){return{instance:e,listener:g,currentTarget:t}}function Tn(e,g){for(var t=g+"Capture",n=[];null!==e;){var I=e,o=I.stateNode;5===I.tag&&null!==o&&(I=o,null!=(o=Je(e,t))&&n.unshift(Ln(e,o,I)),null!=(o=Je(e,g))&&n.push(Ln(e,o,I))),e=e.return}return n}function Dn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jn(e,g,t,n,I){for(var o=g._reactName,l=[];null!==t&&t!==n;){var C=t,r=C.alternate,a=C.stateNode;if(null!==r&&r===n)break;5===C.tag&&null!==a&&(C=a,I?null!=(r=Je(t,o))&&l.unshift(Ln(t,r,C)):I||null!=(r=Je(t,o))&&l.push(Ln(t,r,C))),t=t.return}0!==l.length&&e.push({event:g,listeners:l})}var Pn=/\r\n?/g,On=/\u0000|\uFFFD/g;function qn(e){return("string"===typeof e?e:""+e).replace(Pn,"\n").replace(On,"")}function _n(e,g,t){if(g=qn(g),qn(e)!==g&&t)throw Error(o(425))}function $n(){}var eI=null,gI=null;function tI(e,g){return"textarea"===e||"noscript"===e||"string"===typeof g.children||"number"===typeof g.children||"object"===typeof g.dangerouslySetInnerHTML&&null!==g.dangerouslySetInnerHTML&&null!=g.dangerouslySetInnerHTML.__html}var nI="function"===typeof setTimeout?setTimeout:void 0,II="function"===typeof clearTimeout?clearTimeout:void 0,oI="function"===typeof Promise?Promise:void 0,lI="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oI?function(e){return oI.resolve(null).then(e).catch(CI)}:nI;function CI(e){setTimeout((function(){throw e}))}function rI(e,g){var t=g,n=0;do{var I=t.nextSibling;if(e.removeChild(t),I&&8===I.nodeType)if("/$"===(t=I.data)){if(0===n)return e.removeChild(I),void Mg(g);n--}else"$"!==t&&"$?"!==t&&"$!"!==t||n++;t=I}while(t);Mg(g)}function aI(e){for(;null!=e;e=e.nextSibling){var g=e.nodeType;if(1===g||3===g)break;if(8===g){if("$"===(g=e.data)||"$!"===g||"$?"===g)break;if("/$"===g)return null}}return e}function iI(e){e=e.previousSibling;for(var g=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===g)return e;g--}else"/$"===t&&g++}e=e.previousSibling}return null}var cI=Math.random().toString(36).slice(2),sI="__reactFiber$"+cI,uI="__reactProps$"+cI,dI="__reactContainer$"+cI,AI="__reactEvents$"+cI,mI="__reactListeners$"+cI,bI="__reactHandles$"+cI;function ZI(e){var g=e[sI];if(g)return g;for(var t=e.parentNode;t;){if(g=t[dI]||t[sI]){if(t=g.alternate,null!==g.child||null!==t&&null!==t.child)for(e=iI(e);null!==e;){if(t=e[sI])return t;e=iI(e)}return g}t=(e=t).parentNode}return null}function pI(e){return!(e=e[sI]||e[dI])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function hI(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function GI(e){return e[uI]||null}var yI=[],BI=-1;function fI(e){return{current:e}}function vI(e){0>BI||(e.current=yI[BI],yI[BI]=null,BI--)}function SI(e,g){BI++,yI[BI]=e.current,e.current=g}var WI={},VI=fI(WI),RI=fI(!1),XI=WI;function kI(e,g){var t=e.type.contextTypes;if(!t)return WI;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===g)return n.__reactInternalMemoizedMaskedChildContext;var I,o={};for(I in t)o[I]=g[I];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=g,e.__reactInternalMemoizedMaskedChildContext=o),o}function JI(e){return null!==(e=e.childContextTypes)&&void 0!==e}function YI(){vI(RI),vI(VI)}function HI(e,g,t){if(VI.current!==WI)throw Error(o(168));SI(VI,g),SI(RI,t)}function wI(e,g,t){var n=e.stateNode;if(g=g.childContextTypes,"function"!==typeof n.getChildContext)return t;for(var I in n=n.getChildContext())if(!(I in g))throw Error(o(108,U(e)||"Unknown",I));return F({},t,n)}function NI(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||WI,XI=VI.current,SI(VI,e),SI(RI,RI.current),!0}function FI(e,g,t){var n=e.stateNode;if(!n)throw Error(o(169));t?(e=wI(e,g,XI),n.__reactInternalMemoizedMergedChildContext=e,vI(RI),vI(VI),SI(VI,e)):vI(RI),SI(RI,t)}var KI=null,xI=!1,zI=!1;function EI(e){null===KI?KI=[e]:KI.push(e)}function MI(){if(!zI&&null!==KI){zI=!0;var e=0,g=pg;try{var t=KI;for(pg=1;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}KI=null,xI=!1}catch(I){throw null!==KI&&(KI=KI.slice(e+1)),De($e,MI),I}finally{pg=g,zI=!1}}return null}var UI=[],QI=0,LI=null,TI=0,DI=[],jI=0,PI=null,OI=1,qI="";function _I(e,g){UI[QI++]=TI,UI[QI++]=LI,LI=e,TI=g}function $I(e,g,t){DI[jI++]=OI,DI[jI++]=qI,DI[jI++]=PI,PI=e;var n=OI;e=qI;var I=32-lg(n)-1;n&=~(1<<I),t+=1;var o=32-lg(g)+I;if(30<o){var l=I-I%5;o=(n&(1<<l)-1).toString(32),n>>=l,I-=l,OI=1<<32-lg(g)+I|t<<I|n,qI=o+e}else OI=1<<o|t<<I|n,qI=e}function eo(e){null!==e.return&&(_I(e,1),$I(e,1,0))}function go(e){for(;e===LI;)LI=UI[--QI],UI[QI]=null,TI=UI[--QI],UI[QI]=null;for(;e===PI;)PI=DI[--jI],DI[jI]=null,qI=DI[--jI],DI[jI]=null,OI=DI[--jI],DI[jI]=null}var to=null,no=null,Io=!1,oo=null;function lo(e,g){var t=Ja(5,null,null,0);t.elementType="DELETED",t.stateNode=g,t.return=e,null===(g=e.deletions)?(e.deletions=[t],e.flags|=16):g.push(t)}function Co(e,g){switch(e.tag){case 5:var t=e.type;return null!==(g=1!==g.nodeType||t.toLowerCase()!==g.nodeName.toLowerCase()?null:g)&&(e.stateNode=g,to=e,no=aI(g.firstChild),!0);case 6:return null!==(g=""===e.pendingProps||3!==g.nodeType?null:g)&&(e.stateNode=g,to=e,no=null,!0);case 13:return null!==(g=8!==g.nodeType?null:g)&&(t=null!==PI?{id:OI,overflow:qI}:null,e.memoizedState={dehydrated:g,treeContext:t,retryLane:1073741824},(t=Ja(18,null,null,0)).stateNode=g,t.return=e,e.child=t,to=e,no=null,!0);default:return!1}}function ro(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ao(e){if(Io){var g=no;if(g){var t=g;if(!Co(e,g)){if(ro(e))throw Error(o(418));g=aI(t.nextSibling);var n=to;g&&Co(e,g)?lo(n,t):(e.flags=-4097&e.flags|2,Io=!1,to=e)}}else{if(ro(e))throw Error(o(418));e.flags=-4097&e.flags|2,Io=!1,to=e}}}function io(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;to=e}function co(e){if(e!==to)return!1;if(!Io)return io(e),Io=!0,!1;var g;if((g=3!==e.tag)&&!(g=5!==e.tag)&&(g="head"!==(g=e.type)&&"body"!==g&&!tI(e.type,e.memoizedProps)),g&&(g=no)){if(ro(e))throw so(),Error(o(418));for(;g;)lo(e,g),g=aI(g.nextSibling)}if(io(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,g=0;e;){if(8===e.nodeType){var t=e.data;if("/$"===t){if(0===g){no=aI(e.nextSibling);break e}g--}else"$"!==t&&"$!"!==t&&"$?"!==t||g++}e=e.nextSibling}no=null}}else no=to?aI(e.stateNode.nextSibling):null;return!0}function so(){for(var e=no;e;)e=aI(e.nextSibling)}function uo(){no=to=null,Io=!1}function Ao(e){null===oo?oo=[e]:oo.push(e)}var mo=h.ReactCurrentBatchConfig;function bo(e,g){if(e&&e.defaultProps){for(var t in g=F({},g),e=e.defaultProps)void 0===g[t]&&(g[t]=e[t]);return g}return g}var Zo=fI(null),po=null,ho=null,Go=null;function yo(){Go=ho=po=null}function Bo(e){var g=Zo.current;vI(Zo),e._currentValue=g}function fo(e,g,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&g)!==g?(e.childLanes|=g,null!==n&&(n.childLanes|=g)):null!==n&&(n.childLanes&g)!==g&&(n.childLanes|=g),e===t)break;e=e.return}}function vo(e,g){po=e,Go=ho=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&g)&&(hC=!0),e.firstContext=null)}function So(e){var g=e._currentValue;if(Go!==e)if(e={context:e,memoizedValue:g,next:null},null===ho){if(null===po)throw Error(o(308));ho=e,po.dependencies={lanes:0,firstContext:e}}else ho=ho.next=e;return g}var Wo=null;function Vo(e){null===Wo?Wo=[e]:Wo.push(e)}function Ro(e,g,t,n){var I=g.interleaved;return null===I?(t.next=t,Vo(g)):(t.next=I.next,I.next=t),g.interleaved=t,Xo(e,n)}function Xo(e,g){e.lanes|=g;var t=e.alternate;for(null!==t&&(t.lanes|=g),t=e,e=e.return;null!==e;)e.childLanes|=g,null!==(t=e.alternate)&&(t.childLanes|=g),t=e,e=e.return;return 3===t.tag?t.stateNode:null}var ko=!1;function Jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yo(e,g){e=e.updateQueue,g.updateQueue===e&&(g.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ho(e,g){return{eventTime:e,lane:g,tag:0,payload:null,callback:null,next:null}}function wo(e,g,t){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Rr)){var I=n.pending;return null===I?g.next=g:(g.next=I.next,I.next=g),n.pending=g,Xo(e,t)}return null===(I=n.interleaved)?(g.next=g,Vo(n)):(g.next=I.next,I.next=g),n.interleaved=g,Xo(e,t)}function No(e,g,t){if(null!==(g=g.updateQueue)&&(g=g.shared,0!==(4194240&t))){var n=g.lanes;t|=n&=e.pendingLanes,g.lanes=t,Zg(e,t)}}function Fo(e,g){var t=e.updateQueue,n=e.alternate;if(null!==n&&t===(n=n.updateQueue)){var I=null,o=null;if(null!==(t=t.firstBaseUpdate)){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===o?I=o=l:o=o.next=l,t=t.next}while(null!==t);null===o?I=o=g:o=o.next=g}else I=o=g;return t={baseState:n.baseState,firstBaseUpdate:I,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=g:e.next=g,t.lastBaseUpdate=g}function Ko(e,g,t,n){var I=e.updateQueue;ko=!1;var o=I.firstBaseUpdate,l=I.lastBaseUpdate,C=I.shared.pending;if(null!==C){I.shared.pending=null;var r=C,a=r.next;r.next=null,null===l?o=a:l.next=a,l=r;var i=e.alternate;null!==i&&((C=(i=i.updateQueue).lastBaseUpdate)!==l&&(null===C?i.firstBaseUpdate=a:C.next=a,i.lastBaseUpdate=r))}if(null!==o){var c=I.baseState;for(l=0,i=a=r=null,C=o;;){var s=C.lane,u=C.eventTime;if((n&s)===s){null!==i&&(i=i.next={eventTime:u,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var d=e,A=C;switch(s=g,u=t,A.tag){case 1:if("function"===typeof(d=A.payload)){c=d.call(u,c,s);break e}c=d;break e;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(s="function"===typeof(d=A.payload)?d.call(u,c,s):d)||void 0===s)break e;c=F({},c,s);break e;case 2:ko=!0}}null!==C.callback&&0!==C.lane&&(e.flags|=64,null===(s=I.effects)?I.effects=[C]:s.push(C))}else u={eventTime:u,lane:s,tag:C.tag,payload:C.payload,callback:C.callback,next:null},null===i?(a=i=u,r=c):i=i.next=u,l|=s;if(null===(C=C.next)){if(null===(C=I.shared.pending))break;C=(s=C).next,s.next=null,I.lastBaseUpdate=s,I.shared.pending=null}}if(null===i&&(r=c),I.baseState=r,I.firstBaseUpdate=a,I.lastBaseUpdate=i,null!==(g=I.shared.interleaved)){I=g;do{l|=I.lane,I=I.next}while(I!==g)}else null===o&&(I.shared.lanes=0);Fr|=l,e.lanes=l,e.memoizedState=c}}function xo(e,g,t){if(e=g.effects,g.effects=null,null!==e)for(g=0;g<e.length;g++){var n=e[g],I=n.callback;if(null!==I){if(n.callback=null,n=t,"function"!==typeof I)throw Error(o(191,I));I.call(n)}}}var zo=(new n.Component).refs;function Eo(e,g,t,n){t=null===(t=t(n,g=e.memoizedState))||void 0===t?g:F({},g,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var Mo={isMounted:function(e){return!!(e=e._reactInternals)&&Me(e)===e},enqueueSetState:function(e,g,t){e=e._reactInternals;var n=ga(),I=ta(e),o=Ho(n,I);o.payload=g,void 0!==t&&null!==t&&(o.callback=t),null!==(g=wo(e,o,I))&&(na(g,e,I,n),No(g,e,I))},enqueueReplaceState:function(e,g,t){e=e._reactInternals;var n=ga(),I=ta(e),o=Ho(n,I);o.tag=1,o.payload=g,void 0!==t&&null!==t&&(o.callback=t),null!==(g=wo(e,o,I))&&(na(g,e,I,n),No(g,e,I))},enqueueForceUpdate:function(e,g){e=e._reactInternals;var t=ga(),n=ta(e),I=Ho(t,n);I.tag=2,void 0!==g&&null!==g&&(I.callback=g),null!==(g=wo(e,I,n))&&(na(g,e,n,t),No(g,e,n))}};function Uo(e,g,t,n,I,o,l){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,l):!g.prototype||!g.prototype.isPureReactComponent||(!Cn(t,n)||!Cn(I,o))}function Qo(e,g,t){var n=!1,I=WI,o=g.contextType;return"object"===typeof o&&null!==o?o=So(o):(I=JI(g)?XI:VI.current,o=(n=null!==(n=g.contextTypes)&&void 0!==n)?kI(e,I):WI),g=new g(t,o),e.memoizedState=null!==g.state&&void 0!==g.state?g.state:null,g.updater=Mo,e.stateNode=g,g._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=I,e.__reactInternalMemoizedMaskedChildContext=o),g}function Lo(e,g,t,n){e=g.state,"function"===typeof g.componentWillReceiveProps&&g.componentWillReceiveProps(t,n),"function"===typeof g.UNSAFE_componentWillReceiveProps&&g.UNSAFE_componentWillReceiveProps(t,n),g.state!==e&&Mo.enqueueReplaceState(g,g.state,null)}function To(e,g,t,n){var I=e.stateNode;I.props=t,I.state=e.memoizedState,I.refs=zo,Jo(e);var o=g.contextType;"object"===typeof o&&null!==o?I.context=So(o):(o=JI(g)?XI:VI.current,I.context=kI(e,o)),I.state=e.memoizedState,"function"===typeof(o=g.getDerivedStateFromProps)&&(Eo(e,g,o,t),I.state=e.memoizedState),"function"===typeof g.getDerivedStateFromProps||"function"===typeof I.getSnapshotBeforeUpdate||"function"!==typeof I.UNSAFE_componentWillMount&&"function"!==typeof I.componentWillMount||(g=I.state,"function"===typeof I.componentWillMount&&I.componentWillMount(),"function"===typeof I.UNSAFE_componentWillMount&&I.UNSAFE_componentWillMount(),g!==I.state&&Mo.enqueueReplaceState(I,I.state,null),Ko(e,t,I,n),I.state=e.memoizedState),"function"===typeof I.componentDidMount&&(e.flags|=4194308)}function Do(e,g,t){if(null!==(e=t.ref)&&"function"!==typeof e&&"object"!==typeof e){if(t._owner){if(t=t._owner){if(1!==t.tag)throw Error(o(309));var n=t.stateNode}if(!n)throw Error(o(147,e));var I=n,l=""+e;return null!==g&&null!==g.ref&&"function"===typeof g.ref&&g.ref._stringRef===l?g.ref:(g=function(e){var g=I.refs;g===zo&&(g=I.refs={}),null===e?delete g[l]:g[l]=e},g._stringRef=l,g)}if("string"!==typeof e)throw Error(o(284));if(!t._owner)throw Error(o(290,e))}return e}function jo(e,g){throw e=Object.prototype.toString.call(g),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(g).join(", ")+"}":e))}function Po(e){return(0,e._init)(e._payload)}function Oo(e){function g(g,t){if(e){var n=g.deletions;null===n?(g.deletions=[t],g.flags|=16):n.push(t)}}function t(t,n){if(!e)return null;for(;null!==n;)g(t,n),n=n.sibling;return null}function n(e,g){for(e=new Map;null!==g;)null!==g.key?e.set(g.key,g):e.set(g.index,g),g=g.sibling;return e}function I(e,g){return(e=Ha(e,g)).index=0,e.sibling=null,e}function l(g,t,n){return g.index=n,e?null!==(n=g.alternate)?(n=n.index)<t?(g.flags|=2,t):n:(g.flags|=2,t):(g.flags|=1048576,t)}function C(g){return e&&null===g.alternate&&(g.flags|=2),g}function r(e,g,t,n){return null===g||6!==g.tag?((g=Ka(t,e.mode,n)).return=e,g):((g=I(g,t)).return=e,g)}function a(e,g,t,n){var o=t.type;return o===B?c(e,g,t.props.children,n,t.key):null!==g&&(g.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===J&&Po(o)===g.type)?((n=I(g,t.props)).ref=Do(e,g,t),n.return=e,n):((n=wa(t.type,t.key,t.props,null,e.mode,n)).ref=Do(e,g,t),n.return=e,n)}function i(e,g,t,n){return null===g||4!==g.tag||g.stateNode.containerInfo!==t.containerInfo||g.stateNode.implementation!==t.implementation?((g=xa(t,e.mode,n)).return=e,g):((g=I(g,t.children||[])).return=e,g)}function c(e,g,t,n,o){return null===g||7!==g.tag?((g=Na(t,e.mode,n,o)).return=e,g):((g=I(g,t)).return=e,g)}function s(e,g,t){if("string"===typeof g&&""!==g||"number"===typeof g)return(g=Ka(""+g,e.mode,t)).return=e,g;if("object"===typeof g&&null!==g){switch(g.$$typeof){case G:return(t=wa(g.type,g.key,g.props,null,e.mode,t)).ref=Do(e,null,g),t.return=e,t;case y:return(g=xa(g,e.mode,t)).return=e,g;case J:return s(e,(0,g._init)(g._payload),t)}if(ge(g)||w(g))return(g=Na(g,e.mode,t,null)).return=e,g;jo(e,g)}return null}function u(e,g,t,n){var I=null!==g?g.key:null;if("string"===typeof t&&""!==t||"number"===typeof t)return null!==I?null:r(e,g,""+t,n);if("object"===typeof t&&null!==t){switch(t.$$typeof){case G:return t.key===I?a(e,g,t,n):null;case y:return t.key===I?i(e,g,t,n):null;case J:return u(e,g,(I=t._init)(t._payload),n)}if(ge(t)||w(t))return null!==I?null:c(e,g,t,n,null);jo(e,t)}return null}function d(e,g,t,n,I){if("string"===typeof n&&""!==n||"number"===typeof n)return r(g,e=e.get(t)||null,""+n,I);if("object"===typeof n&&null!==n){switch(n.$$typeof){case G:return a(g,e=e.get(null===n.key?t:n.key)||null,n,I);case y:return i(g,e=e.get(null===n.key?t:n.key)||null,n,I);case J:return d(e,g,t,(0,n._init)(n._payload),I)}if(ge(n)||w(n))return c(g,e=e.get(t)||null,n,I,null);jo(g,n)}return null}function A(I,o,C,r){for(var a=null,i=null,c=o,A=o=0,m=null;null!==c&&A<C.length;A++){c.index>A?(m=c,c=null):m=c.sibling;var b=u(I,c,C[A],r);if(null===b){null===c&&(c=m);break}e&&c&&null===b.alternate&&g(I,c),o=l(b,o,A),null===i?a=b:i.sibling=b,i=b,c=m}if(A===C.length)return t(I,c),Io&&_I(I,A),a;if(null===c){for(;A<C.length;A++)null!==(c=s(I,C[A],r))&&(o=l(c,o,A),null===i?a=c:i.sibling=c,i=c);return Io&&_I(I,A),a}for(c=n(I,c);A<C.length;A++)null!==(m=d(c,I,A,C[A],r))&&(e&&null!==m.alternate&&c.delete(null===m.key?A:m.key),o=l(m,o,A),null===i?a=m:i.sibling=m,i=m);return e&&c.forEach((function(e){return g(I,e)})),Io&&_I(I,A),a}function m(I,C,r,a){var i=w(r);if("function"!==typeof i)throw Error(o(150));if(null==(r=i.call(r)))throw Error(o(151));for(var c=i=null,A=C,m=C=0,b=null,Z=r.next();null!==A&&!Z.done;m++,Z=r.next()){A.index>m?(b=A,A=null):b=A.sibling;var p=u(I,A,Z.value,a);if(null===p){null===A&&(A=b);break}e&&A&&null===p.alternate&&g(I,A),C=l(p,C,m),null===c?i=p:c.sibling=p,c=p,A=b}if(Z.done)return t(I,A),Io&&_I(I,m),i;if(null===A){for(;!Z.done;m++,Z=r.next())null!==(Z=s(I,Z.value,a))&&(C=l(Z,C,m),null===c?i=Z:c.sibling=Z,c=Z);return Io&&_I(I,m),i}for(A=n(I,A);!Z.done;m++,Z=r.next())null!==(Z=d(A,I,m,Z.value,a))&&(e&&null!==Z.alternate&&A.delete(null===Z.key?m:Z.key),C=l(Z,C,m),null===c?i=Z:c.sibling=Z,c=Z);return e&&A.forEach((function(e){return g(I,e)})),Io&&_I(I,m),i}return function e(n,o,l,r){if("object"===typeof l&&null!==l&&l.type===B&&null===l.key&&(l=l.props.children),"object"===typeof l&&null!==l){switch(l.$$typeof){case G:e:{for(var a=l.key,i=o;null!==i;){if(i.key===a){if((a=l.type)===B){if(7===i.tag){t(n,i.sibling),(o=I(i,l.props.children)).return=n,n=o;break e}}else if(i.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===J&&Po(a)===i.type){t(n,i.sibling),(o=I(i,l.props)).ref=Do(n,i,l),o.return=n,n=o;break e}t(n,i);break}g(n,i),i=i.sibling}l.type===B?((o=Na(l.props.children,n.mode,r,l.key)).return=n,n=o):((r=wa(l.type,l.key,l.props,null,n.mode,r)).ref=Do(n,o,l),r.return=n,n=r)}return C(n);case y:e:{for(i=l.key;null!==o;){if(o.key===i){if(4===o.tag&&o.stateNode.containerInfo===l.containerInfo&&o.stateNode.implementation===l.implementation){t(n,o.sibling),(o=I(o,l.children||[])).return=n,n=o;break e}t(n,o);break}g(n,o),o=o.sibling}(o=xa(l,n.mode,r)).return=n,n=o}return C(n);case J:return e(n,o,(i=l._init)(l._payload),r)}if(ge(l))return A(n,o,l,r);if(w(l))return m(n,o,l,r);jo(n,l)}return"string"===typeof l&&""!==l||"number"===typeof l?(l=""+l,null!==o&&6===o.tag?(t(n,o.sibling),(o=I(o,l)).return=n,n=o):(t(n,o),(o=Ka(l,n.mode,r)).return=n,n=o),C(n)):t(n,o)}}var qo=Oo(!0),_o=Oo(!1),$o={},el=fI($o),gl=fI($o),tl=fI($o);function nl(e){if(e===$o)throw Error(o(174));return e}function Il(e,g){switch(SI(tl,g),SI(gl,e),SI(el,$o),e=g.nodeType){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:re(null,"");break;default:g=re(g=(e=8===e?g.parentNode:g).namespaceURI||null,e=e.tagName)}vI(el),SI(el,g)}function ol(){vI(el),vI(gl),vI(tl)}function ll(e){nl(tl.current);var g=nl(el.current),t=re(g,e.type);g!==t&&(SI(gl,e),SI(el,t))}function Cl(e){gl.current===e&&(vI(el),vI(gl))}var rl=fI(0);function al(e){for(var g=e;null!==g;){if(13===g.tag){var t=g.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return g}else if(19===g.tag&&void 0!==g.memoizedProps.revealOrder){if(0!==(128&g.flags))return g}else if(null!==g.child){g.child.return=g,g=g.child;continue}if(g===e)break;for(;null===g.sibling;){if(null===g.return||g.return===e)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var il=[];function cl(){for(var e=0;e<il.length;e++)il[e]._workInProgressVersionPrimary=null;il.length=0}var sl=h.ReactCurrentDispatcher,ul=h.ReactCurrentBatchConfig,dl=0,Al=null,ml=null,bl=null,Zl=!1,pl=!1,hl=0,Gl=0;function yl(){throw Error(o(321))}function Bl(e,g){if(null===g)return!1;for(var t=0;t<g.length&&t<e.length;t++)if(!ln(e[t],g[t]))return!1;return!0}function fl(e,g,t,n,I,l){if(dl=l,Al=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,sl.current=null===e||null===e.memoizedState?CC:rC,e=t(n,I),pl){l=0;do{if(pl=!1,hl=0,25<=l)throw Error(o(301));l+=1,bl=ml=null,g.updateQueue=null,sl.current=aC,e=t(n,I)}while(pl)}if(sl.current=lC,g=null!==ml&&null!==ml.next,dl=0,bl=ml=Al=null,Zl=!1,g)throw Error(o(300));return e}function vl(){var e=0!==hl;return hl=0,e}function Sl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===bl?Al.memoizedState=bl=e:bl=bl.next=e,bl}function Wl(){if(null===ml){var e=Al.alternate;e=null!==e?e.memoizedState:null}else e=ml.next;var g=null===bl?Al.memoizedState:bl.next;if(null!==g)bl=g,ml=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ml=e).memoizedState,baseState:ml.baseState,baseQueue:ml.baseQueue,queue:ml.queue,next:null},null===bl?Al.memoizedState=bl=e:bl=bl.next=e}return bl}function Vl(e,g){return"function"===typeof g?g(e):g}function Rl(e){var g=Wl(),t=g.queue;if(null===t)throw Error(o(311));t.lastRenderedReducer=e;var n=ml,I=n.baseQueue,l=t.pending;if(null!==l){if(null!==I){var C=I.next;I.next=l.next,l.next=C}n.baseQueue=I=l,t.pending=null}if(null!==I){l=I.next,n=n.baseState;var r=C=null,a=null,i=l;do{var c=i.lane;if((dl&c)===c)null!==a&&(a=a.next={lane:0,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null}),n=i.hasEagerState?i.eagerState:e(n,i.action);else{var s={lane:c,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null};null===a?(r=a=s,C=n):a=a.next=s,Al.lanes|=c,Fr|=c}i=i.next}while(null!==i&&i!==l);null===a?C=n:a.next=r,ln(n,g.memoizedState)||(hC=!0),g.memoizedState=n,g.baseState=C,g.baseQueue=a,t.lastRenderedState=n}if(null!==(e=t.interleaved)){I=e;do{l=I.lane,Al.lanes|=l,Fr|=l,I=I.next}while(I!==e)}else null===I&&(t.lanes=0);return[g.memoizedState,t.dispatch]}function Xl(e){var g=Wl(),t=g.queue;if(null===t)throw Error(o(311));t.lastRenderedReducer=e;var n=t.dispatch,I=t.pending,l=g.memoizedState;if(null!==I){t.pending=null;var C=I=I.next;do{l=e(l,C.action),C=C.next}while(C!==I);ln(l,g.memoizedState)||(hC=!0),g.memoizedState=l,null===g.baseQueue&&(g.baseState=l),t.lastRenderedState=l}return[l,n]}function kl(){}function Jl(e,g){var t=Al,n=Wl(),I=g(),l=!ln(n.memoizedState,I);if(l&&(n.memoizedState=I,hC=!0),n=n.queue,Ql(wl.bind(null,t,n,e),[e]),n.getSnapshot!==g||l||null!==bl&&1&bl.memoizedState.tag){if(t.flags|=2048,xl(9,Hl.bind(null,t,n,I,g),void 0,null),null===Xr)throw Error(o(349));0!==(30&dl)||Yl(t,g,I)}return I}function Yl(e,g,t){e.flags|=16384,e={getSnapshot:g,value:t},null===(g=Al.updateQueue)?(g={lastEffect:null,stores:null},Al.updateQueue=g,g.stores=[e]):null===(t=g.stores)?g.stores=[e]:t.push(e)}function Hl(e,g,t,n){g.value=t,g.getSnapshot=n,Nl(g)&&Fl(e)}function wl(e,g,t){return t((function(){Nl(g)&&Fl(e)}))}function Nl(e){var g=e.getSnapshot;e=e.value;try{var t=g();return!ln(e,t)}catch(n){return!0}}function Fl(e){var g=Xo(e,1);null!==g&&na(g,e,1,-1)}function Kl(e){var g=Sl();return"function"===typeof e&&(e=e()),g.memoizedState=g.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:e},g.queue=e,e=e.dispatch=tC.bind(null,Al,e),[g.memoizedState,e]}function xl(e,g,t,n){return e={tag:e,create:g,destroy:t,deps:n,next:null},null===(g=Al.updateQueue)?(g={lastEffect:null,stores:null},Al.updateQueue=g,g.lastEffect=e.next=e):null===(t=g.lastEffect)?g.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,g.lastEffect=e),e}function zl(){return Wl().memoizedState}function El(e,g,t,n){var I=Sl();Al.flags|=e,I.memoizedState=xl(1|g,t,void 0,void 0===n?null:n)}function Ml(e,g,t,n){var I=Wl();n=void 0===n?null:n;var o=void 0;if(null!==ml){var l=ml.memoizedState;if(o=l.destroy,null!==n&&Bl(n,l.deps))return void(I.memoizedState=xl(g,t,o,n))}Al.flags|=e,I.memoizedState=xl(1|g,t,o,n)}function Ul(e,g){return El(8390656,8,e,g)}function Ql(e,g){return Ml(2048,8,e,g)}function Ll(e,g){return Ml(4,2,e,g)}function Tl(e,g){return Ml(4,4,e,g)}function Dl(e,g){return"function"===typeof g?(e=e(),g(e),function(){g(null)}):null!==g&&void 0!==g?(e=e(),g.current=e,function(){g.current=null}):void 0}function jl(e,g,t){return t=null!==t&&void 0!==t?t.concat([e]):null,Ml(4,4,Dl.bind(null,g,e),t)}function Pl(){}function Ol(e,g){var t=Wl();g=void 0===g?null:g;var n=t.memoizedState;return null!==n&&null!==g&&Bl(g,n[1])?n[0]:(t.memoizedState=[e,g],e)}function ql(e,g){var t=Wl();g=void 0===g?null:g;var n=t.memoizedState;return null!==n&&null!==g&&Bl(g,n[1])?n[0]:(e=e(),t.memoizedState=[e,g],e)}function _l(e,g,t){return 0===(21&dl)?(e.baseState&&(e.baseState=!1,hC=!0),e.memoizedState=t):(ln(t,g)||(t=Ag(),Al.lanes|=t,Fr|=t,e.baseState=!0),g)}function $l(e,g){var t=pg;pg=0!==t&&4>t?t:4,e(!0);var n=ul.transition;ul.transition={};try{e(!1),g()}finally{pg=t,ul.transition=n}}function eC(){return Wl().memoizedState}function gC(e,g,t){var n=ta(e);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},nC(e))IC(g,t);else if(null!==(t=Ro(e,g,t,n))){na(t,e,n,ga()),oC(t,g,n)}}function tC(e,g,t){var n=ta(e),I={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(nC(e))IC(g,I);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=g.lastRenderedReducer))try{var l=g.lastRenderedState,C=o(l,t);if(I.hasEagerState=!0,I.eagerState=C,ln(C,l)){var r=g.interleaved;return null===r?(I.next=I,Vo(g)):(I.next=r.next,r.next=I),void(g.interleaved=I)}}catch(a){}null!==(t=Ro(e,g,I,n))&&(na(t,e,n,I=ga()),oC(t,g,n))}}function nC(e){var g=e.alternate;return e===Al||null!==g&&g===Al}function IC(e,g){pl=Zl=!0;var t=e.pending;null===t?g.next=g:(g.next=t.next,t.next=g),e.pending=g}function oC(e,g,t){if(0!==(4194240&t)){var n=g.lanes;t|=n&=e.pendingLanes,g.lanes=t,Zg(e,t)}}var lC={readContext:So,useCallback:yl,useContext:yl,useEffect:yl,useImperativeHandle:yl,useInsertionEffect:yl,useLayoutEffect:yl,useMemo:yl,useReducer:yl,useRef:yl,useState:yl,useDebugValue:yl,useDeferredValue:yl,useTransition:yl,useMutableSource:yl,useSyncExternalStore:yl,useId:yl,unstable_isNewReconciler:!1},CC={readContext:So,useCallback:function(e,g){return Sl().memoizedState=[e,void 0===g?null:g],e},useContext:So,useEffect:Ul,useImperativeHandle:function(e,g,t){return t=null!==t&&void 0!==t?t.concat([e]):null,El(4194308,4,Dl.bind(null,g,e),t)},useLayoutEffect:function(e,g){return El(4194308,4,e,g)},useInsertionEffect:function(e,g){return El(4,2,e,g)},useMemo:function(e,g){var t=Sl();return g=void 0===g?null:g,e=e(),t.memoizedState=[e,g],e},useReducer:function(e,g,t){var n=Sl();return g=void 0!==t?t(g):g,n.memoizedState=n.baseState=g,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:g},n.queue=e,e=e.dispatch=gC.bind(null,Al,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Sl().memoizedState=e},useState:Kl,useDebugValue:Pl,useDeferredValue:function(e){return Sl().memoizedState=e},useTransition:function(){var e=Kl(!1),g=e[0];return e=$l.bind(null,e[1]),Sl().memoizedState=e,[g,e]},useMutableSource:function(){},useSyncExternalStore:function(e,g,t){var n=Al,I=Sl();if(Io){if(void 0===t)throw Error(o(407));t=t()}else{if(t=g(),null===Xr)throw Error(o(349));0!==(30&dl)||Yl(n,g,t)}I.memoizedState=t;var l={value:t,getSnapshot:g};return I.queue=l,Ul(wl.bind(null,n,l,e),[e]),n.flags|=2048,xl(9,Hl.bind(null,n,l,t,g),void 0,null),t},useId:function(){var e=Sl(),g=Xr.identifierPrefix;if(Io){var t=qI;g=":"+g+"R"+(t=(OI&~(1<<32-lg(OI)-1)).toString(32)+t),0<(t=hl++)&&(g+="H"+t.toString(32)),g+=":"}else g=":"+g+"r"+(t=Gl++).toString(32)+":";return e.memoizedState=g},unstable_isNewReconciler:!1},rC={readContext:So,useCallback:Ol,useContext:So,useEffect:Ql,useImperativeHandle:jl,useInsertionEffect:Ll,useLayoutEffect:Tl,useMemo:ql,useReducer:Rl,useRef:zl,useState:function(){return Rl(Vl)},useDebugValue:Pl,useDeferredValue:function(e){return _l(Wl(),ml.memoizedState,e)},useTransition:function(){return[Rl(Vl)[0],Wl().memoizedState]},useMutableSource:kl,useSyncExternalStore:Jl,useId:eC,unstable_isNewReconciler:!1},aC={readContext:So,useCallback:Ol,useContext:So,useEffect:Ql,useImperativeHandle:jl,useInsertionEffect:Ll,useLayoutEffect:Tl,useMemo:ql,useReducer:Xl,useRef:zl,useState:function(){return Xl(Vl)},useDebugValue:Pl,useDeferredValue:function(e){var g=Wl();return null===ml?g.memoizedState=e:_l(g,ml.memoizedState,e)},useTransition:function(){return[Xl(Vl)[0],Wl().memoizedState]},useMutableSource:kl,useSyncExternalStore:Jl,useId:eC,unstable_isNewReconciler:!1};function iC(e,g){try{var t="",n=g;do{t+=E(n),n=n.return}while(n);var I=t}catch(o){I="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:g,stack:I,digest:null}}function cC(e,g,t){return{value:e,source:null,stack:null!=t?t:null,digest:null!=g?g:null}}function sC(e,g){try{console.error(g.value)}catch(t){setTimeout((function(){throw t}))}}var uC="function"===typeof WeakMap?WeakMap:Map;function dC(e,g,t){(t=Ho(-1,t)).tag=3,t.payload={element:null};var n=g.value;return t.callback=function(){Lr||(Lr=!0,Tr=n),sC(0,g)},t}function AC(e,g,t){(t=Ho(-1,t)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var I=g.value;t.payload=function(){return n(I)},t.callback=function(){sC(0,g)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(t.callback=function(){sC(0,g),"function"!==typeof n&&(null===Dr?Dr=new Set([this]):Dr.add(this));var e=g.stack;this.componentDidCatch(g.value,{componentStack:null!==e?e:""})}),t}function mC(e,g,t){var n=e.pingCache;if(null===n){n=e.pingCache=new uC;var I=new Set;n.set(g,I)}else void 0===(I=n.get(g))&&(I=new Set,n.set(g,I));I.has(t)||(I.add(t),e=Sa.bind(null,e,g,t),g.then(e,e))}function bC(e){do{var g;if((g=13===e.tag)&&(g=null===(g=e.memoizedState)||null!==g.dehydrated),g)return e;e=e.return}while(null!==e);return null}function ZC(e,g,t,n,I){return 0===(1&e.mode)?(e===g?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,1===t.tag&&(null===t.alternate?t.tag=17:((g=Ho(-1,1)).tag=2,wo(t,g,1))),t.lanes|=1),e):(e.flags|=65536,e.lanes=I,e)}var pC=h.ReactCurrentOwner,hC=!1;function GC(e,g,t,n){g.child=null===e?_o(g,null,t,n):qo(g,e.child,t,n)}function yC(e,g,t,n,I){t=t.render;var o=g.ref;return vo(g,I),n=fl(e,g,t,n,o,I),t=vl(),null===e||hC?(Io&&t&&eo(g),g.flags|=1,GC(e,g,n,I),g.child):(g.updateQueue=e.updateQueue,g.flags&=-2053,e.lanes&=~I,LC(e,g,I))}function BC(e,g,t,n,I){if(null===e){var o=t.type;return"function"!==typeof o||Ya(o)||void 0!==o.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=wa(t.type,null,n,g,g.mode,I)).ref=g.ref,e.return=g,g.child=e):(g.tag=15,g.type=o,fC(e,g,o,n,I))}if(o=e.child,0===(e.lanes&I)){var l=o.memoizedProps;if((t=null!==(t=t.compare)?t:Cn)(l,n)&&e.ref===g.ref)return LC(e,g,I)}return g.flags|=1,(e=Ha(o,n)).ref=g.ref,e.return=g,g.child=e}function fC(e,g,t,n,I){if(null!==e){var o=e.memoizedProps;if(Cn(o,n)&&e.ref===g.ref){if(hC=!1,g.pendingProps=n=o,0===(e.lanes&I))return g.lanes=e.lanes,LC(e,g,I);0!==(131072&e.flags)&&(hC=!0)}}return WC(e,g,t,n,I)}function vC(e,g,t){var n=g.pendingProps,I=n.children,o=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&g.mode))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},SI(Hr,Yr),Yr|=t;else{if(0===(1073741824&t))return e=null!==o?o.baseLanes|t:t,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:e,cachePool:null,transitions:null},g.updateQueue=null,SI(Hr,Yr),Yr|=e,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==o?o.baseLanes:t,SI(Hr,Yr),Yr|=n}else null!==o?(n=o.baseLanes|t,g.memoizedState=null):n=t,SI(Hr,Yr),Yr|=n;return GC(e,g,I,t),g.child}function SC(e,g){var t=g.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(g.flags|=512,g.flags|=2097152)}function WC(e,g,t,n,I){var o=JI(t)?XI:VI.current;return o=kI(g,o),vo(g,I),t=fl(e,g,t,n,o,I),n=vl(),null===e||hC?(Io&&n&&eo(g),g.flags|=1,GC(e,g,t,I),g.child):(g.updateQueue=e.updateQueue,g.flags&=-2053,e.lanes&=~I,LC(e,g,I))}function VC(e,g,t,n,I){if(JI(t)){var o=!0;NI(g)}else o=!1;if(vo(g,I),null===g.stateNode)QC(e,g),Qo(g,t,n),To(g,t,n,I),n=!0;else if(null===e){var l=g.stateNode,C=g.memoizedProps;l.props=C;var r=l.context,a=t.contextType;"object"===typeof a&&null!==a?a=So(a):a=kI(g,a=JI(t)?XI:VI.current);var i=t.getDerivedStateFromProps,c="function"===typeof i||"function"===typeof l.getSnapshotBeforeUpdate;c||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(C!==n||r!==a)&&Lo(g,l,n,a),ko=!1;var s=g.memoizedState;l.state=s,Ko(g,n,l,I),r=g.memoizedState,C!==n||s!==r||RI.current||ko?("function"===typeof i&&(Eo(g,t,i,n),r=g.memoizedState),(C=ko||Uo(g,t,C,n,s,r,a))?(c||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||("function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"===typeof l.componentDidMount&&(g.flags|=4194308)):("function"===typeof l.componentDidMount&&(g.flags|=4194308),g.memoizedProps=n,g.memoizedState=r),l.props=n,l.state=r,l.context=a,n=C):("function"===typeof l.componentDidMount&&(g.flags|=4194308),n=!1)}else{l=g.stateNode,Yo(e,g),C=g.memoizedProps,a=g.type===g.elementType?C:bo(g.type,C),l.props=a,c=g.pendingProps,s=l.context,"object"===typeof(r=t.contextType)&&null!==r?r=So(r):r=kI(g,r=JI(t)?XI:VI.current);var u=t.getDerivedStateFromProps;(i="function"===typeof u||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(C!==c||s!==r)&&Lo(g,l,n,r),ko=!1,s=g.memoizedState,l.state=s,Ko(g,n,l,I);var d=g.memoizedState;C!==c||s!==d||RI.current||ko?("function"===typeof u&&(Eo(g,t,u,n),d=g.memoizedState),(a=ko||Uo(g,t,a,n,s,d,r)||!1)?(i||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(n,d,r),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(n,d,r)),"function"===typeof l.componentDidUpdate&&(g.flags|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(g.flags|=1024)):("function"!==typeof l.componentDidUpdate||C===e.memoizedProps&&s===e.memoizedState||(g.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||C===e.memoizedProps&&s===e.memoizedState||(g.flags|=1024),g.memoizedProps=n,g.memoizedState=d),l.props=n,l.state=d,l.context=r,n=a):("function"!==typeof l.componentDidUpdate||C===e.memoizedProps&&s===e.memoizedState||(g.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||C===e.memoizedProps&&s===e.memoizedState||(g.flags|=1024),n=!1)}return RC(e,g,t,n,o,I)}function RC(e,g,t,n,I,o){SC(e,g);var l=0!==(128&g.flags);if(!n&&!l)return I&&FI(g,t,!1),LC(e,g,o);n=g.stateNode,pC.current=g;var C=l&&"function"!==typeof t.getDerivedStateFromError?null:n.render();return g.flags|=1,null!==e&&l?(g.child=qo(g,e.child,null,o),g.child=qo(g,null,C,o)):GC(e,g,C,o),g.memoizedState=n.state,I&&FI(g,t,!0),g.child}function XC(e){var g=e.stateNode;g.pendingContext?HI(0,g.pendingContext,g.pendingContext!==g.context):g.context&&HI(0,g.context,!1),Il(e,g.containerInfo)}function kC(e,g,t,n,I){return uo(),Ao(I),g.flags|=256,GC(e,g,t,n),g.child}var JC,YC,HC,wC,NC={dehydrated:null,treeContext:null,retryLane:0};function FC(e){return{baseLanes:e,cachePool:null,transitions:null}}function KC(e,g,t){var n,I=g.pendingProps,l=rl.current,C=!1,r=0!==(128&g.flags);if((n=r)||(n=(null===e||null!==e.memoizedState)&&0!==(2&l)),n?(C=!0,g.flags&=-129):null!==e&&null===e.memoizedState||(l|=1),SI(rl,1&l),null===e)return ao(g),null!==(e=g.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&g.mode)?g.lanes=1:"$!"===e.data?g.lanes=8:g.lanes=1073741824,null):(r=I.children,e=I.fallback,C?(I=g.mode,C=g.child,r={mode:"hidden",children:r},0===(1&I)&&null!==C?(C.childLanes=0,C.pendingProps=r):C=Fa(r,I,0,null),e=Na(e,I,t,null),C.return=g,e.return=g,C.sibling=e,g.child=C,g.child.memoizedState=FC(t),g.memoizedState=NC,e):xC(g,r));if(null!==(l=e.memoizedState)&&null!==(n=l.dehydrated))return function(e,g,t,n,I,l,C){if(t)return 256&g.flags?(g.flags&=-257,zC(e,g,C,n=cC(Error(o(422))))):null!==g.memoizedState?(g.child=e.child,g.flags|=128,null):(l=n.fallback,I=g.mode,n=Fa({mode:"visible",children:n.children},I,0,null),(l=Na(l,I,C,null)).flags|=2,n.return=g,l.return=g,n.sibling=l,g.child=n,0!==(1&g.mode)&&qo(g,e.child,null,C),g.child.memoizedState=FC(C),g.memoizedState=NC,l);if(0===(1&g.mode))return zC(e,g,C,null);if("$!"===I.data){if(n=I.nextSibling&&I.nextSibling.dataset)var r=n.dgst;return n=r,zC(e,g,C,n=cC(l=Error(o(419)),n,void 0))}if(r=0!==(C&e.childLanes),hC||r){if(null!==(n=Xr)){switch(C&-C){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}0!==(I=0!==(I&(n.suspendedLanes|C))?0:I)&&I!==l.retryLane&&(l.retryLane=I,Xo(e,I),na(n,e,I,-1))}return ma(),zC(e,g,C,n=cC(Error(o(421))))}return"$?"===I.data?(g.flags|=128,g.child=e.child,g=Va.bind(null,e),I._reactRetry=g,null):(e=l.treeContext,no=aI(I.nextSibling),to=g,Io=!0,oo=null,null!==e&&(DI[jI++]=OI,DI[jI++]=qI,DI[jI++]=PI,OI=e.id,qI=e.overflow,PI=g),g=xC(g,n.children),g.flags|=4096,g)}(e,g,r,I,n,l,t);if(C){C=I.fallback,r=g.mode,n=(l=e.child).sibling;var a={mode:"hidden",children:I.children};return 0===(1&r)&&g.child!==l?((I=g.child).childLanes=0,I.pendingProps=a,g.deletions=null):(I=Ha(l,a)).subtreeFlags=14680064&l.subtreeFlags,null!==n?C=Ha(n,C):(C=Na(C,r,t,null)).flags|=2,C.return=g,I.return=g,I.sibling=C,g.child=I,I=C,C=g.child,r=null===(r=e.child.memoizedState)?FC(t):{baseLanes:r.baseLanes|t,cachePool:null,transitions:r.transitions},C.memoizedState=r,C.childLanes=e.childLanes&~t,g.memoizedState=NC,I}return e=(C=e.child).sibling,I=Ha(C,{mode:"visible",children:I.children}),0===(1&g.mode)&&(I.lanes=t),I.return=g,I.sibling=null,null!==e&&(null===(t=g.deletions)?(g.deletions=[e],g.flags|=16):t.push(e)),g.child=I,g.memoizedState=null,I}function xC(e,g){return(g=Fa({mode:"visible",children:g},e.mode,0,null)).return=e,e.child=g}function zC(e,g,t,n){return null!==n&&Ao(n),qo(g,e.child,null,t),(e=xC(g,g.pendingProps.children)).flags|=2,g.memoizedState=null,e}function EC(e,g,t){e.lanes|=g;var n=e.alternate;null!==n&&(n.lanes|=g),fo(e.return,g,t)}function MC(e,g,t,n,I){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:I}:(o.isBackwards=g,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=t,o.tailMode=I)}function UC(e,g,t){var n=g.pendingProps,I=n.revealOrder,o=n.tail;if(GC(e,g,n.children,t),0!==(2&(n=rl.current)))n=1&n|2,g.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=g.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&EC(e,t,g);else if(19===e.tag)EC(e,t,g);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===g)break e;for(;null===e.sibling;){if(null===e.return||e.return===g)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(SI(rl,n),0===(1&g.mode))g.memoizedState=null;else switch(I){case"forwards":for(t=g.child,I=null;null!==t;)null!==(e=t.alternate)&&null===al(e)&&(I=t),t=t.sibling;null===(t=I)?(I=g.child,g.child=null):(I=t.sibling,t.sibling=null),MC(g,!1,I,t,o);break;case"backwards":for(t=null,I=g.child,g.child=null;null!==I;){if(null!==(e=I.alternate)&&null===al(e)){g.child=I;break}e=I.sibling,I.sibling=t,t=I,I=e}MC(g,!0,t,null,o);break;case"together":MC(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function QC(e,g){0===(1&g.mode)&&null!==e&&(e.alternate=null,g.alternate=null,g.flags|=2)}function LC(e,g,t){if(null!==e&&(g.dependencies=e.dependencies),Fr|=g.lanes,0===(t&g.childLanes))return null;if(null!==e&&g.child!==e.child)throw Error(o(153));if(null!==g.child){for(t=Ha(e=g.child,e.pendingProps),g.child=t,t.return=g;null!==e.sibling;)e=e.sibling,(t=t.sibling=Ha(e,e.pendingProps)).return=g;t.sibling=null}return g.child}function TC(e,g){if(!Io)switch(e.tailMode){case"hidden":g=e.tail;for(var t=null;null!==g;)null!==g.alternate&&(t=g),g=g.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?g||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function DC(e){var g=null!==e.alternate&&e.alternate.child===e.child,t=0,n=0;if(g)for(var I=e.child;null!==I;)t|=I.lanes|I.childLanes,n|=14680064&I.subtreeFlags,n|=14680064&I.flags,I.return=e,I=I.sibling;else for(I=e.child;null!==I;)t|=I.lanes|I.childLanes,n|=I.subtreeFlags,n|=I.flags,I.return=e,I=I.sibling;return e.subtreeFlags|=n,e.childLanes=t,g}function jC(e,g,t){var n=g.pendingProps;switch(go(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return DC(g),null;case 1:case 17:return JI(g.type)&&YI(),DC(g),null;case 3:return n=g.stateNode,ol(),vI(RI),vI(VI),cl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(co(g)?g.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&g.flags)||(g.flags|=1024,null!==oo&&(Ca(oo),oo=null))),YC(e,g),DC(g),null;case 5:Cl(g);var I=nl(tl.current);if(t=g.type,null!==e&&null!=g.stateNode)HC(e,g,t,n,I),e.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!n){if(null===g.stateNode)throw Error(o(166));return DC(g),null}if(e=nl(el.current),co(g)){n=g.stateNode,t=g.type;var l=g.memoizedProps;switch(n[sI]=g,n[uI]=l,e=0!==(1&g.mode),t){case"dialog":xn("cancel",n),xn("close",n);break;case"iframe":case"object":case"embed":xn("load",n);break;case"video":case"audio":for(I=0;I<wn.length;I++)xn(wn[I],n);break;case"source":xn("error",n);break;case"img":case"image":case"link":xn("error",n),xn("load",n);break;case"details":xn("toggle",n);break;case"input":O(n,l),xn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},xn("invalid",n);break;case"textarea":Ie(n,l),xn("invalid",n)}for(var r in Ze(t,l),I=null,l)if(l.hasOwnProperty(r)){var a=l[r];"children"===r?"string"===typeof a?n.textContent!==a&&(!0!==l.suppressHydrationWarning&&_n(n.textContent,a,e),I=["children",a]):"number"===typeof a&&n.textContent!==""+a&&(!0!==l.suppressHydrationWarning&&_n(n.textContent,a,e),I=["children",""+a]):C.hasOwnProperty(r)&&null!=a&&"onScroll"===r&&xn("scroll",n)}switch(t){case"input":T(n),$(n,l,!0);break;case"textarea":T(n),le(n);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(n.onclick=$n)}n=I,g.updateQueue=n,null!==n&&(g.flags|=4)}else{r=9===I.nodeType?I:I.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=Ce(t)),"http://www.w3.org/1999/xhtml"===e?"script"===t?((e=r.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=r.createElement(t,{is:n.is}):(e=r.createElement(t),"select"===t&&(r=e,n.multiple?r.multiple=!0:n.size&&(r.size=n.size))):e=r.createElementNS(e,t),e[sI]=g,e[uI]=n,JC(e,g,!1,!1),g.stateNode=e;e:{switch(r=pe(t,n),t){case"dialog":xn("cancel",e),xn("close",e),I=n;break;case"iframe":case"object":case"embed":xn("load",e),I=n;break;case"video":case"audio":for(I=0;I<wn.length;I++)xn(wn[I],e);I=n;break;case"source":xn("error",e),I=n;break;case"img":case"image":case"link":xn("error",e),xn("load",e),I=n;break;case"details":xn("toggle",e),I=n;break;case"input":O(e,n),I=P(e,n),xn("invalid",e);break;case"option":default:I=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},I=F({},n,{value:void 0}),xn("invalid",e);break;case"textarea":Ie(e,n),I=ne(e,n),xn("invalid",e)}for(l in Ze(t,I),a=I)if(a.hasOwnProperty(l)){var i=a[l];"style"===l?me(e,i):"dangerouslySetInnerHTML"===l?null!=(i=i?i.__html:void 0)&&ce(e,i):"children"===l?"string"===typeof i?("textarea"!==t||""!==i)&&se(e,i):"number"===typeof i&&se(e,""+i):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(C.hasOwnProperty(l)?null!=i&&"onScroll"===l&&xn("scroll",e):null!=i&&p(e,l,i,r))}switch(t){case"input":T(e),$(e,n,!1);break;case"textarea":T(e),le(e);break;case"option":null!=n.value&&e.setAttribute("value",""+Q(n.value));break;case"select":e.multiple=!!n.multiple,null!=(l=n.value)?te(e,!!n.multiple,l,!1):null!=n.defaultValue&&te(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof I.onClick&&(e.onclick=$n)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(g.flags|=4)}null!==g.ref&&(g.flags|=512,g.flags|=2097152)}return DC(g),null;case 6:if(e&&null!=g.stateNode)wC(e,g,e.memoizedProps,n);else{if("string"!==typeof n&&null===g.stateNode)throw Error(o(166));if(t=nl(tl.current),nl(el.current),co(g)){if(n=g.stateNode,t=g.memoizedProps,n[sI]=g,(l=n.nodeValue!==t)&&null!==(e=to))switch(e.tag){case 3:_n(n.nodeValue,t,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&_n(n.nodeValue,t,0!==(1&e.mode))}l&&(g.flags|=4)}else(n=(9===t.nodeType?t:t.ownerDocument).createTextNode(n))[sI]=g,g.stateNode=n}return DC(g),null;case 13:if(vI(rl),n=g.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(Io&&null!==no&&0!==(1&g.mode)&&0===(128&g.flags))so(),uo(),g.flags|=98560,l=!1;else if(l=co(g),null!==n&&null!==n.dehydrated){if(null===e){if(!l)throw Error(o(318));if(!(l=null!==(l=g.memoizedState)?l.dehydrated:null))throw Error(o(317));l[sI]=g}else uo(),0===(128&g.flags)&&(g.memoizedState=null),g.flags|=4;DC(g),l=!1}else null!==oo&&(Ca(oo),oo=null),l=!0;if(!l)return 65536&g.flags?g:null}return 0!==(128&g.flags)?(g.lanes=t,g):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(g.child.flags|=8192,0!==(1&g.mode)&&(null===e||0!==(1&rl.current)?0===wr&&(wr=3):ma())),null!==g.updateQueue&&(g.flags|=4),DC(g),null);case 4:return ol(),YC(e,g),null===e&&Mn(g.stateNode.containerInfo),DC(g),null;case 10:return Bo(g.type._context),DC(g),null;case 19:if(vI(rl),null===(l=g.memoizedState))return DC(g),null;if(n=0!==(128&g.flags),null===(r=l.rendering))if(n)TC(l,!1);else{if(0!==wr||null!==e&&0!==(128&e.flags))for(e=g.child;null!==e;){if(null!==(r=al(e))){for(g.flags|=128,TC(l,!1),null!==(n=r.updateQueue)&&(g.updateQueue=n,g.flags|=4),g.subtreeFlags=0,n=t,t=g.child;null!==t;)e=n,(l=t).flags&=14680066,null===(r=l.alternate)?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,l.type=r.type,e=r.dependencies,l.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return SI(rl,1&rl.current|2),g.child}e=e.sibling}null!==l.tail&&qe()>Ur&&(g.flags|=128,n=!0,TC(l,!1),g.lanes=4194304)}else{if(!n)if(null!==(e=al(r))){if(g.flags|=128,n=!0,null!==(t=e.updateQueue)&&(g.updateQueue=t,g.flags|=4),TC(l,!0),null===l.tail&&"hidden"===l.tailMode&&!r.alternate&&!Io)return DC(g),null}else 2*qe()-l.renderingStartTime>Ur&&1073741824!==t&&(g.flags|=128,n=!0,TC(l,!1),g.lanes=4194304);l.isBackwards?(r.sibling=g.child,g.child=r):(null!==(t=l.last)?t.sibling=r:g.child=r,l.last=r)}return null!==l.tail?(g=l.tail,l.rendering=g,l.tail=g.sibling,l.renderingStartTime=qe(),g.sibling=null,t=rl.current,SI(rl,n?1&t|2:1&t),g):(DC(g),null);case 22:case 23:return sa(),n=null!==g.memoizedState,null!==e&&null!==e.memoizedState!==n&&(g.flags|=8192),n&&0!==(1&g.mode)?0!==(1073741824&Yr)&&(DC(g),6&g.subtreeFlags&&(g.flags|=8192)):DC(g),null;case 24:case 25:return null}throw Error(o(156,g.tag))}function PC(e,g){switch(go(g),g.tag){case 1:return JI(g.type)&&YI(),65536&(e=g.flags)?(g.flags=-65537&e|128,g):null;case 3:return ol(),vI(RI),vI(VI),cl(),0!==(65536&(e=g.flags))&&0===(128&e)?(g.flags=-65537&e|128,g):null;case 5:return Cl(g),null;case 13:if(vI(rl),null!==(e=g.memoizedState)&&null!==e.dehydrated){if(null===g.alternate)throw Error(o(340));uo()}return 65536&(e=g.flags)?(g.flags=-65537&e|128,g):null;case 19:return vI(rl),null;case 4:return ol(),null;case 10:return Bo(g.type._context),null;case 22:case 23:return sa(),null;default:return null}}JC=function(e,g){for(var t=g.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===g)break;for(;null===t.sibling;){if(null===t.return||t.return===g)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},YC=function(){},HC=function(e,g,t,n){var I=e.memoizedProps;if(I!==n){e=g.stateNode,nl(el.current);var o,l=null;switch(t){case"input":I=P(e,I),n=P(e,n),l=[];break;case"select":I=F({},I,{value:void 0}),n=F({},n,{value:void 0}),l=[];break;case"textarea":I=ne(e,I),n=ne(e,n),l=[];break;default:"function"!==typeof I.onClick&&"function"===typeof n.onClick&&(e.onclick=$n)}for(i in Ze(t,n),t=null,I)if(!n.hasOwnProperty(i)&&I.hasOwnProperty(i)&&null!=I[i])if("style"===i){var r=I[i];for(o in r)r.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else"dangerouslySetInnerHTML"!==i&&"children"!==i&&"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(C.hasOwnProperty(i)?l||(l=[]):(l=l||[]).push(i,null));for(i in n){var a=n[i];if(r=null!=I?I[i]:void 0,n.hasOwnProperty(i)&&a!==r&&(null!=a||null!=r))if("style"===i)if(r){for(o in r)!r.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in a)a.hasOwnProperty(o)&&r[o]!==a[o]&&(t||(t={}),t[o]=a[o])}else t||(l||(l=[]),l.push(i,t)),t=a;else"dangerouslySetInnerHTML"===i?(a=a?a.__html:void 0,r=r?r.__html:void 0,null!=a&&r!==a&&(l=l||[]).push(i,a)):"children"===i?"string"!==typeof a&&"number"!==typeof a||(l=l||[]).push(i,""+a):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&(C.hasOwnProperty(i)?(null!=a&&"onScroll"===i&&xn("scroll",e),l||r===a||(l=[])):(l=l||[]).push(i,a))}t&&(l=l||[]).push("style",t);var i=l;(g.updateQueue=i)&&(g.flags|=4)}},wC=function(e,g,t,n){t!==n&&(g.flags|=4)};var OC=!1,qC=!1,_C="function"===typeof WeakSet?WeakSet:Set,$C=null;function er(e,g){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){va(e,g,n)}else t.current=null}function gr(e,g,t){try{t()}catch(n){va(e,g,n)}}var tr=!1;function nr(e,g,t){var n=g.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var I=n=n.next;do{if((I.tag&e)===e){var o=I.destroy;I.destroy=void 0,void 0!==o&&gr(g,t,o)}I=I.next}while(I!==n)}}function Ir(e,g){if(null!==(g=null!==(g=g.updateQueue)?g.lastEffect:null)){var t=g=g.next;do{if((t.tag&e)===e){var n=t.create;t.destroy=n()}t=t.next}while(t!==g)}}function or(e){var g=e.ref;if(null!==g){var t=e.stateNode;e.tag,e=t,"function"===typeof g?g(e):g.current=e}}function lr(e){var g=e.alternate;null!==g&&(e.alternate=null,lr(g)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(g=e.stateNode)&&(delete g[sI],delete g[uI],delete g[AI],delete g[mI],delete g[bI])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Cr(e){return 5===e.tag||3===e.tag||4===e.tag}function rr(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Cr(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ar(e,g,t){var n=e.tag;if(5===n||6===n)e=e.stateNode,g?8===t.nodeType?t.parentNode.insertBefore(e,g):t.insertBefore(e,g):(8===t.nodeType?(g=t.parentNode).insertBefore(e,t):(g=t).appendChild(e),null!==(t=t._reactRootContainer)&&void 0!==t||null!==g.onclick||(g.onclick=$n));else if(4!==n&&null!==(e=e.child))for(ar(e,g,t),e=e.sibling;null!==e;)ar(e,g,t),e=e.sibling}function ir(e,g,t){var n=e.tag;if(5===n||6===n)e=e.stateNode,g?t.insertBefore(e,g):t.appendChild(e);else if(4!==n&&null!==(e=e.child))for(ir(e,g,t),e=e.sibling;null!==e;)ir(e,g,t),e=e.sibling}var cr=null,sr=!1;function ur(e,g,t){for(t=t.child;null!==t;)dr(e,g,t),t=t.sibling}function dr(e,g,t){if(og&&"function"===typeof og.onCommitFiberUnmount)try{og.onCommitFiberUnmount(Ig,t)}catch(C){}switch(t.tag){case 5:qC||er(t,g);case 6:var n=cr,I=sr;cr=null,ur(e,g,t),sr=I,null!==(cr=n)&&(sr?(e=cr,t=t.stateNode,8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)):cr.removeChild(t.stateNode));break;case 18:null!==cr&&(sr?(e=cr,t=t.stateNode,8===e.nodeType?rI(e.parentNode,t):1===e.nodeType&&rI(e,t),Mg(e)):rI(cr,t.stateNode));break;case 4:n=cr,I=sr,cr=t.stateNode.containerInfo,sr=!0,ur(e,g,t),cr=n,sr=I;break;case 0:case 11:case 14:case 15:if(!qC&&(null!==(n=t.updateQueue)&&null!==(n=n.lastEffect))){I=n=n.next;do{var o=I,l=o.destroy;o=o.tag,void 0!==l&&(0!==(2&o)||0!==(4&o))&&gr(t,g,l),I=I.next}while(I!==n)}ur(e,g,t);break;case 1:if(!qC&&(er(t,g),"function"===typeof(n=t.stateNode).componentWillUnmount))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(C){va(t,g,C)}ur(e,g,t);break;case 21:ur(e,g,t);break;case 22:1&t.mode?(qC=(n=qC)||null!==t.memoizedState,ur(e,g,t),qC=n):ur(e,g,t);break;default:ur(e,g,t)}}function Ar(e){var g=e.updateQueue;if(null!==g){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new _C),g.forEach((function(g){var n=Ra.bind(null,e,g);t.has(g)||(t.add(g),g.then(n,n))}))}}function mr(e,g){var t=g.deletions;if(null!==t)for(var n=0;n<t.length;n++){var I=t[n];try{var l=e,C=g,r=C;e:for(;null!==r;){switch(r.tag){case 5:cr=r.stateNode,sr=!1;break e;case 3:case 4:cr=r.stateNode.containerInfo,sr=!0;break e}r=r.return}if(null===cr)throw Error(o(160));dr(l,C,I),cr=null,sr=!1;var a=I.alternate;null!==a&&(a.return=null),I.return=null}catch(i){va(I,g,i)}}if(12854&g.subtreeFlags)for(g=g.child;null!==g;)br(g,e),g=g.sibling}function br(e,g){var t=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mr(g,e),Zr(e),4&n){try{nr(3,e,e.return),Ir(3,e)}catch(m){va(e,e.return,m)}try{nr(5,e,e.return)}catch(m){va(e,e.return,m)}}break;case 1:mr(g,e),Zr(e),512&n&&null!==t&&er(t,t.return);break;case 5:if(mr(g,e),Zr(e),512&n&&null!==t&&er(t,t.return),32&e.flags){var I=e.stateNode;try{se(I,"")}catch(m){va(e,e.return,m)}}if(4&n&&null!=(I=e.stateNode)){var l=e.memoizedProps,C=null!==t?t.memoizedProps:l,r=e.type,a=e.updateQueue;if(e.updateQueue=null,null!==a)try{"input"===r&&"radio"===l.type&&null!=l.name&&q(I,l),pe(r,C);var i=pe(r,l);for(C=0;C<a.length;C+=2){var c=a[C],s=a[C+1];"style"===c?me(I,s):"dangerouslySetInnerHTML"===c?ce(I,s):"children"===c?se(I,s):p(I,c,s,i)}switch(r){case"input":_(I,l);break;case"textarea":oe(I,l);break;case"select":var u=I._wrapperState.wasMultiple;I._wrapperState.wasMultiple=!!l.multiple;var d=l.value;null!=d?te(I,!!l.multiple,d,!1):u!==!!l.multiple&&(null!=l.defaultValue?te(I,!!l.multiple,l.defaultValue,!0):te(I,!!l.multiple,l.multiple?[]:"",!1))}I[uI]=l}catch(m){va(e,e.return,m)}}break;case 6:if(mr(g,e),Zr(e),4&n){if(null===e.stateNode)throw Error(o(162));I=e.stateNode,l=e.memoizedProps;try{I.nodeValue=l}catch(m){va(e,e.return,m)}}break;case 3:if(mr(g,e),Zr(e),4&n&&null!==t&&t.memoizedState.isDehydrated)try{Mg(g.containerInfo)}catch(m){va(e,e.return,m)}break;case 4:default:mr(g,e),Zr(e);break;case 13:mr(g,e),Zr(e),8192&(I=e.child).flags&&(l=null!==I.memoizedState,I.stateNode.isHidden=l,!l||null!==I.alternate&&null!==I.alternate.memoizedState||(Mr=qe())),4&n&&Ar(e);break;case 22:if(c=null!==t&&null!==t.memoizedState,1&e.mode?(qC=(i=qC)||c,mr(g,e),qC=i):mr(g,e),Zr(e),8192&n){if(i=null!==e.memoizedState,(e.stateNode.isHidden=i)&&!c&&0!==(1&e.mode))for($C=e,c=e.child;null!==c;){for(s=$C=c;null!==$C;){switch(d=(u=$C).child,u.tag){case 0:case 11:case 14:case 15:nr(4,u,u.return);break;case 1:er(u,u.return);var A=u.stateNode;if("function"===typeof A.componentWillUnmount){n=u,t=u.return;try{g=n,A.props=g.memoizedProps,A.state=g.memoizedState,A.componentWillUnmount()}catch(m){va(n,t,m)}}break;case 5:er(u,u.return);break;case 22:if(null!==u.memoizedState){yr(s);continue}}null!==d?(d.return=u,$C=d):yr(s)}c=c.sibling}e:for(c=null,s=e;;){if(5===s.tag){if(null===c){c=s;try{I=s.stateNode,i?"function"===typeof(l=I.style).setProperty?l.setProperty("display","none","important"):l.display="none":(r=s.stateNode,C=void 0!==(a=s.memoizedProps.style)&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=Ae("display",C))}catch(m){va(e,e.return,m)}}}else if(6===s.tag){if(null===c)try{s.stateNode.nodeValue=i?"":s.memoizedProps}catch(m){va(e,e.return,m)}}else if((22!==s.tag&&23!==s.tag||null===s.memoizedState||s===e)&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;null===s.sibling;){if(null===s.return||s.return===e)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}}break;case 19:mr(g,e),Zr(e),4&n&&Ar(e);case 21:}}function Zr(e){var g=e.flags;if(2&g){try{e:{for(var t=e.return;null!==t;){if(Cr(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(n.tag){case 5:var I=n.stateNode;32&n.flags&&(se(I,""),n.flags&=-33),ir(e,rr(e),I);break;case 3:case 4:var l=n.stateNode.containerInfo;ar(e,rr(e),l);break;default:throw Error(o(161))}}catch(C){va(e,e.return,C)}e.flags&=-3}4096&g&&(e.flags&=-4097)}function pr(e,g,t){$C=e,hr(e,g,t)}function hr(e,g,t){for(var n=0!==(1&e.mode);null!==$C;){var I=$C,o=I.child;if(22===I.tag&&n){var l=null!==I.memoizedState||OC;if(!l){var C=I.alternate,r=null!==C&&null!==C.memoizedState||qC;C=OC;var a=qC;if(OC=l,(qC=r)&&!a)for($C=I;null!==$C;)r=(l=$C).child,22===l.tag&&null!==l.memoizedState?Br(I):null!==r?(r.return=l,$C=r):Br(I);for(;null!==o;)$C=o,hr(o,g,t),o=o.sibling;$C=I,OC=C,qC=a}Gr(e)}else 0!==(8772&I.subtreeFlags)&&null!==o?(o.return=I,$C=o):Gr(e)}}function Gr(e){for(;null!==$C;){var g=$C;if(0!==(8772&g.flags)){var t=g.alternate;try{if(0!==(8772&g.flags))switch(g.tag){case 0:case 11:case 15:qC||Ir(5,g);break;case 1:var n=g.stateNode;if(4&g.flags&&!qC)if(null===t)n.componentDidMount();else{var I=g.elementType===g.type?t.memoizedProps:bo(g.type,t.memoizedProps);n.componentDidUpdate(I,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=g.updateQueue;null!==l&&xo(g,l,n);break;case 3:var C=g.updateQueue;if(null!==C){if(t=null,null!==g.child)switch(g.child.tag){case 5:case 1:t=g.child.stateNode}xo(g,C,t)}break;case 5:var r=g.stateNode;if(null===t&&4&g.flags){t=r;var a=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&t.focus();break;case"img":a.src&&(t.src=a.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===g.memoizedState){var i=g.alternate;if(null!==i){var c=i.memoizedState;if(null!==c){var s=c.dehydrated;null!==s&&Mg(s)}}}break;default:throw Error(o(163))}qC||512&g.flags&&or(g)}catch(u){va(g,g.return,u)}}if(g===e){$C=null;break}if(null!==(t=g.sibling)){t.return=g.return,$C=t;break}$C=g.return}}function yr(e){for(;null!==$C;){var g=$C;if(g===e){$C=null;break}var t=g.sibling;if(null!==t){t.return=g.return,$C=t;break}$C=g.return}}function Br(e){for(;null!==$C;){var g=$C;try{switch(g.tag){case 0:case 11:case 15:var t=g.return;try{Ir(4,g)}catch(r){va(g,t,r)}break;case 1:var n=g.stateNode;if("function"===typeof n.componentDidMount){var I=g.return;try{n.componentDidMount()}catch(r){va(g,I,r)}}var o=g.return;try{or(g)}catch(r){va(g,o,r)}break;case 5:var l=g.return;try{or(g)}catch(r){va(g,l,r)}}}catch(r){va(g,g.return,r)}if(g===e){$C=null;break}var C=g.sibling;if(null!==C){C.return=g.return,$C=C;break}$C=g.return}}var fr,vr=Math.ceil,Sr=h.ReactCurrentDispatcher,Wr=h.ReactCurrentOwner,Vr=h.ReactCurrentBatchConfig,Rr=0,Xr=null,kr=null,Jr=0,Yr=0,Hr=fI(0),wr=0,Nr=null,Fr=0,Kr=0,xr=0,zr=null,Er=null,Mr=0,Ur=1/0,Qr=null,Lr=!1,Tr=null,Dr=null,jr=!1,Pr=null,Or=0,qr=0,_r=null,$r=-1,ea=0;function ga(){return 0!==(6&Rr)?qe():-1!==$r?$r:$r=qe()}function ta(e){return 0===(1&e.mode)?1:0!==(2&Rr)&&0!==Jr?Jr&-Jr:null!==mo.transition?(0===ea&&(ea=Ag()),ea):0!==(e=pg)?e:e=void 0===(e=window.event)?16:Og(e.type)}function na(e,g,t,n){if(50<qr)throw qr=0,_r=null,Error(o(185));bg(e,t,n),0!==(2&Rr)&&e===Xr||(e===Xr&&(0===(2&Rr)&&(Kr|=t),4===wr&&ra(e,Jr)),Ia(e,n),1===t&&0===Rr&&0===(1&g.mode)&&(Ur=qe()+500,xI&&MI()))}function Ia(e,g){var t=e.callbackNode;!function(e,g){for(var t=e.suspendedLanes,n=e.pingedLanes,I=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-lg(o),C=1<<l,r=I[l];-1===r?0!==(C&t)&&0===(C&n)||(I[l]=ug(C,g)):r<=g&&(e.expiredLanes|=C),o&=~C}}(e,g);var n=sg(e,e===Xr?Jr:0);if(0===n)null!==t&&je(t),e.callbackNode=null,e.callbackPriority=0;else if(g=n&-n,e.callbackPriority!==g){if(null!=t&&je(t),1===g)0===e.tag?function(e){xI=!0,EI(e)}(aa.bind(null,e)):EI(aa.bind(null,e)),lI((function(){0===(6&Rr)&&MI()})),t=null;else{switch(hg(n)){case 1:t=$e;break;case 4:t=eg;break;case 16:default:t=gg;break;case 536870912:t=ng}t=Xa(t,oa.bind(null,e))}e.callbackPriority=g,e.callbackNode=t}}function oa(e,g){if($r=-1,ea=0,0!==(6&Rr))throw Error(o(327));var t=e.callbackNode;if(Ba()&&e.callbackNode!==t)return null;var n=sg(e,e===Xr?Jr:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||g)g=ba(e,n);else{g=n;var I=Rr;Rr|=2;var l=Aa();for(Xr===e&&Jr===g||(Qr=null,Ur=qe()+500,ua(e,g));;)try{pa();break}catch(r){da(e,r)}yo(),Sr.current=l,Rr=I,null!==kr?g=0:(Xr=null,Jr=0,g=wr)}if(0!==g){if(2===g&&(0!==(I=dg(e))&&(n=I,g=la(e,I))),1===g)throw t=Nr,ua(e,0),ra(e,n),Ia(e,qe()),t;if(6===g)ra(e,n);else{if(I=e.current.alternate,0===(30&n)&&!function(e){for(var g=e;;){if(16384&g.flags){var t=g.updateQueue;if(null!==t&&null!==(t=t.stores))for(var n=0;n<t.length;n++){var I=t[n],o=I.getSnapshot;I=I.value;try{if(!ln(o(),I))return!1}catch(C){return!1}}}if(t=g.child,16384&g.subtreeFlags&&null!==t)t.return=g,g=t;else{if(g===e)break;for(;null===g.sibling;){if(null===g.return||g.return===e)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}(I)&&(2===(g=ba(e,n))&&(0!==(l=dg(e))&&(n=l,g=la(e,l))),1===g))throw t=Nr,ua(e,0),ra(e,n),Ia(e,qe()),t;switch(e.finishedWork=I,e.finishedLanes=n,g){case 0:case 1:throw Error(o(345));case 2:case 5:ya(e,Er,Qr);break;case 3:if(ra(e,n),(130023424&n)===n&&10<(g=Mr+500-qe())){if(0!==sg(e,0))break;if(((I=e.suspendedLanes)&n)!==n){ga(),e.pingedLanes|=e.suspendedLanes&I;break}e.timeoutHandle=nI(ya.bind(null,e,Er,Qr),g);break}ya(e,Er,Qr);break;case 4:if(ra(e,n),(4194240&n)===n)break;for(g=e.eventTimes,I=-1;0<n;){var C=31-lg(n);l=1<<C,(C=g[C])>I&&(I=C),n&=~l}if(n=I,10<(n=(120>(n=qe()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*vr(n/1960))-n)){e.timeoutHandle=nI(ya.bind(null,e,Er,Qr),n);break}ya(e,Er,Qr);break;default:throw Error(o(329))}}}return Ia(e,qe()),e.callbackNode===t?oa.bind(null,e):null}function la(e,g){var t=zr;return e.current.memoizedState.isDehydrated&&(ua(e,g).flags|=256),2!==(e=ba(e,g))&&(g=Er,Er=t,null!==g&&Ca(g)),e}function Ca(e){null===Er?Er=e:Er.push.apply(Er,e)}function ra(e,g){for(g&=~xr,g&=~Kr,e.suspendedLanes|=g,e.pingedLanes&=~g,e=e.expirationTimes;0<g;){var t=31-lg(g),n=1<<t;e[t]=-1,g&=~n}}function aa(e){if(0!==(6&Rr))throw Error(o(327));Ba();var g=sg(e,0);if(0===(1&g))return Ia(e,qe()),null;var t=ba(e,g);if(0!==e.tag&&2===t){var n=dg(e);0!==n&&(g=n,t=la(e,n))}if(1===t)throw t=Nr,ua(e,0),ra(e,g),Ia(e,qe()),t;if(6===t)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=g,ya(e,Er,Qr),Ia(e,qe()),null}function ia(e,g){var t=Rr;Rr|=1;try{return e(g)}finally{0===(Rr=t)&&(Ur=qe()+500,xI&&MI())}}function ca(e){null!==Pr&&0===Pr.tag&&0===(6&Rr)&&Ba();var g=Rr;Rr|=1;var t=Vr.transition,n=pg;try{if(Vr.transition=null,pg=1,e)return e()}finally{pg=n,Vr.transition=t,0===(6&(Rr=g))&&MI()}}function sa(){Yr=Hr.current,vI(Hr)}function ua(e,g){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,II(t)),null!==kr)for(t=kr.return;null!==t;){var n=t;switch(go(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&YI();break;case 3:ol(),vI(RI),vI(VI),cl();break;case 5:Cl(n);break;case 4:ol();break;case 13:case 19:vI(rl);break;case 10:Bo(n.type._context);break;case 22:case 23:sa()}t=t.return}if(Xr=e,kr=e=Ha(e.current,null),Jr=Yr=g,wr=0,Nr=null,xr=Kr=Fr=0,Er=zr=null,null!==Wo){for(g=0;g<Wo.length;g++)if(null!==(n=(t=Wo[g]).interleaved)){t.interleaved=null;var I=n.next,o=t.pending;if(null!==o){var l=o.next;o.next=I,n.next=l}t.pending=n}Wo=null}return e}function da(e,g){for(;;){var t=kr;try{if(yo(),sl.current=lC,Zl){for(var n=Al.memoizedState;null!==n;){var I=n.queue;null!==I&&(I.pending=null),n=n.next}Zl=!1}if(dl=0,bl=ml=Al=null,pl=!1,hl=0,Wr.current=null,null===t||null===t.return){wr=1,Nr=g,kr=null;break}e:{var l=e,C=t.return,r=t,a=g;if(g=Jr,r.flags|=32768,null!==a&&"object"===typeof a&&"function"===typeof a.then){var i=a,c=r,s=c.tag;if(0===(1&c.mode)&&(0===s||11===s||15===s)){var u=c.alternate;u?(c.updateQueue=u.updateQueue,c.memoizedState=u.memoizedState,c.lanes=u.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=bC(C);if(null!==d){d.flags&=-257,ZC(d,C,r,0,g),1&d.mode&&mC(l,i,g),a=i;var A=(g=d).updateQueue;if(null===A){var m=new Set;m.add(a),g.updateQueue=m}else A.add(a);break e}if(0===(1&g)){mC(l,i,g),ma();break e}a=Error(o(426))}else if(Io&&1&r.mode){var b=bC(C);if(null!==b){0===(65536&b.flags)&&(b.flags|=256),ZC(b,C,r,0,g),Ao(iC(a,r));break e}}l=a=iC(a,r),4!==wr&&(wr=2),null===zr?zr=[l]:zr.push(l),l=C;do{switch(l.tag){case 3:l.flags|=65536,g&=-g,l.lanes|=g,Fo(l,dC(0,a,g));break e;case 1:r=a;var Z=l.type,p=l.stateNode;if(0===(128&l.flags)&&("function"===typeof Z.getDerivedStateFromError||null!==p&&"function"===typeof p.componentDidCatch&&(null===Dr||!Dr.has(p)))){l.flags|=65536,g&=-g,l.lanes|=g,Fo(l,AC(l,r,g));break e}}l=l.return}while(null!==l)}Ga(t)}catch(h){g=h,kr===t&&null!==t&&(kr=t=t.return);continue}break}}function Aa(){var e=Sr.current;return Sr.current=lC,null===e?lC:e}function ma(){0!==wr&&3!==wr&&2!==wr||(wr=4),null===Xr||0===(268435455&Fr)&&0===(268435455&Kr)||ra(Xr,Jr)}function ba(e,g){var t=Rr;Rr|=2;var n=Aa();for(Xr===e&&Jr===g||(Qr=null,ua(e,g));;)try{Za();break}catch(I){da(e,I)}if(yo(),Rr=t,Sr.current=n,null!==kr)throw Error(o(261));return Xr=null,Jr=0,wr}function Za(){for(;null!==kr;)ha(kr)}function pa(){for(;null!==kr&&!Pe();)ha(kr)}function ha(e){var g=fr(e.alternate,e,Yr);e.memoizedProps=e.pendingProps,null===g?Ga(e):kr=g,Wr.current=null}function Ga(e){var g=e;do{var t=g.alternate;if(e=g.return,0===(32768&g.flags)){if(null!==(t=jC(t,g,Yr)))return void(kr=t)}else{if(null!==(t=PC(t,g)))return t.flags&=32767,void(kr=t);if(null===e)return wr=6,void(kr=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(g=g.sibling))return void(kr=g);kr=g=e}while(null!==g);0===wr&&(wr=5)}function ya(e,g,t){var n=pg,I=Vr.transition;try{Vr.transition=null,pg=1,function(e,g,t,n){do{Ba()}while(null!==Pr);if(0!==(6&Rr))throw Error(o(327));t=e.finishedWork;var I=e.finishedLanes;if(null===t)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var l=t.lanes|t.childLanes;if(function(e,g){var t=e.pendingLanes&~g;e.pendingLanes=g,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=g,e.mutableReadLanes&=g,e.entangledLanes&=g,g=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<t;){var I=31-lg(t),o=1<<I;g[I]=0,n[I]=-1,e[I]=-1,t&=~o}}(e,l),e===Xr&&(kr=Xr=null,Jr=0),0===(2064&t.subtreeFlags)&&0===(2064&t.flags)||jr||(jr=!0,Xa(gg,(function(){return Ba(),null}))),l=0!==(15990&t.flags),0!==(15990&t.subtreeFlags)||l){l=Vr.transition,Vr.transition=null;var C=pg;pg=1;var r=Rr;Rr|=4,Wr.current=null,function(e,g){if(eI=Qg,un(e=sn())){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var I=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{t.nodeType,l.nodeType}catch(G){t=null;break e}var C=0,r=-1,a=-1,i=0,c=0,s=e,u=null;g:for(;;){for(var d;s!==t||0!==I&&3!==s.nodeType||(r=C+I),s!==l||0!==n&&3!==s.nodeType||(a=C+n),3===s.nodeType&&(C+=s.nodeValue.length),null!==(d=s.firstChild);)u=s,s=d;for(;;){if(s===e)break g;if(u===t&&++i===I&&(r=C),u===l&&++c===n&&(a=C),null!==(d=s.nextSibling))break;u=(s=u).parentNode}s=d}t=-1===r||-1===a?null:{start:r,end:a}}else t=null}t=t||{start:0,end:0}}else t=null;for(gI={focusedElem:e,selectionRange:t},Qg=!1,$C=g;null!==$C;)if(e=(g=$C).child,0!==(1028&g.subtreeFlags)&&null!==e)e.return=g,$C=e;else for(;null!==$C;){g=$C;try{var A=g.alternate;if(0!==(1024&g.flags))switch(g.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==A){var m=A.memoizedProps,b=A.memoizedState,Z=g.stateNode,p=Z.getSnapshotBeforeUpdate(g.elementType===g.type?m:bo(g.type,m),b);Z.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var h=g.stateNode.containerInfo;1===h.nodeType?h.textContent="":9===h.nodeType&&h.documentElement&&h.removeChild(h.documentElement);break;default:throw Error(o(163))}}catch(G){va(g,g.return,G)}if(null!==(e=g.sibling)){e.return=g.return,$C=e;break}$C=g.return}A=tr,tr=!1}(e,t),br(t,e),dn(gI),Qg=!!eI,gI=eI=null,e.current=t,pr(t,e,I),Oe(),Rr=r,pg=C,Vr.transition=l}else e.current=t;if(jr&&(jr=!1,Pr=e,Or=I),l=e.pendingLanes,0===l&&(Dr=null),function(e){if(og&&"function"===typeof og.onCommitFiberRoot)try{og.onCommitFiberRoot(Ig,e,void 0,128===(128&e.current.flags))}catch(g){}}(t.stateNode),Ia(e,qe()),null!==g)for(n=e.onRecoverableError,t=0;t<g.length;t++)I=g[t],n(I.value,{componentStack:I.stack,digest:I.digest});if(Lr)throw Lr=!1,e=Tr,Tr=null,e;0!==(1&Or)&&0!==e.tag&&Ba(),l=e.pendingLanes,0!==(1&l)?e===_r?qr++:(qr=0,_r=e):qr=0,MI()}(e,g,t,n)}finally{Vr.transition=I,pg=n}return null}function Ba(){if(null!==Pr){var e=hg(Or),g=Vr.transition,t=pg;try{if(Vr.transition=null,pg=16>e?16:e,null===Pr)var n=!1;else{if(e=Pr,Pr=null,Or=0,0!==(6&Rr))throw Error(o(331));var I=Rr;for(Rr|=4,$C=e.current;null!==$C;){var l=$C,C=l.child;if(0!==(16&$C.flags)){var r=l.deletions;if(null!==r){for(var a=0;a<r.length;a++){var i=r[a];for($C=i;null!==$C;){var c=$C;switch(c.tag){case 0:case 11:case 15:nr(8,c,l)}var s=c.child;if(null!==s)s.return=c,$C=s;else for(;null!==$C;){var u=(c=$C).sibling,d=c.return;if(lr(c),c===i){$C=null;break}if(null!==u){u.return=d,$C=u;break}$C=d}}}var A=l.alternate;if(null!==A){var m=A.child;if(null!==m){A.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(null!==m)}}$C=l}}if(0!==(2064&l.subtreeFlags)&&null!==C)C.return=l,$C=C;else e:for(;null!==$C;){if(0!==(2048&(l=$C).flags))switch(l.tag){case 0:case 11:case 15:nr(9,l,l.return)}var Z=l.sibling;if(null!==Z){Z.return=l.return,$C=Z;break e}$C=l.return}}var p=e.current;for($C=p;null!==$C;){var h=(C=$C).child;if(0!==(2064&C.subtreeFlags)&&null!==h)h.return=C,$C=h;else e:for(C=p;null!==$C;){if(0!==(2048&(r=$C).flags))try{switch(r.tag){case 0:case 11:case 15:Ir(9,r)}}catch(y){va(r,r.return,y)}if(r===C){$C=null;break e}var G=r.sibling;if(null!==G){G.return=r.return,$C=G;break e}$C=r.return}}if(Rr=I,MI(),og&&"function"===typeof og.onPostCommitFiberRoot)try{og.onPostCommitFiberRoot(Ig,e)}catch(y){}n=!0}return n}finally{pg=t,Vr.transition=g}}return!1}function fa(e,g,t){e=wo(e,g=dC(0,g=iC(t,g),1),1),g=ga(),null!==e&&(bg(e,1,g),Ia(e,g))}function va(e,g,t){if(3===e.tag)fa(e,e,t);else for(;null!==g;){if(3===g.tag){fa(g,e,t);break}if(1===g.tag){var n=g.stateNode;if("function"===typeof g.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Dr||!Dr.has(n))){g=wo(g,e=AC(g,e=iC(t,e),1),1),e=ga(),null!==g&&(bg(g,1,e),Ia(g,e));break}}g=g.return}}function Sa(e,g,t){var n=e.pingCache;null!==n&&n.delete(g),g=ga(),e.pingedLanes|=e.suspendedLanes&t,Xr===e&&(Jr&t)===t&&(4===wr||3===wr&&(130023424&Jr)===Jr&&500>qe()-Mr?ua(e,0):xr|=t),Ia(e,g)}function Wa(e,g){0===g&&(0===(1&e.mode)?g=1:(g=ig,0===(130023424&(ig<<=1))&&(ig=4194304)));var t=ga();null!==(e=Xo(e,g))&&(bg(e,g,t),Ia(e,t))}function Va(e){var g=e.memoizedState,t=0;null!==g&&(t=g.retryLane),Wa(e,t)}function Ra(e,g){var t=0;switch(e.tag){case 13:var n=e.stateNode,I=e.memoizedState;null!==I&&(t=I.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(o(314))}null!==n&&n.delete(g),Wa(e,t)}function Xa(e,g){return De(e,g)}function ka(e,g,t,n){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ja(e,g,t,n){return new ka(e,g,t,n)}function Ya(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ha(e,g){var t=e.alternate;return null===t?((t=Ja(e.tag,g,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=g,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=14680064&e.flags,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,g=e.dependencies,t.dependencies=null===g?null:{lanes:g.lanes,firstContext:g.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function wa(e,g,t,n,I,l){var C=2;if(n=e,"function"===typeof e)Ya(e)&&(C=1);else if("string"===typeof e)C=5;else e:switch(e){case B:return Na(t.children,I,l,g);case f:C=8,I|=8;break;case v:return(e=Ja(12,t,g,2|I)).elementType=v,e.lanes=l,e;case R:return(e=Ja(13,t,g,I)).elementType=R,e.lanes=l,e;case X:return(e=Ja(19,t,g,I)).elementType=X,e.lanes=l,e;case Y:return Fa(t,I,l,g);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:C=10;break e;case W:C=9;break e;case V:C=11;break e;case k:C=14;break e;case J:C=16,n=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(g=Ja(C,t,g,I)).elementType=e,g.type=n,g.lanes=l,g}function Na(e,g,t,n){return(e=Ja(7,e,n,g)).lanes=t,e}function Fa(e,g,t,n){return(e=Ja(22,e,n,g)).elementType=Y,e.lanes=t,e.stateNode={isHidden:!1},e}function Ka(e,g,t){return(e=Ja(6,e,null,g)).lanes=t,e}function xa(e,g,t){return(g=Ja(4,null!==e.children?e.children:[],e.key,g)).lanes=t,g.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},g}function za(e,g,t,n,I){this.tag=g,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mg(0),this.expirationTimes=mg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mg(0),this.identifierPrefix=n,this.onRecoverableError=I,this.mutableSourceEagerHydrationData=null}function Ea(e,g,t,n,I,o,l,C,r){return e=new za(e,g,t,C,r),1===g?(g=1,!0===o&&(g|=8)):g=0,o=Ja(3,null,null,g),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jo(o),e}function Ma(e){if(!e)return WI;e:{if(Me(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var g=e;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(JI(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(null!==g);throw Error(o(171))}if(1===e.tag){var t=e.type;if(JI(t))return wI(e,t,g)}return g}function Ua(e,g,t,n,I,o,l,C,r){return(e=Ea(t,n,!0,e,0,o,0,C,r)).context=Ma(null),t=e.current,(o=Ho(n=ga(),I=ta(t))).callback=void 0!==g&&null!==g?g:null,wo(t,o,I),e.current.lanes=I,bg(e,I,n),Ia(e,n),e}function Qa(e,g,t,n){var I=g.current,o=ga(),l=ta(I);return t=Ma(t),null===g.context?g.context=t:g.pendingContext=t,(g=Ho(o,l)).payload={element:e},null!==(n=void 0===n?null:n)&&(g.callback=n),null!==(e=wo(I,g,l))&&(na(e,I,l,o),No(e,I,l)),l}function La(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ta(e,g){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<g?t:g}}function Da(e,g){Ta(e,g),(e=e.alternate)&&Ta(e,g)}fr=function(e,g,t){if(null!==e)if(e.memoizedProps!==g.pendingProps||RI.current)hC=!0;else{if(0===(e.lanes&t)&&0===(128&g.flags))return hC=!1,function(e,g,t){switch(g.tag){case 3:XC(g),uo();break;case 5:ll(g);break;case 1:JI(g.type)&&NI(g);break;case 4:Il(g,g.stateNode.containerInfo);break;case 10:var n=g.type._context,I=g.memoizedProps.value;SI(Zo,n._currentValue),n._currentValue=I;break;case 13:if(null!==(n=g.memoizedState))return null!==n.dehydrated?(SI(rl,1&rl.current),g.flags|=128,null):0!==(t&g.child.childLanes)?KC(e,g,t):(SI(rl,1&rl.current),null!==(e=LC(e,g,t))?e.sibling:null);SI(rl,1&rl.current);break;case 19:if(n=0!==(t&g.childLanes),0!==(128&e.flags)){if(n)return UC(e,g,t);g.flags|=128}if(null!==(I=g.memoizedState)&&(I.rendering=null,I.tail=null,I.lastEffect=null),SI(rl,rl.current),n)break;return null;case 22:case 23:return g.lanes=0,vC(e,g,t)}return LC(e,g,t)}(e,g,t);hC=0!==(131072&e.flags)}else hC=!1,Io&&0!==(1048576&g.flags)&&$I(g,TI,g.index);switch(g.lanes=0,g.tag){case 2:var n=g.type;QC(e,g),e=g.pendingProps;var I=kI(g,VI.current);vo(g,t),I=fl(null,g,n,e,I,t);var l=vl();return g.flags|=1,"object"===typeof I&&null!==I&&"function"===typeof I.render&&void 0===I.$$typeof?(g.tag=1,g.memoizedState=null,g.updateQueue=null,JI(n)?(l=!0,NI(g)):l=!1,g.memoizedState=null!==I.state&&void 0!==I.state?I.state:null,Jo(g),I.updater=Mo,g.stateNode=I,I._reactInternals=g,To(g,n,e,t),g=RC(null,g,n,!0,l,t)):(g.tag=0,Io&&l&&eo(g),GC(null,g,I,t),g=g.child),g;case 16:n=g.elementType;e:{switch(QC(e,g),e=g.pendingProps,n=(I=n._init)(n._payload),g.type=n,I=g.tag=function(e){if("function"===typeof e)return Ya(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===V)return 11;if(e===k)return 14}return 2}(n),e=bo(n,e),I){case 0:g=WC(null,g,n,e,t);break e;case 1:g=VC(null,g,n,e,t);break e;case 11:g=yC(null,g,n,e,t);break e;case 14:g=BC(null,g,n,bo(n.type,e),t);break e}throw Error(o(306,n,""))}return g;case 0:return n=g.type,I=g.pendingProps,WC(e,g,n,I=g.elementType===n?I:bo(n,I),t);case 1:return n=g.type,I=g.pendingProps,VC(e,g,n,I=g.elementType===n?I:bo(n,I),t);case 3:e:{if(XC(g),null===e)throw Error(o(387));n=g.pendingProps,I=(l=g.memoizedState).element,Yo(e,g),Ko(g,n,null,t);var C=g.memoizedState;if(n=C.element,l.isDehydrated){if(l={element:n,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},g.updateQueue.baseState=l,g.memoizedState=l,256&g.flags){g=kC(e,g,n,t,I=iC(Error(o(423)),g));break e}if(n!==I){g=kC(e,g,n,t,I=iC(Error(o(424)),g));break e}for(no=aI(g.stateNode.containerInfo.firstChild),to=g,Io=!0,oo=null,t=_o(g,null,n,t),g.child=t;t;)t.flags=-3&t.flags|4096,t=t.sibling}else{if(uo(),n===I){g=LC(e,g,t);break e}GC(e,g,n,t)}g=g.child}return g;case 5:return ll(g),null===e&&ao(g),n=g.type,I=g.pendingProps,l=null!==e?e.memoizedProps:null,C=I.children,tI(n,I)?C=null:null!==l&&tI(n,l)&&(g.flags|=32),SC(e,g),GC(e,g,C,t),g.child;case 6:return null===e&&ao(g),null;case 13:return KC(e,g,t);case 4:return Il(g,g.stateNode.containerInfo),n=g.pendingProps,null===e?g.child=qo(g,null,n,t):GC(e,g,n,t),g.child;case 11:return n=g.type,I=g.pendingProps,yC(e,g,n,I=g.elementType===n?I:bo(n,I),t);case 7:return GC(e,g,g.pendingProps,t),g.child;case 8:case 12:return GC(e,g,g.pendingProps.children,t),g.child;case 10:e:{if(n=g.type._context,I=g.pendingProps,l=g.memoizedProps,C=I.value,SI(Zo,n._currentValue),n._currentValue=C,null!==l)if(ln(l.value,C)){if(l.children===I.children&&!RI.current){g=LC(e,g,t);break e}}else for(null!==(l=g.child)&&(l.return=g);null!==l;){var r=l.dependencies;if(null!==r){C=l.child;for(var a=r.firstContext;null!==a;){if(a.context===n){if(1===l.tag){(a=Ho(-1,t&-t)).tag=2;var i=l.updateQueue;if(null!==i){var c=(i=i.shared).pending;null===c?a.next=a:(a.next=c.next,c.next=a),i.pending=a}}l.lanes|=t,null!==(a=l.alternate)&&(a.lanes|=t),fo(l.return,t,g),r.lanes|=t;break}a=a.next}}else if(10===l.tag)C=l.type===g.type?null:l.child;else if(18===l.tag){if(null===(C=l.return))throw Error(o(341));C.lanes|=t,null!==(r=C.alternate)&&(r.lanes|=t),fo(C,t,g),C=l.sibling}else C=l.child;if(null!==C)C.return=l;else for(C=l;null!==C;){if(C===g){C=null;break}if(null!==(l=C.sibling)){l.return=C.return,C=l;break}C=C.return}l=C}GC(e,g,I.children,t),g=g.child}return g;case 9:return I=g.type,n=g.pendingProps.children,vo(g,t),n=n(I=So(I)),g.flags|=1,GC(e,g,n,t),g.child;case 14:return I=bo(n=g.type,g.pendingProps),BC(e,g,n,I=bo(n.type,I),t);case 15:return fC(e,g,g.type,g.pendingProps,t);case 17:return n=g.type,I=g.pendingProps,I=g.elementType===n?I:bo(n,I),QC(e,g),g.tag=1,JI(n)?(e=!0,NI(g)):e=!1,vo(g,t),Qo(g,n,I),To(g,n,I,t),RC(null,g,n,!0,e,t);case 19:return UC(e,g,t);case 22:return vC(e,g,t)}throw Error(o(156,g.tag))};var ja="function"===typeof reportError?reportError:function(e){console.error(e)};function Pa(e){this._internalRoot=e}function Oa(e){this._internalRoot=e}function qa(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function _a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $a(){}function ei(e,g,t,n,I){var o=t._reactRootContainer;if(o){var l=o;if("function"===typeof I){var C=I;I=function(){var e=La(l);C.call(e)}}Qa(g,l,e,I)}else l=function(e,g,t,n,I){if(I){if("function"===typeof n){var o=n;n=function(){var e=La(l);o.call(e)}}var l=Ua(g,n,e,0,null,!1,0,"",$a);return e._reactRootContainer=l,e[dI]=l.current,Mn(8===e.nodeType?e.parentNode:e),ca(),l}for(;I=e.lastChild;)e.removeChild(I);if("function"===typeof n){var C=n;n=function(){var e=La(r);C.call(e)}}var r=Ea(e,0,!1,null,0,!1,0,"",$a);return e._reactRootContainer=r,e[dI]=r.current,Mn(8===e.nodeType?e.parentNode:e),ca((function(){Qa(g,r,t,n)})),r}(t,g,e,I,n);return La(l)}Oa.prototype.render=Pa.prototype.render=function(e){var g=this._internalRoot;if(null===g)throw Error(o(409));Qa(e,g,null,null)},Oa.prototype.unmount=Pa.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var g=e.containerInfo;ca((function(){Qa(null,e,null,null)})),g[dI]=null}},Oa.prototype.unstable_scheduleHydration=function(e){if(e){var g=fg();e={blockedOn:null,target:e,priority:g};for(var t=0;t<Yg.length&&0!==g&&g<Yg[t].priority;t++);Yg.splice(t,0,e),0===t&&Fg(e)}},Gg=function(e){switch(e.tag){case 3:var g=e.stateNode;if(g.current.memoizedState.isDehydrated){var t=cg(g.pendingLanes);0!==t&&(Zg(g,1|t),Ia(g,qe()),0===(6&Rr)&&(Ur=qe()+500,MI()))}break;case 13:ca((function(){var g=Xo(e,1);if(null!==g){var t=ga();na(g,e,1,t)}})),Da(e,1)}},yg=function(e){if(13===e.tag){var g=Xo(e,134217728);if(null!==g)na(g,e,134217728,ga());Da(e,134217728)}},Bg=function(e){if(13===e.tag){var g=ta(e),t=Xo(e,g);if(null!==t)na(t,e,g,ga());Da(e,g)}},fg=function(){return pg},vg=function(e,g){var t=pg;try{return pg=e,g()}finally{pg=t}},ye=function(e,g,t){switch(g){case"input":if(_(e,t),g=t.name,"radio"===t.type&&null!=g){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<t.length;g++){var n=t[g];if(n!==e&&n.form===e.form){var I=GI(n);if(!I)throw Error(o(90));D(n),_(n,I)}}}break;case"textarea":oe(e,t);break;case"select":null!=(g=t.value)&&te(e,!!t.multiple,g,!1)}},Ve=ia,Re=ca;var gi={usingClientEntryPoint:!1,Events:[pI,hI,GI,Se,We,ia]},ti={findFiberByHostInstance:ZI,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ni={bundleType:ti.bundleType,version:ti.version,rendererPackageName:ti.rendererPackageName,rendererConfig:ti.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Le(e))?null:e.stateNode},findFiberByHostInstance:ti.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ii=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ii.isDisabled&&Ii.supportsFiber)try{Ig=Ii.inject(ni),og=Ii}catch(ie){}}g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gi,g.createPortal=function(e,g){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qa(g))throw Error(o(200));return function(e,g,t){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:y,key:null==n?null:""+n,children:e,containerInfo:g,implementation:t}}(e,g,null,t)},g.createRoot=function(e,g){if(!qa(e))throw Error(o(299));var t=!1,n="",I=ja;return null!==g&&void 0!==g&&(!0===g.unstable_strictMode&&(t=!0),void 0!==g.identifierPrefix&&(n=g.identifierPrefix),void 0!==g.onRecoverableError&&(I=g.onRecoverableError)),g=Ea(e,1,!1,null,0,t,0,n,I),e[dI]=g.current,Mn(8===e.nodeType?e.parentNode:e),new Pa(g)},g.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var g=e._reactInternals;if(void 0===g){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Le(g))?null:e.stateNode},g.flushSync=function(e){return ca(e)},g.hydrate=function(e,g,t){if(!_a(g))throw Error(o(200));return ei(null,e,g,!0,t)},g.hydrateRoot=function(e,g,t){if(!qa(e))throw Error(o(405));var n=null!=t&&t.hydratedSources||null,I=!1,l="",C=ja;if(null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(I=!0),void 0!==t.identifierPrefix&&(l=t.identifierPrefix),void 0!==t.onRecoverableError&&(C=t.onRecoverableError)),g=Ua(g,null,e,1,null!=t?t:null,I,0,l,C),e[dI]=g.current,Mn(e),n)for(e=0;e<n.length;e++)I=(I=(t=n[e])._getVersion)(t._source),null==g.mutableSourceEagerHydrationData?g.mutableSourceEagerHydrationData=[t,I]:g.mutableSourceEagerHydrationData.push(t,I);return new Oa(g)},g.render=function(e,g,t){if(!_a(g))throw Error(o(200));return ei(null,e,g,!1,t)},g.unmountComponentAtNode=function(e){if(!_a(e))throw Error(o(40));return!!e._reactRootContainer&&(ca((function(){ei(null,null,e,!1,(function(){e._reactRootContainer=null,e[dI]=null}))})),!0)},g.unstable_batchedUpdates=ia,g.unstable_renderSubtreeIntoContainer=function(e,g,t,n){if(!_a(t))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ei(e,g,t,!1,n)},g.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,g,t){"use strict";var n=t(4164);g.createRoot=n.createRoot,g.hydrateRoot=n.hydrateRoot},4164:function(e,g,t){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(g){console.error(g)}}(),e.exports=t(4463)},9008:function(e,g,t){e.exports=function(e){"use strict";function g(e){if(e&&e.__esModule)return e;var g=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(g,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),g.default=e,Object.freeze(g)}var t=g(e);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},n.apply(this,arguments)}function I(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function o(e){if(Array.isArray(e))return e}function l(e,g){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,I,o=[],l=!0,C=!1;try{for(t=t.call(e);!(l=(n=t.next()).done)&&(o.push(n.value),!g||o.length!==g);l=!0);}catch(r){C=!0,I=r}finally{try{l||null==t.return||t.return()}finally{if(C)throw I}}return o}}function C(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,n=new Array(g);t<g;t++)n[t]=e[t];return n}function r(e,g){if(e){if("string"===typeof e)return C(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?C(e,g):void 0}}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,g){return o(e)||l(e,g)||r(e,g)||a()}function c(e,g){if(null==e)return{};var t,n,I={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}function s(e,g){if(null==e)return{};var t,n,I=c(e,g);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],g.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(I[t]=e[t])}return I}var u={exports:{}},d={exports:{}},A={},m="function"===typeof Symbol&&Symbol.for,b=m?Symbol.for("react.element"):60103,Z=m?Symbol.for("react.portal"):60106,p=m?Symbol.for("react.fragment"):60107,h=m?Symbol.for("react.strict_mode"):60108,G=m?Symbol.for("react.profiler"):60114,y=m?Symbol.for("react.provider"):60109,B=m?Symbol.for("react.context"):60110,f=m?Symbol.for("react.async_mode"):60111,v=m?Symbol.for("react.concurrent_mode"):60111,S=m?Symbol.for("react.forward_ref"):60112,W=m?Symbol.for("react.suspense"):60113,V=m?Symbol.for("react.suspense_list"):60120,R=m?Symbol.for("react.memo"):60115,X=m?Symbol.for("react.lazy"):60116,k=m?Symbol.for("react.block"):60121,J=m?Symbol.for("react.fundamental"):60117,Y=m?Symbol.for("react.responder"):60118,H=m?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var g=e.$$typeof;switch(g){case b:switch(e=e.type){case f:case v:case p:case G:case h:case W:return e;default:switch(e=e&&e.$$typeof){case B:case S:case X:case R:case y:return e;default:return g}}case Z:return g}}}function N(e){return w(e)===v}A.AsyncMode=f,A.ConcurrentMode=v,A.ContextConsumer=B,A.ContextProvider=y,A.Element=b,A.ForwardRef=S,A.Fragment=p,A.Lazy=X,A.Memo=R,A.Portal=Z,A.Profiler=G,A.StrictMode=h,A.Suspense=W,A.isAsyncMode=function(e){return N(e)||w(e)===f},A.isConcurrentMode=N,A.isContextConsumer=function(e){return w(e)===B},A.isContextProvider=function(e){return w(e)===y},A.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===b},A.isForwardRef=function(e){return w(e)===S},A.isFragment=function(e){return w(e)===p},A.isLazy=function(e){return w(e)===X},A.isMemo=function(e){return w(e)===R},A.isPortal=function(e){return w(e)===Z},A.isProfiler=function(e){return w(e)===G},A.isStrictMode=function(e){return w(e)===h},A.isSuspense=function(e){return w(e)===W},A.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===p||e===v||e===G||e===h||e===W||e===V||"object"===typeof e&&null!==e&&(e.$$typeof===X||e.$$typeof===R||e.$$typeof===y||e.$$typeof===B||e.$$typeof===S||e.$$typeof===J||e.$$typeof===Y||e.$$typeof===H||e.$$typeof===k)},A.typeOf=w,d.exports=A;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function F(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var g={},t=0;t<10;t++)g["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(g).map((function(e){return g[e]}));if("0123456789"!==n.join(""))return!1;var I={};return"abcdefghijklmnopqrst".split("").forEach((function(e){I[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},I)).join("")}catch(o){return!1}}F()&&Object.assign;var K="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function x(e,g,t,n,I){}Function.call.bind(Object.prototype.hasOwnProperty),x.resetWarningCache=function(){},d.exports;var z=K;function E(){}function M(){}M.resetWarningCache=E;var U=function(){function e(e,g,t,n,I,o){if(o!==z){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function g(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:g,element:e,elementType:e,instanceOf:g,node:e,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:M,resetWarningCache:E};return t.PropTypes=t,t};u.exports=U();var Q=u.exports;function L(e,g){var t=atob(e);if(g){for(var n=new Uint8Array(t.length),I=0,o=t.length;I<o;++I)n[I]=t.charCodeAt(I);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return t}function T(e,g,t){var n=void 0===g?null:g,I=L(e,void 0!==t&&t),o=I.indexOf("\n",10)+1,l=I.substring(o)+(n?"//# sourceMappingURL="+n:""),C=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(C)}function D(e,g,t){var n;return function(I){return n=n||T(e,g,t),new Worker(n,I)}}var j=D("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),P=["constraints","onError","onLoad","onScan","resolution","qrArea"];function O(e,g){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);g&&(n=n.filter((function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable}))),t.push.apply(t,n)}return t}function q(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{};g%2?O(Object(t),!0).forEach((function(g){I(e,g,t[g])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(t,g))}))}return e}var _=function(){return new j},$=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().forEach((function(g){e.removeTrack(g),g.stop()})),e.getAudioTracks().forEach((function(g){e.removeTrack(g),g.stop()}))):e.stop())},ee=function(e){var g=e.constraints,I=e.onError,o=e.onLoad,l=e.onScan,C=e.resolution,r=e.qrArea,a=s(e,P),c=t.useRef(null),u=t.useRef(null),d=t.useRef(document.createElement("canvas")),A=t.useRef(null),m=t.useRef(),b=i(t.useState(null),2),Z=b[0],p=b[1],h=t.useRef(!1),G=t.useRef();t.useEffect((function(){G.current=_();var e=G.current;return e.onmessage=function(e){l&&l(e.data?q(q({},e.data),{},{canvas:d.current}):null),h.current=!1},function(){e.terminate()}}),[l]);var y=JSON.stringify(r),B=t.useCallback((function(){var e=JSON.parse(y),g=G.current,t=u.current&&u.current.readyState===u.current.HAVE_ENOUGH_DATA;if(!h.current&&t){h.current=!0;var n,I=u.current.videoWidth,o=u.current.videoHeight,l=I>o?I:o,r=Math.floor(C/l*100)/100;o=Math.floor(r*o),I=Math.floor(r*I),d.current.width=I,d.current.height=o,A.current=d.current.getContext("2d"),A.current.drawImage(u.current,0,0,I,o),n=e&&2===e.length&&e[0]>0&&e[1]>0?A.current.getImageData(Math.floor((I-e[0])/2),Math.floor((o-e[1])/2),e[0],e[1]):A.current.getImageData(0,0,I,o),g.postMessage(n)}m.current=requestAnimationFrame(B)}),[C,y]),f=JSON.stringify(g);return t.useEffect((function(){var e=JSON.parse(f),g=!0;return navigator.mediaDevices.getUserMedia(e).then((function(e){if(g){c.current=e;try{u.current&&(u.current.srcObject=e,u.current.setAttribute("playsinline",!0))}catch(t){p(window.URL.createObjectURL(e))}o&&o(),m.current=requestAnimationFrame(B)}else $(e)})).catch((function(e){return g?I(e):null})),function(){cancelAnimationFrame(m.current),g=!1,$(c.current),Z&&window.URL.revokeObjectURL(Z)}}),[B,f,I,o,Z]),t.createElement("video",n({autoPlay:!0,playsInline:!0,src:Z,ref:u},a))};return ee.propTypes={constraints:Q.object,onError:Q.func.isRequired,onLoad:Q.func,onScan:Q.func.isRequired,resolution:Q.number,qrArea:Q.array},ee.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]},ee}(t(2791))},5590:function(e,g,t){"use strict";t.d(g,{j:function(){return l}});var n=t(4578),I=t(8846),o=t(1985),l=new(function(e){function g(){var g;return(g=e.call(this)||this).setup=function(e){var g;if(!o.sk&&(null==(g=window)?void 0:g.addEventListener)){var t=function(){return e()};return window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1),function(){window.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t)}}},g}(0,n.Z)(g,e);var t=g.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},t.setEventListener=function(e){var g,t=this;this.setup=e,null==(g=this.cleanup)||g.call(this),this.cleanup=e((function(e){"boolean"===typeof e?t.setFocused(e):t.onFocus()}))},t.setFocused=function(e){this.focused=e,e&&this.onFocus()},t.onFocus=function(){this.listeners.forEach((function(e){e()}))},t.isFocused=function(){return"boolean"===typeof this.focused?this.focused:"undefined"===typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},g}(I.l))},5708:function(e,g,t){"use strict";t.d(g,{QueryClient:function(){return n.S}});var n=t(7161),I=t(5044);t.o(I,"QueryClientProvider")&&t.d(g,{QueryClientProvider:function(){return I.QueryClientProvider}}),t.o(I,"useMutation")&&t.d(g,{useMutation:function(){return I.useMutation}}),t.o(I,"useQuery")&&t.d(g,{useQuery:function(){return I.useQuery}}),t.o(I,"useQueryClient")&&t.d(g,{useQueryClient:function(){return I.useQueryClient}})},209:function(e,g,t){"use strict";t.d(g,{E:function(){return o},j:function(){return I}});var n=console;function I(){return n}function o(e){n=e}},1909:function(e,g,t){"use strict";t.d(g,{R:function(){return a},m:function(){return r}});var n=t(7462),I=t(209),o=t(2363),l=t(6350),C=t(1985),r=function(){function e(e){this.options=(0,n.Z)({},e.defaultOptions,e.options),this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.observers=[],this.state=e.state||a(),this.meta=e.meta}var g=e.prototype;return g.setState=function(e){this.dispatch({type:"setState",state:e})},g.addObserver=function(e){-1===this.observers.indexOf(e)&&this.observers.push(e)},g.removeObserver=function(e){this.observers=this.observers.filter((function(g){return g!==e}))},g.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(C.ZT).catch(C.ZT)):Promise.resolve()},g.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},g.execute=function(){var e,g=this,t="loading"===this.state.status,n=Promise.resolve();return t||(this.dispatch({type:"loading",variables:this.options.variables}),n=n.then((function(){null==g.mutationCache.config.onMutate||g.mutationCache.config.onMutate(g.state.variables,g)})).then((function(){return null==g.options.onMutate?void 0:g.options.onMutate(g.state.variables)})).then((function(e){e!==g.state.context&&g.dispatch({type:"loading",context:e,variables:g.state.variables})}))),n.then((function(){return g.executeMutation()})).then((function(t){e=t,null==g.mutationCache.config.onSuccess||g.mutationCache.config.onSuccess(e,g.state.variables,g.state.context,g)})).then((function(){return null==g.options.onSuccess?void 0:g.options.onSuccess(e,g.state.variables,g.state.context)})).then((function(){return null==g.options.onSettled?void 0:g.options.onSettled(e,null,g.state.variables,g.state.context)})).then((function(){return g.dispatch({type:"success",data:e}),e})).catch((function(e){return null==g.mutationCache.config.onError||g.mutationCache.config.onError(e,g.state.variables,g.state.context,g),(0,I.j)().error(e),Promise.resolve().then((function(){return null==g.options.onError?void 0:g.options.onError(e,g.state.variables,g.state.context)})).then((function(){return null==g.options.onSettled?void 0:g.options.onSettled(void 0,e,g.state.variables,g.state.context)})).then((function(){throw g.dispatch({type:"error",error:e}),e}))}))},g.executeMutation=function(){var e,g=this;return this.retryer=new l.m4({fn:function(){return g.options.mutationFn?g.options.mutationFn(g.state.variables):Promise.reject("No mutationFn found")},onFail:function(){g.dispatch({type:"failed"})},onPause:function(){g.dispatch({type:"pause"})},onContinue:function(){g.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay}),this.retryer.promise},g.dispatch=function(e){var g=this;this.state=function(e,g){switch(g.type){case"failed":return(0,n.Z)({},e,{failureCount:e.failureCount+1});case"pause":return(0,n.Z)({},e,{isPaused:!0});case"continue":return(0,n.Z)({},e,{isPaused:!1});case"loading":return(0,n.Z)({},e,{context:g.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:g.variables});case"success":return(0,n.Z)({},e,{data:g.data,error:null,status:"success",isPaused:!1});case"error":return(0,n.Z)({},e,{data:void 0,error:g.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return(0,n.Z)({},e,g.state);default:return e}}(this.state,e),o.V.batch((function(){g.observers.forEach((function(g){g.onMutationUpdate(e)})),g.mutationCache.notify(g)}))},e}();function a(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}},2363:function(e,g,t){"use strict";t.d(g,{V:function(){return o}});var n=t(1985),I=function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(e){e()},this.batchNotifyFn=function(e){e()}}var g=e.prototype;return g.batch=function(e){var g;this.transactions++;try{g=e()}finally{this.transactions--,this.transactions||this.flush()}return g},g.schedule=function(e){var g=this;this.transactions?this.queue.push(e):(0,n.A4)((function(){g.notifyFn(e)}))},g.batchCalls=function(e){var g=this;return function(){for(var t=arguments.length,n=new Array(t),I=0;I<t;I++)n[I]=arguments[I];g.schedule((function(){e.apply(void 0,n)}))}},g.flush=function(){var e=this,g=this.queue;this.queue=[],g.length&&(0,n.A4)((function(){e.batchNotifyFn((function(){g.forEach((function(g){e.notifyFn(g)}))}))}))},g.setNotifyFunction=function(e){this.notifyFn=e},g.setBatchNotifyFunction=function(e){this.batchNotifyFn=e},e}(),o=new I},5503:function(e,g,t){"use strict";t.d(g,{N:function(){return l}});var n=t(4578),I=t(8846),o=t(1985),l=new(function(e){function g(){var g;return(g=e.call(this)||this).setup=function(e){var g;if(!o.sk&&(null==(g=window)?void 0:g.addEventListener)){var t=function(){return e()};return window.addEventListener("online",t,!1),window.addEventListener("offline",t,!1),function(){window.removeEventListener("online",t),window.removeEventListener("offline",t)}}},g}(0,n.Z)(g,e);var t=g.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},t.setEventListener=function(e){var g,t=this;this.setup=e,null==(g=this.cleanup)||g.call(this),this.cleanup=e((function(e){"boolean"===typeof e?t.setOnline(e):t.onOnline()}))},t.setOnline=function(e){this.online=e,e&&this.onOnline()},t.onOnline=function(){this.listeners.forEach((function(e){e()}))},t.isOnline=function(){return"boolean"===typeof this.online?this.online:"undefined"===typeof navigator||"undefined"===typeof navigator.onLine||navigator.onLine},g}(I.l))},7161:function(e,g,t){"use strict";t.d(g,{S:function(){return Z}});var n=t(7462),I=t(1985),o=t(4578),l=t(2363),C=t(209),r=t(6350),a=function(){function e(e){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=e.meta,this.scheduleGc()}var g=e.prototype;return g.setOptions=function(e){var g;this.options=(0,n.Z)({},this.defaultOptions,e),this.meta=null==e?void 0:e.meta,this.cacheTime=Math.max(this.cacheTime||0,null!=(g=this.options.cacheTime)?g:3e5)},g.setDefaultOptions=function(e){this.defaultOptions=e},g.scheduleGc=function(){var e=this;this.clearGcTimeout(),(0,I.PN)(this.cacheTime)&&(this.gcTimeout=setTimeout((function(){e.optionalRemove()}),this.cacheTime))},g.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},g.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},g.setData=function(e,g){var t,n,o=this.state.data,l=(0,I.SE)(e,o);return(null==(t=(n=this.options).isDataEqual)?void 0:t.call(n,o,l))?l=o:!1!==this.options.structuralSharing&&(l=(0,I.Q$)(o,l)),this.dispatch({data:l,type:"success",dataUpdatedAt:null==g?void 0:g.updatedAt}),l},g.setState=function(e,g){this.dispatch({type:"setState",state:e,setStateOptions:g})},g.cancel=function(e){var g,t=this.promise;return null==(g=this.retryer)||g.cancel(e),t?t.then(I.ZT).catch(I.ZT):Promise.resolve()},g.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},g.reset=function(){this.destroy(),this.setState(this.initialState)},g.isActive=function(){return this.observers.some((function(e){return!1!==e.options.enabled}))},g.isFetching=function(){return this.state.isFetching},g.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some((function(e){return e.getCurrentResult().isStale}))},g.isStaleByTime=function(e){return void 0===e&&(e=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!(0,I.Kp)(this.state.dataUpdatedAt,e)},g.onFocus=function(){var e,g=this.observers.find((function(e){return e.shouldFetchOnWindowFocus()}));g&&g.refetch(),null==(e=this.retryer)||e.continue()},g.onOnline=function(){var e,g=this.observers.find((function(e){return e.shouldFetchOnReconnect()}));g&&g.refetch(),null==(e=this.retryer)||e.continue()},g.addObserver=function(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))},g.removeObserver=function(e){-1!==this.observers.indexOf(e)&&(this.observers=this.observers.filter((function(g){return g!==e})),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:e}))},g.getObserversCount=function(){return this.observers.length},g.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},g.fetch=function(e,g){var t,n,o,l=this;if(this.state.isFetching)if(this.state.dataUpdatedAt&&(null==g?void 0:g.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var a;return null==(a=this.retryer)||a.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){var i=this.observers.find((function(e){return e.options.queryFn}));i&&this.setOptions(i.options)}var c=(0,I.mc)(this.queryKey),s=(0,I.G9)(),u={queryKey:c,pageParam:void 0,meta:this.meta};Object.defineProperty(u,"signal",{enumerable:!0,get:function(){if(s)return l.abortSignalConsumed=!0,s.signal}});var d,A,m={fetchOptions:g,options:this.options,queryKey:c,state:this.state,fetchFn:function(){return l.options.queryFn?(l.abortSignalConsumed=!1,l.options.queryFn(u)):Promise.reject("Missing queryFn")},meta:this.meta};(null==(t=this.options.behavior)?void 0:t.onFetch)&&(null==(d=this.options.behavior)||d.onFetch(m));(this.revertState=this.state,this.state.isFetching&&this.state.fetchMeta===(null==(n=m.fetchOptions)?void 0:n.meta))||this.dispatch({type:"fetch",meta:null==(A=m.fetchOptions)?void 0:A.meta});return this.retryer=new r.m4({fn:m.fetchFn,abort:null==s||null==(o=s.abort)?void 0:o.bind(s),onSuccess:function(e){l.setData(e),null==l.cache.config.onSuccess||l.cache.config.onSuccess(e,l),0===l.cacheTime&&l.optionalRemove()},onError:function(e){(0,r.DV)(e)&&e.silent||l.dispatch({type:"error",error:e}),(0,r.DV)(e)||(null==l.cache.config.onError||l.cache.config.onError(e,l),(0,C.j)().error(e)),0===l.cacheTime&&l.optionalRemove()},onFail:function(){l.dispatch({type:"failed"})},onPause:function(){l.dispatch({type:"pause"})},onContinue:function(){l.dispatch({type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay}),this.promise=this.retryer.promise,this.promise},g.dispatch=function(e){var g=this;this.state=this.reducer(this.state,e),l.V.batch((function(){g.observers.forEach((function(g){g.onQueryUpdate(e)})),g.cache.notify({query:g,type:"queryUpdated",action:e})}))},g.getDefaultState=function(e){var g="function"===typeof e.initialData?e.initialData():e.initialData,t="undefined"!==typeof e.initialData?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0,n="undefined"!==typeof g;return{data:g,dataUpdateCount:0,dataUpdatedAt:n?null!=t?t:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:n?"success":"idle"}},g.reducer=function(e,g){var t,I;switch(g.type){case"failed":return(0,n.Z)({},e,{fetchFailureCount:e.fetchFailureCount+1});case"pause":return(0,n.Z)({},e,{isPaused:!0});case"continue":return(0,n.Z)({},e,{isPaused:!1});case"fetch":return(0,n.Z)({},e,{fetchFailureCount:0,fetchMeta:null!=(t=g.meta)?t:null,isFetching:!0,isPaused:!1},!e.dataUpdatedAt&&{error:null,status:"loading"});case"success":return(0,n.Z)({},e,{data:g.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:null!=(I=g.dataUpdatedAt)?I:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var o=g.error;return(0,r.DV)(o)&&o.revert&&this.revertState?(0,n.Z)({},this.revertState):(0,n.Z)({},e,{error:o,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return(0,n.Z)({},e,{isInvalidated:!0});case"setState":return(0,n.Z)({},e,g.state);default:return e}},e}(),i=t(8846),c=function(e){function g(g){var t;return(t=e.call(this)||this).config=g||{},t.queries=[],t.queriesMap={},t}(0,o.Z)(g,e);var t=g.prototype;return t.build=function(e,g,t){var n,o=g.queryKey,l=null!=(n=g.queryHash)?n:(0,I.Rm)(o,g),C=this.get(l);return C||(C=new a({cache:this,queryKey:o,queryHash:l,options:e.defaultQueryOptions(g),state:t,defaultOptions:e.getQueryDefaults(o),meta:g.meta}),this.add(C)),C},t.add=function(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"queryAdded",query:e}))},t.remove=function(e){var g=this.queriesMap[e.queryHash];g&&(e.destroy(),this.queries=this.queries.filter((function(g){return g!==e})),g===e&&delete this.queriesMap[e.queryHash],this.notify({type:"queryRemoved",query:e}))},t.clear=function(){var e=this;l.V.batch((function(){e.queries.forEach((function(g){e.remove(g)}))}))},t.get=function(e){return this.queriesMap[e]},t.getAll=function(){return this.queries},t.find=function(e,g){var t=(0,I.I6)(e,g)[0];return"undefined"===typeof t.exact&&(t.exact=!0),this.queries.find((function(e){return(0,I._x)(t,e)}))},t.findAll=function(e,g){var t=(0,I.I6)(e,g)[0];return Object.keys(t).length>0?this.queries.filter((function(e){return(0,I._x)(t,e)})):this.queries},t.notify=function(e){var g=this;l.V.batch((function(){g.listeners.forEach((function(g){g(e)}))}))},t.onFocus=function(){var e=this;l.V.batch((function(){e.queries.forEach((function(e){e.onFocus()}))}))},t.onOnline=function(){var e=this;l.V.batch((function(){e.queries.forEach((function(e){e.onOnline()}))}))},g}(i.l),s=t(1909),u=function(e){function g(g){var t;return(t=e.call(this)||this).config=g||{},t.mutations=[],t.mutationId=0,t}(0,o.Z)(g,e);var t=g.prototype;return t.build=function(e,g,t){var n=new s.m({mutationCache:this,mutationId:++this.mutationId,options:e.defaultMutationOptions(g),state:t,defaultOptions:g.mutationKey?e.getMutationDefaults(g.mutationKey):void 0,meta:g.meta});return this.add(n),n},t.add=function(e){this.mutations.push(e),this.notify(e)},t.remove=function(e){this.mutations=this.mutations.filter((function(g){return g!==e})),e.cancel(),this.notify(e)},t.clear=function(){var e=this;l.V.batch((function(){e.mutations.forEach((function(g){e.remove(g)}))}))},t.getAll=function(){return this.mutations},t.find=function(e){return"undefined"===typeof e.exact&&(e.exact=!0),this.mutations.find((function(g){return(0,I.X7)(e,g)}))},t.findAll=function(e){return this.mutations.filter((function(g){return(0,I.X7)(e,g)}))},t.notify=function(e){var g=this;l.V.batch((function(){g.listeners.forEach((function(g){g(e)}))}))},t.onFocus=function(){this.resumePausedMutations()},t.onOnline=function(){this.resumePausedMutations()},t.resumePausedMutations=function(){var e=this.mutations.filter((function(e){return e.state.isPaused}));return l.V.batch((function(){return e.reduce((function(e,g){return e.then((function(){return g.continue().catch(I.ZT)}))}),Promise.resolve())}))},g}(i.l),d=t(5590),A=t(5503);function m(e,g){return null==e.getNextPageParam?void 0:e.getNextPageParam(g[g.length-1],g)}function b(e,g){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(g[0],g)}var Z=function(){function e(e){void 0===e&&(e={}),this.queryCache=e.queryCache||new c,this.mutationCache=e.mutationCache||new u,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var g=e.prototype;return g.mount=function(){var e=this;this.unsubscribeFocus=d.j.subscribe((function(){d.j.isFocused()&&A.N.isOnline()&&(e.mutationCache.onFocus(),e.queryCache.onFocus())})),this.unsubscribeOnline=A.N.subscribe((function(){d.j.isFocused()&&A.N.isOnline()&&(e.mutationCache.onOnline(),e.queryCache.onOnline())}))},g.unmount=function(){var e,g;null==(e=this.unsubscribeFocus)||e.call(this),null==(g=this.unsubscribeOnline)||g.call(this)},g.isFetching=function(e,g){var t=(0,I.I6)(e,g)[0];return t.fetching=!0,this.queryCache.findAll(t).length},g.isMutating=function(e){return this.mutationCache.findAll((0,n.Z)({},e,{fetching:!0})).length},g.getQueryData=function(e,g){var t;return null==(t=this.queryCache.find(e,g))?void 0:t.state.data},g.getQueriesData=function(e){return this.getQueryCache().findAll(e).map((function(e){return[e.queryKey,e.state.data]}))},g.setQueryData=function(e,g,t){var n=(0,I._v)(e),o=this.defaultQueryOptions(n);return this.queryCache.build(this,o).setData(g,t)},g.setQueriesData=function(e,g,t){var n=this;return l.V.batch((function(){return n.getQueryCache().findAll(e).map((function(e){var I=e.queryKey;return[I,n.setQueryData(I,g,t)]}))}))},g.getQueryState=function(e,g){var t;return null==(t=this.queryCache.find(e,g))?void 0:t.state},g.removeQueries=function(e,g){var t=(0,I.I6)(e,g)[0],n=this.queryCache;l.V.batch((function(){n.findAll(t).forEach((function(e){n.remove(e)}))}))},g.resetQueries=function(e,g,t){var o=this,C=(0,I.I6)(e,g,t),r=C[0],a=C[1],i=this.queryCache,c=(0,n.Z)({},r,{active:!0});return l.V.batch((function(){return i.findAll(r).forEach((function(e){e.reset()})),o.refetchQueries(c,a)}))},g.cancelQueries=function(e,g,t){var n=this,o=(0,I.I6)(e,g,t),C=o[0],r=o[1],a=void 0===r?{}:r;"undefined"===typeof a.revert&&(a.revert=!0);var i=l.V.batch((function(){return n.queryCache.findAll(C).map((function(e){return e.cancel(a)}))}));return Promise.all(i).then(I.ZT).catch(I.ZT)},g.invalidateQueries=function(e,g,t){var o,C,r,a=this,i=(0,I.I6)(e,g,t),c=i[0],s=i[1],u=(0,n.Z)({},c,{active:null==(o=null!=(C=c.refetchActive)?C:c.active)||o,inactive:null!=(r=c.refetchInactive)&&r});return l.V.batch((function(){return a.queryCache.findAll(c).forEach((function(e){e.invalidate()})),a.refetchQueries(u,s)}))},g.refetchQueries=function(e,g,t){var o=this,C=(0,I.I6)(e,g,t),r=C[0],a=C[1],i=l.V.batch((function(){return o.queryCache.findAll(r).map((function(e){return e.fetch(void 0,(0,n.Z)({},a,{meta:{refetchPage:null==r?void 0:r.refetchPage}}))}))})),c=Promise.all(i).then(I.ZT);return(null==a?void 0:a.throwOnError)||(c=c.catch(I.ZT)),c},g.fetchQuery=function(e,g,t){var n=(0,I._v)(e,g,t),o=this.defaultQueryOptions(n);"undefined"===typeof o.retry&&(o.retry=!1);var l=this.queryCache.build(this,o);return l.isStaleByTime(o.staleTime)?l.fetch(o):Promise.resolve(l.state.data)},g.prefetchQuery=function(e,g,t){return this.fetchQuery(e,g,t).then(I.ZT).catch(I.ZT)},g.fetchInfiniteQuery=function(e,g,t){var n=(0,I._v)(e,g,t);return n.behavior={onFetch:function(e){e.fetchFn=function(){var g,t,n,o,l,C,a,i=null==(g=e.fetchOptions)||null==(t=g.meta)?void 0:t.refetchPage,c=null==(n=e.fetchOptions)||null==(o=n.meta)?void 0:o.fetchMore,s=null==c?void 0:c.pageParam,u="forward"===(null==c?void 0:c.direction),d="backward"===(null==c?void 0:c.direction),A=(null==(l=e.state.data)?void 0:l.pages)||[],Z=(null==(C=e.state.data)?void 0:C.pageParams)||[],p=(0,I.G9)(),h=null==p?void 0:p.signal,G=Z,y=!1,B=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},f=function(e,g,t,n){return G=n?[g].concat(G):[].concat(G,[g]),n?[t].concat(e):[].concat(e,[t])},v=function(g,t,n,I){if(y)return Promise.reject("Cancelled");if("undefined"===typeof n&&!t&&g.length)return Promise.resolve(g);var o={queryKey:e.queryKey,signal:h,pageParam:n,meta:e.meta},l=B(o),C=Promise.resolve(l).then((function(e){return f(g,n,e,I)}));return(0,r.LE)(l)&&(C.cancel=l.cancel),C};if(A.length)if(u){var S="undefined"!==typeof s,W=S?s:m(e.options,A);a=v(A,S,W)}else if(d){var V="undefined"!==typeof s,R=V?s:b(e.options,A);a=v(A,V,R,!0)}else!function(){G=[];var g="undefined"===typeof e.options.getNextPageParam,t=!i||!A[0]||i(A[0],0,A);a=t?v([],g,Z[0]):Promise.resolve(f([],Z[0],A[0]));for(var n=function(t){a=a.then((function(n){if(!i||!A[t]||i(A[t],t,A)){var I=g?Z[t]:m(e.options,n);return v(n,g,I)}return Promise.resolve(f(n,Z[t],A[t]))}))},I=1;I<A.length;I++)n(I)}();else a=v([]);var X=a.then((function(e){return{pages:e,pageParams:G}}));return X.cancel=function(){y=!0,null==p||p.abort(),(0,r.LE)(a)&&a.cancel()},X}}},this.fetchQuery(n)},g.prefetchInfiniteQuery=function(e,g,t){return this.fetchInfiniteQuery(e,g,t).then(I.ZT).catch(I.ZT)},g.cancelMutations=function(){var e=this,g=l.V.batch((function(){return e.mutationCache.getAll().map((function(e){return e.cancel()}))}));return Promise.all(g).then(I.ZT).catch(I.ZT)},g.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},g.executeMutation=function(e){return this.mutationCache.build(this,e).execute()},g.getQueryCache=function(){return this.queryCache},g.getMutationCache=function(){return this.mutationCache},g.getDefaultOptions=function(){return this.defaultOptions},g.setDefaultOptions=function(e){this.defaultOptions=e},g.setQueryDefaults=function(e,g){var t=this.queryDefaults.find((function(g){return(0,I.yF)(e)===(0,I.yF)(g.queryKey)}));t?t.defaultOptions=g:this.queryDefaults.push({queryKey:e,defaultOptions:g})},g.getQueryDefaults=function(e){var g;return e?null==(g=this.queryDefaults.find((function(g){return(0,I.to)(e,g.queryKey)})))?void 0:g.defaultOptions:void 0},g.setMutationDefaults=function(e,g){var t=this.mutationDefaults.find((function(g){return(0,I.yF)(e)===(0,I.yF)(g.mutationKey)}));t?t.defaultOptions=g:this.mutationDefaults.push({mutationKey:e,defaultOptions:g})},g.getMutationDefaults=function(e){var g;return e?null==(g=this.mutationDefaults.find((function(g){return(0,I.to)(e,g.mutationKey)})))?void 0:g.defaultOptions:void 0},g.defaultQueryOptions=function(e){if(null==e?void 0:e._defaulted)return e;var g=(0,n.Z)({},this.defaultOptions.queries,this.getQueryDefaults(null==e?void 0:e.queryKey),e,{_defaulted:!0});return!g.queryHash&&g.queryKey&&(g.queryHash=(0,I.Rm)(g.queryKey,g)),g},g.defaultQueryObserverOptions=function(e){return this.defaultQueryOptions(e)},g.defaultMutationOptions=function(e){return(null==e?void 0:e._defaulted)?e:(0,n.Z)({},this.defaultOptions.mutations,this.getMutationDefaults(null==e?void 0:e.mutationKey),e,{_defaulted:!0})},g.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}()},6350:function(e,g,t){"use strict";t.d(g,{DV:function(){return a},LE:function(){return C},m4:function(){return i}});var n=t(5590),I=t(5503),o=t(1985);function l(e){return Math.min(1e3*Math.pow(2,e),3e4)}function C(e){return"function"===typeof(null==e?void 0:e.cancel)}var r=function(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent};function a(e){return e instanceof r}var i=function(e){var g,t,a,i,c=this,s=!1;this.abort=e.abort,this.cancel=function(e){return null==g?void 0:g(e)},this.cancelRetry=function(){s=!0},this.continueRetry=function(){s=!1},this.continue=function(){return null==t?void 0:t()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise((function(e,g){a=e,i=g}));var u=function(g){c.isResolved||(c.isResolved=!0,null==e.onSuccess||e.onSuccess(g),null==t||t(),a(g))},d=function(g){c.isResolved||(c.isResolved=!0,null==e.onError||e.onError(g),null==t||t(),i(g))};!function a(){if(!c.isResolved){var i;try{i=e.fn()}catch(A){i=Promise.reject(A)}g=function(e){if(!c.isResolved&&(d(new r(e)),null==c.abort||c.abort(),C(i)))try{i.cancel()}catch(g){}},c.isTransportCancelable=C(i),Promise.resolve(i).then(u).catch((function(g){var C,r;if(!c.isResolved){var i=null!=(C=e.retry)?C:3,u=null!=(r=e.retryDelay)?r:l,A="function"===typeof u?u(c.failureCount,g):u,m=!0===i||"number"===typeof i&&c.failureCount<i||"function"===typeof i&&i(c.failureCount,g);!s&&m?(c.failureCount++,null==e.onFail||e.onFail(c.failureCount,g),(0,o.Gh)(A).then((function(){if(!n.j.isFocused()||!I.N.isOnline())return new Promise((function(g){t=g,c.isPaused=!0,null==e.onPause||e.onPause()})).then((function(){t=void 0,c.isPaused=!1,null==e.onContinue||e.onContinue()}))})).then((function(){s?d(g):a()}))):d(g)}}))}}()}},8846:function(e,g,t){"use strict";t.d(g,{l:function(){return n}});var n=function(){function e(){this.listeners=[]}var g=e.prototype;return g.subscribe=function(e){var g=this,t=e||function(){};return this.listeners.push(t),this.onSubscribe(),function(){g.listeners=g.listeners.filter((function(e){return e!==t})),g.onUnsubscribe()}},g.hasListeners=function(){return this.listeners.length>0},g.onSubscribe=function(){},g.onUnsubscribe=function(){},e}()},5044:function(){},1985:function(e,g,t){"use strict";t.d(g,{A4:function(){return v},G9:function(){return S},Gh:function(){return f},I6:function(){return s},Kp:function(){return a},PN:function(){return C},Q$:function(){return p},Rm:function(){return A},SE:function(){return l},VS:function(){return h},X7:function(){return d},ZT:function(){return o},_v:function(){return i},_x:function(){return u},lV:function(){return c},mc:function(){return r},sk:function(){return I},to:function(){return b},yF:function(){return m}});var n=t(7462),I="undefined"===typeof window;function o(){}function l(e,g){return"function"===typeof e?e(g):e}function C(e){return"number"===typeof e&&e>=0&&e!==1/0}function r(e){return Array.isArray(e)?e:[e]}function a(e,g){return Math.max(e+(g||0)-Date.now(),0)}function i(e,g,t){return B(e)?"function"===typeof g?(0,n.Z)({},t,{queryKey:e,queryFn:g}):(0,n.Z)({},g,{queryKey:e}):e}function c(e,g,t){return B(e)?"function"===typeof g?(0,n.Z)({},t,{mutationKey:e,mutationFn:g}):(0,n.Z)({},g,{mutationKey:e}):"function"===typeof e?(0,n.Z)({},g,{mutationFn:e}):(0,n.Z)({},e)}function s(e,g,t){return B(e)?[(0,n.Z)({},g,{queryKey:e}),t]:[e||{},g]}function u(e,g){var t=e.active,n=e.exact,I=e.fetching,o=e.inactive,l=e.predicate,C=e.queryKey,r=e.stale;if(B(C))if(n){if(g.queryHash!==A(C,g.options))return!1}else if(!b(g.queryKey,C))return!1;var a=function(e,g){return!0===e&&!0===g||null==e&&null==g?"all":!1===e&&!1===g?"none":(null!=e?e:!g)?"active":"inactive"}(t,o);if("none"===a)return!1;if("all"!==a){var i=g.isActive();if("active"===a&&!i)return!1;if("inactive"===a&&i)return!1}return("boolean"!==typeof r||g.isStale()===r)&&(("boolean"!==typeof I||g.isFetching()===I)&&!(l&&!l(g)))}function d(e,g){var t=e.exact,n=e.fetching,I=e.predicate,o=e.mutationKey;if(B(o)){if(!g.options.mutationKey)return!1;if(t){if(m(g.options.mutationKey)!==m(o))return!1}else if(!b(g.options.mutationKey,o))return!1}return("boolean"!==typeof n||"loading"===g.state.status===n)&&!(I&&!I(g))}function A(e,g){return((null==g?void 0:g.queryKeyHashFn)||m)(e)}function m(e){var g,t=r(e);return g=t,JSON.stringify(g,(function(e,g){return G(g)?Object.keys(g).sort().reduce((function(e,t){return e[t]=g[t],e}),{}):g}))}function b(e,g){return Z(r(e),r(g))}function Z(e,g){return e===g||typeof e===typeof g&&(!(!e||!g||"object"!==typeof e||"object"!==typeof g)&&!Object.keys(g).some((function(t){return!Z(e[t],g[t])})))}function p(e,g){if(e===g)return e;var t=Array.isArray(e)&&Array.isArray(g);if(t||G(e)&&G(g)){for(var n=t?e.length:Object.keys(e).length,I=t?g:Object.keys(g),o=I.length,l=t?[]:{},C=0,r=0;r<o;r++){var a=t?r:I[r];l[a]=p(e[a],g[a]),l[a]===e[a]&&C++}return n===o&&C===n?e:l}return g}function h(e,g){if(e&&!g||g&&!e)return!1;for(var t in e)if(e[t]!==g[t])return!1;return!0}function G(e){if(!y(e))return!1;var g=e.constructor;if("undefined"===typeof g)return!0;var t=g.prototype;return!!y(t)&&!!t.hasOwnProperty("isPrototypeOf")}function y(e){return"[object Object]"===Object.prototype.toString.call(e)}function B(e){return"string"===typeof e||Array.isArray(e)}function f(e){return new Promise((function(g){setTimeout(g,e)}))}function v(e){Promise.resolve().then(e).catch((function(e){return setTimeout((function(){throw e}))}))}function S(){if("function"===typeof AbortController)return new AbortController}},1933:function(e,g,t){"use strict";t.d(g,{QueryClient:function(){return n.QueryClient},QueryClientProvider:function(){return I.QueryClientProvider},useMutation:function(){return I.useMutation},useQuery:function(){return I.useQuery},useQueryClient:function(){return I.useQueryClient}});var n=t(5708);t.o(n,"QueryClientProvider")&&t.d(g,{QueryClientProvider:function(){return n.QueryClientProvider}}),t.o(n,"useMutation")&&t.d(g,{useMutation:function(){return n.useMutation}}),t.o(n,"useQuery")&&t.d(g,{useQuery:function(){return n.useQuery}}),t.o(n,"useQueryClient")&&t.d(g,{useQueryClient:function(){return n.useQueryClient}});var I=t(5704)},5704:function(e,g,t){"use strict";t.d(g,{QueryClientProvider:function(){return s},useMutation:function(){return h},useQuery:function(){return k},useQueryClient:function(){return c}});var n=t(2363),I=t(4164).unstable_batchedUpdates;n.V.setBatchNotifyFunction(I);var o=t(209),l=console;(0,o.E)(l);var C=t(2791),r=C.createContext(void 0),a=C.createContext(!1);function i(e){return e&&"undefined"!==typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=r),window.ReactQueryClientContext):r}var c=function(){var e=C.useContext(i(C.useContext(a)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},s=function(e){var g=e.client,t=e.contextSharing,n=void 0!==t&&t,I=e.children;C.useEffect((function(){return g.mount(),function(){g.unmount()}}),[g]);var o=i(n);return C.createElement(a.Provider,{value:n},C.createElement(o.Provider,{value:g},I))},u=t(7462),d=t(1985),A=t(4578),m=t(1909),b=t(8846),Z=function(e){function g(g,t){var n;return(n=e.call(this)||this).client=g,n.setOptions(t),n.bindMethods(),n.updateResult(),n}(0,A.Z)(g,e);var t=g.prototype;return t.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},t.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},t.onUnsubscribe=function(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))},t.onMutationUpdate=function(e){this.updateResult();var g={listeners:!0};"success"===e.type?g.onSuccess=!0:"error"===e.type&&(g.onError=!0),this.notify(g)},t.getCurrentResult=function(){return this.currentResult},t.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},t.mutate=function(e,g){return this.mutateOptions=g,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,(0,u.Z)({},this.options,{variables:"undefined"!==typeof e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},t.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:(0,m.R)(),g=(0,u.Z)({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset});this.currentResult=g},t.notify=function(e){var g=this;n.V.batch((function(){g.mutateOptions&&(e.onSuccess?(null==g.mutateOptions.onSuccess||g.mutateOptions.onSuccess(g.currentResult.data,g.currentResult.variables,g.currentResult.context),null==g.mutateOptions.onSettled||g.mutateOptions.onSettled(g.currentResult.data,null,g.currentResult.variables,g.currentResult.context)):e.onError&&(null==g.mutateOptions.onError||g.mutateOptions.onError(g.currentResult.error,g.currentResult.variables,g.currentResult.context),null==g.mutateOptions.onSettled||g.mutateOptions.onSettled(void 0,g.currentResult.error,g.currentResult.variables,g.currentResult.context))),e.listeners&&g.listeners.forEach((function(e){e(g.currentResult)}))}))},g}(b.l);function p(e,g,t){return"function"===typeof g?g.apply(void 0,t):"boolean"===typeof g?g:!!e}function h(e,g,t){var I=C.useRef(!1),o=C.useState(0)[1],l=(0,d.lV)(e,g,t),r=c(),a=C.useRef();a.current?a.current.setOptions(l):a.current=new Z(r,l);var i=a.current.getCurrentResult();C.useEffect((function(){I.current=!0;var e=a.current.subscribe(n.V.batchCalls((function(){I.current&&o((function(e){return e+1}))})));return function(){I.current=!1,e()}}),[]);var s=C.useCallback((function(e,g){a.current.mutate(e,g).catch(d.ZT)}),[]);if(i.error&&p(void 0,a.current.options.useErrorBoundary,[i.error]))throw i.error;return(0,u.Z)({},i,{mutate:s,mutateAsync:i.mutate})}var G=t(5590),y=t(6350),B=function(e){function g(g,t){var n;return(n=e.call(this)||this).client=g,n.options=t,n.trackedProps=[],n.selectError=null,n.bindMethods(),n.setOptions(t),n}(0,A.Z)(g,e);var t=g.prototype;return t.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},t.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),f(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},t.onUnsubscribe=function(){this.listeners.length||this.destroy()},t.shouldFetchOnReconnect=function(){return v(this.currentQuery,this.options,this.options.refetchOnReconnect)},t.shouldFetchOnWindowFocus=function(){return v(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},t.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},t.setOptions=function(e,g){var t=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(e),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=t.queryKey),this.updateQuery();var I=this.hasListeners();I&&S(this.currentQuery,n,this.options,t)&&this.executeFetch(),this.updateResult(g),!I||this.currentQuery===n&&this.options.enabled===t.enabled&&this.options.staleTime===t.staleTime||this.updateStaleTimeout();var o=this.computeRefetchInterval();!I||this.currentQuery===n&&this.options.enabled===t.enabled&&o===this.currentRefetchInterval||this.updateRefetchInterval(o)},t.getOptimisticResult=function(e){var g=this.client.defaultQueryObserverOptions(e),t=this.client.getQueryCache().build(this.client,g);return this.createResult(t,g)},t.getCurrentResult=function(){return this.currentResult},t.trackResult=function(e,g){var t=this,n={},I=function(e){t.trackedProps.includes(e)||t.trackedProps.push(e)};return Object.keys(e).forEach((function(g){Object.defineProperty(n,g,{configurable:!1,enumerable:!0,get:function(){return I(g),e[g]}})})),(g.useErrorBoundary||g.suspense)&&I("error"),n},t.getNextResult=function(e){var g=this;return new Promise((function(t,n){var I=g.subscribe((function(g){g.isFetching||(I(),g.isError&&(null==e?void 0:e.throwOnError)?n(g.error):t(g))}))}))},t.getCurrentQuery=function(){return this.currentQuery},t.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},t.refetch=function(e){return this.fetch((0,u.Z)({},e,{meta:{refetchPage:null==e?void 0:e.refetchPage}}))},t.fetchOptimistic=function(e){var g=this,t=this.client.defaultQueryObserverOptions(e),n=this.client.getQueryCache().build(this.client,t);return n.fetch().then((function(){return g.createResult(n,t)}))},t.fetch=function(e){var g=this;return this.executeFetch(e).then((function(){return g.updateResult(),g.currentResult}))},t.executeFetch=function(e){this.updateQuery();var g=this.currentQuery.fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(g=g.catch(d.ZT)),g},t.updateStaleTimeout=function(){var e=this;if(this.clearStaleTimeout(),!d.sk&&!this.currentResult.isStale&&(0,d.PN)(this.options.staleTime)){var g=(0,d.Kp)(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout((function(){e.currentResult.isStale||e.updateResult()}),g)}},t.computeRefetchInterval=function(){var e;return"function"===typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e},t.updateRefetchInterval=function(e){var g=this;this.clearRefetchInterval(),this.currentRefetchInterval=e,!d.sk&&!1!==this.options.enabled&&(0,d.PN)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval((function(){(g.options.refetchIntervalInBackground||G.j.isFocused())&&g.executeFetch()}),this.currentRefetchInterval))},t.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},t.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},t.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},t.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},t.createResult=function(e,g){var t,n=this.currentQuery,I=this.options,l=this.currentResult,C=this.currentResultState,r=this.currentResultOptions,a=e!==n,i=a?e.state:this.currentQueryInitialState,c=a?this.currentResult:this.previousQueryResult,s=e.state,u=s.dataUpdatedAt,A=s.error,m=s.errorUpdatedAt,b=s.isFetching,Z=s.status,p=!1,h=!1;if(g.optimisticResults){var G=this.hasListeners(),y=!G&&f(e,g),B=G&&S(e,n,g,I);(y||B)&&(b=!0,u||(Z="loading"))}if(g.keepPreviousData&&!s.dataUpdateCount&&(null==c?void 0:c.isSuccess)&&"error"!==Z)t=c.data,u=c.dataUpdatedAt,Z=c.status,p=!0;else if(g.select&&"undefined"!==typeof s.data)if(l&&s.data===(null==C?void 0:C.data)&&g.select===this.selectFn)t=this.selectResult;else try{this.selectFn=g.select,t=g.select(s.data),!1!==g.structuralSharing&&(t=(0,d.Q$)(null==l?void 0:l.data,t)),this.selectResult=t,this.selectError=null}catch(V){(0,o.j)().error(V),this.selectError=V}else t=s.data;if("undefined"!==typeof g.placeholderData&&"undefined"===typeof t&&("loading"===Z||"idle"===Z)){var v;if((null==l?void 0:l.isPlaceholderData)&&g.placeholderData===(null==r?void 0:r.placeholderData))v=l.data;else if(v="function"===typeof g.placeholderData?g.placeholderData():g.placeholderData,g.select&&"undefined"!==typeof v)try{v=g.select(v),!1!==g.structuralSharing&&(v=(0,d.Q$)(null==l?void 0:l.data,v)),this.selectError=null}catch(V){(0,o.j)().error(V),this.selectError=V}"undefined"!==typeof v&&(Z="success",t=v,h=!0)}return this.selectError&&(A=this.selectError,t=this.selectResult,m=Date.now(),Z="error"),{status:Z,isLoading:"loading"===Z,isSuccess:"success"===Z,isError:"error"===Z,isIdle:"idle"===Z,data:t,dataUpdatedAt:u,error:A,errorUpdatedAt:m,failureCount:s.fetchFailureCount,errorUpdateCount:s.errorUpdateCount,isFetched:s.dataUpdateCount>0||s.errorUpdateCount>0,isFetchedAfterMount:s.dataUpdateCount>i.dataUpdateCount||s.errorUpdateCount>i.errorUpdateCount,isFetching:b,isRefetching:b&&"loading"!==Z,isLoadingError:"error"===Z&&0===s.dataUpdatedAt,isPlaceholderData:h,isPreviousData:p,isRefetchError:"error"===Z&&0!==s.dataUpdatedAt,isStale:W(e,g),refetch:this.refetch,remove:this.remove}},t.shouldNotifyListeners=function(e,g){if(!g)return!0;var t=this.options,n=t.notifyOnChangeProps,I=t.notifyOnChangePropsExclusions;if(!n&&!I)return!0;if("tracked"===n&&!this.trackedProps.length)return!0;var o="tracked"===n?this.trackedProps:n;return Object.keys(e).some((function(t){var n=t,l=e[n]!==g[n],C=null==o?void 0:o.some((function(e){return e===t})),r=null==I?void 0:I.some((function(e){return e===t}));return l&&!r&&(!o||C)}))},t.updateResult=function(e){var g=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!(0,d.VS)(this.currentResult,g)){var t={cache:!0};!1!==(null==e?void 0:e.listeners)&&this.shouldNotifyListeners(this.currentResult,g)&&(t.listeners=!0),this.notify((0,u.Z)({},t,e))}},t.updateQuery=function(){var e=this.client.getQueryCache().build(this.client,this.options);if(e!==this.currentQuery){var g=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==g||g.removeObserver(this),e.addObserver(this))}},t.onQueryUpdate=function(e){var g={};"success"===e.type?g.onSuccess=!0:"error"!==e.type||(0,y.DV)(e.error)||(g.onError=!0),this.updateResult(g),this.hasListeners()&&this.updateTimers()},t.notify=function(e){var g=this;n.V.batch((function(){e.onSuccess?(null==g.options.onSuccess||g.options.onSuccess(g.currentResult.data),null==g.options.onSettled||g.options.onSettled(g.currentResult.data,null)):e.onError&&(null==g.options.onError||g.options.onError(g.currentResult.error),null==g.options.onSettled||g.options.onSettled(void 0,g.currentResult.error)),e.listeners&&g.listeners.forEach((function(e){e(g.currentResult)})),e.cache&&g.client.getQueryCache().notify({query:g.currentQuery,type:"observerResultsUpdated"})}))},g}(b.l);function f(e,g){return function(e,g){return!1!==g.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===g.retryOnMount)}(e,g)||e.state.dataUpdatedAt>0&&v(e,g,g.refetchOnMount)}function v(e,g,t){if(!1!==g.enabled){var n="function"===typeof t?t(e):t;return"always"===n||!1!==n&&W(e,g)}return!1}function S(e,g,t,n){return!1!==t.enabled&&(e!==g||!1===n.enabled)&&(!t.suspense||"error"!==e.state.status)&&W(e,t)}function W(e,g){return e.isStaleByTime(g.staleTime)}function V(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var R=C.createContext(V()),X=function(){return C.useContext(R)};function k(e,g,t){return function(e,g){var t=C.useRef(!1),I=C.useState(0)[1],o=c(),l=X(),r=o.defaultQueryObserverOptions(e);r.optimisticResults=!0,r.onError&&(r.onError=n.V.batchCalls(r.onError)),r.onSuccess&&(r.onSuccess=n.V.batchCalls(r.onSuccess)),r.onSettled&&(r.onSettled=n.V.batchCalls(r.onSettled)),r.suspense&&("number"!==typeof r.staleTime&&(r.staleTime=1e3),0===r.cacheTime&&(r.cacheTime=1)),(r.suspense||r.useErrorBoundary)&&(l.isReset()||(r.retryOnMount=!1));var a=C.useState((function(){return new g(o,r)}))[0],i=a.getOptimisticResult(r);if(C.useEffect((function(){t.current=!0,l.clearReset();var e=a.subscribe(n.V.batchCalls((function(){t.current&&I((function(e){return e+1}))})));return a.updateResult(),function(){t.current=!1,e()}}),[l,a]),C.useEffect((function(){a.setOptions(r,{listeners:!1})}),[r,a]),r.suspense&&i.isLoading)throw a.fetchOptimistic(r).then((function(e){var g=e.data;null==r.onSuccess||r.onSuccess(g),null==r.onSettled||r.onSettled(g,null)})).catch((function(e){l.clearReset(),null==r.onError||r.onError(e),null==r.onSettled||r.onSettled(void 0,e)}));if(i.isError&&!l.isReset()&&!i.isFetching&&p(r.suspense,r.useErrorBoundary,[i.error,a.getCurrentQuery()]))throw i.error;return"tracked"===r.notifyOnChangeProps&&(i=a.trackResult(i,r)),i}((0,d._v)(e,g,t),B)}},1146:function(e,g,t){var n,I;"undefined"!=typeof self&&self,e.exports=(n=t(2791),I=t(4164),function(){"use strict";var e={655:function(e,g,t){t.r(g),t.d(g,{__assign:function(){return o},__asyncDelegator:function(){return v},__asyncGenerator:function(){return f},__asyncValues:function(){return S},__await:function(){return B},__awaiter:function(){return d},__classPrivateFieldGet:function(){return k},__classPrivateFieldIn:function(){return Y},__classPrivateFieldSet:function(){return J},__createBinding:function(){return m},__decorate:function(){return C},__esDecorate:function(){return a},__exportStar:function(){return b},__extends:function(){return I},__generator:function(){return A},__importDefault:function(){return X},__importStar:function(){return R},__makeTemplateObject:function(){return W},__metadata:function(){return u},__param:function(){return r},__propKey:function(){return c},__read:function(){return p},__rest:function(){return l},__runInitializers:function(){return i},__setFunctionName:function(){return s},__spread:function(){return h},__spreadArray:function(){return y},__spreadArrays:function(){return G},__values:function(){return Z}});var n=function(e,g){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,g){e.__proto__=g}||function(e,g){for(var t in g)Object.prototype.hasOwnProperty.call(g,t)&&(e[t]=g[t])},n(e,g)};function I(e,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function t(){this.constructor=e}n(e,g),e.prototype=null===g?Object.create(g):(t.prototype=g.prototype,new t)}var o=function(){return o=Object.assign||function(e){for(var g,t=1,n=arguments.length;t<n;t++)for(var I in g=arguments[t])Object.prototype.hasOwnProperty.call(g,I)&&(e[I]=g[I]);return e},o.apply(this,arguments)};function l(e,g){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&g.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var I=0;for(n=Object.getOwnPropertySymbols(e);I<n.length;I++)g.indexOf(n[I])<0&&Object.prototype.propertyIsEnumerable.call(e,n[I])&&(t[n[I]]=e[n[I]])}return t}function C(e,g,t,n){var I,o=arguments.length,l=o<3?g:null===n?n=Object.getOwnPropertyDescriptor(g,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,g,t,n);else for(var C=e.length-1;C>=0;C--)(I=e[C])&&(l=(o<3?I(l):o>3?I(g,t,l):I(g,t))||l);return o>3&&l&&Object.defineProperty(g,t,l),l}function r(e,g){return function(t,n){g(t,n,e)}}function a(e,g,t,n,I,o){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var C,r=n.kind,a="getter"===r?"get":"setter"===r?"set":"value",i=!g&&e?n.static?e:e.prototype:null,c=g||(i?Object.getOwnPropertyDescriptor(i,n.name):{}),s=!1,u=t.length-1;u>=0;u--){var d={};for(var A in n)d[A]="access"===A?{}:n[A];for(var A in n.access)d.access[A]=n.access[A];d.addInitializer=function(e){if(s)throw new TypeError("Cannot add initializers after decoration has completed");o.push(l(e||null))};var m=(0,t[u])("accessor"===r?{get:c.get,set:c.set}:c[a],d);if("accessor"===r){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(C=l(m.get))&&(c.get=C),(C=l(m.set))&&(c.set=C),(C=l(m.init))&&I.push(C)}else(C=l(m))&&("field"===r?I.push(C):c[a]=C)}i&&Object.defineProperty(i,n.name,c),s=!0}function i(e,g,t){for(var n=arguments.length>2,I=0;I<g.length;I++)t=n?g[I].call(e,t):g[I].call(e);return n?t:void 0}function c(e){return"symbol"==typeof e?e:"".concat(e)}function s(e,g,t){return"symbol"==typeof g&&(g=g.description?"[".concat(g.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:t?"".concat(t," ",g):g})}function u(e,g){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,g)}function d(e,g,t,n){return new(t||(t=Promise))((function(I,o){function l(e){try{r(n.next(e))}catch(e){o(e)}}function C(e){try{r(n.throw(e))}catch(e){o(e)}}function r(e){var g;e.done?I(e.value):(g=e.value,g instanceof t?g:new t((function(e){e(g)}))).then(l,C)}r((n=n.apply(e,g||[])).next())}))}function A(e,g){var t,n,I,o,l={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return o={next:C(0),throw:C(1),return:C(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function C(C){return function(r){return function(C){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,C[0]&&(l=0)),l;)try{if(t=1,n&&(I=2&C[0]?n.return:C[0]?n.throw||((I=n.return)&&I.call(n),0):n.next)&&!(I=I.call(n,C[1])).done)return I;switch(n=0,I&&(C=[2&C[0],I.value]),C[0]){case 0:case 1:I=C;break;case 4:return l.label++,{value:C[1],done:!1};case 5:l.label++,n=C[1],C=[0];continue;case 7:C=l.ops.pop(),l.trys.pop();continue;default:if(!((I=(I=l.trys).length>0&&I[I.length-1])||6!==C[0]&&2!==C[0])){l=0;continue}if(3===C[0]&&(!I||C[1]>I[0]&&C[1]<I[3])){l.label=C[1];break}if(6===C[0]&&l.label<I[1]){l.label=I[1],I=C;break}if(I&&l.label<I[2]){l.label=I[2],l.ops.push(C);break}I[2]&&l.ops.pop(),l.trys.pop();continue}C=g.call(e,l)}catch(e){C=[6,e],n=0}finally{t=I=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,r])}}}var m=Object.create?function(e,g,t,n){void 0===n&&(n=t);var I=Object.getOwnPropertyDescriptor(g,t);I&&!("get"in I?!g.__esModule:I.writable||I.configurable)||(I={enumerable:!0,get:function(){return g[t]}}),Object.defineProperty(e,n,I)}:function(e,g,t,n){void 0===n&&(n=t),e[n]=g[t]};function b(e,g){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(g,t)||m(g,e,t)}function Z(e){var g="function"==typeof Symbol&&Symbol.iterator,t=g&&e[g],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,g){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,I,o=t.call(e),l=[];try{for(;(void 0===g||g-- >0)&&!(n=o.next()).done;)l.push(n.value)}catch(e){I={error:e}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(I)throw I.error}}return l}function h(){for(var e=[],g=0;g<arguments.length;g++)e=e.concat(p(arguments[g]));return e}function G(){for(var e=0,g=0,t=arguments.length;g<t;g++)e+=arguments[g].length;var n=Array(e),I=0;for(g=0;g<t;g++)for(var o=arguments[g],l=0,C=o.length;l<C;l++,I++)n[I]=o[l];return n}function y(e,g,t){if(t||2===arguments.length)for(var n,I=0,o=g.length;I<o;I++)!n&&I in g||(n||(n=Array.prototype.slice.call(g,0,I)),n[I]=g[I]);return e.concat(n||Array.prototype.slice.call(g))}function B(e){return this instanceof B?(this.v=e,this):new B(e)}function f(e,g,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,I=t.apply(e,g||[]),o=[];return n={},l("next"),l("throw"),l("return"),n[Symbol.asyncIterator]=function(){return this},n;function l(e){I[e]&&(n[e]=function(g){return new Promise((function(t,n){o.push([e,g,t,n])>1||C(e,g)}))})}function C(e,g){try{(t=I[e](g)).value instanceof B?Promise.resolve(t.value.v).then(r,a):i(o[0][2],t)}catch(e){i(o[0][3],e)}var t}function r(e){C("next",e)}function a(e){C("throw",e)}function i(e,g){e(g),o.shift(),o.length&&C(o[0][0],o[0][1])}}function v(e){var g,t;return g={},n("next"),n("throw",(function(e){throw e})),n("return"),g[Symbol.iterator]=function(){return this},g;function n(n,I){g[n]=e[n]?function(g){return(t=!t)?{value:B(e[n](g)),done:!1}:I?I(g):g}:I}}function S(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g,t=e[Symbol.asyncIterator];return t?t.call(e):(e=Z(e),g={},n("next"),n("throw"),n("return"),g[Symbol.asyncIterator]=function(){return this},g);function n(t){g[t]=e[t]&&function(g){return new Promise((function(n,I){!function(e,g,t,n){Promise.resolve(n).then((function(g){e({value:g,done:t})}),g)}(n,I,(g=e[t](g)).done,g.value)}))}}}function W(e,g){return Object.defineProperty?Object.defineProperty(e,"raw",{value:g}):e.raw=g,e}var V=Object.create?function(e,g){Object.defineProperty(e,"default",{enumerable:!0,value:g})}:function(e,g){e.default=g};function R(e){if(e&&e.__esModule)return e;var g={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&m(g,e,t);return V(g,e),g}function X(e){return e&&e.__esModule?e:{default:e}}function k(e,g,t,n){if("a"===t&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof g?e!==g||!n:!g.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?n:"a"===t?n.call(e):n?n.value:g.get(e)}function J(e,g,t,n,I){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!I)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof g?e!==g||!I:!g.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?I.call(e,t):I?I.value=t:g.set(e,t),t}function Y(e,g){if(null===g||"object"!=typeof g&&"function"!=typeof g)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?g===e:e.has(g)}},156:function(e){e.exports=n},111:function(e){e.exports=I}},g={};function t(n){var I=g[n];if(void 0!==I)return I.exports;var o=g[n]={exports:{}};return e[n](o,o.exports,t),o.exports}t.d=function(e,g){for(var n in g)t.o(g,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:g[n]})},t.o=function(e,g){return Object.prototype.hasOwnProperty.call(e,g)},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return function(){var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.useReactToPrint=e.PrintContextConsumer=void 0;var g=t(655),n=t(156),I=t(111),l=Object.prototype.hasOwnProperty.call(n,"createContext"),C=Object.prototype.hasOwnProperty.call(n,"useMemo")&&Object.prototype.hasOwnProperty.call(n,"useCallback"),r=l?n.createContext({}):null;e.PrintContextConsumer=r?r.Consumer:function(){return null};var a={copyStyles:!0,pageStyle:"\n        @page {\n            /* Remove browser default header (title) and footer (url) */\n            margin: 0;\n        }\n        @media print {\n            body {\n                /* Tell browsers to print background colors */\n                -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */\n                color-adjust: exact; /* Firefox */\n            }\n        }\n    ",removeAfterPrint:!1,suppressErrors:!1},i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPrint=function(e){var g=t.props,n=g.onAfterPrint,I=g.onPrintError,o=g.print,l=g.documentTitle;setTimeout((function(){var g,C;if(e.contentWindow){if(e.contentWindow.focus(),o)o(e).then(t.handleRemoveIframe).catch((function(e){I?I("print",e):t.logMessages(["An error was thrown by the specified `print` function"])}));else if(e.contentWindow.print){var r=null!==(C=null===(g=e.contentDocument)||void 0===g?void 0:g.title)&&void 0!==C?C:"",a=e.ownerDocument.title;l&&(e.ownerDocument.title=l,e.contentDocument&&(e.contentDocument.title=l)),e.contentWindow.print(),l&&(e.ownerDocument.title=a,e.contentDocument&&(e.contentDocument.title=r))}else t.logMessages(["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."]);n&&n(),t.handleRemoveIframe()}else t.logMessages(["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/"])}),500)},t.triggerPrint=function(e){var g=t.props,n=g.onBeforePrint,I=g.onPrintError;if(n){var o=n();o&&"function"==typeof o.then?o.then((function(){t.startPrint(e)})).catch((function(e){I&&I("onBeforePrint",e)})):t.startPrint(e)}else t.startPrint(e)},t.handleClick=function(){var e=t.props,g=e.onBeforeGetContent,n=e.onPrintError;if(g){var I=g();I&&"function"==typeof I.then?I.then(t.handlePrint).catch((function(e){n&&n("onBeforeGetContent",e)})):t.handlePrint()}else t.handlePrint()},t.handlePrint=function(){var e=t.props,n=e.bodyClass,o=e.content,l=e.copyStyles,C=e.fonts,r=e.pageStyle,a=e.nonce,i=o();if(void 0!==i)if(null!==i){var c=document.createElement("iframe");c.width="".concat(document.documentElement.clientWidth,"px"),c.height="".concat(document.documentElement.clientHeight,"px"),c.style.position="absolute",c.style.top="-".concat(document.documentElement.clientHeight+100,"px"),c.style.left="-".concat(document.documentElement.clientWidth+100,"px"),c.id="printWindow",c.srcdoc="<!DOCTYPE html>";var s=(0,I.findDOMNode)(i);if(s){var u=s.cloneNode(!0),d=u instanceof Text,A=document.querySelectorAll("link[rel='stylesheet']"),m=d?[]:u.querySelectorAll("img"),b=d?[]:u.querySelectorAll("video"),Z=C?C.length:0;t.numResourcesToLoad=A.length+m.length+b.length+Z,t.resourcesLoaded=[],t.resourcesErrored=[];var p=function(e,n){t.resourcesLoaded.includes(e)?t.logMessages(["Tried to mark a resource that has already been handled",e],"debug"):(n?(t.logMessages(g.__spreadArray(['"react-to-print" was unable to load a resource but will continue attempting to print the page'],g.__read(n),!1)),t.resourcesErrored.push(e)):t.resourcesLoaded.push(e),t.resourcesLoaded.length+t.resourcesErrored.length===t.numResourcesToLoad&&t.triggerPrint(c))};c.onload=function(){var e,I,o,i;c.onload=null;var A=c.contentDocument||(null===(I=c.contentWindow)||void 0===I?void 0:I.document);if(A){A.body.appendChild(u),C&&((null===(o=c.contentDocument)||void 0===o?void 0:o.fonts)&&(null===(i=c.contentWindow)||void 0===i?void 0:i.FontFace)?C.forEach((function(e){var g=new FontFace(e.family,e.source,{weight:e.weight,style:e.style});c.contentDocument.fonts.add(g),g.loaded.then((function(){p(g)})).catch((function(e){p(g,["Failed loading the font:",g,"Load error:",e])}))})):(C.forEach((function(e){return p(e)})),t.logMessages(['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'])));var Z="function"==typeof r?r():r;if("string"!=typeof Z)t.logMessages(['"react-to-print" expected a "string" from `pageStyle` but received "'.concat(typeof Z,'". Styles from `pageStyle` will not be applied.')]);else{var h=A.createElement("style");a&&(h.setAttribute("nonce",a),A.head.setAttribute("nonce",a)),h.appendChild(A.createTextNode(Z)),A.head.appendChild(h)}if(n&&(e=A.body.classList).add.apply(e,g.__spreadArray([],g.__read(n.split(" ")),!1)),!d){for(var G=d?[]:s.querySelectorAll("canvas"),y=A.querySelectorAll("canvas"),B=0;B<G.length;++B){var f=G[B],v=y[B].getContext("2d");v&&v.drawImage(f,0,0)}var S=function(e){var g=m[e],t=g.getAttribute("src");if(t){var n=new Image;n.onload=function(){return p(g)},n.onerror=function(e,t,n,I,o){return p(g,["Error loading <img>",g,"Error",o])},n.src=t}else p(g,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it. The <img> is:',g])};for(B=0;B<m.length;B++)S(B);var W=function(e){var g=b[e];g.preload="auto";var t=g.getAttribute("poster");if(t){var n=new Image;n.onload=function(){return p(g)},n.onerror=function(e,n,I,o,l){return p(g,["Error loading video poster",t,"for video",g,"Error:",l])},n.src=t}else g.readyState>=2?p(g):(g.onloadeddata=function(){return p(g)},g.onerror=function(e,t,n,I,o){return p(g,["Error loading video",g,"Error",o])},g.onstalled=function(){return p(g,["Loading video stalled, skipping",g])})};for(B=0;B<b.length;B++)W(B);var V="input",R=s.querySelectorAll(V),X=A.querySelectorAll(V);for(B=0;B<R.length;B++)X[B].value=R[B].value;var k="input[type=checkbox],input[type=radio]",J=s.querySelectorAll(k),Y=A.querySelectorAll(k);for(B=0;B<J.length;B++)Y[B].checked=J[B].checked;var H="select",w=s.querySelectorAll(H),N=A.querySelectorAll(H);for(B=0;B<w.length;B++)N[B].value=w[B].value}if(l)for(var F=document.querySelectorAll("style, link[rel='stylesheet']"),K=function(e,g){var n=F[e];if("style"===n.tagName.toLowerCase()){var I=A.createElement(n.tagName),o=n.sheet;if(o){var l="";try{for(var C=o.cssRules.length,r=0;r<C;++r)"string"==typeof o.cssRules[r].cssText&&(l+="".concat(o.cssRules[r].cssText,"\r\n"))}catch(e){t.logMessages(["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/gregnb/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",n],"warning")}I.setAttribute("id","react-to-print-".concat(e)),a&&I.setAttribute("nonce",a),I.appendChild(A.createTextNode(l)),A.head.appendChild(I)}}else if(n.getAttribute("href"))if(n.hasAttribute("disabled"))t.logMessages(["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",n],"warning"),p(n);else{for(var i=A.createElement(n.tagName),c=(r=0,n.attributes.length);r<c;++r){var s=n.attributes[r];s&&i.setAttribute(s.nodeName,s.nodeValue||"")}i.onload=function(){return p(i)},i.onerror=function(e,g,t,n,I){return p(i,["Failed to load",i,"Error:",I])},a&&i.setAttribute("nonce",a),A.head.appendChild(i)}else t.logMessages(["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",n],"warning"),p(n)},x=(B=0,F.length);B<x;++B)K(B)}0!==t.numResourcesToLoad&&l||t.triggerPrint(c)},t.handleRemoveIframe(!0),document.body.appendChild(c)}else t.logMessages(['"react-to-print" could not locate the DOM node corresponding with the `content` prop'])}else t.logMessages(['There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.']);else t.logMessages(["To print a functional component ensure it is wrapped with `React.forwardRef`, and ensure the forwarded ref is used. See the README for an example: https://github.com/gregnb/react-to-print#examples"])},t.handleRemoveIframe=function(e){var g=t.props.removeAfterPrint;if(e||g){var n=document.getElementById("printWindow");n&&document.body.removeChild(n)}},t.logMessages=function(e,g){void 0===g&&(g="error"),t.props.suppressErrors||("error"===g?console.error(e):"warning"===g?console.warn(e):"debug"===g&&console.debug(e))},t}return g.__extends(t,e),t.prototype.render=function(){var e=this.props,g=e.children,t=e.trigger;if(t)return n.cloneElement(t(),{onClick:this.handleClick});if(!r)return this.logMessages(['"react-to-print" requires React ^16.3.0 to be able to use "PrintContext"']),null;var I={handlePrint:this.handleClick};return n.createElement(r.Provider,{value:I},g)},t.defaultProps=a,t}(n.Component);e.default=i,e.useReactToPrint=function(e){if(!C)return e.suppressErrors||console.error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"'),function(){throw new Error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"')};var t=n.useMemo((function(){return new i(g.__assign(g.__assign({},a),e))}),[e]);return n.useCallback((function(){return t.handleClick()}),[t])}}(),o}())},6374:function(e,g,t){"use strict";var n=t(2791),I=Symbol.for("react.element"),o=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,C=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function a(e,g,t){var n,o={},a=null,i=null;for(n in void 0!==t&&(a=""+t),void 0!==g.key&&(a=""+g.key),void 0!==g.ref&&(i=g.ref),g)l.call(g,n)&&!r.hasOwnProperty(n)&&(o[n]=g[n]);if(e&&e.defaultProps)for(n in g=e.defaultProps)void 0===o[n]&&(o[n]=g[n]);return{$$typeof:I,type:e,key:a,ref:i,props:o,_owner:C.current}}g.Fragment=o,g.jsx=a,g.jsxs=a},9117:function(e,g){"use strict";var t=Symbol.for("react.element"),n=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),r=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),i=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),s=Symbol.for("react.lazy"),u=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,m={};function b(e,g,t){this.props=e,this.context=g,this.refs=m,this.updater=t||d}function Z(){}function p(e,g,t){this.props=e,this.context=g,this.refs=m,this.updater=t||d}b.prototype.isReactComponent={},b.prototype.setState=function(e,g){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,g,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},Z.prototype=b.prototype;var h=p.prototype=new Z;h.constructor=p,A(h,b.prototype),h.isPureReactComponent=!0;var G=Array.isArray,y=Object.prototype.hasOwnProperty,B={current:null},f={key:!0,ref:!0,__self:!0,__source:!0};function v(e,g,n){var I,o={},l=null,C=null;if(null!=g)for(I in void 0!==g.ref&&(C=g.ref),void 0!==g.key&&(l=""+g.key),g)y.call(g,I)&&!f.hasOwnProperty(I)&&(o[I]=g[I]);var r=arguments.length-2;if(1===r)o.children=n;else if(1<r){for(var a=Array(r),i=0;i<r;i++)a[i]=arguments[i+2];o.children=a}if(e&&e.defaultProps)for(I in r=e.defaultProps)void 0===o[I]&&(o[I]=r[I]);return{$$typeof:t,type:e,key:l,ref:C,props:o,_owner:B.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===t}var W=/\/+/g;function V(e,g){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var g={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return g[e]}))}(""+e.key):g.toString(36)}function R(e,g,I,o,l){var C=typeof e;"undefined"!==C&&"boolean"!==C||(e=null);var r=!1;if(null===e)r=!0;else switch(C){case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case t:case n:r=!0}}if(r)return l=l(r=e),e=""===o?"."+V(r,0):o,G(l)?(I="",null!=e&&(I=e.replace(W,"$&/")+"/"),R(l,g,I,"",(function(e){return e}))):null!=l&&(S(l)&&(l=function(e,g){return{$$typeof:t,type:e.type,key:g,ref:e.ref,props:e.props,_owner:e._owner}}(l,I+(!l.key||r&&r.key===l.key?"":(""+l.key).replace(W,"$&/")+"/")+e)),g.push(l)),1;if(r=0,o=""===o?".":o+":",G(e))for(var a=0;a<e.length;a++){var i=o+V(C=e[a],a);r+=R(C,g,I,i,l)}else if(i=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=u&&e[u]||e["@@iterator"])?e:null}(e),"function"===typeof i)for(e=i.call(e),a=0;!(C=e.next()).done;)r+=R(C=C.value,g,I,i=o+V(C,a++),l);else if("object"===C)throw g=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===g?"object with keys {"+Object.keys(e).join(", ")+"}":g)+"). If you meant to render a collection of children, use an array instead.");return r}function X(e,g,t){if(null==e)return e;var n=[],I=0;return R(e,n,"","",(function(e){return g.call(t,e,I++)})),n}function k(e){if(-1===e._status){var g=e._result;(g=g()).then((function(g){0!==e._status&&-1!==e._status||(e._status=1,e._result=g)}),(function(g){0!==e._status&&-1!==e._status||(e._status=2,e._result=g)})),-1===e._status&&(e._status=0,e._result=g)}if(1===e._status)return e._result.default;throw e._result}var J={current:null},Y={transition:null},H={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:Y,ReactCurrentOwner:B};g.Children={map:X,forEach:function(e,g,t){X(e,(function(){g.apply(this,arguments)}),t)},count:function(e){var g=0;return X(e,(function(){g++})),g},toArray:function(e){return X(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},g.Component=b,g.Fragment=I,g.Profiler=l,g.PureComponent=p,g.StrictMode=o,g.Suspense=i,g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,g.cloneElement=function(e,g,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var I=A({},e.props),o=e.key,l=e.ref,C=e._owner;if(null!=g){if(void 0!==g.ref&&(l=g.ref,C=B.current),void 0!==g.key&&(o=""+g.key),e.type&&e.type.defaultProps)var r=e.type.defaultProps;for(a in g)y.call(g,a)&&!f.hasOwnProperty(a)&&(I[a]=void 0===g[a]&&void 0!==r?r[a]:g[a])}var a=arguments.length-2;if(1===a)I.children=n;else if(1<a){r=Array(a);for(var i=0;i<a;i++)r[i]=arguments[i+2];I.children=r}return{$$typeof:t,type:e.type,key:o,ref:l,props:I,_owner:C}},g.createContext=function(e){return(e={$$typeof:r,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:C,_context:e},e.Consumer=e},g.createElement=v,g.createFactory=function(e){var g=v.bind(null,e);return g.type=e,g},g.createRef=function(){return{current:null}},g.forwardRef=function(e){return{$$typeof:a,render:e}},g.isValidElement=S,g.lazy=function(e){return{$$typeof:s,_payload:{_status:-1,_result:e},_init:k}},g.memo=function(e,g){return{$$typeof:c,type:e,compare:void 0===g?null:g}},g.startTransition=function(e){var g=Y.transition;Y.transition={};try{e()}finally{Y.transition=g}},g.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},g.useCallback=function(e,g){return J.current.useCallback(e,g)},g.useContext=function(e){return J.current.useContext(e)},g.useDebugValue=function(){},g.useDeferredValue=function(e){return J.current.useDeferredValue(e)},g.useEffect=function(e,g){return J.current.useEffect(e,g)},g.useId=function(){return J.current.useId()},g.useImperativeHandle=function(e,g,t){return J.current.useImperativeHandle(e,g,t)},g.useInsertionEffect=function(e,g){return J.current.useInsertionEffect(e,g)},g.useLayoutEffect=function(e,g){return J.current.useLayoutEffect(e,g)},g.useMemo=function(e,g){return J.current.useMemo(e,g)},g.useReducer=function(e,g,t){return J.current.useReducer(e,g,t)},g.useRef=function(e){return J.current.useRef(e)},g.useState=function(e){return J.current.useState(e)},g.useSyncExternalStore=function(e,g,t){return J.current.useSyncExternalStore(e,g,t)},g.useTransition=function(){return J.current.useTransition()},g.version="18.2.0"},2791:function(e,g,t){"use strict";e.exports=t(9117)},184:function(e,g,t){"use strict";e.exports=t(6374)},6813:function(e,g){"use strict";function t(e,g){var t=e.length;e.push(g);e:for(;0<t;){var n=t-1>>>1,I=e[n];if(!(0<o(I,g)))break e;e[n]=g,e[t]=I,t=n}}function n(e){return 0===e.length?null:e[0]}function I(e){if(0===e.length)return null;var g=e[0],t=e.pop();if(t!==g){e[0]=t;e:for(var n=0,I=e.length,l=I>>>1;n<l;){var C=2*(n+1)-1,r=e[C],a=C+1,i=e[a];if(0>o(r,t))a<I&&0>o(i,r)?(e[n]=i,e[a]=t,n=a):(e[n]=r,e[C]=t,n=C);else{if(!(a<I&&0>o(i,t)))break e;e[n]=i,e[a]=t,n=a}}}return g}function o(e,g){var t=e.sortIndex-g.sortIndex;return 0!==t?t:e.id-g.id}if("object"===typeof performance&&"function"===typeof performance.now){var l=performance;g.unstable_now=function(){return l.now()}}else{var C=Date,r=C.now();g.unstable_now=function(){return C.now()-r}}var a=[],i=[],c=1,s=null,u=3,d=!1,A=!1,m=!1,b="function"===typeof setTimeout?setTimeout:null,Z="function"===typeof clearTimeout?clearTimeout:null,p="undefined"!==typeof setImmediate?setImmediate:null;function h(e){for(var g=n(i);null!==g;){if(null===g.callback)I(i);else{if(!(g.startTime<=e))break;I(i),g.sortIndex=g.expirationTime,t(a,g)}g=n(i)}}function G(e){if(m=!1,h(e),!A)if(null!==n(a))A=!0,Y(y);else{var g=n(i);null!==g&&H(G,g.startTime-e)}}function y(e,t){A=!1,m&&(m=!1,Z(S),S=-1),d=!0;var o=u;try{for(h(t),s=n(a);null!==s&&(!(s.expirationTime>t)||e&&!R());){var l=s.callback;if("function"===typeof l){s.callback=null,u=s.priorityLevel;var C=l(s.expirationTime<=t);t=g.unstable_now(),"function"===typeof C?s.callback=C:s===n(a)&&I(a),h(t)}else I(a);s=n(a)}if(null!==s)var r=!0;else{var c=n(i);null!==c&&H(G,c.startTime-t),r=!1}return r}finally{s=null,u=o,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var B,f=!1,v=null,S=-1,W=5,V=-1;function R(){return!(g.unstable_now()-V<W)}function X(){if(null!==v){var e=g.unstable_now();V=e;var t=!0;try{t=v(!0,e)}finally{t?B():(f=!1,v=null)}}else f=!1}if("function"===typeof p)B=function(){p(X)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,J=k.port2;k.port1.onmessage=X,B=function(){J.postMessage(null)}}else B=function(){b(X,0)};function Y(e){v=e,f||(f=!0,B())}function H(e,t){S=b((function(){e(g.unstable_now())}),t)}g.unstable_IdlePriority=5,g.unstable_ImmediatePriority=1,g.unstable_LowPriority=4,g.unstable_NormalPriority=3,g.unstable_Profiling=null,g.unstable_UserBlockingPriority=2,g.unstable_cancelCallback=function(e){e.callback=null},g.unstable_continueExecution=function(){A||d||(A=!0,Y(y))},g.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<e?Math.floor(1e3/e):5},g.unstable_getCurrentPriorityLevel=function(){return u},g.unstable_getFirstCallbackNode=function(){return n(a)},g.unstable_next=function(e){switch(u){case 1:case 2:case 3:var g=3;break;default:g=u}var t=u;u=g;try{return e()}finally{u=t}},g.unstable_pauseExecution=function(){},g.unstable_requestPaint=function(){},g.unstable_runWithPriority=function(e,g){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=u;u=e;try{return g()}finally{u=t}},g.unstable_scheduleCallback=function(e,I,o){var l=g.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?l+o:l:o=l,e){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return e={id:c++,callback:I,priorityLevel:e,startTime:o,expirationTime:C=o+C,sortIndex:-1},o>l?(e.sortIndex=o,t(i,e),null===n(a)&&e===n(i)&&(m?(Z(S),S=-1):m=!0,H(G,o-l))):(e.sortIndex=C,t(a,e),A||d||(A=!0,Y(y))),e},g.unstable_shouldYield=R,g.unstable_wrapCallback=function(e){var g=u;return function(){var t=u;u=g;try{return e.apply(this,arguments)}finally{u=t}}}},5296:function(e,g,t){"use strict";e.exports=t(6813)},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,g,t){"use strict";function n(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,n=new Array(g);t<g;t++)n[t]=e[t];return n}t.d(g,{Z:function(){return n}})},3878:function(e,g,t){"use strict";function n(e){if(Array.isArray(e))return e}t.d(g,{Z:function(){return n}})},4942:function(e,g,t){"use strict";t.d(g,{Z:function(){return I}});var n=t(9142);function I(e,g,t){return(g=(0,n.Z)(g))in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}},7462:function(e,g,t){"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},n.apply(this,arguments)}t.d(g,{Z:function(){return n}})},4578:function(e,g,t){"use strict";t.d(g,{Z:function(){return I}});var n=t(9611);function I(e,g){e.prototype=Object.create(g.prototype),e.prototype.constructor=e,(0,n.Z)(e,g)}},9199:function(e,g,t){"use strict";function n(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}t.d(g,{Z:function(){return n}})},5267:function(e,g,t){"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.d(g,{Z:function(){return n}})},3366:function(e,g,t){"use strict";function n(e,g){if(null==e)return{};var t,n,I={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}t.d(g,{Z:function(){return n}})},9611:function(e,g,t){"use strict";function n(e,g){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,g){return e.__proto__=g,e},n(e,g)}t.d(g,{Z:function(){return n}})},9439:function(e,g,t){"use strict";t.d(g,{Z:function(){return l}});var n=t(3878);var I=t(181),o=t(5267);function l(e,g){return(0,n.Z)(e)||function(e,g){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,I,o,l,C=[],r=!0,a=!1;try{if(o=(t=t.call(e)).next,0===g){if(Object(t)!==t)return;r=!1}else for(;!(r=(n=o.call(t)).done)&&(C.push(n.value),C.length!==g);r=!0);}catch(i){a=!0,I=i}finally{try{if(!r&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(a)throw I}}return C}}(e,g)||(0,I.Z)(e,g)||(0,o.Z)()}},3433:function(e,g,t){"use strict";t.d(g,{Z:function(){return l}});var n=t(907);var I=t(9199),o=t(181);function l(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||(0,I.Z)(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,g,t){"use strict";t.d(g,{Z:function(){return I}});var n=t(1002);function I(e){var g=function(e,g){if("object"!==(0,n.Z)(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var I=t.call(e,g||"default");if("object"!==(0,n.Z)(I))return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(e)}(e,"string");return"symbol"===(0,n.Z)(g)?g:String(g)}},1002:function(e,g,t){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.d(g,{Z:function(){return n}})},181:function(e,g,t){"use strict";t.d(g,{Z:function(){return I}});var n=t(907);function I(e,g){if(e){if("string"===typeof e)return(0,n.Z)(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?(0,n.Z)(e,g):void 0}}}},g={};function t(n){var I=g[n];if(void 0!==I)return I.exports;var o=g[n]={exports:{}};return e[n].call(o.exports,o,o.exports,t),o.exports}t.m=e,t.n=function(e){var g=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(g,{a:g}),g},function(){var e,g=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};t.t=function(n,I){if(1&I&&(n=this(n)),8&I)return n;if("object"===typeof n&&n){if(4&I&&n.__esModule)return n;if(16&I&&"function"===typeof n.then)return n}var o=Object.create(null);t.r(o);var l={};e=e||[null,g({}),g([]),g(g)];for(var C=2&I&&n;"object"==typeof C&&!~e.indexOf(C);C=g(C))Object.getOwnPropertyNames(C).forEach((function(e){l[e]=function(){return n[e]}}));return l.default=function(){return n},t.d(o,l),o}}(),t.d=function(e,g){for(var n in g)t.o(g,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:g[n]})},t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(g,n){return t.f[n](e,g),g}),[]))},t.u=function(e){return"static/js/"+e+".bf125a00.chunk.js"},t.miniCssF=function(e){},t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),t.o=function(e,g){return Object.prototype.hasOwnProperty.call(e,g)},function(){var e={},g="qr-code:";t.l=function(n,I,o,l){if(e[n])e[n].push(I);else{var C,r;if(void 0!==o)for(var a=document.getElementsByTagName("script"),i=0;i<a.length;i++){var c=a[i];if(c.getAttribute("src")==n||c.getAttribute("data-webpack")==g+o){C=c;break}}C||(r=!0,(C=document.createElement("script")).charset="utf-8",C.timeout=120,t.nc&&C.setAttribute("nonce",t.nc),C.setAttribute("data-webpack",g+o),C.src=n),e[n]=[I];var s=function(g,t){C.onerror=C.onload=null,clearTimeout(u);var I=e[n];if(delete e[n],C.parentNode&&C.parentNode.removeChild(C),I&&I.forEach((function(e){return e(t)})),g)return g(t)},u=setTimeout(s.bind(null,void 0,{type:"timeout",target:C}),12e4);C.onerror=s.bind(null,C.onerror),C.onload=s.bind(null,C.onload),r&&document.head.appendChild(C)}}}(),t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.p="/client-qr-code/",function(){var e={179:0};t.f.j=function(g,n){var I=t.o(e,g)?e[g]:void 0;if(0!==I)if(I)n.push(I[2]);else{var o=new Promise((function(t,n){I=e[g]=[t,n]}));n.push(I[2]=o);var l=t.p+t.u(g),C=new Error;t.l(l,(function(n){if(t.o(e,g)&&(0!==(I=e[g])&&(e[g]=void 0),I)){var o=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.src;C.message="Loading chunk "+g+" failed.\n("+o+": "+l+")",C.name="ChunkLoadError",C.type=o,C.request=l,I[1](C)}}),"chunk-"+g,g)}};var g=function(g,n){var I,o,l=n[0],C=n[1],r=n[2],a=0;if(l.some((function(g){return 0!==e[g]}))){for(I in C)t.o(C,I)&&(t.m[I]=C[I]);if(r)r(t)}for(g&&g(n);a<l.length;a++)o=l[a],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunkqr_code=self.webpackChunkqr_code||[];n.forEach(g.bind(null,0)),n.push=g.bind(null,n.push.bind(n))}();var n={};!function(){"use strict";t.d(n,{_:function(){return kB}});var e=t(2791),g=t.t(e,2),I=t(1250),o=t(1933);function l(e){for(var g=arguments.length,t=new Array(g>1?g-1:0),n=1;n<g;n++)t[n-1]=arguments[n];throw new Error("number"===typeof e?"[MobX] minified error nr: "+e+(t.length?" "+t.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var C={};function r(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t.g?t.g:"undefined"!==typeof self?self:C}var a=Object.assign,i=Object.getOwnPropertyDescriptor,c=Object.defineProperty,s=Object.prototype,u=[];Object.freeze(u);var d={};Object.freeze(d);var A="undefined"!==typeof Proxy,m=Object.toString();function b(){A||l("Proxy not available")}function Z(e){var g=!1;return function(){if(!g)return g=!0,e.apply(this,arguments)}}var p=function(){};function h(e){return"function"===typeof e}function G(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function y(e){return null!==e&&"object"===typeof e}function B(e){if(!y(e))return!1;var g=Object.getPrototypeOf(e);if(null==g)return!0;var t=Object.hasOwnProperty.call(g,"constructor")&&g.constructor;return"function"===typeof t&&t.toString()===m}function f(e){var g=null==e?void 0:e.constructor;return!!g&&("GeneratorFunction"===g.name||"GeneratorFunction"===g.displayName)}function v(e,g,t){c(e,g,{enumerable:!1,writable:!0,configurable:!0,value:t})}function S(e,g,t){c(e,g,{enumerable:!1,writable:!1,configurable:!0,value:t})}function W(e,g){var t="isMobX"+e;return g.prototype[t]=!0,function(e){return y(e)&&!0===e[t]}}function V(e){return e instanceof Map}function R(e){return e instanceof Set}var X="undefined"!==typeof Object.getOwnPropertySymbols;var k="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:X?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function J(e){return null===e?null:"object"===typeof e?""+e:e}function Y(e,g){return s.hasOwnProperty.call(e,g)}var H=Object.getOwnPropertyDescriptors||function(e){var g={};return k(e).forEach((function(t){g[t]=i(e,t)})),g};function w(e,g){for(var t=0;t<g.length;t++){var n=g[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U(n.key),n)}}function N(e,g,t){return g&&w(e.prototype,g),t&&w(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},F.apply(this,arguments)}function K(e,g){e.prototype=Object.create(g.prototype),e.prototype.constructor=e,x(e,g)}function x(e,g){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,g){return e.__proto__=g,e},x(e,g)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,n=new Array(g);t<g;t++)n[t]=e[t];return n}function M(e,g){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,g){if(e){if("string"===typeof e)return E(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?E(e,g):void 0}}(e))||g&&e&&"number"===typeof e.length){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function U(e){var g=function(e,g){if("object"!==typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,g||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(e)}(e,"string");return"symbol"===typeof g?g:String(g)}var Q=Symbol("mobx-stored-annotations");function L(e){return Object.assign((function(g,t){T(g,t,e)}),e)}function T(e,g,t){Y(e,Q)||v(e,Q,F({},e[Q])),function(e){return e.annotationType_===ee}(t)||(e[Q][g]=t)}var D=Symbol("mobx administration"),j=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=je.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var g=e.prototype;return g.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},g.reportObserved=function(){return pg(this)},g.reportChanged=function(){bg(),hg(this),Zg()},g.toString=function(){return this.name_},e}(),P=W("Atom",j);function O(e,g,t){void 0===g&&(g=p),void 0===t&&(t=p);var n,I=new j(e);return g!==p&&Qg(Eg,I,g,n),t!==p&&Ug(I,t),I}var q={identity:function(e,g){return e===g},structural:function(e,g){return sn(e,g)},default:function(e,g){return Object.is?Object.is(e,g):e===g?0!==e||1/e===1/g:e!==e&&g!==g},shallow:function(e,g){return sn(e,g,1)}};function _(e,g,t){return lt(e)?e:Array.isArray(e)?ke.array(e,{name:t}):B(e)?ke.object(e,void 0,{name:t}):V(e)?ke.map(e,{name:t}):R(e)?ke.set(e,{name:t}):"function"!==typeof e||Fg(e)||It(e)?e:f(e)?tt(e):Ng(t,e)}function $(e){return e}var ee="override";function ge(e,g){return{annotationType_:e,options_:g,make_:te,extend_:ne}}function te(e,g,t,n){var I;if(null!=(I=this.options_)&&I.bound)return null===this.extend_(e,g,t,!1)?0:1;if(n===e.target_)return null===this.extend_(e,g,t,!1)?0:2;if(Fg(t.value))return 1;var o=Ie(e,this,g,t,!1);return c(n,g,o),2}function ne(e,g,t,n){var I=Ie(e,this,g,t);return e.defineProperty_(g,I,n)}function Ie(e,g,t,n,I){var o,l,C,r,a,i,c,s;void 0===I&&(I=ug.safeDescriptors),s=n,g.annotationType_,s.value;var u,d=n.value;null!=(o=g.options_)&&o.bound&&(d=d.bind(null!=(u=e.proxy_)?u:e.target_));return{value:Ee(null!=(l=null==(C=g.options_)?void 0:C.name)?l:t.toString(),d,null!=(r=null==(a=g.options_)?void 0:a.autoAction)&&r,null!=(i=g.options_)&&i.bound?null!=(c=e.proxy_)?c:e.target_:void 0),configurable:!I||e.isPlainObject_,enumerable:!1,writable:!I}}function oe(e,g){return{annotationType_:e,options_:g,make_:le,extend_:Ce}}function le(e,g,t,n){var I;if(n===e.target_)return null===this.extend_(e,g,t,!1)?0:2;if(null!=(I=this.options_)&&I.bound&&(!Y(e.target_,g)||!It(e.target_[g]))&&null===this.extend_(e,g,t,!1))return 0;if(It(t.value))return 1;var o=re(e,this,g,t,!1,!1);return c(n,g,o),2}function Ce(e,g,t,n){var I,o=re(e,this,g,t,null==(I=this.options_)?void 0:I.bound);return e.defineProperty_(g,o,n)}function re(e,g,t,n,I,o){var l;void 0===o&&(o=ug.safeDescriptors),l=n,g.annotationType_,l.value;var C,r=n.value;(It(r)||(r=tt(r)),I)&&((r=r.bind(null!=(C=e.proxy_)?C:e.target_)).isMobXFlow=!0);return{value:r,configurable:!o||e.isPlainObject_,enumerable:!1,writable:!o}}function ae(e,g){return{annotationType_:e,options_:g,make_:ie,extend_:ce}}function ie(e,g,t){return null===this.extend_(e,g,t,!1)?0:1}function ce(e,g,t,n){return function(e,g,t,n){g.annotationType_,n.get;0}(0,this,0,t),e.defineComputedProperty_(g,F({},this.options_,{get:t.get,set:t.set}),n)}function se(e,g){return{annotationType_:e,options_:g,make_:ue,extend_:de}}function ue(e,g,t){return null===this.extend_(e,g,t,!1)?0:1}function de(e,g,t,n){var I,o;return function(e,g,t,n){g.annotationType_;0}(0,this),e.defineObservableProperty_(g,t.value,null!=(I=null==(o=this.options_)?void 0:o.enhancer)?I:_,n)}var Ae="true",me=be();function be(e){return{annotationType_:Ae,options_:e,make_:Ze,extend_:pe}}function Ze(e,g,t,n){var I,o,l,C;if(t.get)return we.make_(e,g,t,n);if(t.set){var r=Ee(g.toString(),t.set);return n===e.target_?null===e.defineProperty_(g,{configurable:!ug.safeDescriptors||e.isPlainObject_,set:r})?0:2:(c(n,g,{configurable:!0,set:r}),2)}if(n!==e.target_&&"function"===typeof t.value)return f(t.value)?(null!=(C=this.options_)&&C.autoBind?tt.bound:tt).make_(e,g,t,n):(null!=(l=this.options_)&&l.autoBind?Ng.bound:Ng).make_(e,g,t,n);var a,i=!1===(null==(I=this.options_)?void 0:I.deep)?ke.ref:ke;"function"===typeof t.value&&null!=(o=this.options_)&&o.autoBind&&(t.value=t.value.bind(null!=(a=e.proxy_)?a:e.target_));return i.make_(e,g,t,n)}function pe(e,g,t,n){var I,o,l;if(t.get)return we.extend_(e,g,t,n);if(t.set)return e.defineProperty_(g,{configurable:!ug.safeDescriptors||e.isPlainObject_,set:Ee(g.toString(),t.set)},n);"function"===typeof t.value&&null!=(I=this.options_)&&I.autoBind&&(t.value=t.value.bind(null!=(l=e.proxy_)?l:e.target_));return(!1===(null==(o=this.options_)?void 0:o.deep)?ke.ref:ke).extend_(e,g,t,n)}var he={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Ge(e){return e||he}Object.freeze(he);var ye=se("observable"),Be=se("observable.ref",{enhancer:$}),fe=se("observable.shallow",{enhancer:function(e,g,t){return void 0===e||null===e||jt(e)||kt(e)||Kt(e)||Et(e)?e:Array.isArray(e)?ke.array(e,{name:t,deep:!1}):B(e)?ke.object(e,void 0,{name:t,deep:!1}):V(e)?ke.map(e,{name:t,deep:!1}):R(e)?ke.set(e,{name:t,deep:!1}):void 0}}),ve=se("observable.struct",{enhancer:function(e,g){return sn(e,g)?g:e}}),Se=L(ye);function We(e){return!0===e.deep?_:!1===e.deep?$:function(e){var g,t;return e&&null!=(g=null==(t=e.options_)?void 0:t.enhancer)?g:_}(e.defaultDecorator)}function Ve(e,g,t){if(!G(g))return lt(e)?e:B(e)?ke.object(e,g,t):Array.isArray(e)?ke.array(e,g):V(e)?ke.map(e,g):R(e)?ke.set(e,g):"object"===typeof e&&null!==e?e:ke.box(e,g);T(e,g,ye)}a(Ve,Se);var Re,Xe,ke=a(Ve,{box:function(e,g){var t=Ge(g);return new De(e,We(t),t.name,!0,t.equals)},array:function(e,g){var t=Ge(g);return(!1===ug.useProxies||!1===t.proxy?ln:yt)(e,We(t),t.name)},map:function(e,g){var t=Ge(g);return new Ft(e,We(t),t.name)},set:function(e,g){var t=Ge(g);return new zt(e,We(t),t.name)},object:function(e,g,t){return Pg(!1===ug.useProxies||!1===(null==t?void 0:t.proxy)?Lt({},t):function(e,g){var t,n;return b(),e=Lt(e,g),null!=(n=(t=e[D]).proxy_)?n:t.proxy_=new Proxy(e,at)}({},t),e,g)},ref:L(Be),shallow:L(fe),deep:Se,struct:L(ve)}),Je="computed",Ye=ae(Je),He=ae("computed.struct",{equals:q.structural}),we=function(e,g){if(G(g))return T(e,g,Ye);if(B(e))return L(ae(Je,e));var t=B(g)?g:{};return t.get=e,t.name||(t.name=e.name||""),new Oe(t)};Object.assign(we,Ye),we.struct=L(He);var Ne,Fe=0,Ke=1,xe=null!=(Re=null==(Xe=i((function(){}),"name"))?void 0:Xe.configurable)&&Re,ze={value:"action",configurable:!0,writable:!1,enumerable:!1};function Ee(e,g,t,n){function I(){return Me(e,t,g,n||this,arguments)}return void 0===t&&(t=!1),I.isMobxAction=!0,xe&&(ze.value=e,c(I,"name",ze)),I}function Me(e,g,t,n,I){var o=function(e,g,t,n){var I=!1,o=0;0;var l=ug.trackingDerivation,C=!g||!l;bg();var r=ug.allowStateChanges;C&&(og(),r=Qe(!0));var a=Cg(!0),i={runAsAction_:C,prevDerivation_:l,prevAllowStateChanges_:r,prevAllowStateReads_:a,notifySpy_:I,startTime_:o,actionId_:Ke++,parentActionId_:Fe};return Fe=i.actionId_,i}(0,g);try{return t.apply(n,I)}catch(C){throw o.error_=C,C}finally{!function(e){Fe!==e.actionId_&&l(30);Fe=e.parentActionId_,void 0!==e.error_&&(ug.suppressReactionErrors=!0);Le(e.prevAllowStateChanges_),rg(e.prevAllowStateReads_),Zg(),e.runAsAction_&&lg(e.prevDerivation_);0;ug.suppressReactionErrors=!1}(o)}}function Ue(e,g){var t=Qe(e);try{return g()}finally{Le(t)}}function Qe(e){var g=ug.allowStateChanges;return ug.allowStateChanges=e,g}function Le(e){ug.allowStateChanges=e}Ne=Symbol.toPrimitive;var Te,De=function(e){function g(g,t,n,I,o){var l;return void 0===n&&(n="ObservableValue"),void 0===I&&(I=!0),void 0===o&&(o=q.default),(l=e.call(this,n)||this).enhancer=void 0,l.name_=void 0,l.equals=void 0,l.hasUnreportedChange_=!1,l.interceptors_=void 0,l.changeListeners_=void 0,l.value_=void 0,l.dehancer=void 0,l.enhancer=t,l.name_=n,l.equals=o,l.value_=t(g,void 0,n),l}K(g,e);var t=g.prototype;return t.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.set=function(e){this.value_;if((e=this.prepareNewValue_(e))!==ug.UNCHANGED){0,this.setNewValue_(e)}},t.prepareNewValue_=function(e){if(gg(this),it(this)){var g=st(this,{object:this,type:pt,newValue:e});if(!g)return ug.UNCHANGED;e=g.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?ug.UNCHANGED:e},t.setNewValue_=function(e){var g=this.value_;this.value_=e,this.reportChanged(),ut(this)&&At(this,{type:pt,object:this,newValue:e,oldValue:g})},t.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},t.intercept_=function(e){return ct(this,e)},t.observe_=function(e,g){return g&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:pt,newValue:this.value_,oldValue:void 0}),dt(this,e)},t.raw=function(){return this.value_},t.toJSON=function(){return this.get()},t.toString=function(){return this.name_+"["+this.value_+"]"},t.valueOf=function(){return J(this.get())},t[Ne]=function(){return this.valueOf()},g}(j);Te=Symbol.toPrimitive;var je,Pe,Oe=function(){function e(e){this.dependenciesState_=je.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=je.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new _e(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Pe.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||l(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=Ee("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?q.structural:q.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var g=e.prototype;return g.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==je.UP_TO_DATE_)return;e.lowestObserverState_=je.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===je.UP_TO_DATE_&&(e.dependenciesState_=je.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},g.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},g.get=function(){if(this.isComputing_&&l(32,this.name_,this.derivation),0!==ug.inBatch||0!==this.observers_.size||this.keepAlive_){if(pg(this),eg(this)){var e=ug.trackingContext;this.keepAlive_&&!e&&(ug.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===je.STALE_)return;e.lowestObserverState_=je.STALE_,e.observers_.forEach((function(g){g.dependenciesState_===je.POSSIBLY_STALE_?g.dependenciesState_=je.STALE_:g.dependenciesState_===je.UP_TO_DATE_&&(e.lowestObserverState_=je.UP_TO_DATE_)}))}(this),ug.trackingContext=e}}else eg(this)&&(this.warnAboutUntrackedRead_(),bg(),this.value_=this.computeValue_(!1),Zg());var g=this.value_;if($e(g))throw g.cause;return g},g.set=function(e){if(this.setter_){this.isRunningSetter_&&l(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else l(34,this.name_)},g.trackAndCompute=function(){var e=this.value_,g=this.dependenciesState_===je.NOT_TRACKING_,t=this.computeValue_(!0),n=g||$e(e)||$e(t)||!this.equals_(e,t);return n&&(this.value_=t),n},g.computeValue_=function(e){this.isComputing_=!0;var g,t=Qe(!1);if(e)g=tg(this,this.derivation,this.scope_);else if(!0===ug.disableErrorBoundaries)g=this.derivation.call(this.scope_);else try{g=this.derivation.call(this.scope_)}catch(n){g=new _e(n)}return Le(t),this.isComputing_=!1,g},g.suspend_=function(){this.keepAlive_||(ng(this),this.value_=void 0)},g.observe_=function(e,g){var t=this,n=!0,I=void 0;return Kg((function(){var o=t.get();if(!n||g){var l=og();e({observableKind:"computed",debugObjectName:t.name_,type:pt,object:t,newValue:o,oldValue:I}),lg(l)}n=!1,I=o}))},g.warnAboutUntrackedRead_=function(){},g.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},g.valueOf=function(){return J(this.get())},g[Te]=function(){return this.valueOf()},e}(),qe=W("ComputedValue",Oe);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(je||(je={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(Pe||(Pe={}));var _e=function(e){this.cause=void 0,this.cause=e};function $e(e){return e instanceof _e}function eg(e){switch(e.dependenciesState_){case je.UP_TO_DATE_:return!1;case je.NOT_TRACKING_:case je.STALE_:return!0;case je.POSSIBLY_STALE_:for(var g=Cg(!0),t=og(),n=e.observing_,I=n.length,o=0;o<I;o++){var l=n[o];if(qe(l)){if(ug.disableErrorBoundaries)l.get();else try{l.get()}catch(C){return lg(t),rg(g),!0}if(e.dependenciesState_===je.STALE_)return lg(t),rg(g),!0}}return ag(e),lg(t),rg(g),!1}}function gg(e){}function tg(e,g,t){var n=Cg(!0);ag(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++ug.runId;var I,o=ug.trackingDerivation;if(ug.trackingDerivation=e,ug.inBatch++,!0===ug.disableErrorBoundaries)I=g.call(t);else try{I=g.call(t)}catch(l){I=new _e(l)}return ug.inBatch--,ug.trackingDerivation=o,function(e){for(var g=e.observing_,t=e.observing_=e.newObserving_,n=je.UP_TO_DATE_,I=0,o=e.unboundDepsCount_,l=0;l<o;l++){var C=t[l];0===C.diffValue_&&(C.diffValue_=1,I!==l&&(t[I]=C),I++),C.dependenciesState_>n&&(n=C.dependenciesState_)}t.length=I,e.newObserving_=null,o=g.length;for(;o--;){var r=g[o];0===r.diffValue_&&Ag(r,e),r.diffValue_=0}for(;I--;){var a=t[I];1===a.diffValue_&&(a.diffValue_=0,dg(a,e))}n!==je.UP_TO_DATE_&&(e.dependenciesState_=n,e.onBecomeStale_())}(e),rg(n),I}function ng(e){var g=e.observing_;e.observing_=[];for(var t=g.length;t--;)Ag(g[t],e);e.dependenciesState_=je.NOT_TRACKING_}function Ig(e){var g=og();try{return e()}finally{lg(g)}}function og(){var e=ug.trackingDerivation;return ug.trackingDerivation=null,e}function lg(e){ug.trackingDerivation=e}function Cg(e){var g=ug.allowStateReads;return ug.allowStateReads=e,g}function rg(e){ug.allowStateReads=e}function ag(e){if(e.dependenciesState_!==je.UP_TO_DATE_){e.dependenciesState_=je.UP_TO_DATE_;for(var g=e.observing_,t=g.length;t--;)g[t].lowestObserverState_=je.UP_TO_DATE_}}var ig=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},cg=!0,sg=!1,ug=function(){var e=r();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(cg=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new ig).version&&(cg=!1),cg?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new ig):(setTimeout((function(){sg||l(35)}),1),new ig)}();function dg(e,g){e.observers_.add(g),e.lowestObserverState_>g.dependenciesState_&&(e.lowestObserverState_=g.dependenciesState_)}function Ag(e,g){e.observers_.delete(g),0===e.observers_.size&&mg(e)}function mg(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,ug.pendingUnobservations.push(e))}function bg(){ug.inBatch++}function Zg(){if(0===--ug.inBatch){fg();for(var e=ug.pendingUnobservations,g=0;g<e.length;g++){var t=e[g];t.isPendingUnobservation_=!1,0===t.observers_.size&&(t.isBeingObserved_&&(t.isBeingObserved_=!1,t.onBUO()),t instanceof Oe&&t.suspend_())}ug.pendingUnobservations=[]}}function pg(e){var g=ug.trackingDerivation;return null!==g?(g.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=g.runId_,g.newObserving_[g.unboundDepsCount_++]=e,!e.isBeingObserved_&&ug.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&ug.inBatch>0&&mg(e),!1)}function hg(e){e.lowestObserverState_!==je.STALE_&&(e.lowestObserverState_=je.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===je.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=je.STALE_})))}var Gg=function(){function e(e,g,t,n){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=je.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Pe.NONE,this.name_=e,this.onInvalidate_=g,this.errorHandler_=t,this.requiresObservable_=n}var g=e.prototype;return g.onBecomeStale_=function(){this.schedule_()},g.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,ug.pendingReactions.push(this),fg())},g.isScheduled=function(){return this.isScheduled_},g.runReaction_=function(){if(!this.isDisposed_){bg(),this.isScheduled_=!1;var e=ug.trackingContext;if(ug.trackingContext=this,eg(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(g){this.reportExceptionInDerivation_(g)}}ug.trackingContext=e,Zg()}},g.track=function(e){if(!this.isDisposed_){bg();0,this.isRunning_=!0;var g=ug.trackingContext;ug.trackingContext=this;var t=tg(this,e,void 0);ug.trackingContext=g,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&ng(this),$e(t)&&this.reportExceptionInDerivation_(t.cause),Zg()}},g.reportExceptionInDerivation_=function(e){var g=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(ug.disableErrorBoundaries)throw e;var t="[mobx] uncaught error in '"+this+"'";ug.suppressReactionErrors||console.error(t,e),ug.globalReactionErrorHandlers.forEach((function(t){return t(e,g)}))}},g.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(bg(),ng(this),Zg()))},g.getDisposer_=function(){var e=this.dispose.bind(this);return e[D]=this,e},g.toString=function(){return"Reaction["+this.name_+"]"},g.trace=function(e){void 0===e&&(e=!1),function(){l("trace() is not available in production builds");for(var e=!1,g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];"boolean"===typeof t[t.length-1]&&(e=t.pop());var I=function(e){switch(e.length){case 0:return ug.trackingDerivation;case 1:return Cn(e[0]);case 2:return Cn(e[0],e[1])}}(t);if(!I)return l("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");I.isTracing_===Pe.NONE&&console.log("[mobx.trace] '"+I.name_+"' tracing enabled");I.isTracing_=e?Pe.BREAK:Pe.LOG}(this,e)},e}();var yg=100,Bg=function(e){return e()};function fg(){ug.inBatch>0||ug.isRunningReactions||Bg(vg)}function vg(){ug.isRunningReactions=!0;for(var e=ug.pendingReactions,g=0;e.length>0;){++g===yg&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var t=e.splice(0),n=0,I=t.length;n<I;n++)t[n].runReaction_()}ug.isRunningReactions=!1}var Sg=W("Reaction",Gg);var Wg="action",Vg="autoAction",Rg="<unnamed action>",Xg=ge(Wg),kg=ge("action.bound",{bound:!0}),Jg=ge(Vg,{autoAction:!0}),Yg=ge("autoAction.bound",{autoAction:!0,bound:!0});function Hg(e){return function(g,t){return h(g)?Ee(g.name||Rg,g,e):h(t)?Ee(g,t,e):G(t)?T(g,t,e?Jg:Xg):G(g)?L(ge(e?Vg:Wg,{name:g,autoAction:e})):void 0}}var wg=Hg(!1);Object.assign(wg,Xg);var Ng=Hg(!0);function Fg(e){return h(e)&&!0===e.isMobxAction}function Kg(e,g){var t,n;void 0===g&&(g=d);var I,o=null!=(t=null==(n=g)?void 0:n.name)?t:"Autorun";if(!g.scheduler&&!g.delay)I=new Gg(o,(function(){this.track(r)}),g.onError,g.requiresObservable);else{var l=zg(g),C=!1;I=new Gg(o,(function(){C||(C=!0,l((function(){C=!1,I.isDisposed_||I.track(r)})))}),g.onError,g.requiresObservable)}function r(){e(I)}return I.schedule_(),I.getDisposer_()}Object.assign(Ng,Jg),wg.bound=L(kg),Ng.bound=L(Yg);var xg=function(e){return e()};function zg(e){return e.scheduler?e.scheduler:e.delay?function(g){return setTimeout(g,e.delay)}:xg}var Eg="onBO",Mg="onBUO";function Ug(e,g,t){return Qg(Mg,e,g,t)}function Qg(e,g,t,n){var I="function"===typeof n?Cn(g,t):Cn(g),o=h(n)?n:t,l=e+"L";return I[l]?I[l].add(o):I[l]=new Set([o]),function(){var e=I[l];e&&(e.delete(o),0===e.size&&delete I[l])}}var Lg="never",Tg="always",Dg="observed";function jg(e){!0===e.isolateGlobalState&&function(){if((ug.pendingReactions.length||ug.inBatch||ug.isRunningReactions)&&l(36),sg=!0,cg){var e=r();0===--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),ug=new ig}}();var g=e.useProxies,t=e.enforceActions;if(void 0!==g&&(ug.useProxies=g===Tg||g!==Lg&&"undefined"!==typeof Proxy),"ifavailable"===g&&(ug.verifyProxies=!0),void 0!==t){var n=t===Tg?Tg:t===Dg;ug.enforceActions=n,ug.allowStateChanges=!0!==n&&n!==Tg}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(g){g in e&&(ug[g]=!!e[g])})),ug.allowStateReads=!ug.observableRequiresReaction,e.reactionScheduler&&function(e){var g=Bg;Bg=function(t){return e((function(){return g(t)}))}}(e.reactionScheduler)}function Pg(e,g,t,n){var I=H(g),o=Lt(e,n)[D];bg();try{k(I).forEach((function(e){o.extend_(e,I[e],!t||(!(e in t)||t[e]))}))}finally{Zg()}return e}function Og(e,g){return qg(Cn(e,g))}function qg(e){var g,t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=(g=e.observing_,Array.from(new Set(g))).map(qg)),t}var _g=0;function $g(){this.message="FLOW_CANCELLED"}$g.prototype=Object.create(Error.prototype);var et=oe("flow"),gt=oe("flow.bound",{bound:!0}),tt=Object.assign((function(e,g){if(G(g))return T(e,g,et);var t=e,n=t.name||"<unnamed flow>",I=function(){var e,g=arguments,I=++_g,o=wg(n+" - runid: "+I+" - init",t).apply(this,g),l=void 0,C=new Promise((function(g,t){var C=0;function r(e){var g;l=void 0;try{g=wg(n+" - runid: "+I+" - yield "+C++,o.next).call(o,e)}catch(r){return t(r)}i(g)}function a(e){var g;l=void 0;try{g=wg(n+" - runid: "+I+" - yield "+C++,o.throw).call(o,e)}catch(r){return t(r)}i(g)}function i(e){if(!h(null==e?void 0:e.then))return e.done?g(e.value):(l=Promise.resolve(e.value)).then(r,a);e.then(i,t)}e=t,r(void 0)}));return C.cancel=wg(n+" - runid: "+I+" - cancel",(function(){try{l&&nt(l);var g=o.return(void 0),t=Promise.resolve(g.value);t.then(p,p),nt(t),e(new $g)}catch(n){e(n)}})),C};return I.isMobXFlow=!0,I}),et);function nt(e){h(e.cancel)&&e.cancel()}function It(e){return!0===(null==e?void 0:e.isMobXFlow)}function ot(e,g){return!!e&&(void 0!==g?!!jt(e)&&e[D].values_.has(g):jt(e)||!!e[D]||P(e)||Sg(e)||qe(e))}function lt(e){return ot(e)}function Ct(e,g){void 0===g&&(g=void 0),bg();try{return e.apply(g)}finally{Zg()}}function rt(e){return e[D]}tt.bound=L(gt);var at={has:function(e,g){return rt(e).has_(g)},get:function(e,g){return rt(e).get_(g)},set:function(e,g,t){var n;return!!G(g)&&(null==(n=rt(e).set_(g,t,!0))||n)},deleteProperty:function(e,g){var t;return!!G(g)&&(null==(t=rt(e).delete_(g,!0))||t)},defineProperty:function(e,g,t){var n;return null==(n=rt(e).defineProperty_(g,t))||n},ownKeys:function(e){return rt(e).ownKeys_()},preventExtensions:function(e){l(13)}};function it(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function ct(e,g){var t=e.interceptors_||(e.interceptors_=[]);return t.push(g),Z((function(){var e=t.indexOf(g);-1!==e&&t.splice(e,1)}))}function st(e,g){var t=og();try{for(var n=[].concat(e.interceptors_||[]),I=0,o=n.length;I<o&&((g=n[I](g))&&!g.type&&l(14),g);I++);return g}finally{lg(t)}}function ut(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function dt(e,g){var t=e.changeListeners_||(e.changeListeners_=[]);return t.push(g),Z((function(){var e=t.indexOf(g);-1!==e&&t.splice(e,1)}))}function At(e,g){var t=og(),n=e.changeListeners_;if(n){for(var I=0,o=(n=n.slice()).length;I<o;I++)n[I](g);lg(t)}}var mt=Symbol("mobx-keys");function bt(e,g,t){if(B(e))return Pg(e,e,g,t);var n=Lt(e,t)[D];if(!e[mt]){var I=Object.getPrototypeOf(e),o=new Set([].concat(k(e),k(I)));o.delete("constructor"),o.delete(D),v(I,mt,o)}bg();try{e[mt].forEach((function(e){return n.make_(e,!g||(!(e in g)||g[e]))}))}finally{Zg()}return e}var Zt="splice",pt="update",ht={get:function(e,g){var t=e[D];return g===D?t:"length"===g?t.getArrayLength_():"string"!==typeof g||isNaN(g)?Y(Bt,g)?Bt[g]:e[g]:t.get_(parseInt(g))},set:function(e,g,t){var n=e[D];return"length"===g&&n.setArrayLength_(t),"symbol"===typeof g||isNaN(g)?e[g]=t:n.set_(parseInt(g),t),!0},preventExtensions:function(){l(15)}},Gt=function(){function e(e,g,t,n){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=t,this.legacyMode_=n,this.atom_=new j(e),this.enhancer_=function(e,t){return g(e,t,"ObservableArray[..]")}}var g=e.prototype;return g.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},g.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},g.intercept_=function(e){return ct(this,e)},g.observe_=function(e,g){return void 0===g&&(g=!1),g&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),dt(this,e)},g.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},g.setArrayLength_=function(e){("number"!==typeof e||isNaN(e)||e<0)&&l("Out of range: "+e);var g=this.values_.length;if(e!==g)if(e>g){for(var t=new Array(e-g),n=0;n<e-g;n++)t[n]=void 0;this.spliceWithArray_(g,0,t)}else this.spliceWithArray_(e,g-e)},g.updateArrayLength_=function(e,g){e!==this.lastKnownLength_&&l(16),this.lastKnownLength_+=g,this.legacyMode_&&g>0&&on(e+g+1)},g.spliceWithArray_=function(e,g,t){var n=this;this.atom_;var I=this.values_.length;if(void 0===e?e=0:e>I?e=I:e<0&&(e=Math.max(0,I+e)),g=1===arguments.length?I-e:void 0===g||null===g?0:Math.max(0,Math.min(g,I-e)),void 0===t&&(t=u),it(this)){var o=st(this,{object:this.proxy_,type:Zt,index:e,removedCount:g,added:t});if(!o)return u;g=o.removedCount,t=o.added}if(t=0===t.length?t:t.map((function(e){return n.enhancer_(e,void 0)})),this.legacyMode_){var l=t.length-g;this.updateArrayLength_(I,l)}var C=this.spliceItemsIntoValues_(e,g,t);return 0===g&&0===t.length||this.notifyArraySplice_(e,t,C),this.dehanceValues_(C)},g.spliceItemsIntoValues_=function(e,g,t){var n;if(t.length<1e4)return(n=this.values_).splice.apply(n,[e,g].concat(t));var I=this.values_.slice(e,e+g),o=this.values_.slice(e+g);this.values_.length+=t.length-g;for(var l=0;l<t.length;l++)this.values_[e+l]=t[l];for(var C=0;C<o.length;C++)this.values_[e+t.length+C]=o[C];return I},g.notifyArrayChildUpdate_=function(e,g,t){var n=!this.owned_&&!1,I=ut(this),o=I||n?{observableKind:"array",object:this.proxy_,type:pt,debugObjectName:this.atom_.name_,index:e,newValue:g,oldValue:t}:null;this.atom_.reportChanged(),I&&At(this,o)},g.notifyArraySplice_=function(e,g,t){var n=!this.owned_&&!1,I=ut(this),o=I||n?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Zt,index:e,removed:t,added:g,removedCount:t.length,addedCount:g.length}:null;this.atom_.reportChanged(),I&&At(this,o)},g.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},g.set_=function(e,g){var t=this.values_;if(this.legacyMode_&&e>t.length&&l(17,e,t.length),e<t.length){this.atom_;var n=t[e];if(it(this)){var I=st(this,{type:pt,object:this.proxy_,index:e,newValue:g});if(!I)return;g=I.newValue}(g=this.enhancer_(g,n))!==n&&(t[e]=g,this.notifyArrayChildUpdate_(e,g,n))}else{for(var o=new Array(e+1-t.length),C=0;C<o.length-1;C++)o[C]=void 0;o[o.length-1]=g,this.spliceWithArray_(t.length,0,o)}},e}();function yt(e,g,t,n){void 0===t&&(t="ObservableArray"),void 0===n&&(n=!1),b();var I=new Gt(t,g,n,!1);S(I.values_,D,I);var o=new Proxy(I.values_,ht);if(I.proxy_=o,e&&e.length){var l=Qe(!0);I.spliceWithArray_(0,0,e),Le(l)}return o}var Bt={clear:function(){return this.splice(0)},replace:function(e){var g=this[D];return g.spliceWithArray_(0,g.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,g){for(var t=arguments.length,n=new Array(t>2?t-2:0),I=2;I<t;I++)n[I-2]=arguments[I];var o=this[D];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(e);case 2:return o.spliceWithArray_(e,g)}return o.spliceWithArray_(e,g,n)},spliceWithArray:function(e,g,t){return this[D].spliceWithArray_(e,g,t)},push:function(){for(var e=this[D],g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];return e.spliceWithArray_(e.values_.length,0,t),e.values_.length},pop:function(){return this.splice(Math.max(this[D].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[D],g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];return e.spliceWithArray_(0,0,t),e.values_.length},reverse:function(){return ug.trackingDerivation&&l(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){ug.trackingDerivation&&l(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var g=this[D],t=g.dehanceValues_(g.values_).indexOf(e);return t>-1&&(this.splice(t,1),!0)}};function ft(e,g){"function"===typeof Array.prototype[e]&&(Bt[e]=g(e))}function vt(e){return function(){var g=this[D];g.atom_.reportObserved();var t=g.dehanceValues_(g.values_);return t[e].apply(t,arguments)}}function St(e){return function(g,t){var n=this,I=this[D];return I.atom_.reportObserved(),I.dehanceValues_(I.values_)[e]((function(e,I){return g.call(t,e,I,n)}))}}function Wt(e){return function(){var g=this,t=this[D];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_),I=arguments[0];return arguments[0]=function(e,t,n){return I(e,t,n,g)},n[e].apply(n,arguments)}}ft("concat",vt),ft("flat",vt),ft("includes",vt),ft("indexOf",vt),ft("join",vt),ft("lastIndexOf",vt),ft("slice",vt),ft("toString",vt),ft("toLocaleString",vt),ft("every",St),ft("filter",St),ft("find",St),ft("findIndex",St),ft("flatMap",St),ft("forEach",St),ft("map",St),ft("some",St),ft("reduce",Wt),ft("reduceRight",Wt);var Vt,Rt,Xt=W("ObservableArrayAdministration",Gt);function kt(e){return y(e)&&Xt(e[D])}var Jt={},Yt="add",Ht="delete";Vt=Symbol.iterator,Rt=Symbol.toStringTag;var wt,Nt,Ft=function(){function e(e,g,t){var n=this;void 0===g&&(g=_),void 0===t&&(t="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[D]=Jt,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=g,this.name_=t,h(Map)||l(18),this.keysAtom_=O("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,Ue(!0,(function(){n.merge(e)}))}var g=e.prototype;return g.has_=function(e){return this.data_.has(e)},g.has=function(e){var g=this;if(!ug.trackingDerivation)return this.has_(e);var t=this.hasMap_.get(e);if(!t){var n=t=new De(this.has_(e),$,"ObservableMap.key?",!1);this.hasMap_.set(e,n),Ug(n,(function(){return g.hasMap_.delete(e)}))}return t.get()},g.set=function(e,g){var t=this.has_(e);if(it(this)){var n=st(this,{type:t?pt:Yt,object:this,newValue:g,name:e});if(!n)return this;g=n.newValue}return t?this.updateValue_(e,g):this.addValue_(e,g),this},g.delete=function(e){var g=this;if((this.keysAtom_,it(this))&&!st(this,{type:Ht,object:this,name:e}))return!1;if(this.has_(e)){var t=ut(this),n=t?{observableKind:"map",debugObjectName:this.name_,type:Ht,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return Ct((function(){var t;g.keysAtom_.reportChanged(),null==(t=g.hasMap_.get(e))||t.setNewValue_(!1),g.data_.get(e).setNewValue_(void 0),g.data_.delete(e)})),t&&At(this,n),!0}return!1},g.updateValue_=function(e,g){var t=this.data_.get(e);if((g=t.prepareNewValue_(g))!==ug.UNCHANGED){var n=ut(this),I=n?{observableKind:"map",debugObjectName:this.name_,type:pt,object:this,oldValue:t.value_,name:e,newValue:g}:null;0,t.setNewValue_(g),n&&At(this,I)}},g.addValue_=function(e,g){var t=this;this.keysAtom_,Ct((function(){var n,I=new De(g,t.enhancer_,"ObservableMap.key",!1);t.data_.set(e,I),g=I.value_,null==(n=t.hasMap_.get(e))||n.setNewValue_(!0),t.keysAtom_.reportChanged()}));var n=ut(this),I=n?{observableKind:"map",debugObjectName:this.name_,type:Yt,object:this,name:e,newValue:g}:null;n&&At(this,I)},g.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},g.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},g.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},g.values=function(){var e=this,g=this.keys();return An({next:function(){var t=g.next(),n=t.done,I=t.value;return{done:n,value:n?void 0:e.get(I)}}})},g.entries=function(){var e=this,g=this.keys();return An({next:function(){var t=g.next(),n=t.done,I=t.value;return{done:n,value:n?void 0:[I,e.get(I)]}}})},g[Vt]=function(){return this.entries()},g.forEach=function(e,g){for(var t,n=M(this);!(t=n()).done;){var I=t.value,o=I[0],l=I[1];e.call(g,l,o,this)}},g.merge=function(e){var g=this;return Kt(e)&&(e=new Map(e)),Ct((function(){B(e)?function(e){var g=Object.keys(e);if(!X)return g;var t=Object.getOwnPropertySymbols(e);return t.length?[].concat(g,t.filter((function(g){return s.propertyIsEnumerable.call(e,g)}))):g}(e).forEach((function(t){return g.set(t,e[t])})):Array.isArray(e)?e.forEach((function(e){var t=e[0],n=e[1];return g.set(t,n)})):V(e)?(e.constructor!==Map&&l(19,e),e.forEach((function(e,t){return g.set(t,e)}))):null!==e&&void 0!==e&&l(20,e)})),this},g.clear=function(){var e=this;Ct((function(){Ig((function(){for(var g,t=M(e.keys());!(g=t()).done;){var n=g.value;e.delete(n)}}))}))},g.replace=function(e){var g=this;return Ct((function(){for(var t,n=function(e){if(V(e)||Kt(e))return e;if(Array.isArray(e))return new Map(e);if(B(e)){var g=new Map;for(var t in e)g.set(t,e[t]);return g}return l(21,e)}(e),I=new Map,o=!1,C=M(g.data_.keys());!(t=C()).done;){var r=t.value;if(!n.has(r))if(g.delete(r))o=!0;else{var a=g.data_.get(r);I.set(r,a)}}for(var i,c=M(n.entries());!(i=c()).done;){var s=i.value,u=s[0],d=s[1],A=g.data_.has(u);if(g.set(u,d),g.data_.has(u)){var m=g.data_.get(u);I.set(u,m),A||(o=!0)}}if(!o)if(g.data_.size!==I.size)g.keysAtom_.reportChanged();else for(var b=g.data_.keys(),Z=I.keys(),p=b.next(),h=Z.next();!p.done;){if(p.value!==h.value){g.keysAtom_.reportChanged();break}p=b.next(),h=Z.next()}g.data_=I})),this},g.toString=function(){return"[object ObservableMap]"},g.toJSON=function(){return Array.from(this)},g.observe_=function(e,g){return dt(this,e)},g.intercept_=function(e){return ct(this,e)},N(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Rt,get:function(){return"Map"}}]),e}(),Kt=W("ObservableMap",Ft);var xt={};wt=Symbol.iterator,Nt=Symbol.toStringTag;var zt=function(){function e(e,g,t){void 0===g&&(g=_),void 0===t&&(t="ObservableSet"),this.name_=void 0,this[D]=xt,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=t,h(Set)||l(22),this.atom_=O(this.name_),this.enhancer_=function(e,n){return g(e,n,t)},e&&this.replace(e)}var g=e.prototype;return g.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},g.clear=function(){var e=this;Ct((function(){Ig((function(){for(var g,t=M(e.data_.values());!(g=t()).done;){var n=g.value;e.delete(n)}}))}))},g.forEach=function(e,g){for(var t,n=M(this);!(t=n()).done;){var I=t.value;e.call(g,I,I,this)}},g.add=function(e){var g=this;if((this.atom_,it(this))&&!st(this,{type:Yt,object:this,newValue:e}))return this;if(!this.has(e)){Ct((function(){g.data_.add(g.enhancer_(e,void 0)),g.atom_.reportChanged()}));var t=!1,n=ut(this),I=n?{observableKind:"set",debugObjectName:this.name_,type:Yt,object:this,newValue:e}:null;t,n&&At(this,I)}return this},g.delete=function(e){var g=this;if(it(this)&&!st(this,{type:Ht,object:this,oldValue:e}))return!1;if(this.has(e)){var t=ut(this),n=t?{observableKind:"set",debugObjectName:this.name_,type:Ht,object:this,oldValue:e}:null;return Ct((function(){g.atom_.reportChanged(),g.data_.delete(e)})),t&&At(this,n),!0}return!1},g.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},g.entries=function(){var e=0,g=Array.from(this.keys()),t=Array.from(this.values());return An({next:function(){var n=e;return e+=1,n<t.length?{value:[g[n],t[n]],done:!1}:{done:!0}}})},g.keys=function(){return this.values()},g.values=function(){this.atom_.reportObserved();var e=this,g=0,t=Array.from(this.data_.values());return An({next:function(){return g<t.length?{value:e.dehanceValue_(t[g++]),done:!1}:{done:!0}}})},g.replace=function(e){var g=this;return Et(e)&&(e=new Set(e)),Ct((function(){Array.isArray(e)||R(e)?(g.clear(),e.forEach((function(e){return g.add(e)}))):null!==e&&void 0!==e&&l("Cannot initialize set from "+e)})),this},g.observe_=function(e,g){return dt(this,e)},g.intercept_=function(e){return ct(this,e)},g.toJSON=function(){return Array.from(this)},g.toString=function(){return"[object ObservableSet]"},g[wt]=function(){return this.values()},N(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Nt,get:function(){return"Set"}}]),e}(),Et=W("ObservableSet",zt),Mt=Object.create(null),Ut="remove",Qt=function(){function e(e,g,t,n){void 0===g&&(g=new Map),void 0===n&&(n=me),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=g,this.name_=t,this.defaultAnnotation_=n,this.keysAtom_=new j("ObservableObject.keys"),this.isPlainObject_=B(this.target_)}var g=e.prototype;return g.getObservablePropValue_=function(e){return this.values_.get(e).get()},g.setObservablePropValue_=function(e,g){var t=this.values_.get(e);if(t instanceof Oe)return t.set(g),!0;if(it(this)){var n=st(this,{type:pt,object:this.proxy_||this.target_,name:e,newValue:g});if(!n)return null;g=n.newValue}if((g=t.prepareNewValue_(g))!==ug.UNCHANGED){var I=ut(this),o=I?{type:pt,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:t.value_,name:e,newValue:g}:null;0,t.setNewValue_(g),I&&At(this,o)}return!0},g.get_=function(e){return ug.trackingDerivation&&!Y(this.target_,e)&&this.has_(e),this.target_[e]},g.set_=function(e,g,t){return void 0===t&&(t=!1),Y(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,g):t?Reflect.set(this.target_,e,g):(this.target_[e]=g,!0):this.extend_(e,{value:g,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,t)},g.has_=function(e){if(!ug.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var g=this.pendingKeys_.get(e);return g||(g=new De(e in this.target_,$,"ObservableObject.key?",!1),this.pendingKeys_.set(e,g)),g.get()},g.make_=function(e,g){if(!0===g&&(g=this.defaultAnnotation_),!1!==g){if(Ot(this,g,e),!(e in this.target_)){var t;if(null!=(t=this.target_[Q])&&t[e])return;l(1,g.annotationType_,this.name_+"."+e.toString())}for(var n=this.target_;n&&n!==s;){var I=i(n,e);if(I){var o=g.make_(this,e,I,n);if(0===o)return;if(1===o)break}n=Object.getPrototypeOf(n)}Pt(this,g,e)}},g.extend_=function(e,g,t,n){if(void 0===n&&(n=!1),!0===t&&(t=this.defaultAnnotation_),!1===t)return this.defineProperty_(e,g,n);Ot(this,t,e);var I=t.extend_(this,e,g,n);return I&&Pt(this,t,e),I},g.defineProperty_=function(e,g,t){void 0===t&&(t=!1);try{bg();var n=this.delete_(e);if(!n)return n;if(it(this)){var I=st(this,{object:this.proxy_||this.target_,name:e,type:Yt,newValue:g.value});if(!I)return null;var o=I.newValue;g.value!==o&&(g=F({},g,{value:o}))}if(t){if(!Reflect.defineProperty(this.target_,e,g))return!1}else c(this.target_,e,g);this.notifyPropertyAddition_(e,g.value)}finally{Zg()}return!0},g.defineObservableProperty_=function(e,g,t,n){void 0===n&&(n=!1);try{bg();var I=this.delete_(e);if(!I)return I;if(it(this)){var o=st(this,{object:this.proxy_||this.target_,name:e,type:Yt,newValue:g});if(!o)return null;g=o.newValue}var l=Dt(e),C={configurable:!ug.safeDescriptors||this.isPlainObject_,enumerable:!0,get:l.get,set:l.set};if(n){if(!Reflect.defineProperty(this.target_,e,C))return!1}else c(this.target_,e,C);var r=new De(g,t,"ObservableObject.key",!1);this.values_.set(e,r),this.notifyPropertyAddition_(e,r.value_)}finally{Zg()}return!0},g.defineComputedProperty_=function(e,g,t){void 0===t&&(t=!1);try{bg();var n=this.delete_(e);if(!n)return n;if(it(this))if(!st(this,{object:this.proxy_||this.target_,name:e,type:Yt,newValue:void 0}))return null;g.name||(g.name="ObservableObject.key"),g.context=this.proxy_||this.target_;var I=Dt(e),o={configurable:!ug.safeDescriptors||this.isPlainObject_,enumerable:!1,get:I.get,set:I.set};if(t){if(!Reflect.defineProperty(this.target_,e,o))return!1}else c(this.target_,e,o);this.values_.set(e,new Oe(g)),this.notifyPropertyAddition_(e,void 0)}finally{Zg()}return!0},g.delete_=function(e,g){if(void 0===g&&(g=!1),!Y(this.target_,e))return!0;if(it(this)&&!st(this,{object:this.proxy_||this.target_,name:e,type:Ut}))return null;try{var t,n;bg();var I,o=ut(this),l=this.values_.get(e),C=void 0;if(!l&&o)C=null==(I=i(this.target_,e))?void 0:I.value;if(g){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(l&&(this.values_.delete(e),l instanceof De&&(C=l.value_),hg(l)),this.keysAtom_.reportChanged(),null==(t=this.pendingKeys_)||null==(n=t.get(e))||n.set(e in this.target_),o){var r={type:Ut,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:C,name:e};0,o&&At(this,r)}}finally{Zg()}return!0},g.observe_=function(e,g){return dt(this,e)},g.intercept_=function(e){return ct(this,e)},g.notifyPropertyAddition_=function(e,g){var t,n,I=ut(this);if(I){var o=I?{type:Yt,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:g}:null;0,I&&At(this,o)}null==(t=this.pendingKeys_)||null==(n=t.get(e))||n.set(!0),this.keysAtom_.reportChanged()},g.ownKeys_=function(){return this.keysAtom_.reportObserved(),k(this.target_)},g.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Lt(e,g){var t;if(Y(e,D))return e;var n=null!=(t=null==g?void 0:g.name)?t:"ObservableObject",I=new Qt(e,new Map,String(n),function(e){var g;return e?null!=(g=e.defaultDecorator)?g:be(e):void 0}(g));return v(e,D,I),e}var Tt=W("ObservableObjectAdministration",Qt);function Dt(e){return Mt[e]||(Mt[e]={get:function(){return this[D].getObservablePropValue_(e)},set:function(g){return this[D].setObservablePropValue_(e,g)}})}function jt(e){return!!y(e)&&Tt(e[D])}function Pt(e,g,t){var n;null==(n=e.target_[Q])||delete n[t]}function Ot(e,g,t){}var qt,_t,$t=nn(0),en=0,gn=function(){};qt=gn,_t=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(qt.prototype,_t):void 0!==qt.prototype.__proto__?qt.prototype.__proto__=_t:qt.prototype=_t;var tn=function(e,g,t){function n(g,t,n,I){var o;void 0===n&&(n="ObservableArray"),void 0===I&&(I=!1),o=e.call(this)||this;var l=new Gt(n,t,I,!0);if(l.proxy_=z(o),S(z(o),D,l),g&&g.length){var C=Qe(!0);o.spliceWithArray(0,0,g),Le(C)}return Object.defineProperty(z(o),"0",$t),o}K(n,e);var I=n.prototype;return I.concat=function(){this[D].atom_.reportObserved();for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];return Array.prototype.concat.apply(this.slice(),g.map((function(e){return kt(e)?e.slice():e})))},I[t]=function(){var e=this,g=0;return An({next:function(){return g<e.length?{value:e[g++],done:!1}:{done:!0,value:void 0}}})},N(n,[{key:"length",get:function(){return this[D].getArrayLength_()},set:function(e){this[D].setArrayLength_(e)}},{key:g,get:function(){return"Array"}}]),n}(gn,Symbol.toStringTag,Symbol.iterator);function nn(e){return{enumerable:!1,configurable:!0,get:function(){return this[D].get_(e)},set:function(g){this[D].set_(e,g)}}}function In(e){c(tn.prototype,""+e,nn(e))}function on(e){if(e>en){for(var g=en;g<e+100;g++)In(g);en=e}}function ln(e,g,t){return new tn(e,g,t)}function Cn(e,g){if("object"===typeof e&&null!==e){if(kt(e))return void 0!==g&&l(23),e[D].atom_;if(Et(e))return e.atom_;if(Kt(e)){if(void 0===g)return e.keysAtom_;var t=e.data_.get(g)||e.hasMap_.get(g);return t||l(25,g,an(e)),t}if(jt(e)){if(!g)return l(26);var n=e[D].values_.get(g);return n||l(27,g,an(e)),n}if(P(e)||qe(e)||Sg(e))return e}else if(h(e)&&Sg(e[D]))return e[D];l(28)}function rn(e,g){return e||l(29),void 0!==g?rn(Cn(e,g)):P(e)||qe(e)||Sg(e)||Kt(e)||Et(e)?e:e[D]?e[D]:void l(24,e)}function an(e,g){var t;if(void 0!==g)t=Cn(e,g);else{if(Fg(e))return e.name;t=jt(e)||Kt(e)||Et(e)?rn(e):Cn(e)}return t.name_}Object.entries(Bt).forEach((function(e){var g=e[0],t=e[1];"concat"!==g&&v(tn.prototype,g,t)})),on(1e3);var cn=s.toString;function sn(e,g,t){return void 0===t&&(t=-1),un(e,g,t)}function un(e,g,t,n,I){if(e===g)return 0!==e||1/e===1/g;if(null==e||null==g)return!1;if(e!==e)return g!==g;var o=typeof e;if("function"!==o&&"object"!==o&&"object"!=typeof g)return!1;var l=cn.call(e);if(l!==cn.call(g))return!1;switch(l){case"[object RegExp]":case"[object String]":return""+e===""+g;case"[object Number]":return+e!==+e?+g!==+g:0===+e?1/+e===1/g:+e===+g;case"[object Date]":case"[object Boolean]":return+e===+g;case"[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(g);case"[object Map]":case"[object Set]":t>=0&&t++}e=dn(e),g=dn(g);var C="[object Array]"===l;if(!C){if("object"!=typeof e||"object"!=typeof g)return!1;var r=e.constructor,a=g.constructor;if(r!==a&&!(h(r)&&r instanceof r&&h(a)&&a instanceof a)&&"constructor"in e&&"constructor"in g)return!1}if(0===t)return!1;t<0&&(t=-1),I=I||[];for(var i=(n=n||[]).length;i--;)if(n[i]===e)return I[i]===g;if(n.push(e),I.push(g),C){if((i=e.length)!==g.length)return!1;for(;i--;)if(!un(e[i],g[i],t-1,n,I))return!1}else{var c,s=Object.keys(e);if(i=s.length,Object.keys(g).length!==i)return!1;for(;i--;)if(!Y(g,c=s[i])||!un(e[c],g[c],t-1,n,I))return!1}return n.pop(),I.pop(),!0}function dn(e){return kt(e)?e.slice():V(e)||Kt(e)||R(e)||Et(e)?Array.from(e.entries()):e}function An(e){return e[Symbol.iterator]=mn,e}function mn(){return this}if(["Symbol","Map","Set"].forEach((function(e){"undefined"===typeof r()[e]&&l("MobX requires global '"+e+"' to be available or polyfilled")})),"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:an},$mobx:D}),!e.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!function(e,g,t){var n=Lt(e,t)[D];bg();try{0,null!=g||(g=function(e){return Y(e,Q)||v(e,Q,F({},e[Q])),e[Q]}(e)),k(g).forEach((function(e){return n.make_(e,g[e])}))}finally{Zg()}return e})throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var bn=t(4164);function Zn(e){e()}function pn(e){return Og(e)}var hn="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry;function Gn(e){return{reaction:e,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+yn}}var yn=1e4,Bn=1e4;var fn=function(e){var g="function"===typeof Symbol&&Symbol.iterator,t=g&&e[g],n=0;if(t)return t.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")};var vn=hn?function(e){var g=new Map,t=1,n=new e((function(e){var t=g.get(e);t&&(t.reaction.dispose(),g.delete(e))}));return{addReactionToTrack:function(e,I,o){var l=t++;return n.register(o,l,e),e.current=Gn(I),e.current.finalizationRegistryCleanupToken=l,g.set(l,e.current),e.current},recordReactionAsCommitted:function(e){n.unregister(e),e.current&&e.current.finalizationRegistryCleanupToken&&g.delete(e.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}(hn):function(){var e,g=new Set;function t(){void 0===e&&(e=setTimeout(n,Bn))}function n(){e=void 0;var n=Date.now();g.forEach((function(e){var t=e.current;t&&n>=t.cleanAt&&(t.reaction.dispose(),e.current=null,g.delete(e))})),g.size>0&&t()}return{addReactionToTrack:function(e,n,I){var o;return e.current=Gn(n),o=e,g.add(o),t(),e.current},recordReactionAsCommitted:function(e){g.delete(e)},forceCleanupTimerToRunNowForTests:function(){e&&(clearTimeout(e),n())},resetCleanupScheduleForTests:function(){var t,n;if(g.size>0){try{for(var I=fn(g),o=I.next();!o.done;o=I.next()){var l=o.value,C=l.current;C&&(C.reaction.dispose(),l.current=null)}}catch(r){t={error:r}}finally{try{o&&!o.done&&(n=I.return)&&n.call(I)}finally{if(t)throw t.error}}g.clear()}e&&(clearTimeout(e),e=void 0)}}}(),Sn=vn.addReactionToTrack,Wn=vn.recordReactionAsCommitted,Vn=(vn.resetCleanupScheduleForTests,vn.forceCleanupTimerToRunNowForTests,!1);function Rn(){return Vn}var Xn=function(e,g){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,I,o=t.call(e),l=[];try{for(;(void 0===g||g-- >0)&&!(n=o.next()).done;)l.push(n.value)}catch(C){I={error:C}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(I)throw I.error}}return l};function kn(e){return"observer".concat(e)}var Jn=function(){};function Yn(){return new Jn}function Hn(g,t){if(void 0===t&&(t="observed"),Rn())return g();var n=Xn(e.useState(Yn),1)[0],I=Xn(e.useState(),2)[1],o=function(){return I([])},l=e.useRef(null);if(!l.current)var C=new Gg(kn(t),(function(){r.mounted?o():r.changedBeforeMount=!0})),r=Sn(l,C,n);var a,i,c=l.current.reaction;if(e.useDebugValue(c,pn),e.useEffect((function(){return Wn(l),l.current?(l.current.mounted=!0,l.current.changedBeforeMount&&(l.current.changedBeforeMount=!1,o())):(l.current={reaction:new Gg(kn(t),(function(){o()})),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},o()),function(){l.current.reaction.dispose(),l.current=null}}),[]),c.track((function(){try{a=g()}catch(e){i=e}})),i)throw i;return a}var wn="function"===typeof Symbol&&Symbol.for,Nn=wn?Symbol.for("react.forward_ref"):"function"===typeof e.forwardRef&&(0,e.forwardRef)((function(e){return null})).$$typeof,Fn=wn?Symbol.for("react.memo"):"function"===typeof e.memo&&(0,e.memo)((function(e){return null})).$$typeof;function Kn(g,t){var n;if(Fn&&g.$$typeof===Fn)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(Rn())return g;var I=null!==(n=null===t||void 0===t?void 0:t.forwardRef)&&void 0!==n&&n,o=g,l=g.displayName||g.name;if(Nn&&g.$$typeof===Nn&&(I=!0,"function"!==typeof(o=g.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var C,r,a=function(e,g){return Hn((function(){return o(e,g)}),l)};return""!==l&&(a.displayName=l),g.contextTypes&&(a.contextTypes=g.contextTypes),I&&(a=(0,e.forwardRef)(a)),a=(0,e.memo)(a),C=g,r=a,Object.keys(C).forEach((function(e){xn[e]||Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(C,e))})),a}var xn={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function zn(e,g){if(!(e instanceof g))throw new TypeError("Cannot call a class as a function")}!function(e){e||(e=Zn),jg({reactionScheduler:e})}(bn.unstable_batchedUpdates);var En=t(9142);function Mn(e,g){for(var t=0;t<g.length;t++){var n=g[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(0,En.Z)(n.key),n)}}function Un(e,g,t){return g&&Mn(e.prototype,g),t&&Mn(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var Qn=t(9611);function Ln(e,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(g&&g.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),g&&(0,Qn.Z)(e,g)}function Tn(e){return Tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tn(e)}function Dn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var jn=t(1002);function Pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function On(e){var g=Dn();return function(){var t,n=Tn(e);if(g){var I=Tn(this).constructor;t=Reflect.construct(n,arguments,I)}else t=n.apply(this,arguments);return function(e,g){if(g&&("object"===(0,jn.Z)(g)||"function"===typeof g))return g;if(void 0!==g)throw new TypeError("Derived constructors may only return object or undefined");return Pn(e)}(this,t)}}var qn=t(9439);function _n(e,g,t){return _n=Dn()?Reflect.construct.bind():function(e,g,t){var n=[null];n.push.apply(n,g);var I=new(Function.bind.apply(e,n));return t&&(0,Qn.Z)(I,t.prototype),I},_n.apply(null,arguments)}function $n(e){var g="function"===typeof Map?new Map:void 0;return $n=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof g){if(g.has(e))return g.get(e);g.set(e,n)}function n(){return _n(e,arguments,Tn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,Qn.Z)(n,e)},$n(e)}var eI=t(3878),gI=t(9199),tI=t(181),nI=t(5267);function II(e,g){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=(0,tI.Z)(e))||g&&e&&"number"===typeof e.length){t&&(e=t);var n=0,I=function(){};return{s:I,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:I}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,C=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return l=e.done,e},e:function(e){C=!0,o=e},f:function(){try{l||null==t.return||t.return()}finally{if(C)throw o}}}}var oI,lI=t(3433);function CI(){return CI=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},CI.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(oI||(oI={}));var rI,aI="popstate";function iI(e,g){if(!1===e||null===e||"undefined"===typeof e)throw new Error(g)}function cI(e,g){return{usr:e.state,key:e.key,idx:g}}function sI(e,g,t,n){return void 0===t&&(t=null),CI({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof g?dI(g):g,{state:t,key:g&&g.key||n||Math.random().toString(36).substr(2,8)})}function uI(e){var g=e.pathname,t=void 0===g?"/":g,n=e.search,I=void 0===n?"":n,o=e.hash,l=void 0===o?"":o;return I&&"?"!==I&&(t+="?"===I.charAt(0)?I:"?"+I),l&&"#"!==l&&(t+="#"===l.charAt(0)?l:"#"+l),t}function dI(e){var g={};if(e){var t=e.indexOf("#");t>=0&&(g.hash=e.substr(t),e=e.substr(0,t));var n=e.indexOf("?");n>=0&&(g.search=e.substr(n),e=e.substr(0,n)),e&&(g.pathname=e)}return g}function AI(e,g,t,n){void 0===n&&(n={});var I=n,o=I.window,l=void 0===o?document.defaultView:o,C=I.v5Compat,r=void 0!==C&&C,a=l.history,i=oI.Pop,c=null,s=u();function u(){return(a.state||{idx:null}).idx}function d(){i=oI.Pop;var e=u(),g=null==e?null:e-s;s=e,c&&c({action:i,location:m.location,delta:g})}function A(e){var g="null"!==l.location.origin?l.location.origin:l.location.href,t="string"===typeof e?e:uI(e);return iI(g,"No window.location.(origin|href) available to create URL for href: "+t),new URL(t,g)}null==s&&(s=0,a.replaceState(CI({},a.state,{idx:s}),""));var m={get action(){return i},get location(){return e(l,a)},listen:function(e){if(c)throw new Error("A history only accepts one active listener");return l.addEventListener(aI,d),c=e,function(){l.removeEventListener(aI,d),c=null}},createHref:function(e){return g(l,e)},createURL:A,encodeLocation:function(e){var g=A(e);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:function(e,g){i=oI.Push;var n=sI(m.location,e,g);t&&t(n,e);var I=cI(n,s=u()+1),o=m.createHref(n);try{a.pushState(I,"",o)}catch(C){l.location.assign(o)}r&&c&&c({action:i,location:m.location,delta:1})},replace:function(e,g){i=oI.Replace;var n=sI(m.location,e,g);t&&t(n,e);var I=cI(n,s=u()),o=m.createHref(n);a.replaceState(I,"",o),r&&c&&c({action:i,location:m.location,delta:0})},go:function(e){return a.go(e)}};return m}function mI(e,g,t){void 0===t&&(t="/");var n=XI(("string"===typeof g?dI(g):g).pathname||"/",t);if(null==n)return null;var I=bI(e);!function(e){e.sort((function(e,g){return e.score!==g.score?g.score-e.score:function(e,g){var t=e.length===g.length&&e.slice(0,-1).every((function(e,t){return e===g[t]}));return t?e[e.length-1]-g[g.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),g.routesMeta.map((function(e){return e.childrenIndex})))}))}(I);for(var o=null,l=0;null==o&&l<I.length;++l)o=WI(I[l],RI(n));return o}function bI(e,g,t,n){void 0===g&&(g=[]),void 0===t&&(t=[]),void 0===n&&(n="");var I=function(e,I,o){var l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:I,route:e};l.relativePath.startsWith("/")&&(iI(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),l.relativePath=l.relativePath.slice(n.length));var C=wI([n,l.relativePath]),r=t.concat(l);e.children&&e.children.length>0&&(iI(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+C+'".'),bI(e.children,g,r,C)),(null!=e.path||e.index)&&g.push({path:C,score:SI(C,e.index),routesMeta:r})};return e.forEach((function(e,g){var t;if(""!==e.path&&null!=(t=e.path)&&t.includes("?")){var n,o=II(ZI(e.path));try{for(o.s();!(n=o.n()).done;){var l=n.value;I(e,g,l)}}catch(C){o.e(C)}finally{o.f()}}else I(e,g)})),g}function ZI(e){var g=e.split("/");if(0===g.length)return[];var t,n=(t=g,(0,eI.Z)(t)||(0,gI.Z)(t)||(0,tI.Z)(t)||(0,nI.Z)()),I=n[0],o=n.slice(1),l=I.endsWith("?"),C=I.replace(/\?$/,"");if(0===o.length)return l?[C,""]:[C];var r=ZI(o.join("/")),a=[];return a.push.apply(a,(0,lI.Z)(r.map((function(e){return""===e?C:[C,e].join("/")})))),l&&a.push.apply(a,(0,lI.Z)(r)),a.map((function(g){return e.startsWith("/")&&""===g?"/":g}))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(rI||(rI={}));var pI=/^:\w+$/,hI=3,GI=2,yI=1,BI=10,fI=-2,vI=function(e){return"*"===e};function SI(e,g){var t=e.split("/"),n=t.length;return t.some(vI)&&(n+=fI),g&&(n+=GI),t.filter((function(e){return!vI(e)})).reduce((function(e,g){return e+(pI.test(g)?hI:""===g?yI:BI)}),n)}function WI(e,g){for(var t=e.routesMeta,n={},I="/",o=[],l=0;l<t.length;++l){var C=t[l],r=l===t.length-1,a="/"===I?g:g.slice(I.length)||"/",i=VI({path:C.relativePath,caseSensitive:C.caseSensitive,end:r},a);if(!i)return null;Object.assign(n,i.params);var c=C.route;o.push({params:n,pathname:wI([I,i.pathname]),pathnameBase:NI(wI([I,i.pathnameBase])),route:c}),"/"!==i.pathnameBase&&(I=wI([I,i.pathnameBase]))}return o}function VI(e,g){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var t=function(e,g,t){void 0===g&&(g=!1);void 0===t&&(t=!0);kI("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var n=[],I="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,g){return n.push(g),"/([^\\/]+)"}));e.endsWith("*")?(n.push("*"),I+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?I+="\\/*$":""!==e&&"/"!==e&&(I+="(?:(?=\\/|$))");var o=new RegExp(I,g?void 0:"i");return[o,n]}(e.path,e.caseSensitive,e.end),n=(0,qn.Z)(t,2),I=n[0],o=n[1],l=g.match(I);if(!l)return null;var C=l[0],r=C.replace(/(.)\/+$/,"$1"),a=l.slice(1),i=o.reduce((function(e,g,t){if("*"===g){var n=a[t]||"";r=C.slice(0,C.length-n.length).replace(/(.)\/+$/,"$1")}return e[g]=function(e,g){try{return decodeURIComponent(e)}catch(t){return kI(!1,'The value for the URL param "'+g+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}(a[t]||"",g),e}),{});return{params:i,pathname:C,pathnameBase:r,pattern:e}}function RI(e){try{return decodeURI(e)}catch(g){return kI(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+g+")."),e}}function XI(e,g){if("/"===g)return e;if(!e.toLowerCase().startsWith(g.toLowerCase()))return null;var t=g.endsWith("/")?g.length-1:g.length,n=e.charAt(t);return n&&"/"!==n?null:e.slice(t)||"/"}function kI(e,g){if(!e){"undefined"!==typeof console&&console.warn(g);try{throw new Error(g)}catch(t){}}}function JI(e,g,t,n){return"Cannot include a '"+e+"' character in a manually specified `to."+g+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+t+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function YI(e){return e.filter((function(e,g){return 0===g||e.route.path&&e.route.path.length>0}))}function HI(e,g,t,n){var I;void 0===n&&(n=!1),"string"===typeof e?I=dI(e):(iI(!(I=CI({},e)).pathname||!I.pathname.includes("?"),JI("?","pathname","search",I)),iI(!I.pathname||!I.pathname.includes("#"),JI("#","pathname","hash",I)),iI(!I.search||!I.search.includes("#"),JI("#","search","hash",I)));var o,l=""===e||""===I.pathname,C=l?"/":I.pathname;if(n||null==C)o=t;else{var r=g.length-1;if(C.startsWith("..")){for(var a=C.split("/");".."===a[0];)a.shift(),r-=1;I.pathname=a.join("/")}o=r>=0?g[r]:"/"}var i=function(e,g){void 0===g&&(g="/");var t="string"===typeof e?dI(e):e,n=t.pathname,I=t.search,o=void 0===I?"":I,l=t.hash,C=void 0===l?"":l,r=n?n.startsWith("/")?n:function(e,g){var t=g.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?t.length>1&&t.pop():"."!==e&&t.push(e)})),t.length>1?t.join("/"):"/"}(n,g):g;return{pathname:r,search:FI(o),hash:KI(C)}}(I,o),c=C&&"/"!==C&&C.endsWith("/"),s=(l||"."===C)&&t.endsWith("/");return i.pathname.endsWith("/")||!c&&!s||(i.pathname+="/"),i}var wI=function(e){return e.join("/").replace(/\/\/+/g,"/")},NI=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},FI=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},KI=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},xI=function(e){Ln(t,e);var g=On(t);function t(){return zn(this,t),g.apply(this,arguments)}return Un(t)}($n(Error));function zI(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var EI=["post","put","patch","delete"],MI=(new Set(EI),["get"].concat(EI));new Set(MI),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function UI(){return UI=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},UI.apply(this,arguments)}var QI="function"===typeof Object.is?Object.is:function(e,g){return e===g&&(0!==e||1/e===1/g)||e!==e&&g!==g},LI=e.useState,TI=e.useEffect,DI=e.useLayoutEffect,jI=e.useDebugValue;function PI(e){var g=e.getSnapshot,t=e.value;try{var n=g();return!QI(t,n)}catch(I){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,g.useSyncExternalStore;var OI=e.createContext(null);var qI=e.createContext(null);var _I=e.createContext(null);var $I=e.createContext(null);var eo=e.createContext(null);var go=e.createContext({outlet:null,matches:[]});var to=e.createContext(null);function no(){return null!=e.useContext(eo)}function Io(){return no()||iI(!1),e.useContext(eo).location}function oo(){no()||iI(!1);var g=e.useContext($I),t=g.basename,n=g.navigator,I=e.useContext(go).matches,o=Io().pathname,l=JSON.stringify(YI(I).map((function(e){return e.pathnameBase}))),C=e.useRef(!1);return e.useEffect((function(){C.current=!0})),e.useCallback((function(e,g){if(void 0===g&&(g={}),C.current)if("number"!==typeof e){var I=HI(e,JSON.parse(l),o,"path"===g.relative);"/"!==t&&(I.pathname="/"===I.pathname?t:wI([t,I.pathname])),(g.replace?n.replace:n.push)(I,g.state,g)}else n.go(e)}),[t,n,l,o])}var lo=e.createContext(null);function Co(g,t){var n=(void 0===t?{}:t).relative,I=e.useContext(go).matches,o=Io().pathname,l=JSON.stringify(YI(I).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return HI(g,JSON.parse(l),o,"path"===n)}),[g,l,o,n])}function ro(g,t){no()||iI(!1);var n,I=e.useContext($I).navigator,o=e.useContext(qI),l=e.useContext(go).matches,C=l[l.length-1],r=C?C.params:{},a=(C&&C.pathname,C?C.pathnameBase:"/"),i=(C&&C.route,Io());if(t){var c,s="string"===typeof t?dI(t):t;"/"===a||(null==(c=s.pathname)?void 0:c.startsWith(a))||iI(!1),n=s}else n=i;var u=n.pathname||"/",d=mI(g,{pathname:"/"===a?u:u.slice(a.length)||"/"});var A=Ao(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},r,e.params),pathname:wI([a,I.encodeLocation?I.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?a:wI([a,I.encodeLocation?I.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),l,o||void 0);return t&&A?e.createElement(eo.Provider,{value:{location:UI({pathname:"/",search:"",hash:"",state:null,key:"default"},n),navigationType:oI.Pop}},A):A}function ao(){var g=function(){var g,t=e.useContext(to),n=mo(co.UseRouteError),I=bo(co.UseRouteError);if(t)return t;return null==(g=n.errors)?void 0:g[I]}(),t=zI(g)?g.status+" "+g.statusText:g instanceof Error?g.message:JSON.stringify(g),n=g instanceof Error?g.stack:null,I="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:I};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},t),n?e.createElement("pre",{style:o},n):null,null)}var io,co,so=function(g){Ln(n,g);var t=On(n);function n(e){var g;return zn(this,n),(g=t.call(this,e)).state={location:e.location,error:e.error},g}return Un(n,[{key:"componentDidCatch",value:function(e,g){console.error("React Router caught the following error during render",e,g)}},{key:"render",value:function(){return this.state.error?e.createElement(go.Provider,{value:this.props.routeContext},e.createElement(to.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,g){return g.location!==e.location?{error:e.error,location:e.location}:{error:e.error||g.error,location:g.location}}}]),n}(e.Component);function uo(g){var t=g.routeContext,n=g.match,I=g.children,o=e.useContext(OI);return o&&o.static&&o.staticContext&&n.route.errorElement&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),e.createElement(go.Provider,{value:t},I)}function Ao(g,t,n){if(void 0===t&&(t=[]),null==g){if(null==n||!n.errors)return null;g=n.matches}var I=g,o=null==n?void 0:n.errors;if(null!=o){var l=I.findIndex((function(e){return e.route.id&&(null==o?void 0:o[e.route.id])}));l>=0||iI(!1),I=I.slice(0,Math.min(I.length,l+1))}return I.reduceRight((function(g,l,C){var r=l.route.id?null==o?void 0:o[l.route.id]:null,a=n?l.route.errorElement||e.createElement(ao,null):null,i=t.concat(I.slice(0,C+1)),c=function(){return e.createElement(uo,{match:l,routeContext:{outlet:g,matches:i}},r?a:void 0!==l.route.element?l.route.element:g)};return n&&(l.route.errorElement||0===C)?e.createElement(so,{location:n.location,component:a,error:r,children:c(),routeContext:{outlet:null,matches:i}}):c()}),null)}function mo(g){var t=e.useContext(qI);return t||iI(!1),t}function bo(g){var t=function(g){var t=e.useContext(go);return t||iI(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||iI(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(io||(io={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(co||(co={}));var Zo;function po(g){var t=g.to,n=g.replace,I=g.state,o=g.relative;no()||iI(!1);var l=e.useContext(qI),C=oo();return e.useEffect((function(){l&&"idle"!==l.navigation.state||C(t,{replace:n,state:I,relative:o})})),null}function ho(g){return function(g){var t=e.useContext(go).outlet;return t?e.createElement(lo.Provider,{value:g},t):t}(g.context)}function Go(g){var t=g.basename,n=void 0===t?"/":t,I=g.children,o=void 0===I?null:I,l=g.location,C=g.navigationType,r=void 0===C?oI.Pop:C,a=g.navigator,i=g.static,c=void 0!==i&&i;no()&&iI(!1);var s=n.replace(/^\/*/,"/"),u=e.useMemo((function(){return{basename:s,navigator:a,static:c}}),[s,a,c]);"string"===typeof l&&(l=dI(l));var d=l,A=d.pathname,m=void 0===A?"/":A,b=d.search,Z=void 0===b?"":b,p=d.hash,h=void 0===p?"":p,G=d.state,y=void 0===G?null:G,B=d.key,f=void 0===B?"default":B,v=e.useMemo((function(){var e=XI(m,s);return null==e?null:{pathname:e,search:Z,hash:h,state:y,key:f}}),[s,m,Z,h,y,f]);return null==v?null:e.createElement($I.Provider,{value:u},e.createElement(eo.Provider,{children:o,value:{location:v,navigationType:r}}))}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Zo||(Zo={}));var yo=new Promise((function(){}));e.Component;var Bo=t(4942),fo=t(3366),vo=t(7462),So=t(8182),Wo=t(7312),Vo=t(1217),Ro=t(4419),Xo=t(7078),ko=(0,t(4046).ZP)(),Jo=t(5080),Yo=t(184),Ho=["className","component","disableGutters","fixed","maxWidth","classes"],wo=(0,Jo.Z)(),No=ko("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,g["maxWidth".concat((0,Wo.Z)(String(t.maxWidth)))],t.fixed&&g.fixed,t.disableGutters&&g.disableGutters]}}),Fo=function(e){return(0,Xo.Z)({props:e,name:"MuiContainer",defaultTheme:wo})},Ko=function(e,g){var t=e.classes,n=e.fixed,I=e.disableGutters,o=e.maxWidth,l={root:["root",o&&"maxWidth".concat((0,Wo.Z)(String(o))),n&&"fixed",I&&"disableGutters"]};return(0,Ro.Z)(l,(function(e){return(0,Vo.Z)(g,e)}),t)};var xo=t(4036),zo=t(6934),Eo=t(1402),Mo=function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=g.createStyledComponent,n=void 0===t?No:t,I=g.useThemeProps,o=void 0===I?Fo:I,l=g.componentName,C=void 0===l?"MuiContainer":l,r=n((function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!t.disableGutters&&(0,Bo.Z)({paddingLeft:g.spacing(2),paddingRight:g.spacing(2)},g.breakpoints.up("sm"),{paddingLeft:g.spacing(3),paddingRight:g.spacing(3)}))}),(function(e){var g=e.theme;return e.ownerState.fixed&&Object.keys(g.breakpoints.values).reduce((function(e,t){var n=t,I=g.breakpoints.values[n];return 0!==I&&(e[g.breakpoints.up(n)]={maxWidth:"".concat(I).concat(g.breakpoints.unit)}),e}),{})}),(function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)({},"xs"===t.maxWidth&&(0,Bo.Z)({},g.breakpoints.up("xs"),{maxWidth:Math.max(g.breakpoints.values.xs,444)}),t.maxWidth&&"xs"!==t.maxWidth&&(0,Bo.Z)({},g.breakpoints.up(t.maxWidth),{maxWidth:"".concat(g.breakpoints.values[t.maxWidth]).concat(g.breakpoints.unit)}))}));return e.forwardRef((function(e,g){var t=o(e),n=t.className,I=t.component,l=void 0===I?"div":I,a=t.disableGutters,i=void 0!==a&&a,c=t.fixed,s=void 0!==c&&c,u=t.maxWidth,d=void 0===u?"lg":u,A=(0,fo.Z)(t,Ho),m=(0,vo.Z)({},t,{component:l,disableGutters:i,fixed:s,maxWidth:d}),b=Ko(m,C);return(0,Yo.jsx)(r,(0,vo.Z)({as:l,ownerState:m,className:(0,So.Z)(b.root,n),ref:g},A))}))}({createStyledComponent:(0,zo.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,g["maxWidth".concat((0,xo.Z)(String(t.maxWidth)))],t.fixed&&g.fixed,t.disableGutters&&g.disableGutters]}}),useThemeProps:function(e){return(0,Eo.Z)({props:e,name:"MuiContainer"})}}),Uo=Mo,Qo=t(2421),Lo=t(104),To=t(2466),Do=t(7416),jo=["sx"],Po=function(e){var g,t,n={systemProps:{},otherProps:{}},I=null!=(g=null==e||null==(t=e.theme)?void 0:t.unstable_sxConfig)?g:Do.Z;return Object.keys(e).forEach((function(g){I[g]?n.systemProps[g]=e[g]:n.otherProps[g]=e[g]})),n};function Oo(e){var g,t=e.sx,n=(0,fo.Z)(e,jo),I=Po(n),o=I.systemProps,l=I.otherProps;return g=Array.isArray(t)?[o].concat((0,lI.Z)(t)):"function"===typeof t?function(){var e=t.apply(void 0,arguments);return(0,To.P)(e)?(0,vo.Z)({},o,e):o}:(0,vo.Z)({},o,t),(0,vo.Z)({},l,{sx:g})}var qo=t(418),_o=["className","component"];var $o=t(5902),el=t(1979),gl=function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=g.defaultTheme,n=g.defaultClassName,I=void 0===n?"MuiBox-root":n,o=g.generateClassName,l=(0,Qo.ZP)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(Lo.Z),C=e.forwardRef((function(e,g){var n=(0,qo.Z)(t),C=Oo(e),r=C.className,a=C.component,i=void 0===a?"div":a,c=(0,fo.Z)(C,_o);return(0,Yo.jsx)(l,(0,vo.Z)({as:i,ref:g,className:(0,So.Z)(r,o?o(I):I),theme:n},c))}));return C}({defaultTheme:(0,el.Z)(),defaultClassName:"MuiBox-root",generateClassName:$o.Z.generate}),tl=gl,nl=t(5878);function Il(e){return(0,Vo.Z)("MuiTypography",e)}(0,nl.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var ol=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],ll=(0,zo.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,t.variant&&g[t.variant],"inherit"!==t.align&&g["align".concat((0,xo.Z)(t.align))],t.noWrap&&g.noWrap,t.gutterBottom&&g.gutterBottom,t.paragraph&&g.paragraph]}})((function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)({margin:0},t.variant&&g.typography[t.variant],"inherit"!==t.align&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})})),Cl={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},rl={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},al=e.forwardRef((function(e,g){var t=(0,Eo.Z)({props:e,name:"MuiTypography"}),n=function(e){return rl[e]||e}(t.color),I=Oo((0,vo.Z)({},t,{color:n})),o=I.align,l=void 0===o?"inherit":o,C=I.className,r=I.component,a=I.gutterBottom,i=void 0!==a&&a,c=I.noWrap,s=void 0!==c&&c,u=I.paragraph,d=void 0!==u&&u,A=I.variant,m=void 0===A?"body1":A,b=I.variantMapping,Z=void 0===b?Cl:b,p=(0,fo.Z)(I,ol),h=(0,vo.Z)({},I,{align:l,color:n,className:C,component:r,gutterBottom:i,noWrap:s,paragraph:d,variant:m,variantMapping:Z}),G=r||(d?"p":Z[m]||Cl[m])||"span",y=function(e){var g=e.align,t=e.gutterBottom,n=e.noWrap,I=e.paragraph,o=e.variant,l=e.classes,C={root:["root",o,"inherit"!==e.align&&"align".concat((0,xo.Z)(g)),t&&"gutterBottom",n&&"noWrap",I&&"paragraph"]};return(0,Ro.Z)(C,Il,l)}(h);return(0,Yo.jsx)(ll,(0,vo.Z)({as:G,ref:g,ownerState:h,className:(0,So.Z)(y.root,C)},p))})),il=t(3031),cl=t(2071);function sl(e){return(0,Vo.Z)("MuiLink",e)}var ul=(0,nl.Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),dl=t(8529),Al=t(2065),ml={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},bl=function(e){var g=e.theme,t=e.ownerState,n=function(e){return ml[e]||e}(t.color),I=(0,dl.DW)(g,"palette.".concat(n),!1)||t.color,o=(0,dl.DW)(g,"palette.".concat(n,"Channel"));return"vars"in g&&o?"rgba(".concat(o," / 0.4)"):(0,Al.Fq)(I,.4)},Zl=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],pl=(0,zo.ZP)(al,{name:"MuiLink",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,g["underline".concat((0,xo.Z)(t.underline))],"button"===t.component&&g.button]}})((function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)({},"none"===t.underline&&{textDecoration:"none"},"hover"===t.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===t.underline&&(0,vo.Z)({textDecoration:"underline"},"inherit"!==t.color&&{textDecorationColor:bl({theme:g,ownerState:t})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===t.component&&(0,Bo.Z)({position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(ul.focusVisible),{outline:"auto"}))})),hl=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiLink"}),I=n.className,o=n.color,l=void 0===o?"primary":o,C=n.component,r=void 0===C?"a":C,a=n.onBlur,i=n.onFocus,c=n.TypographyClasses,s=n.underline,u=void 0===s?"always":s,d=n.variant,A=void 0===d?"inherit":d,m=n.sx,b=(0,fo.Z)(n,Zl),Z=(0,il.Z)(),p=Z.isFocusVisibleRef,h=Z.onBlur,G=Z.onFocus,y=Z.ref,B=e.useState(!1),f=(0,qn.Z)(B,2),v=f[0],S=f[1],W=(0,cl.Z)(t,y),V=(0,vo.Z)({},n,{color:l,component:r,focusVisible:v,underline:u,variant:A}),R=function(e){var g=e.classes,t=e.component,n=e.focusVisible,I=e.underline,o={root:["root","underline".concat((0,xo.Z)(I)),"button"===t&&"button",n&&"focusVisible"]};return(0,Ro.Z)(o,sl,g)}(V);return(0,Yo.jsx)(pl,(0,vo.Z)({color:l,className:(0,So.Z)(R.root,I),classes:c,component:r,onBlur:function(e){h(e),!1===p.current&&S(!1),a&&a(e)},onFocus:function(e){G(e),!0===p.current&&S(!0),i&&i(e)},ref:W,ownerState:V,variant:A,sx:[].concat((0,lI.Z)(Object.keys(ml).includes(l)?[]:[{color:l}]),(0,lI.Z)(Array.isArray(m)?m:[m]))},b))})),Gl=function(){return(0,Yo.jsxs)(al,{variant:"body2",noWrap:!0,color:"text.secondary",align:"center",children:["Copyright \xa9 ",(0,Yo.jsx)(hl,{target:"_blank",color:"inherit",href:"http://www.bsac.by/",children:"\u0411\u0413\u0410\u0421"})," ".concat((new Date).getFullYear())]})};var yl=e.createContext({});function Bl(e){return(0,Vo.Z)("MuiList",e)}(0,nl.Z)("MuiList",["root","padding","dense","subheader"]);var fl=["children","className","component","dense","disablePadding","subheader"],vl=(0,zo.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,!t.disablePadding&&g.padding,t.dense&&g.dense,t.subheader&&g.subheader]}})((function(e){var g=e.ownerState;return(0,vo.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!g.disablePadding&&{paddingTop:8,paddingBottom:8},g.subheader&&{paddingTop:0})})),Sl=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiList"}),I=n.children,o=n.className,l=n.component,C=void 0===l?"ul":l,r=n.dense,a=void 0!==r&&r,i=n.disablePadding,c=void 0!==i&&i,s=n.subheader,u=(0,fo.Z)(n,fl),d=e.useMemo((function(){return{dense:a}}),[a]),A=(0,vo.Z)({},n,{component:C,dense:a,disablePadding:c}),m=function(e){var g=e.classes,t={root:["root",!e.disablePadding&&"padding",e.dense&&"dense",e.subheader&&"subheader"]};return(0,Ro.Z)(t,Bl,g)}(A);return(0,Yo.jsx)(yl.Provider,{value:d,children:(0,Yo.jsxs)(vl,(0,vo.Z)({as:C,className:(0,So.Z)(m.root,o),ref:t,ownerState:A},u,{children:[s,I]}))})}));var Wl=function(e){return"string"===typeof e},Vl=t(9683);function Rl(e,g){return g||(g=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(g)}}))}var Xl=t(4578),kl=e.createContext(null);function Jl(g,t){var n=Object.create(null);return g&&e.Children.map(g,(function(e){return e})).forEach((function(g){n[g.key]=function(g){return t&&(0,e.isValidElement)(g)?t(g):g}(g)})),n}function Yl(e,g,t){return null!=t[g]?t[g]:e.props[g]}function Hl(g,t,n){var I=Jl(g.children),o=function(e,g){function t(t){return t in g?g[t]:e[t]}e=e||{},g=g||{};var n,I=Object.create(null),o=[];for(var l in e)l in g?o.length&&(I[l]=o,o=[]):o.push(l);var C={};for(var r in g){if(I[r])for(n=0;n<I[r].length;n++){var a=I[r][n];C[I[r][n]]=t(a)}C[r]=t(r)}for(n=0;n<o.length;n++)C[o[n]]=t(o[n]);return C}(t,I);return Object.keys(o).forEach((function(l){var C=o[l];if((0,e.isValidElement)(C)){var r=l in t,a=l in I,i=t[l],c=(0,e.isValidElement)(i)&&!i.props.in;!a||r&&!c?a||!r||c?a&&r&&(0,e.isValidElement)(i)&&(o[l]=(0,e.cloneElement)(C,{onExited:n.bind(null,C),in:i.props.in,exit:Yl(C,"exit",g),enter:Yl(C,"enter",g)})):o[l]=(0,e.cloneElement)(C,{in:!1}):o[l]=(0,e.cloneElement)(C,{onExited:n.bind(null,C),in:!0,exit:Yl(C,"exit",g),enter:Yl(C,"enter",g)})}})),o}var wl=Object.values||function(e){return Object.keys(e).map((function(g){return e[g]}))},Nl=function(g){function t(e,t){var n,I=(n=g.call(this,e,t)||this).handleExited.bind(Pn(n));return n.state={contextValue:{isMounting:!0},handleExited:I,firstRender:!0},n}(0,Xl.Z)(t,g);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(g,t){var n,I,o=t.children,l=t.handleExited;return{children:t.firstRender?(n=g,I=l,Jl(n.children,(function(g){return(0,e.cloneElement)(g,{onExited:I.bind(null,g),in:!0,appear:Yl(g,"appear",n),enter:Yl(g,"enter",n),exit:Yl(g,"exit",n)})}))):Hl(g,o,l),firstRender:!1}},n.handleExited=function(e,g){var t=Jl(this.props.children);e.key in t||(e.props.onExited&&e.props.onExited(g),this.mounted&&this.setState((function(g){var t=(0,vo.Z)({},g.children);return delete t[e.key],{children:t}})))},n.render=function(){var g=this.props,t=g.component,n=g.childFactory,I=(0,fo.Z)(g,["component","childFactory"]),o=this.state.contextValue,l=wl(this.state.children).map(n);return delete I.appear,delete I.enter,delete I.exit,null===t?e.createElement(kl.Provider,{value:o},l):e.createElement(kl.Provider,{value:o},e.createElement(t,I,l))},t}(e.Component);Nl.propTypes={},Nl.defaultProps={component:"div",childFactory:function(e){return e}};var Fl=Nl,Kl=(t(3361),t(9886)),xl=(t(2110),t(5438)),zl=t(9140),El=t(2561),Ml=(0,Kl.w)((function(g,t){var n=g.styles,I=(0,zl.O)([n],void 0,(0,e.useContext)(Kl.T)),o=(0,e.useRef)();return(0,El.j)((function(){var e=t.key+"-global",g=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),n=!1,l=document.querySelector('style[data-emotion="'+e+" "+I.name+'"]');return t.sheet.tags.length&&(g.before=t.sheet.tags[0]),null!==l&&(n=!0,l.setAttribute("data-emotion",e),g.hydrate([l])),o.current=[g,n],function(){g.flush()}}),[t]),(0,El.j)((function(){var e=o.current,g=e[0];if(e[1])e[1]=!1;else{if(void 0!==I.next&&(0,xl.My)(t,I.next,!0),g.tags.length){var n=g.tags[g.tags.length-1].nextElementSibling;g.before=n,g.flush()}t.insert("",I,g,!1)}}),[t,I.name]),null}));function Ul(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];return(0,zl.O)(g)}var Ql=function(){var e=Ul.apply(void 0,arguments),g="animation-"+e.name;return{name:g,styles:"@keyframes "+g+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var Ll=function(g){var t=g.className,n=g.classes,I=g.pulsate,o=void 0!==I&&I,l=g.rippleX,C=g.rippleY,r=g.rippleSize,a=g.in,i=g.onExited,c=g.timeout,s=e.useState(!1),u=(0,qn.Z)(s,2),d=u[0],A=u[1],m=(0,So.Z)(t,n.ripple,n.rippleVisible,o&&n.ripplePulsate),b={width:r,height:r,top:-r/2+C,left:-r/2+l},Z=(0,So.Z)(n.child,d&&n.childLeaving,o&&n.childPulsate);return a||d||A(!0),e.useEffect((function(){if(!a&&null!=i){var e=setTimeout(i,c);return function(){clearTimeout(e)}}}),[i,a,c]),(0,Yo.jsx)("span",{className:m,style:b,children:(0,Yo.jsx)("span",{className:Z})})};var Tl,Dl,jl,Pl,Ol,ql,_l,$l,eC=(0,nl.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),gC=["center","classes","className"],tC=80,nC=Ql(Ol||(Ol=Tl||(Tl=Rl(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),IC=Ql(ql||(ql=Dl||(Dl=Rl(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),oC=Ql(_l||(_l=jl||(jl=Rl(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),lC=(0,zo.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),CC=(0,zo.ZP)(Ll,{name:"MuiTouchRipple",slot:"Ripple"})($l||($l=Pl||(Pl=Rl(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),eC.rippleVisible,nC,550,(function(e){return e.theme.transitions.easing.easeInOut}),eC.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),eC.child,eC.childLeaving,IC,550,(function(e){return e.theme.transitions.easing.easeInOut}),eC.childPulsate,oC,(function(e){return e.theme.transitions.easing.easeInOut})),rC=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiTouchRipple"}),I=n.center,o=void 0!==I&&I,l=n.classes,C=void 0===l?{}:l,r=n.className,a=(0,fo.Z)(n,gC),i=e.useState([]),c=(0,qn.Z)(i,2),s=c[0],u=c[1],d=e.useRef(0),A=e.useRef(null);e.useEffect((function(){A.current&&(A.current(),A.current=null)}),[s]);var m=e.useRef(!1),b=e.useRef(null),Z=e.useRef(null),p=e.useRef(null);e.useEffect((function(){return function(){clearTimeout(b.current)}}),[]);var h=e.useCallback((function(e){var g=e.pulsate,t=e.rippleX,n=e.rippleY,I=e.rippleSize,o=e.cb;u((function(e){return[].concat((0,lI.Z)(e),[(0,Yo.jsx)(CC,{classes:{ripple:(0,So.Z)(C.ripple,eC.ripple),rippleVisible:(0,So.Z)(C.rippleVisible,eC.rippleVisible),ripplePulsate:(0,So.Z)(C.ripplePulsate,eC.ripplePulsate),child:(0,So.Z)(C.child,eC.child),childLeaving:(0,So.Z)(C.childLeaving,eC.childLeaving),childPulsate:(0,So.Z)(C.childPulsate,eC.childPulsate)},timeout:550,pulsate:g,rippleX:t,rippleY:n,rippleSize:I},d.current)])})),d.current+=1,A.current=o}),[C]),G=e.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=g.pulsate,I=void 0!==n&&n,l=g.center,C=void 0===l?o||g.pulsate:l,r=g.fakeElement,a=void 0!==r&&r;if("mousedown"===(null==e?void 0:e.type)&&m.current)m.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(m.current=!0);var i,c,s,u=a?null:p.current,d=u?u.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(C||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)i=Math.round(d.width/2),c=Math.round(d.height/2);else{var A=e.touches&&e.touches.length>0?e.touches[0]:e,G=A.clientX,y=A.clientY;i=Math.round(G-d.left),c=Math.round(y-d.top)}if(C)(s=Math.sqrt((2*Math.pow(d.width,2)+Math.pow(d.height,2))/3))%2===0&&(s+=1);else{var B=2*Math.max(Math.abs((u?u.clientWidth:0)-i),i)+2,f=2*Math.max(Math.abs((u?u.clientHeight:0)-c),c)+2;s=Math.sqrt(Math.pow(B,2)+Math.pow(f,2))}null!=e&&e.touches?null===Z.current&&(Z.current=function(){h({pulsate:I,rippleX:i,rippleY:c,rippleSize:s,cb:t})},b.current=setTimeout((function(){Z.current&&(Z.current(),Z.current=null)}),tC)):h({pulsate:I,rippleX:i,rippleY:c,rippleSize:s,cb:t})}}),[o,h]),y=e.useCallback((function(){G({},{pulsate:!0})}),[G]),B=e.useCallback((function(e,g){if(clearTimeout(b.current),"touchend"===(null==e?void 0:e.type)&&Z.current)return Z.current(),Z.current=null,void(b.current=setTimeout((function(){B(e,g)})));Z.current=null,u((function(e){return e.length>0?e.slice(1):e})),A.current=g}),[]);return e.useImperativeHandle(t,(function(){return{pulsate:y,start:G,stop:B}}),[y,G,B]),(0,Yo.jsx)(lC,(0,vo.Z)({className:(0,So.Z)(eC.root,C.root,r),ref:p},a,{children:(0,Yo.jsx)(Fl,{component:null,exit:!0,children:s})}))})),aC=rC;function iC(e){return(0,Vo.Z)("MuiButtonBase",e)}var cC,sC=(0,nl.Z)("MuiButtonBase",["root","disabled","focusVisible"]),uC=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],dC=(0,zo.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,g){return g.root}})((cC={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,Bo.Z)(cC,"&.".concat(sC.disabled),{pointerEvents:"none",cursor:"default"}),(0,Bo.Z)(cC,"@media print",{colorAdjust:"exact"}),cC)),AC=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiButtonBase"}),I=n.action,o=n.centerRipple,l=void 0!==o&&o,C=n.children,r=n.className,a=n.component,i=void 0===a?"button":a,c=n.disabled,s=void 0!==c&&c,u=n.disableRipple,d=void 0!==u&&u,A=n.disableTouchRipple,m=void 0!==A&&A,b=n.focusRipple,Z=void 0!==b&&b,p=n.LinkComponent,h=void 0===p?"a":p,G=n.onBlur,y=n.onClick,B=n.onContextMenu,f=n.onDragLeave,v=n.onFocus,S=n.onFocusVisible,W=n.onKeyDown,V=n.onKeyUp,R=n.onMouseDown,X=n.onMouseLeave,k=n.onMouseUp,J=n.onTouchEnd,Y=n.onTouchMove,H=n.onTouchStart,w=n.tabIndex,N=void 0===w?0:w,F=n.TouchRippleProps,K=n.touchRippleRef,x=n.type,z=(0,fo.Z)(n,uC),E=e.useRef(null),M=e.useRef(null),U=(0,cl.Z)(M,K),Q=(0,il.Z)(),L=Q.isFocusVisibleRef,T=Q.onFocus,D=Q.onBlur,j=Q.ref,P=e.useState(!1),O=(0,qn.Z)(P,2),q=O[0],_=O[1];s&&q&&_(!1),e.useImperativeHandle(I,(function(){return{focusVisible:function(){_(!0),E.current.focus()}}}),[]);var $=e.useState(!1),ee=(0,qn.Z)($,2),ge=ee[0],te=ee[1];e.useEffect((function(){te(!0)}),[]);var ne=ge&&!d&&!s;function Ie(e,g){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return(0,Vl.Z)((function(n){return g&&g(n),!t&&M.current&&M.current[e](n),!0}))}e.useEffect((function(){q&&Z&&!d&&ge&&M.current.pulsate()}),[d,Z,q,ge]);var oe=Ie("start",R),le=Ie("stop",B),Ce=Ie("stop",f),re=Ie("stop",k),ae=Ie("stop",(function(e){q&&e.preventDefault(),X&&X(e)})),ie=Ie("start",H),ce=Ie("stop",J),se=Ie("stop",Y),ue=Ie("stop",(function(e){D(e),!1===L.current&&_(!1),G&&G(e)}),!1),de=(0,Vl.Z)((function(e){E.current||(E.current=e.currentTarget),T(e),!0===L.current&&(_(!0),S&&S(e)),v&&v(e)})),Ae=function(){var e=E.current;return i&&"button"!==i&&!("A"===e.tagName&&e.href)},me=e.useRef(!1),be=(0,Vl.Z)((function(e){Z&&!me.current&&q&&M.current&&" "===e.key&&(me.current=!0,M.current.stop(e,(function(){M.current.start(e)}))),e.target===e.currentTarget&&Ae()&&" "===e.key&&e.preventDefault(),W&&W(e),e.target===e.currentTarget&&Ae()&&"Enter"===e.key&&!s&&(e.preventDefault(),y&&y(e))})),Ze=(0,Vl.Z)((function(e){Z&&" "===e.key&&M.current&&q&&!e.defaultPrevented&&(me.current=!1,M.current.stop(e,(function(){M.current.pulsate(e)}))),V&&V(e),y&&e.target===e.currentTarget&&Ae()&&" "===e.key&&!e.defaultPrevented&&y(e)})),pe=i;"button"===pe&&(z.href||z.to)&&(pe=h);var he={};"button"===pe?(he.type=void 0===x?"button":x,he.disabled=s):(z.href||z.to||(he.role="button"),s&&(he["aria-disabled"]=s));var Ge=(0,cl.Z)(t,j,E);var ye=(0,vo.Z)({},n,{centerRipple:l,component:i,disabled:s,disableRipple:d,disableTouchRipple:m,focusRipple:Z,tabIndex:N,focusVisible:q}),Be=function(e){var g=e.disabled,t=e.focusVisible,n=e.focusVisibleClassName,I=e.classes,o={root:["root",g&&"disabled",t&&"focusVisible"]},l=(0,Ro.Z)(o,iC,I);return t&&n&&(l.root+=" ".concat(n)),l}(ye);return(0,Yo.jsxs)(dC,(0,vo.Z)({as:pe,className:(0,So.Z)(Be.root,r),ownerState:ye,onBlur:ue,onClick:y,onContextMenu:le,onFocus:de,onKeyDown:be,onKeyUp:Ze,onMouseDown:oe,onMouseLeave:ae,onMouseUp:re,onDragLeave:Ce,onTouchEnd:ce,onTouchMove:se,onTouchStart:ie,ref:Ge,tabIndex:s?-1:N,type:x},he,z,{children:[C,ne?(0,Yo.jsx)(aC,(0,vo.Z)({ref:U,center:l},F)):null]}))})),mC=AC,bC=t(9103),ZC=t(162);function pC(e){return(0,Vo.Z)("MuiListItem",e)}var hC=(0,nl.Z)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function GC(e){return(0,Vo.Z)("MuiListItemButton",e)}var yC=(0,nl.Z)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function BC(e){return(0,Vo.Z)("MuiListItemSecondaryAction",e)}(0,nl.Z)("MuiListItemSecondaryAction",["root","disableGutters"]);var fC=["className"],vC=(0,zo.ZP)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,t.disableGutters&&g.disableGutters]}})((function(e){var g=e.ownerState;return(0,vo.Z)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},g.disableGutters&&{right:0})})),SC=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiListItemSecondaryAction"}),I=n.className,o=(0,fo.Z)(n,fC),l=e.useContext(yl),C=(0,vo.Z)({},n,{disableGutters:l.disableGutters}),r=function(e){var g=e.disableGutters,t=e.classes,n={root:["root",g&&"disableGutters"]};return(0,Ro.Z)(n,BC,t)}(C);return(0,Yo.jsx)(vC,(0,vo.Z)({className:(0,So.Z)(r.root,I),ownerState:C,ref:t},o))}));SC.muiName="ListItemSecondaryAction";var WC=SC,VC=["className"],RC=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],XC=(0,zo.ZP)("div",{name:"MuiListItem",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,t.dense&&g.dense,"flex-start"===t.alignItems&&g.alignItemsFlexStart,t.divider&&g.divider,!t.disableGutters&&g.gutters,!t.disablePadding&&g.padding,t.button&&g.button,t.hasSecondaryAction&&g.secondaryAction]}})((function(e){var g,t=e.theme,n=e.ownerState;return(0,vo.Z)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&(0,vo.Z)({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&(0,Bo.Z)({},"& > .".concat(yC.root),{paddingRight:48}),(g={},(0,Bo.Z)(g,"&.".concat(hC.focusVisible),{backgroundColor:(t.vars||t).palette.action.focus}),(0,Bo.Z)(g,"&.".concat(hC.selected),(0,Bo.Z)({backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,Al.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)},"&.".concat(hC.focusVisible),{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Al.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)})),(0,Bo.Z)(g,"&.".concat(hC.disabled),{opacity:(t.vars||t).palette.action.disabledOpacity}),g),"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},n.button&&(0,Bo.Z)({transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(hC.selected,":hover"),{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,Al.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,Al.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}}),n.hasSecondaryAction&&{paddingRight:48})})),kC=(0,zo.ZP)("li",{name:"MuiListItem",slot:"Container",overridesResolver:function(e,g){return g.container}})({position:"relative"}),JC=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiListItem"}),I=n.alignItems,o=void 0===I?"center":I,l=n.autoFocus,C=void 0!==l&&l,r=n.button,a=void 0!==r&&r,i=n.children,c=n.className,s=n.component,u=n.components,d=void 0===u?{}:u,A=n.componentsProps,m=void 0===A?{}:A,b=n.ContainerComponent,Z=void 0===b?"li":b,p=n.ContainerProps,h=(void 0===p?{}:p).className,G=n.dense,y=void 0!==G&&G,B=n.disabled,f=void 0!==B&&B,v=n.disableGutters,S=void 0!==v&&v,W=n.disablePadding,V=void 0!==W&&W,R=n.divider,X=void 0!==R&&R,k=n.focusVisibleClassName,J=n.secondaryAction,Y=n.selected,H=void 0!==Y&&Y,w=n.slotProps,N=void 0===w?{}:w,F=n.slots,K=void 0===F?{}:F,x=(0,fo.Z)(n.ContainerProps,VC),z=(0,fo.Z)(n,RC),E=e.useContext(yl),M=e.useMemo((function(){return{dense:y||E.dense||!1,alignItems:o,disableGutters:S}}),[o,E.dense,y,S]),U=e.useRef(null);(0,ZC.Z)((function(){C&&U.current&&U.current.focus()}),[C]);var Q=e.Children.toArray(i),L=Q.length&&(0,bC.Z)(Q[Q.length-1],["ListItemSecondaryAction"]),T=(0,vo.Z)({},n,{alignItems:o,autoFocus:C,button:a,dense:M.dense,disabled:f,disableGutters:S,disablePadding:V,divider:X,hasSecondaryAction:L,selected:H}),D=function(e){var g=e.alignItems,t=e.button,n=e.classes,I=e.dense,o=e.disabled,l={root:["root",I&&"dense",!e.disableGutters&&"gutters",!e.disablePadding&&"padding",e.divider&&"divider",o&&"disabled",t&&"button","flex-start"===g&&"alignItemsFlexStart",e.hasSecondaryAction&&"secondaryAction",e.selected&&"selected"],container:["container"]};return(0,Ro.Z)(l,pC,n)}(T),j=(0,cl.Z)(U,t),P=K.root||d.Root||XC,O=N.root||m.root||{},q=(0,vo.Z)({className:(0,So.Z)(D.root,O.className,c),disabled:f},z),_=s||"li";return a&&(q.component=s||"div",q.focusVisibleClassName=(0,So.Z)(hC.focusVisible,k),_=mC),L?(_=q.component||s?_:"div","li"===Z&&("li"===_?_="div":"li"===q.component&&(q.component="div")),(0,Yo.jsx)(yl.Provider,{value:M,children:(0,Yo.jsxs)(kC,(0,vo.Z)({as:Z,className:(0,So.Z)(D.container,h),ref:j,ownerState:T},x,{children:[(0,Yo.jsx)(P,(0,vo.Z)({},O,!Wl(P)&&{as:_,ownerState:(0,vo.Z)({},T,O.ownerState)},q,{children:Q})),Q.pop()]}))})):(0,Yo.jsx)(yl.Provider,{value:M,children:(0,Yo.jsxs)(P,(0,vo.Z)({},O,{as:_,ref:j},!Wl(P)&&{ownerState:(0,vo.Z)({},T,O.ownerState)},q,{children:[Q,J&&(0,Yo.jsx)(WC,{children:J})]}))})})),YC=t(5221),HC="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wC="object"===("undefined"===typeof window?"undefined":HC(window))&&"object"===("undefined"===typeof document?"undefined":HC(document))&&9===document.nodeType,NC={}.constructor;function FC(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(FC);if(e.constructor!==NC)return e;var g={};for(var t in e)g[t]=FC(e[t]);return g}function KC(e,g,t){void 0===e&&(e="unnamed");var n=t.jss,I=FC(g),o=n.plugins.onCreateRule(e,I,t);return o||(e[0],null)}var xC=function(e,g){for(var t="",n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=g),t+=e[n];return t},zC=function(e){if(!Array.isArray(e))return e;var g="";if(Array.isArray(e[0]))for(var t=0;t<e.length&&"!important"!==e[t];t++)g&&(g+=", "),g+=xC(e[t]," ");else g=xC(e,", ");return"!important"===e[e.length-1]&&(g+=" !important"),g};function EC(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function MC(e,g){for(var t="",n=0;n<g;n++)t+="  ";return t+e}function UC(e,g,t){void 0===t&&(t={});var n="";if(!g)return n;var I=t.indent,o=void 0===I?0:I,l=g.fallbacks;!1===t.format&&(o=-1/0);var C=EC(t),r=C.linebreak,a=C.space;if(e&&o++,l)if(Array.isArray(l))for(var i=0;i<l.length;i++){var c=l[i];for(var s in c){var u=c[s];null!=u&&(n&&(n+=r),n+=MC(s+":"+a+zC(u)+";",o))}}else for(var d in l){var A=l[d];null!=A&&(n&&(n+=r),n+=MC(d+":"+a+zC(A)+";",o))}for(var m in g){var b=g[m];null!=b&&"fallbacks"!==m&&(n&&(n+=r),n+=MC(m+":"+a+zC(b)+";",o))}return(n||t.allowEmpty)&&e?(n&&(n=""+r+n+r),MC(""+e+a+"{"+n,--o)+MC("}",o)):n}var QC=/([[\].#*$><+~=|^:(),"'`\s])/g,LC="undefined"!==typeof CSS&&CSS.escape,TC=function(e){return LC?LC(e):e.replace(QC,"\\$1")},DC=function(){function e(e,g,t){this.type="style",this.isProcessed=!1;var n=t.sheet,I=t.Renderer;this.key=e,this.options=t,this.style=g,n?this.renderer=n.renderer:I&&(this.renderer=new I)}return e.prototype.prop=function(e,g,t){if(void 0===g)return this.style[e];var n=!!t&&t.force;if(!n&&this.style[e]===g)return this;var I=g;t&&!1===t.process||(I=this.options.jss.plugins.onChangeValue(g,e,this));var o=null==I||!1===I,l=e in this.style;if(o&&!l&&!n)return this;var C=o&&l;if(C?delete this.style[e]:this.style[e]=I,this.renderable&&this.renderer)return C?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,I),this;var r=this.options.sheet;return r&&r.attached,this},e}(),jC=function(e){function g(g,t,n){var I;I=e.call(this,g,t,n)||this;var o=n.selector,l=n.scoped,C=n.sheet,r=n.generateId;return o?I.selectorText=o:!1!==l&&(I.id=r(Pn(Pn(I)),C),I.selectorText="."+TC(I.id)),I}(0,Xl.Z)(g,e);var t=g.prototype;return t.applyTo=function(e){var g=this.renderer;if(g){var t=this.toJSON();for(var n in t)g.setProperty(e,n,t[n])}return this},t.toJSON=function(){var e={};for(var g in this.style){var t=this.style[g];"object"!==typeof t?e[g]=t:Array.isArray(t)&&(e[g]=zC(t))}return e},t.toString=function(e){var g=this.options.sheet,t=!!g&&g.options.link?(0,vo.Z)({},e,{allowEmpty:!0}):e;return UC(this.selectorText,this.style,t)},Un(g,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var g=this.renderer,t=this.renderable;if(t&&g)g.setSelector(t,e)||g.replaceRule(t,this)}},get:function(){return this.selectorText}}]),g}(DC),PC={onCreateRule:function(e,g,t){return"@"===e[0]||t.parent&&"keyframes"===t.parent.type?null:new jC(e,g,t)}},OC={indent:1,children:!0},qC=/@([\w-]+)/,_C=function(){function e(e,g,t){this.type="conditional",this.isProcessed=!1,this.key=e;var n=e.match(qC);for(var I in this.at=n?n[1]:"unknown",this.query=t.name||"@"+this.at,this.options=t,this.rules=new yr((0,vo.Z)({},t,{parent:this})),g)this.rules.add(I,g[I]);this.rules.process()}var g=e.prototype;return g.getRule=function(e){return this.rules.get(e)},g.indexOf=function(e){return this.rules.indexOf(e)},g.addRule=function(e,g,t){var n=this.rules.add(e,g,t);return n?(this.options.jss.plugins.onProcessRule(n),n):null},g.replaceRule=function(e,g,t){var n=this.rules.replace(e,g,t);return n&&this.options.jss.plugins.onProcessRule(n),n},g.toString=function(e){void 0===e&&(e=OC);var g=EC(e).linebreak;if(null==e.indent&&(e.indent=OC.indent),null==e.children&&(e.children=OC.children),!1===e.children)return this.query+" {}";var t=this.rules.toString(e);return t?this.query+" {"+g+t+g+"}":""},e}(),$C=/@container|@media|@supports\s+/,er={onCreateRule:function(e,g,t){return $C.test(e)?new _C(e,g,t):null}},gr={indent:1,children:!0},tr=/@keyframes\s+([\w-]+)/,nr=function(){function e(e,g,t){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var n=e.match(tr);n&&n[1]?this.name=n[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=t;var I=t.scoped,o=t.sheet,l=t.generateId;for(var C in this.id=!1===I?this.name:TC(l(this,o)),this.rules=new yr((0,vo.Z)({},t,{parent:this})),g)this.rules.add(C,g[C],(0,vo.Z)({},t,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=gr);var g=EC(e).linebreak;if(null==e.indent&&(e.indent=gr.indent),null==e.children&&(e.children=gr.children),!1===e.children)return this.at+" "+this.id+" {}";var t=this.rules.toString(e);return t&&(t=""+g+t+g),this.at+" "+this.id+" {"+t+"}"},e}(),Ir=/@keyframes\s+/,or=/\$([\w-]+)/g,lr=function(e,g){return"string"===typeof e?e.replace(or,(function(e,t){return t in g?g[t]:e})):e},Cr=function(e,g,t){var n=e[g],I=lr(n,t);I!==n&&(e[g]=I)},rr={onCreateRule:function(e,g,t){return"string"===typeof e&&Ir.test(e)?new nr(e,g,t):null},onProcessStyle:function(e,g,t){return"style"===g.type&&t?("animation-name"in e&&Cr(e,"animation-name",t.keyframes),"animation"in e&&Cr(e,"animation",t.keyframes),e):e},onChangeValue:function(e,g,t){var n=t.options.sheet;if(!n)return e;switch(g){case"animation":case"animation-name":return lr(e,n.keyframes);default:return e}}},ar=function(e){function g(){return e.apply(this,arguments)||this}return(0,Xl.Z)(g,e),g.prototype.toString=function(e){var g=this.options.sheet,t=!!g&&g.options.link?(0,vo.Z)({},e,{allowEmpty:!0}):e;return UC(this.key,this.style,t)},g}(DC),ir={onCreateRule:function(e,g,t){return t.parent&&"keyframes"===t.parent.type?new ar(e,g,t):null}},cr=function(){function e(e,g,t){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=g,this.options=t}return e.prototype.toString=function(e){var g=EC(e).linebreak;if(Array.isArray(this.style)){for(var t="",n=0;n<this.style.length;n++)t+=UC(this.at,this.style[n]),this.style[n+1]&&(t+=g);return t}return UC(this.at,this.style,e)},e}(),sr=/@font-face/,ur={onCreateRule:function(e,g,t){return sr.test(e)?new cr(e,g,t):null}},dr=function(){function e(e,g,t){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=g,this.options=t}return e.prototype.toString=function(e){return UC(this.key,this.style,e)},e}(),Ar={onCreateRule:function(e,g,t){return"@viewport"===e||"@-ms-viewport"===e?new dr(e,g,t):null}},mr=function(){function e(e,g,t){this.type="simple",this.isProcessed=!1,this.key=e,this.value=g,this.options=t}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var g="",t=0;t<this.value.length;t++)g+=this.key+" "+this.value[t]+";",this.value[t+1]&&(g+="\n");return g}return this.key+" "+this.value+";"},e}(),br={"@charset":!0,"@import":!0,"@namespace":!0},Zr={onCreateRule:function(e,g,t){return e in br?new mr(e,g,t):null}},pr=[PC,er,rr,ir,ur,Ar,Zr],hr={process:!0},Gr={force:!0,process:!0},yr=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var g=e.prototype;return g.add=function(e,g,t){var n=this.options,I=n.parent,o=n.sheet,l=n.jss,C=n.Renderer,r=n.generateId,a=n.scoped,i=(0,vo.Z)({classes:this.classes,parent:I,sheet:o,jss:l,Renderer:C,generateId:r,scoped:a,name:e,keyframes:this.keyframes,selector:void 0},t),c=e;e in this.raw&&(c=e+"-d"+this.counter++),this.raw[c]=g,c in this.classes&&(i.selector="."+TC(this.classes[c]));var s=KC(c,g,i);if(!s)return null;this.register(s);var u=void 0===i.index?this.index.length:i.index;return this.index.splice(u,0,s),s},g.replace=function(e,g,t){var n=this.get(e),I=this.index.indexOf(n);n&&this.remove(n);var o=t;return-1!==I&&(o=(0,vo.Z)({},t,{index:I})),this.add(e,g,o)},g.get=function(e){return this.map[e]},g.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},g.indexOf=function(e){return this.index.indexOf(e)},g.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},g.register=function(e){this.map[e.key]=e,e instanceof jC?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof nr&&this.keyframes&&(this.keyframes[e.name]=e.id)},g.unregister=function(e){delete this.map[e.key],e instanceof jC?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof nr&&delete this.keyframes[e.name]},g.update=function(){var e,g,t;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],g=arguments.length<=1?void 0:arguments[1],t=arguments.length<=2?void 0:arguments[2]):(g=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),g,t);else for(var n=0;n<this.index.length;n++)this.updateOne(this.index[n],g,t)},g.updateOne=function(g,t,n){void 0===n&&(n=hr);var I=this.options,o=I.jss.plugins,l=I.sheet;if(g.rules instanceof e)g.rules.update(t,n);else{var C=g.style;if(o.onUpdate(t,g,l,n),n.process&&C&&C!==g.style){for(var r in o.onProcessStyle(g.style,g,l),g.style){var a=g.style[r];a!==C[r]&&g.prop(r,a,Gr)}for(var i in C){var c=g.style[i],s=C[i];null==c&&c!==s&&g.prop(i,null,Gr)}}}},g.toString=function(e){for(var g="",t=this.options.sheet,n=!!t&&t.options.link,I=EC(e).linebreak,o=0;o<this.index.length;o++){var l=this.index[o].toString(e);(l||n)&&(g&&(g+=I),g+=l)}return g},e}(),Br=function(){function e(e,g){for(var t in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,vo.Z)({},g,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),g.Renderer&&(this.renderer=new g.Renderer(this)),this.rules=new yr(this.options),e)this.rules.add(t,e[t]);this.rules.process()}var g=e.prototype;return g.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},g.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},g.addRule=function(e,g,t){var n=this.queue;this.attached&&!n&&(this.queue=[]);var I=this.rules.add(e,g,t);return I?(this.options.jss.plugins.onProcessRule(I),this.attached?this.deployed?(n?n.push(I):(this.insertRule(I),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),I):I:(this.deployed=!1,I)):null},g.replaceRule=function(e,g,t){var n=this.rules.get(e);if(!n)return this.addRule(e,g,t);var I=this.rules.replace(e,g,t);return I&&this.options.jss.plugins.onProcessRule(I),this.attached?this.deployed?(this.renderer&&(I?n.renderable&&this.renderer.replaceRule(n.renderable,I):this.renderer.deleteRule(n)),I):I:(this.deployed=!1,I)},g.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},g.addRules=function(e,g){var t=[];for(var n in e){var I=this.addRule(n,e[n],g);I&&t.push(I)}return t},g.getRule=function(e){return this.rules.get(e)},g.deleteRule=function(e){var g="object"===typeof e?e:this.rules.get(e);return!(!g||this.attached&&!g.renderable)&&(this.rules.remove(g),!(this.attached&&g.renderable&&this.renderer)||this.renderer.deleteRule(g.renderable))},g.indexOf=function(e){return this.rules.indexOf(e)},g.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},g.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},g.updateOne=function(e,g,t){return this.rules.updateOne(e,g,t),this},g.toString=function(e){return this.rules.toString(e)},e}(),fr=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var g=e.prototype;return g.onCreateRule=function(e,g,t){for(var n=0;n<this.registry.onCreateRule.length;n++){var I=this.registry.onCreateRule[n](e,g,t);if(I)return I}return null},g.onProcessRule=function(e){if(!e.isProcessed){for(var g=e.options.sheet,t=0;t<this.registry.onProcessRule.length;t++)this.registry.onProcessRule[t](e,g);e.style&&this.onProcessStyle(e.style,e,g),e.isProcessed=!0}},g.onProcessStyle=function(e,g,t){for(var n=0;n<this.registry.onProcessStyle.length;n++)g.style=this.registry.onProcessStyle[n](g.style,g,t)},g.onProcessSheet=function(e){for(var g=0;g<this.registry.onProcessSheet.length;g++)this.registry.onProcessSheet[g](e)},g.onUpdate=function(e,g,t,n){for(var I=0;I<this.registry.onUpdate.length;I++)this.registry.onUpdate[I](e,g,t,n)},g.onChangeValue=function(e,g,t){for(var n=e,I=0;I<this.registry.onChangeValue.length;I++)n=this.registry.onChangeValue[I](n,g,t);return n},g.use=function(e,g){void 0===g&&(g={queue:"external"});var t=this.plugins[g.queue];-1===t.indexOf(e)&&(t.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,g){for(var t in g)t in e&&e[t].push(g[t]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),vr=function(){function e(){this.registry=[]}var g=e.prototype;return g.add=function(e){var g=this.registry,t=e.options.index;if(-1===g.indexOf(e))if(0===g.length||t>=this.index)g.push(e);else for(var n=0;n<g.length;n++)if(g[n].options.index>t)return void g.splice(n,0,e)},g.reset=function(){this.registry=[]},g.remove=function(e){var g=this.registry.indexOf(e);this.registry.splice(g,1)},g.toString=function(e){for(var g=void 0===e?{}:e,t=g.attached,n=(0,fo.Z)(g,["attached"]),I=EC(n).linebreak,o="",l=0;l<this.registry.length;l++){var C=this.registry[l];null!=t&&C.attached!==t||(o&&(o+=I),o+=C.toString(n))}return o},Un(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),Sr=new vr,Wr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),Vr="2f1acc6c3a606b082e5eef5e54414ffb";null==Wr[Vr]&&(Wr[Vr]=0);var Rr=Wr[Vr]++,Xr=function(e){void 0===e&&(e={});var g=0;return function(t,n){g+=1;var I="",o="";return n&&(n.options.classNamePrefix&&(o=n.options.classNamePrefix),null!=n.options.jss.id&&(I=String(n.options.jss.id))),e.minify?""+(o||"c")+Rr+I+g:o+t.key+"-"+Rr+(I?"-"+I:"")+"-"+g}},kr=function(e){var g;return function(){return g||(g=e()),g}},Jr=function(e,g){try{return e.attributeStyleMap?e.attributeStyleMap.get(g):e.style.getPropertyValue(g)}catch(t){return""}},Yr=function(e,g,t){try{var n=t;if(Array.isArray(t)&&(n=zC(t)),e.attributeStyleMap)e.attributeStyleMap.set(g,n);else{var I=n?n.indexOf("!important"):-1,o=I>-1?n.substr(0,I-1):n;e.style.setProperty(g,o,I>-1?"important":"")}}catch(l){return!1}return!0},Hr=function(e,g){try{e.attributeStyleMap?e.attributeStyleMap.delete(g):e.style.removeProperty(g)}catch(t){}},wr=function(e,g){return e.selectorText=g,e.selectorText===g},Nr=kr((function(){return document.querySelector("head")}));function Fr(e){var g=Sr.registry;if(g.length>0){var t=function(e,g){for(var t=0;t<e.length;t++){var n=e[t];if(n.attached&&n.options.index>g.index&&n.options.insertionPoint===g.insertionPoint)return n}return null}(g,e);if(t&&t.renderer)return{parent:t.renderer.element.parentNode,node:t.renderer.element};if(t=function(e,g){for(var t=e.length-1;t>=0;t--){var n=e[t];if(n.attached&&n.options.insertionPoint===g.insertionPoint)return n}return null}(g,e),t&&t.renderer)return{parent:t.renderer.element.parentNode,node:t.renderer.element.nextSibling}}var n=e.insertionPoint;if(n&&"string"===typeof n){var I=function(e){for(var g=Nr(),t=0;t<g.childNodes.length;t++){var n=g.childNodes[t];if(8===n.nodeType&&n.nodeValue.trim()===e)return n}return null}(n);if(I)return{parent:I.parentNode,node:I.nextSibling}}return!1}var Kr=kr((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),xr=function(e,g,t){try{"insertRule"in e?e.insertRule(g,t):"appendRule"in e&&e.appendRule(g)}catch(n){return!1}return e.cssRules[t]},zr=function(e,g){var t=e.cssRules.length;return void 0===g||g>t?t:g},Er=function(){var e=document.createElement("style");return e.textContent="\n",e},Mr=function(){function e(e){this.getPropertyValue=Jr,this.setProperty=Yr,this.removeProperty=Hr,this.setSelector=wr,this.hasInsertedRules=!1,this.cssRules=[],e&&Sr.add(e),this.sheet=e;var g=this.sheet?this.sheet.options:{},t=g.media,n=g.meta,I=g.element;this.element=I||Er(),this.element.setAttribute("data-jss",""),t&&this.element.setAttribute("media",t),n&&this.element.setAttribute("data-meta",n);var o=Kr();o&&this.element.setAttribute("nonce",o)}var g=e.prototype;return g.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,g){var t=g.insertionPoint,n=Fr(g);if(!1!==n&&n.parent)n.parent.insertBefore(e,n.node);else if(t&&"number"===typeof t.nodeType){var I=t,o=I.parentNode;o&&o.insertBefore(e,I.nextSibling)}else Nr().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},g.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},g.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},g.insertRules=function(e,g){for(var t=0;t<e.index.length;t++)this.insertRule(e.index[t],t,g)},g.insertRule=function(e,g,t){if(void 0===t&&(t=this.element.sheet),e.rules){var n=e,I=t;if("conditional"===e.type||"keyframes"===e.type){var o=zr(t,g);if(!1===(I=xr(t,n.toString({children:!1}),o)))return!1;this.refCssRule(e,o,I)}return this.insertRules(n.rules,I),I}var l=e.toString();if(!l)return!1;var C=zr(t,g),r=xr(t,l,C);return!1!==r&&(this.hasInsertedRules=!0,this.refCssRule(e,C,r),r)},g.refCssRule=function(e,g,t){e.renderable=t,e.options.parent instanceof Br&&this.cssRules.splice(g,0,t)},g.deleteRule=function(e){var g=this.element.sheet,t=this.indexOf(e);return-1!==t&&(g.deleteRule(t),this.cssRules.splice(t,1),!0)},g.indexOf=function(e){return this.cssRules.indexOf(e)},g.replaceRule=function(e,g){var t=this.indexOf(e);return-1!==t&&(this.element.sheet.deleteRule(t),this.cssRules.splice(t,1),this.insertRule(g,t))},g.getRules=function(){return this.element.sheet.cssRules},e}(),Ur=0,Qr=function(){function e(e){this.id=Ur++,this.version="10.10.0",this.plugins=new fr,this.options={id:{minify:!1},createGenerateId:Xr,Renderer:wC?Mr:null,plugins:[]},this.generateId=Xr({minify:!1});for(var g=0;g<pr.length;g++)this.plugins.use(pr[g],{queue:"internal"});this.setup(e)}var g=e.prototype;return g.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=(0,vo.Z)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},g.createStyleSheet=function(e,g){void 0===g&&(g={});var t=g.index;"number"!==typeof t&&(t=0===Sr.index?0:Sr.index+1);var n=new Br(e,(0,vo.Z)({},g,{jss:this,generateId:g.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:t}));return this.plugins.onProcessSheet(n),n},g.removeStyleSheet=function(e){return e.detach(),Sr.remove(e),this},g.createRule=function(e,g,t){if(void 0===g&&(g={}),void 0===t&&(t={}),"object"===typeof e)return this.createRule(void 0,e,g);var n=(0,vo.Z)({},t,{name:e,jss:this,Renderer:this.options.Renderer});n.generateId||(n.generateId=this.generateId),n.classes||(n.classes={}),n.keyframes||(n.keyframes={});var I=KC(e,g,n);return I&&this.plugins.onProcessRule(I),I},g.use=function(){for(var e=this,g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];return t.forEach((function(g){e.plugins.use(g)})),this},e}(),Lr=function(e){return new Qr(e)},Tr="object"===typeof CSS&&null!=CSS&&"number"in CSS;function Dr(e){var g=null;for(var t in e){var n=e[t],I=typeof n;if("function"===I)g||(g={}),g[t]=n;else if("object"===I&&null!==n&&!Array.isArray(n)){var o=Dr(n);o&&(g||(g={}),g[t]=o)}}return g}Lr();function jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=e.baseClasses,t=e.newClasses;e.Component;if(!t)return g;var n=(0,vo.Z)({},g);return Object.keys(t).forEach((function(e){t[e]&&(n[e]="".concat(g[e]," ").concat(t[e]))})),n}var Pr={set:function(e,g,t,n){var I=e.get(g);I||(I=new Map,e.set(g,I)),I.set(t,n)},get:function(e,g,t){var n=e.get(g);return n?n.get(t):void 0},delete:function(e,g,t){e.get(g).delete(t)}},Or=Pr,qr=t(9598),_r="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",$r=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var ea=Date.now(),ga="fnValues"+ea,ta="fnStyle"+ ++ea,na=function(){return{onCreateRule:function(e,g,t){if("function"!==typeof g)return null;var n=KC(e,{},t);return n[ta]=g,n},onProcessStyle:function(e,g){if(ga in g||ta in g)return e;var t={};for(var n in e){var I=e[n];"function"===typeof I&&(delete e[n],t[n]=I)}return g[ga]=t,e},onUpdate:function(e,g,t,n){var I=g,o=I[ta];o&&(I.style=o(e)||{});var l=I[ga];if(l)for(var C in l)I.prop(C,l[C](e),n)}}},Ia="@global",oa="@global ",la=function(){function e(e,g,t){for(var n in this.type="global",this.at=Ia,this.isProcessed=!1,this.key=e,this.options=t,this.rules=new yr((0,vo.Z)({},t,{parent:this})),g)this.rules.add(n,g[n]);this.rules.process()}var g=e.prototype;return g.getRule=function(e){return this.rules.get(e)},g.addRule=function(e,g,t){var n=this.rules.add(e,g,t);return n&&this.options.jss.plugins.onProcessRule(n),n},g.replaceRule=function(e,g,t){var n=this.rules.replace(e,g,t);return n&&this.options.jss.plugins.onProcessRule(n),n},g.indexOf=function(e){return this.rules.indexOf(e)},g.toString=function(e){return this.rules.toString(e)},e}(),Ca=function(){function e(e,g,t){this.type="global",this.at=Ia,this.isProcessed=!1,this.key=e,this.options=t;var n=e.substr(oa.length);this.rule=t.jss.createRule(n,g,(0,vo.Z)({},t,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),ra=/\s*,\s*/g;function aa(e,g){for(var t=e.split(ra),n="",I=0;I<t.length;I++)n+=g+" "+t[I].trim(),t[I+1]&&(n+=", ");return n}var ia=function(){return{onCreateRule:function(e,g,t){if(!e)return null;if(e===Ia)return new la(e,g,t);if("@"===e[0]&&e.substr(0,oa.length)===oa)return new Ca(e,g,t);var n=t.parent;return n&&("global"===n.type||n.options.parent&&"global"===n.options.parent.type)&&(t.scoped=!1),t.selector||!1!==t.scoped||(t.selector=e),null},onProcessRule:function(e,g){"style"===e.type&&g&&(function(e,g){var t=e.options,n=e.style,I=n?n[Ia]:null;if(I){for(var o in I)g.addRule(o,I[o],(0,vo.Z)({},t,{selector:aa(o,e.selector)}));delete n[Ia]}}(e,g),function(e,g){var t=e.options,n=e.style;for(var I in n)if("@"===I[0]&&I.substr(0,Ia.length)===Ia){var o=aa(I.substr(Ia.length),e.selector);g.addRule(o,n[I],(0,vo.Z)({},t,{selector:o})),delete n[I]}}(e,g))}}},ca=/\s*,\s*/g,sa=/&/g,ua=/\$([\w-]+)/g;var da=function(){function e(e,g){return function(t,n){var I=e.getRule(n)||g&&g.getRule(n);return I?I.selector:n}}function g(e,g){for(var t=g.split(ca),n=e.split(ca),I="",o=0;o<t.length;o++)for(var l=t[o],C=0;C<n.length;C++){var r=n[C];I&&(I+=", "),I+=-1!==r.indexOf("&")?r.replace(sa,l):l+" "+r}return I}function t(e,g,t){if(t)return(0,vo.Z)({},t,{index:t.index+1});var n=e.options.nestingLevel;n=void 0===n?1:n+1;var I=(0,vo.Z)({},e.options,{nestingLevel:n,index:g.indexOf(e)+1});return delete I.name,I}return{onProcessStyle:function(n,I,o){if("style"!==I.type)return n;var l,C,r=I,a=r.options.parent;for(var i in n){var c=-1!==i.indexOf("&"),s="@"===i[0];if(c||s){if(l=t(r,a,l),c){var u=g(i,r.selector);C||(C=e(a,o)),u=u.replace(ua,C);var d=r.key+"-"+i;"replaceRule"in a?a.replaceRule(d,n[i],(0,vo.Z)({},l,{selector:u})):a.addRule(d,n[i],(0,vo.Z)({},l,{selector:u}))}else s&&a.addRule(i,{},l).addRule(r.key,n[i],{selector:r.selector});delete n[i]}}return n}}},Aa=/[A-Z]/g,ma=/^ms-/,ba={};function Za(e){return"-"+e.toLowerCase()}var pa=function(e){if(ba.hasOwnProperty(e))return ba[e];var g=e.replace(Aa,Za);return ba[e]=ma.test(g)?"-"+g:g};function ha(e){var g={};for(var t in e){g[0===t.indexOf("--")?t:pa(t)]=e[t]}return e.fallbacks&&(Array.isArray(e.fallbacks)?g.fallbacks=e.fallbacks.map(ha):g.fallbacks=ha(e.fallbacks)),g}var Ga=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var g=0;g<e.length;g++)e[g]=ha(e[g]);return e}return ha(e)},onChangeValue:function(e,g,t){if(0===g.indexOf("--"))return e;var n=pa(g);return g===n?e:(t.prop(n,e),null)}}},ya=Tr&&CSS?CSS.px:"px",Ba=Tr&&CSS?CSS.ms:"ms",fa=Tr&&CSS?CSS.percent:"%";function va(e){var g=/(-[a-z])/g,t=function(e){return e[1].toUpperCase()},n={};for(var I in e)n[I]=e[I],n[I.replace(g,t)]=e[I];return n}var Sa=va({"animation-delay":Ba,"animation-duration":Ba,"background-position":ya,"background-position-x":ya,"background-position-y":ya,"background-size":ya,border:ya,"border-bottom":ya,"border-bottom-left-radius":ya,"border-bottom-right-radius":ya,"border-bottom-width":ya,"border-left":ya,"border-left-width":ya,"border-radius":ya,"border-right":ya,"border-right-width":ya,"border-top":ya,"border-top-left-radius":ya,"border-top-right-radius":ya,"border-top-width":ya,"border-width":ya,"border-block":ya,"border-block-end":ya,"border-block-end-width":ya,"border-block-start":ya,"border-block-start-width":ya,"border-block-width":ya,"border-inline":ya,"border-inline-end":ya,"border-inline-end-width":ya,"border-inline-start":ya,"border-inline-start-width":ya,"border-inline-width":ya,"border-start-start-radius":ya,"border-start-end-radius":ya,"border-end-start-radius":ya,"border-end-end-radius":ya,margin:ya,"margin-bottom":ya,"margin-left":ya,"margin-right":ya,"margin-top":ya,"margin-block":ya,"margin-block-end":ya,"margin-block-start":ya,"margin-inline":ya,"margin-inline-end":ya,"margin-inline-start":ya,padding:ya,"padding-bottom":ya,"padding-left":ya,"padding-right":ya,"padding-top":ya,"padding-block":ya,"padding-block-end":ya,"padding-block-start":ya,"padding-inline":ya,"padding-inline-end":ya,"padding-inline-start":ya,"mask-position-x":ya,"mask-position-y":ya,"mask-size":ya,height:ya,width:ya,"min-height":ya,"max-height":ya,"min-width":ya,"max-width":ya,bottom:ya,left:ya,top:ya,right:ya,inset:ya,"inset-block":ya,"inset-block-end":ya,"inset-block-start":ya,"inset-inline":ya,"inset-inline-end":ya,"inset-inline-start":ya,"box-shadow":ya,"text-shadow":ya,"column-gap":ya,"column-rule":ya,"column-rule-width":ya,"column-width":ya,"font-size":ya,"font-size-delta":ya,"letter-spacing":ya,"text-decoration-thickness":ya,"text-indent":ya,"text-stroke":ya,"text-stroke-width":ya,"word-spacing":ya,motion:ya,"motion-offset":ya,outline:ya,"outline-offset":ya,"outline-width":ya,perspective:ya,"perspective-origin-x":fa,"perspective-origin-y":fa,"transform-origin":fa,"transform-origin-x":fa,"transform-origin-y":fa,"transform-origin-z":fa,"transition-delay":Ba,"transition-duration":Ba,"vertical-align":ya,"flex-basis":ya,"shape-margin":ya,size:ya,gap:ya,grid:ya,"grid-gap":ya,"row-gap":ya,"grid-row-gap":ya,"grid-column-gap":ya,"grid-template-rows":ya,"grid-template-columns":ya,"grid-auto-rows":ya,"grid-auto-columns":ya,"box-shadow-x":ya,"box-shadow-y":ya,"box-shadow-blur":ya,"box-shadow-spread":ya,"font-line-height":ya,"text-shadow-x":ya,"text-shadow-y":ya,"text-shadow-blur":ya});function Wa(e,g,t){if(null==g)return g;if(Array.isArray(g))for(var n=0;n<g.length;n++)g[n]=Wa(e,g[n],t);else if("object"===typeof g)if("fallbacks"===e)for(var I in g)g[I]=Wa(I,g[I],t);else for(var o in g)g[o]=Wa(e+"-"+o,g[o],t);else if("number"===typeof g&&!1===isNaN(g)){var l=t[e]||Sa[e];return!l||0===g&&l===ya?g.toString():"function"===typeof l?l(g).toString():""+g+l}return g}var Va=function(e){void 0===e&&(e={});var g=va(e);return{onProcessStyle:function(e,t){if("style"!==t.type)return e;for(var n in e)e[n]=Wa(n,e[n],g);return e},onChangeValue:function(e,t){return Wa(t,e,g)}}},Ra="",Xa="",ka="",Ja="",Ya=wC&&"ontouchstart"in document.documentElement;if(wC){var Ha={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},wa=document.createElement("p").style;for(var Na in Ha)if(Na+"Transform"in wa){Ra=Na,Xa=Ha[Na];break}"Webkit"===Ra&&"msHyphens"in wa&&(Ra="ms",Xa=Ha.ms,Ja="edge"),"Webkit"===Ra&&"-apple-trailing-word"in wa&&(ka="apple")}var Fa={js:Ra,css:Xa,vendor:ka,browser:Ja,isTouch:Ya};var Ka={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===Fa.js?"-webkit-"+e:Fa.css+e)}},xa={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===Fa.js?Fa.css+"print-"+e:e)}},za=/[-\s]+(.)?/g;function Ea(e,g){return g?g.toUpperCase():""}function Ma(e){return e.replace(za,Ea)}function Ua(e){return Ma("-"+e)}var Qa,La={noPrefill:["mask"],supportedProperty:function(e,g){if(!/^mask/.test(e))return!1;if("Webkit"===Fa.js){var t="mask-image";if(Ma(t)in g)return e;if(Fa.js+Ua(t)in g)return Fa.css+e}return e}},Ta={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==Fa.vendor||Fa.isTouch?e:Fa.css+e)}},Da={noPrefill:["transform"],supportedProperty:function(e,g,t){return"transform"===e&&(t.transform?e:Fa.css+e)}},ja={noPrefill:["transition"],supportedProperty:function(e,g,t){return"transition"===e&&(t.transition?e:Fa.css+e)}},Pa={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===Fa.js||"ms"===Fa.js&&"edge"!==Fa.browser?Fa.css+e:e)}},Oa={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===Fa.js||"ms"===Fa.js||"apple"===Fa.vendor?Fa.css+e:e)}},qa={supportedProperty:function(e,g){return!!/^break-/.test(e)&&("Webkit"===Fa.js?"WebkitColumn"+Ua(e)in g&&Fa.css+"column-"+e:"Moz"===Fa.js&&("page"+Ua(e)in g&&"page-"+e))}},_a={supportedProperty:function(e,g){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===Fa.js)return e;var t=e.replace("-inline","");return Fa.js+Ua(t)in g&&Fa.css+t}},$a={supportedProperty:function(e,g){return Ma(e)in g&&e}},ei={supportedProperty:function(e,g){var t=Ua(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:Fa.js+t in g?Fa.css+e:"Webkit"!==Fa.js&&"Webkit"+t in g&&"-webkit-"+e}},gi={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===Fa.js?""+Fa.css+e:e)}},ti={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===Fa.js?Fa.css+"scroll-chaining":e)}},ni={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Ii={supportedProperty:function(e,g){var t=ni[e];return!!t&&(Fa.js+Ua(t)in g&&Fa.css+t)}},oi={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},li=Object.keys(oi),Ci=function(e){return Fa.css+e},ri={supportedProperty:function(e,g,t){var n=t.multiple;if(li.indexOf(e)>-1){var I=oi[e];if(!Array.isArray(I))return Fa.js+Ua(I)in g&&Fa.css+I;if(!n)return!1;for(var o=0;o<I.length;o++)if(!(Fa.js+Ua(I[0])in g))return!1;return I.map(Ci)}return!1}},ai=[Ka,xa,La,Ta,Da,ja,Pa,Oa,qa,_a,$a,ei,gi,ti,Ii,ri],ii=ai.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),ci=ai.filter((function(e){return e.noPrefill})).reduce((function(e,g){return e.push.apply(e,(0,lI.Z)(g.noPrefill)),e}),[]),si={};if(wC){Qa=document.createElement("p");var ui=window.getComputedStyle(document.documentElement,"");for(var di in ui)isNaN(di)||(si[ui[di]]=ui[di]);ci.forEach((function(e){return delete si[e]}))}function Ai(e,g){if(void 0===g&&(g={}),!Qa)return e;if(null!=si[e])return si[e];"transition"!==e&&"transform"!==e||(g[e]=e in Qa.style);for(var t=0;t<ii.length&&(si[e]=ii[t](e,Qa.style,g),!si[e]);t++);try{Qa.style[e]=""}catch(n){return!1}return si[e]}var mi,bi={},Zi={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},pi=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function hi(e,g,t){if("var"===g)return"var";if("all"===g)return"all";if("all"===t)return", all";var n=g?Ai(g):", "+Ai(t);return n||(g||t)}function Gi(e,g){var t=g;if(!mi||"content"===e)return g;if("string"!==typeof t||!isNaN(parseInt(t,10)))return t;var n=e+t;if(null!=bi[n])return bi[n];try{mi.style[e]=t}catch(I){return bi[n]=!1,!1}if(Zi[e])t=t.replace(pi,hi);else if(""===mi.style[e]&&("-ms-flex"===(t=Fa.css+t)&&(mi.style[e]="-ms-flexbox"),mi.style[e]=t,""===mi.style[e]))return bi[n]=!1,!1;return mi.style[e]="",bi[n]=t,bi[n]}wC&&(mi=document.createElement("p"));var yi=function(){function e(g){for(var t in g){var n=g[t];if("fallbacks"===t&&Array.isArray(n))g[t]=n.map(e);else{var I=!1,o=Ai(t);o&&o!==t&&(I=!0);var l=!1,C=Gi(o,zC(n));C&&C!==n&&(l=!0),(I||l)&&(I&&delete g[t],g[o||t]=C||n)}}return g}return{onProcessRule:function(e){if("keyframes"===e.type){var g=e;g.at=function(e){return"-"===e[1]||"ms"===Fa.js?e:"@"+Fa.css+"keyframes"+e.substr(10)}(g.at)}},onProcessStyle:function(g,t){return"style"!==t.type?g:e(g)},onChangeValue:function(e,g){return Gi(g,zC(e))||e}}};var Bi=function(){var e=function(e,g){return e.length===g.length?e>g?1:-1:e.length-g.length};return{onProcessStyle:function(g,t){if("style"!==t.type)return g;for(var n={},I=Object.keys(g).sort(e),o=0;o<I.length;o++)n[I[o]]=g[I[o]];return n}}};var fi=Lr({plugins:[na(),ia(),da(),Ga(),Va(),"undefined"===typeof window?null:yi(),Bi()]}),vi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=e.disableGlobal,t=void 0!==g&&g,n=e.productionPrefix,I=void 0===n?"jss":n,o=e.seed,l=void 0===o?"":o,C=""===l?"":"".concat(l,"-"),r=0,a=function(){return r+=1};return function(e,g){var n=g.options.name;if(n&&0===n.indexOf("Mui")&&!g.options.link&&!t){if(-1!==$r.indexOf(e.key))return"Mui-".concat(e.key);var o="".concat(C).concat(n,"-").concat(e.key);return g.options.theme[_r]&&""===l?"".concat(o,"-").concat(a()):o}return"".concat(C).concat(I).concat(a())}}(),Si={disableGeneration:!1,generateClassName:vi,jss:fi,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},Wi=e.createContext(Si);var Vi=-1e9;var Ri=["variant"];function Xi(e){return 0===e.length}function ki(e){var g="function"===typeof e;return{create:function(t,n){var I;try{I=g?e(t):e}catch(r){throw r}if(!n||!t.components||!t.components[n]||!t.components[n].styleOverrides&&!t.components[n].variants)return I;var o=t.components[n].styleOverrides||{},l=t.components[n].variants||[],C=(0,vo.Z)({},I);return Object.keys(o).forEach((function(e){C[e]=(0,To.Z)(C[e]||{},o[e])})),l.forEach((function(e){var g=function(e){var g=e.variant,t=(0,fo.Z)(e,Ri),n=g||"";return Object.keys(t).sort().forEach((function(g){n+="color"===g?Xi(n)?e[g]:(0,Wo.Z)(e[g]):"".concat(Xi(n)?g:(0,Wo.Z)(g)).concat((0,Wo.Z)(e[g].toString()))})),n}(e.props);C[g]=(0,To.Z)(C[g]||{},e.style)})),C},options:{}}}var Ji={},Yi=["name","classNamePrefix","Component","defaultTheme"];function Hi(e,g){var t=e.state,n=e.theme,I=e.stylesOptions,o=e.stylesCreator,l=e.name;if(!I.disableGeneration){var C=Or.get(I.sheetsManager,o,n);C||(C={refs:0,staticSheet:null,dynamicStyles:null},Or.set(I.sheetsManager,o,n,C));var r=(0,vo.Z)({},o.options,I,{theme:n,flip:"boolean"===typeof I.flip?I.flip:"rtl"===n.direction});r.generateId=r.serverGenerateClassName||r.generateClassName;var a=I.sheetsRegistry;if(0===C.refs){var i;I.sheetsCache&&(i=Or.get(I.sheetsCache,o,n));var c=o.create(n,l);i||((i=I.jss.createStyleSheet(c,(0,vo.Z)({link:!1},r))).attach(),I.sheetsCache&&Or.set(I.sheetsCache,o,n,i)),a&&a.add(i),C.staticSheet=i,C.dynamicStyles=Dr(c)}if(C.dynamicStyles){var s=I.jss.createStyleSheet(C.dynamicStyles,(0,vo.Z)({link:!0},r));s.update(g),s.attach(),t.dynamicSheet=s,t.classes=jr({baseClasses:C.staticSheet.classes,newClasses:s.classes}),a&&a.add(s)}else t.classes=C.staticSheet.classes;C.refs+=1}}function wi(g){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,I=t.classNamePrefix,o=t.Component,l=t.defaultTheme,C=void 0===l?Ji:l,r=(0,fo.Z)(t,Yi),a=ki(g),i=n||I||"makeStyles";a.options={index:Vi+=1,name:n,meta:i,classNamePrefix:i};return function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,qr.Z)()||C,I=(0,vo.Z)({},e.useContext(Wi),r),l=e.useRef(),i=e.useRef();!function(g,t){var n,I=e.useRef([]),o=e.useMemo((function(){return{}}),t);I.current!==o&&(I.current=o,n=g()),e.useEffect((function(){return function(){n&&n()}}),[o])}((function(){var e={name:n,state:{},stylesCreator:a,stylesOptions:I,theme:t};return Hi(e,g),i.current=!1,l.current=e,function(){!function(e){var g=e.state,t=e.theme,n=e.stylesOptions,I=e.stylesCreator;if(!n.disableGeneration){var o=Or.get(n.sheetsManager,I,t);o.refs-=1;var l=n.sheetsRegistry;0===o.refs&&(Or.delete(n.sheetsManager,I,t),n.jss.removeStyleSheet(o.staticSheet),l&&l.remove(o.staticSheet)),g.dynamicSheet&&(n.jss.removeStyleSheet(g.dynamicSheet),l&&l.remove(g.dynamicSheet))}}(e)}}),[t,a]),e.useEffect((function(){i.current&&function(e,g){var t=e.state;t.dynamicSheet&&t.dynamicSheet.update(g)}(l.current,g),i.current=!0}));var c=function(e,g,t){var n=e.state;if(e.stylesOptions.disableGeneration)return g||{};n.cacheClasses||(n.cacheClasses={value:null,lastProp:null,lastJSS:{}});var I=!1;return n.classes!==n.cacheClasses.lastJSS&&(n.cacheClasses.lastJSS=n.classes,I=!0),g!==n.cacheClasses.lastProp&&(n.cacheClasses.lastProp=g,I=!0),I&&(n.cacheClasses.value=jr({baseClasses:n.cacheClasses.lastJSS,newClasses:g,Component:t})),n.cacheClasses.value}(l.current,g.classes,o);return c}}var Ni=wi({LinksList:{display:"flex",flexWrap:"wrap",justifyContent:"center"},ListItem:{display:"flex"}}),Fi=function(){var e=Ni();return(0,Yo.jsx)(Sl,{className:e.LinksList,children:(0,Yo.jsxs)(JC,{className:e.ListItem,sx:{width:"auto"},children:[(0,Yo.jsx)(al,{sx:{mr:1},children:"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a:"}),(0,Yo.jsx)(hl,{target:"_blank",href:"https://t.me/ego_dubovik",children:(0,Yo.jsx)(YC.Z,{})})]})})},Ki=wi({container:{display:"flex",columnGap:"25px",padding:"15px 0",justifyContent:"space-between",alignItems:"center","@media (max-width: 768px)":{flexDirection:"column"}}}),xi=function(){var e=Ki();return(0,Yo.jsx)(Uo,{maxWidth:"xl",children:(0,Yo.jsxs)(tl,{className:e.container,children:[(0,Yo.jsx)(Fi,{}),(0,Yo.jsx)(Gl,{})]})})},zi=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)};function Ei(e){return(0,Vo.Z)("MuiPaper",e)}(0,nl.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var Mi=["className","component","elevation","square","variant"],Ui=(0,zo.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,g[t.variant],!t.square&&g.rounded,"elevation"===t.variant&&g["elevation".concat(t.elevation)]]}})((function(e){var g,t=e.theme,n=e.ownerState;return(0,vo.Z)({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((t.vars||t).palette.divider)},"elevation"===n.variant&&(0,vo.Z)({boxShadow:(t.vars||t).shadows[n.elevation]},!t.vars&&"dark"===t.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,Al.Fq)("#fff",zi(n.elevation)),", ").concat((0,Al.Fq)("#fff",zi(n.elevation)),")")},t.vars&&{backgroundImage:null==(g=t.vars.overlays)?void 0:g[n.elevation]}))})),Qi=e.forwardRef((function(e,g){var t=(0,Eo.Z)({props:e,name:"MuiPaper"}),n=t.className,I=t.component,o=void 0===I?"div":I,l=t.elevation,C=void 0===l?1:l,r=t.square,a=void 0!==r&&r,i=t.variant,c=void 0===i?"elevation":i,s=(0,fo.Z)(t,Mi),u=(0,vo.Z)({},t,{component:o,elevation:C,square:a,variant:c}),d=function(e){var g=e.square,t=e.elevation,n=e.variant,I=e.classes,o={root:["root",n,!g&&"rounded","elevation"===n&&"elevation".concat(t)]};return(0,Ro.Z)(o,Ei,I)}(u);return(0,Yo.jsx)(Ui,(0,vo.Z)({as:o,ownerState:u,className:(0,So.Z)(d.root,n),ref:g},s))}));function Li(e){return(0,Vo.Z)("MuiAppBar",e)}(0,nl.Z)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);var Ti=["className","color","enableColorOnDark","position"],Di=function(e,g){return e?"".concat(null==e?void 0:e.replace(")",""),", ").concat(g,")"):g},ji=(0,zo.ZP)(Qi,{name:"MuiAppBar",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,g["position".concat((0,xo.Z)(t.position))],g["color".concat((0,xo.Z)(t.color))]]}})((function(e){var g=e.theme,t=e.ownerState,n="light"===g.palette.mode?g.palette.grey[100]:g.palette.grey[900];return(0,vo.Z)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===t.position&&{position:"fixed",zIndex:(g.vars||g).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===t.position&&{position:"absolute",zIndex:(g.vars||g).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===t.position&&{position:"sticky",zIndex:(g.vars||g).zIndex.appBar,top:0,left:"auto",right:0},"static"===t.position&&{position:"static"},"relative"===t.position&&{position:"relative"},!g.vars&&(0,vo.Z)({},"default"===t.color&&{backgroundColor:n,color:g.palette.getContrastText(n)},t.color&&"default"!==t.color&&"inherit"!==t.color&&"transparent"!==t.color&&{backgroundColor:g.palette[t.color].main,color:g.palette[t.color].contrastText},"inherit"===t.color&&{color:"inherit"},"dark"===g.palette.mode&&!t.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===t.color&&(0,vo.Z)({backgroundColor:"transparent",color:"inherit"},"dark"===g.palette.mode&&{backgroundImage:"none"})),g.vars&&(0,vo.Z)({},"default"===t.color&&{"--AppBar-background":t.enableColorOnDark?g.vars.palette.AppBar.defaultBg:Di(g.vars.palette.AppBar.darkBg,g.vars.palette.AppBar.defaultBg),"--AppBar-color":t.enableColorOnDark?g.vars.palette.text.primary:Di(g.vars.palette.AppBar.darkColor,g.vars.palette.text.primary)},t.color&&!t.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":t.enableColorOnDark?g.vars.palette[t.color].main:Di(g.vars.palette.AppBar.darkBg,g.vars.palette[t.color].main),"--AppBar-color":t.enableColorOnDark?g.vars.palette[t.color].contrastText:Di(g.vars.palette.AppBar.darkColor,g.vars.palette[t.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:"inherit"===t.color?"inherit":"var(--AppBar-color)"},"transparent"===t.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),Pi=e.forwardRef((function(e,g){var t=(0,Eo.Z)({props:e,name:"MuiAppBar"}),n=t.className,I=t.color,o=void 0===I?"primary":I,l=t.enableColorOnDark,C=void 0!==l&&l,r=t.position,a=void 0===r?"fixed":r,i=(0,fo.Z)(t,Ti),c=(0,vo.Z)({},t,{color:o,position:a,enableColorOnDark:C}),s=function(e){var g=e.color,t=e.position,n=e.classes,I={root:["root","color".concat((0,xo.Z)(g)),"position".concat((0,xo.Z)(t))]};return(0,Ro.Z)(I,Li,n)}(c);return(0,Yo.jsx)(ji,(0,vo.Z)({square:!0,component:"header",ownerState:c,elevation:4,className:(0,So.Z)(s.root,n,"fixed"===a&&"mui-fixed"),ref:g},i))}));function Oi(e){return(0,Vo.Z)("MuiToolbar",e)}(0,nl.Z)("MuiToolbar",["root","gutters","regular","dense"]);var qi,_i=["className","component","disableGutters","variant"],$i=(0,zo.ZP)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,!t.disableGutters&&g.gutters,g[t.variant]]}})((function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&(0,Bo.Z)({paddingLeft:g.spacing(2),paddingRight:g.spacing(2)},g.breakpoints.up("sm"),{paddingLeft:g.spacing(3),paddingRight:g.spacing(3)}),"dense"===t.variant&&{minHeight:48})}),(function(e){var g=e.theme;return"regular"===e.ownerState.variant&&g.mixins.toolbar})),ec=e.forwardRef((function(e,g){var t=(0,Eo.Z)({props:e,name:"MuiToolbar"}),n=t.className,I=t.component,o=void 0===I?"div":I,l=t.disableGutters,C=void 0!==l&&l,r=t.variant,a=void 0===r?"regular":r,i=(0,fo.Z)(t,_i),c=(0,vo.Z)({},t,{component:o,disableGutters:C,variant:a}),s=function(e){var g=e.classes,t={root:["root",!e.disableGutters&&"gutters",e.variant]};return(0,Ro.Z)(t,Oi,g)}(c);return(0,Yo.jsx)($i,(0,vo.Z)({as:o,className:(0,So.Z)(s.root,n),ref:g,ownerState:c},i))})),gc=t(36);!function(e){e.flex="flex",e.none="none",e.block="block"}(qi||(qi={}));var tc=function(g){var t=g.isDesktop,n=(0,e.useState)(qi.none),I=(0,qn.Z)(n,2),o=I[0],l=I[1],C=(0,e.useState)(qi.flex),r=(0,qn.Z)(C,2),a=r[0],i=r[1];return(0,e.useEffect)((function(){!function(e){if(e)return l(qi.none),void i(qi.flex);l(qi.flex),i(qi.none)}(t)}),[t]),(0,Yo.jsxs)(Yo.Fragment,{children:[(0,Yo.jsx)(gc.Z,{sx:{display:{xs:o,md:a},mr:1}}),(0,Yo.jsx)(al,{variant:"h5",noWrap:!0,component:"a",href:"",sx:{mr:2,display:{xs:o,md:a},flexGrow:1,fontFamily:"monospace",fontWeight:600,letterSpacing:"0.3rem",color:"inherit",textDecoration:"none"},children:"QR-code"})]})},nc=t(8008);function Ic(e){return(0,Vo.Z)("MuiIconButton",e)}var oc=(0,nl.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),lc=["edge","children","className","color","disabled","disableFocusRipple","size"],Cc=(0,zo.ZP)(mC,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,"default"!==t.color&&g["color".concat((0,xo.Z)(t.color))],t.edge&&g["edge".concat((0,xo.Z)(t.edge))],g["size".concat((0,xo.Z)(t.size))]]}})((function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)({textAlign:"center",flex:"0 0 auto",fontSize:g.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(g.vars||g).palette.action.active,transition:g.transitions.create("background-color",{duration:g.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:g.vars?"rgba(".concat(g.vars.palette.action.activeChannel," / ").concat(g.vars.palette.action.hoverOpacity,")"):(0,Al.Fq)(g.palette.action.active,g.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})}),(function(e){var g,t=e.theme,n=e.ownerState,I=null==(g=(t.vars||t).palette)?void 0:g[n.color];return(0,vo.Z)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,vo.Z)({color:null==I?void 0:I.main},!n.disableRipple&&{"&:hover":(0,vo.Z)({},I&&{backgroundColor:t.vars?"rgba(".concat(I.mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Al.Fq)(I.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},(0,Bo.Z)({},"&.".concat(oc.disabled),{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}))})),rc=e.forwardRef((function(e,g){var t=(0,Eo.Z)({props:e,name:"MuiIconButton"}),n=t.edge,I=void 0!==n&&n,o=t.children,l=t.className,C=t.color,r=void 0===C?"default":C,a=t.disabled,i=void 0!==a&&a,c=t.disableFocusRipple,s=void 0!==c&&c,u=t.size,d=void 0===u?"medium":u,A=(0,fo.Z)(t,lc),m=(0,vo.Z)({},t,{edge:I,color:r,disabled:i,disableFocusRipple:s,size:d}),b=function(e){var g=e.classes,t=e.disabled,n=e.color,I=e.edge,o=e.size,l={root:["root",t&&"disabled","default"!==n&&"color".concat((0,xo.Z)(n)),I&&"edge".concat((0,xo.Z)(I)),"size".concat((0,xo.Z)(o))]};return(0,Ro.Z)(l,Ic,g)}(m);return(0,Yo.jsx)(Cc,(0,vo.Z)({className:(0,So.Z)(b.root,l),centerRipple:!0,focusRipple:!s,disabled:i,ref:g,ownerState:m},A,{children:o}))})),ac=(t(8457),t(8301));function ic(e){var g=e.documentElement.clientWidth;return Math.abs(window.innerWidth-g)}var cc=ic,sc=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function uc(e,g,t){return e===g?e.firstChild:g&&g.nextElementSibling?g.nextElementSibling:t?null:e.firstChild}function dc(e,g,t){return e===g?t?e.firstChild:e.lastChild:g&&g.previousElementSibling?g.previousElementSibling:t?null:e.lastChild}function Ac(e,g){if(void 0===g)return!0;var t=e.innerText;return void 0===t&&(t=e.textContent),0!==(t=t.trim().toLowerCase()).length&&(g.repeating?t[0]===g.keys[0]:0===t.indexOf(g.keys.join("")))}function mc(e,g,t,n,I,o){for(var l=!1,C=I(e,g,!!g&&t);C;){if(C===e.firstChild){if(l)return!1;l=!0}var r=!n&&(C.disabled||"true"===C.getAttribute("aria-disabled"));if(C.hasAttribute("tabindex")&&Ac(C,o)&&!r)return C.focus(),!0;C=I(e,C,t)}return!1}var bc=e.forwardRef((function(g,t){var n=g.actions,I=g.autoFocus,o=void 0!==I&&I,l=g.autoFocusItem,C=void 0!==l&&l,r=g.children,a=g.className,i=g.disabledItemsFocusable,c=void 0!==i&&i,s=g.disableListWrap,u=void 0!==s&&s,d=g.onKeyDown,A=g.variant,m=void 0===A?"selectedMenu":A,b=(0,fo.Z)(g,sc),Z=e.useRef(null),p=e.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,ZC.Z)((function(){o&&Z.current.focus()}),[o]),e.useImperativeHandle(n,(function(){return{adjustStyleForScrollbar:function(e,g){var t=!Z.current.style.width;if(e.clientHeight<Z.current.clientHeight&&t){var n="".concat(cc((0,ac.Z)(e)),"px");Z.current.style["rtl"===g.direction?"paddingLeft":"paddingRight"]=n,Z.current.style.width="calc(100% + ".concat(n,")")}return Z.current}}}),[]);var h=(0,cl.Z)(Z,t),G=-1;e.Children.forEach(r,(function(g,t){e.isValidElement(g)&&(g.props.disabled||("selectedMenu"===m&&g.props.selected||-1===G)&&(G=t))}));var y=e.Children.map(r,(function(g,t){if(t===G){var n={};return C&&(n.autoFocus=!0),void 0===g.props.tabIndex&&"selectedMenu"===m&&(n.tabIndex=0),e.cloneElement(g,n)}return g}));return(0,Yo.jsx)(Sl,(0,vo.Z)({role:"menu",ref:h,className:a,onKeyDown:function(e){var g=Z.current,t=e.key,n=(0,ac.Z)(g).activeElement;if("ArrowDown"===t)e.preventDefault(),mc(g,n,u,c,uc);else if("ArrowUp"===t)e.preventDefault(),mc(g,n,u,c,dc);else if("Home"===t)e.preventDefault(),mc(g,null,u,c,uc);else if("End"===t)e.preventDefault(),mc(g,null,u,c,dc);else if(1===t.length){var I=p.current,o=t.toLowerCase(),l=performance.now();I.keys.length>0&&(l-I.lastTime>500?(I.keys=[],I.repeating=!0,I.previousKeyMatched=!0):I.repeating&&o!==I.keys[0]&&(I.repeating=!1)),I.lastTime=l,I.keys.push(o);var C=n&&!I.repeating&&Ac(n,I);I.previousKeyMatched&&(C||mc(g,n,!1,c,uc,I))?e.preventDefault():I.previousKeyMatched=!1}d&&d(e)},tabIndex:o?0:-1},b,{children:y}))})),Zc=bc,pc=t(3199),hc=t(7602),Gc=!1,yc="unmounted",Bc="exited",fc="entering",vc="entered",Sc="exiting",Wc=function(g){function t(e,t){var n;n=g.call(this,e,t)||this;var I,o=t&&!t.isMounting?e.enter:e.appear;return n.appearStatus=null,e.in?o?(I=Bc,n.appearStatus=fc):I=vc:I=e.unmountOnExit||e.mountOnEnter?yc:Bc,n.state={status:I},n.nextCallback=null,n}(0,Xl.Z)(t,g),t.getDerivedStateFromProps=function(e,g){return e.in&&g.status===yc?{status:Bc}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var g=null;if(e!==this.props){var t=this.state.status;this.props.in?t!==fc&&t!==vc&&(g=fc):t!==fc&&t!==vc||(g=Sc)}this.updateStatus(!1,g)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,g,t,n=this.props.timeout;return e=g=t=n,null!=n&&"number"!==typeof n&&(e=n.exit,g=n.enter,t=void 0!==n.appear?n.appear:g),{exit:e,enter:g,appear:t}},n.updateStatus=function(e,g){if(void 0===e&&(e=!1),null!==g)if(this.cancelNextCallback(),g===fc){if(this.props.unmountOnExit||this.props.mountOnEnter){var t=this.props.nodeRef?this.props.nodeRef.current:bn.findDOMNode(this);t&&function(e){e.scrollTop}(t)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Bc&&this.setState({status:yc})},n.performEnter=function(e){var g=this,t=this.props.enter,n=this.context?this.context.isMounting:e,I=this.props.nodeRef?[n]:[bn.findDOMNode(this),n],o=I[0],l=I[1],C=this.getTimeouts(),r=n?C.appear:C.enter;!e&&!t||Gc?this.safeSetState({status:vc},(function(){g.props.onEntered(o)})):(this.props.onEnter(o,l),this.safeSetState({status:fc},(function(){g.props.onEntering(o,l),g.onTransitionEnd(r,(function(){g.safeSetState({status:vc},(function(){g.props.onEntered(o,l)}))}))})))},n.performExit=function(){var e=this,g=this.props.exit,t=this.getTimeouts(),n=this.props.nodeRef?void 0:bn.findDOMNode(this);g&&!Gc?(this.props.onExit(n),this.safeSetState({status:Sc},(function(){e.props.onExiting(n),e.onTransitionEnd(t.exit,(function(){e.safeSetState({status:Bc},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:Bc},(function(){e.props.onExited(n)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,g){g=this.setNextCallback(g),this.setState(e,g)},n.setNextCallback=function(e){var g=this,t=!0;return this.nextCallback=function(n){t&&(t=!1,g.nextCallback=null,e(n))},this.nextCallback.cancel=function(){t=!1},this.nextCallback},n.onTransitionEnd=function(e,g){this.setNextCallback(g);var t=this.props.nodeRef?this.props.nodeRef.current:bn.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(t&&!n){if(this.props.addEndListener){var I=this.props.nodeRef?[this.nextCallback]:[t,this.nextCallback],o=I[0],l=I[1];this.props.addEndListener(o,l)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var g=this.state.status;if(g===yc)return null;var t=this.props,n=t.children,I=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,fo.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(kl.Provider,{value:null},"function"===typeof n?n(g,I):e.cloneElement(e.Children.only(n),I))},t}(e.Component);function Vc(){}Wc.contextType=kl,Wc.propTypes={},Wc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Vc,onEntering:Vc,onEntered:Vc,onExit:Vc,onExiting:Vc,onExited:Vc},Wc.UNMOUNTED=yc,Wc.EXITED=Bc,Wc.ENTERING=fc,Wc.ENTERED=vc,Wc.EXITING=Sc;var Rc=Wc,Xc=t(6482);function kc(){return(0,qo.Z)(Xc.Z)}var Jc=function(e){return e.scrollTop};function Yc(e,g){var t,n,I=e.timeout,o=e.easing,l=e.style,C=void 0===l?{}:l;return{duration:null!=(t=C.transitionDuration)?t:"number"===typeof I?I:I[g.mode]||0,easing:null!=(n=C.transitionTimingFunction)?n:"object"===typeof o?o[g.mode]:o,delay:C.transitionDelay}}var Hc=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function wc(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var Nc={entering:{opacity:1,transform:wc(1)},entered:{opacity:1,transform:"none"}},Fc="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Kc=e.forwardRef((function(g,t){var n=g.addEndListener,I=g.appear,o=void 0===I||I,l=g.children,C=g.easing,r=g.in,a=g.onEnter,i=g.onEntered,c=g.onEntering,s=g.onExit,u=g.onExited,d=g.onExiting,A=g.style,m=g.timeout,b=void 0===m?"auto":m,Z=g.TransitionComponent,p=void 0===Z?Rc:Z,h=(0,fo.Z)(g,Hc),G=e.useRef(),y=e.useRef(),B=kc(),f=e.useRef(null),v=(0,cl.Z)(f,l.ref,t),S=function(e){return function(g){if(e){var t=f.current;void 0===g?e(t):e(t,g)}}},W=S(c),V=S((function(e,g){Jc(e);var t,n=Yc({style:A,timeout:b,easing:C},{mode:"enter"}),I=n.duration,o=n.delay,l=n.easing;"auto"===b?(t=B.transitions.getAutoHeightDuration(e.clientHeight),y.current=t):t=I,e.style.transition=[B.transitions.create("opacity",{duration:t,delay:o}),B.transitions.create("transform",{duration:Fc?t:.666*t,delay:o,easing:l})].join(","),a&&a(e,g)})),R=S(i),X=S(d),k=S((function(e){var g,t=Yc({style:A,timeout:b,easing:C},{mode:"exit"}),n=t.duration,I=t.delay,o=t.easing;"auto"===b?(g=B.transitions.getAutoHeightDuration(e.clientHeight),y.current=g):g=n,e.style.transition=[B.transitions.create("opacity",{duration:g,delay:I}),B.transitions.create("transform",{duration:Fc?g:.666*g,delay:Fc?I:I||.333*g,easing:o})].join(","),e.style.opacity=0,e.style.transform=wc(.75),s&&s(e)})),J=S(u);return e.useEffect((function(){return function(){clearTimeout(G.current)}}),[]),(0,Yo.jsx)(p,(0,vo.Z)({appear:o,in:r,nodeRef:f,onEnter:V,onEntered:R,onEntering:W,onExit:k,onExited:J,onExiting:X,addEndListener:function(e){"auto"===b&&(G.current=setTimeout(e,y.current||0)),n&&n(f.current,e)},timeout:"auto"===b?null:b},h,{children:function(g,t){return e.cloneElement(l,(0,vo.Z)({style:(0,vo.Z)({opacity:0,transform:wc(.75),visibility:"exited"!==g||r?void 0:"hidden"},Nc[g],A,l.props.style),ref:v},t))}}))}));Kc.muiSupportAuto=!0;var xc=Kc,zc=t(7563),Ec=t(9723),Mc=t(8956),Uc=t(8949),Qc=t(5721),Lc=t(2971);var Tc=e.forwardRef((function(g,t){var n=g.children,I=g.container,o=g.disablePortal,l=void 0!==o&&o,C=e.useState(null),r=(0,qn.Z)(C,2),a=r[0],i=r[1],c=(0,zc.Z)(e.isValidElement(n)?n.ref:null,t);if((0,Qc.Z)((function(){l||i(function(e){return"function"===typeof e?e():e}(I)||document.body)}),[I,l]),(0,Qc.Z)((function(){if(a&&!l)return(0,Lc.Z)(t,a),function(){(0,Lc.Z)(t,null)}}),[t,a,l]),l){if(e.isValidElement(n)){var s={ref:c};return e.cloneElement(n,s)}return(0,Yo.jsx)(e.Fragment,{children:n})}return(0,Yo.jsx)(e.Fragment,{children:a?bn.createPortal(n,a):a})})),Dc=t(7979);function jc(e,g){g?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Pc(e){return parseInt((0,Dc.Z)(e).getComputedStyle(e).paddingRight,10)||0}function Oc(e,g,t,n,I){var o=[g,t].concat((0,lI.Z)(n));[].forEach.call(e.children,(function(e){var g=-1===o.indexOf(e),t=!function(e){var g=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),t="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return g||t}(e);g&&t&&jc(e,I)}))}function qc(e,g){var t=-1;return e.some((function(e,n){return!!g(e)&&(t=n,!0)})),t}function _c(e,g){var t=[],n=e.container;if(!g.disableScrollLock){if(function(e){var g=(0,Ec.Z)(e);return g.body===e?(0,Dc.Z)(e).innerWidth>g.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(n)){var I=ic((0,Ec.Z)(n));t.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight="".concat(Pc(n)+I,"px");var o=(0,Ec.Z)(n).querySelectorAll(".mui-fixed");[].forEach.call(o,(function(e){t.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(Pc(e)+I,"px")}))}var l;if(n.parentNode instanceof DocumentFragment)l=(0,Ec.Z)(n).body;else{var C=n.parentElement,r=(0,Dc.Z)(n);l="HTML"===(null==C?void 0:C.nodeName)&&"scroll"===r.getComputedStyle(C).overflowY?C:n}t.push({value:l.style.overflow,property:"overflow",el:l},{value:l.style.overflowX,property:"overflow-x",el:l},{value:l.style.overflowY,property:"overflow-y",el:l}),l.style.overflow="hidden"}return function(){t.forEach((function(e){var g=e.value,t=e.el,n=e.property;g?t.style.setProperty(n,g):t.style.removeProperty(n)}))}}var $c=function(){function e(){zn(this,e),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return Un(e,[{key:"add",value:function(e,g){var t=this.modals.indexOf(e);if(-1!==t)return t;t=this.modals.length,this.modals.push(e),e.modalRef&&jc(e.modalRef,!1);var n=function(e){var g=[];return[].forEach.call(e.children,(function(e){"true"===e.getAttribute("aria-hidden")&&g.push(e)})),g}(g);Oc(g,e.mount,e.modalRef,n,!0);var I=qc(this.containers,(function(e){return e.container===g}));return-1!==I?(this.containers[I].modals.push(e),t):(this.containers.push({modals:[e],container:g,restore:null,hiddenSiblings:n}),t)}},{key:"mount",value:function(e,g){var t=qc(this.containers,(function(g){return-1!==g.modals.indexOf(e)})),n=this.containers[t];n.restore||(n.restore=_c(n,g))}},{key:"remove",value:function(e){var g=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=this.modals.indexOf(e);if(-1===t)return t;var n=qc(this.containers,(function(g){return-1!==g.modals.indexOf(e)})),I=this.containers[n];if(I.modals.splice(I.modals.indexOf(e),1),this.modals.splice(t,1),0===I.modals.length)I.restore&&I.restore(),e.modalRef&&jc(e.modalRef,g),Oc(I.container,e.mount,e.modalRef,I.hiddenSiblings,!1),this.containers.splice(n,1);else{var o=I.modals[I.modals.length-1];o.modalRef&&jc(o.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}(),es=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function gs(e){var g=[],t=[];return Array.from(e.querySelectorAll(es)).forEach((function(e,n){var I=function(e){var g=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(g)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:g}(e);-1!==I&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;var g=function(g){return e.ownerDocument.querySelector('input[type="radio"]'.concat(g))},t=g('[name="'.concat(e.name,'"]:checked'));return t||(t=g('[name="'.concat(e.name,'"]'))),t!==e}(e))}(e)&&(0===I?g.push(e):t.push({documentOrder:n,tabIndex:I,node:e}))})),t.sort((function(e,g){return e.tabIndex===g.tabIndex?e.documentOrder-g.documentOrder:e.tabIndex-g.tabIndex})).map((function(e){return e.node})).concat(g)}function ts(){return!0}var ns=function(g){var t=g.children,n=g.disableAutoFocus,I=void 0!==n&&n,o=g.disableEnforceFocus,l=void 0!==o&&o,C=g.disableRestoreFocus,r=void 0!==C&&C,a=g.getTabbable,i=void 0===a?gs:a,c=g.isEnabled,s=void 0===c?ts:c,u=g.open,d=e.useRef(!1),A=e.useRef(null),m=e.useRef(null),b=e.useRef(null),Z=e.useRef(null),p=e.useRef(!1),h=e.useRef(null),G=(0,zc.Z)(t.ref,h),y=e.useRef(null);e.useEffect((function(){u&&h.current&&(p.current=!I)}),[I,u]),e.useEffect((function(){if(u&&h.current){var e=(0,Ec.Z)(h.current);return h.current.contains(e.activeElement)||(h.current.hasAttribute("tabIndex")||h.current.setAttribute("tabIndex","-1"),p.current&&h.current.focus()),function(){r||(b.current&&b.current.focus&&(d.current=!0,b.current.focus()),b.current=null)}}}),[u]),e.useEffect((function(){if(u&&h.current){var e=(0,Ec.Z)(h.current),g=function(g){var t=h.current;if(null!==t)if(e.hasFocus()&&!l&&s()&&!d.current){if(!t.contains(e.activeElement)){if(g&&Z.current!==g.target||e.activeElement!==Z.current)Z.current=null;else if(null!==Z.current)return;if(!p.current)return;var n=[];if(e.activeElement!==A.current&&e.activeElement!==m.current||(n=i(h.current)),n.length>0){var I,o,C=Boolean((null==(I=y.current)?void 0:I.shiftKey)&&"Tab"===(null==(o=y.current)?void 0:o.key)),r=n[0],a=n[n.length-1];"string"!==typeof r&&"string"!==typeof a&&(C?a.focus():r.focus())}else t.focus()}}else d.current=!1},t=function(g){y.current=g,!l&&s()&&"Tab"===g.key&&e.activeElement===h.current&&g.shiftKey&&(d.current=!0,m.current&&m.current.focus())};e.addEventListener("focusin",g),e.addEventListener("keydown",t,!0);var n=setInterval((function(){e.activeElement&&"BODY"===e.activeElement.tagName&&g(null)}),50);return function(){clearInterval(n),e.removeEventListener("focusin",g),e.removeEventListener("keydown",t,!0)}}}),[I,l,r,s,u,i]);var B=function(e){null===b.current&&(b.current=e.relatedTarget),p.current=!0};return(0,Yo.jsxs)(e.Fragment,{children:[(0,Yo.jsx)("div",{tabIndex:u?0:-1,onFocus:B,ref:A,"data-testid":"sentinelStart"}),e.cloneElement(t,{ref:G,onFocus:function(e){null===b.current&&(b.current=e.relatedTarget),p.current=!0,Z.current=e.target;var g=t.props.onFocus;g&&g(e)}}),(0,Yo.jsx)("div",{tabIndex:u?0:-1,onFocus:B,ref:m,"data-testid":"sentinelEnd"})]})};function Is(e){return(0,Vo.Z)("MuiModal",e)}(0,nl.Z)("MuiModal",["root","hidden"]);function os(e,g,t){return void 0===e||Wl(e)?g:(0,vo.Z)({},g,{ownerState:(0,vo.Z)({},g.ownerState,t)})}function ls(e){if(void 0===e)return{};var g={};return Object.keys(e).filter((function(g){return!(g.match(/^on[A-Z]/)&&"function"===typeof e[g])})).forEach((function(t){g[t]=e[t]})),g}function Cs(e){var g=e.getSlotProps,t=e.additionalProps,n=e.externalSlotProps,I=e.externalForwardedProps,o=e.className;if(!g){var l=(0,So.Z)(null==I?void 0:I.className,null==n?void 0:n.className,o,null==t?void 0:t.className),C=(0,vo.Z)({},null==t?void 0:t.style,null==I?void 0:I.style,null==n?void 0:n.style),r=(0,vo.Z)({},t,I,n);return l.length>0&&(r.className=l),Object.keys(C).length>0&&(r.style=C),{props:r,internalRef:void 0}}var a=function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};var t={};return Object.keys(e).filter((function(t){return t.match(/^on[A-Z]/)&&"function"===typeof e[t]&&!g.includes(t)})).forEach((function(g){t[g]=e[g]})),t}((0,vo.Z)({},I,n)),i=ls(n),c=ls(I),s=g(a),u=(0,So.Z)(null==s?void 0:s.className,null==t?void 0:t.className,o,null==I?void 0:I.className,null==n?void 0:n.className),d=(0,vo.Z)({},null==s?void 0:s.style,null==t?void 0:t.style,null==I?void 0:I.style,null==n?void 0:n.style),A=(0,vo.Z)({},s,t,c,i);return u.length>0&&(A.className=u),Object.keys(d).length>0&&(A.style=d),{props:A,internalRef:s.ref}}function rs(e,g){return"function"===typeof e?e(g):e}var as=["elementType","externalSlotProps","ownerState"];function is(e){var g,t=e.elementType,n=e.externalSlotProps,I=e.ownerState,o=(0,fo.Z)(e,as),l=rs(n,I),C=Cs((0,vo.Z)({},o,{externalSlotProps:l})),r=C.props,a=C.internalRef,i=(0,zc.Z)(a,null==l?void 0:l.ref,null==(g=e.additionalProps)?void 0:g.ref);return os(t,(0,vo.Z)({},r,{ref:i}),I)}var cs=["children","classes","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"];var ss=new $c,us=e.forwardRef((function(g,t){var n,I,o=g.children,l=g.classes,C=g.closeAfterTransition,r=void 0!==C&&C,a=g.component,i=g.container,c=g.disableAutoFocus,s=void 0!==c&&c,u=g.disableEnforceFocus,d=void 0!==u&&u,A=g.disableEscapeKeyDown,m=void 0!==A&&A,b=g.disablePortal,Z=void 0!==b&&b,p=g.disableRestoreFocus,h=void 0!==p&&p,G=g.disableScrollLock,y=void 0!==G&&G,B=g.hideBackdrop,f=void 0!==B&&B,v=g.keepMounted,S=void 0!==v&&v,W=g.manager,V=void 0===W?ss:W,R=g.onBackdropClick,X=g.onClose,k=g.onKeyDown,J=g.open,Y=g.onTransitionEnter,H=g.onTransitionExited,w=g.slotProps,N=void 0===w?{}:w,F=g.slots,K=void 0===F?{}:F,x=(0,fo.Z)(g,cs),z=e.useState(!J),E=(0,qn.Z)(z,2),M=E[0],U=E[1],Q=e.useRef({}),L=e.useRef(null),T=e.useRef(null),D=(0,zc.Z)(T,t),j=function(e){return!!e&&e.props.hasOwnProperty("in")}(o),P=null==(n=g["aria-hidden"])||n,O=function(){return Q.current.modalRef=T.current,Q.current.mountNode=L.current,Q.current},q=function(){V.mount(O(),{disableScrollLock:y}),T.current&&(T.current.scrollTop=0)},_=(0,Mc.Z)((function(){var e=function(e){return"function"===typeof e?e():e}(i)||(0,Ec.Z)(L.current).body;V.add(O(),e),T.current&&q()})),$=e.useCallback((function(){return V.isTopModal(O())}),[V]),ee=(0,Mc.Z)((function(e){L.current=e,e&&T.current&&(J&&$()?q():jc(T.current,P))})),ge=e.useCallback((function(){V.remove(O(),P)}),[V,P]);e.useEffect((function(){return function(){ge()}}),[ge]),e.useEffect((function(){J?_():j&&r||ge()}),[J,ge,j,r,_]);var te=(0,vo.Z)({},g,{classes:l,closeAfterTransition:r,disableAutoFocus:s,disableEnforceFocus:d,disableEscapeKeyDown:m,disablePortal:Z,disableRestoreFocus:h,disableScrollLock:y,exited:M,hideBackdrop:f,keepMounted:S}),ne=function(e){var g=e.open,t=e.exited,n=e.classes,I={root:["root",!g&&t&&"hidden"],backdrop:["backdrop"]};return(0,Ro.Z)(I,Is,n)}(te),Ie={};void 0===o.props.tabIndex&&(Ie.tabIndex="-1"),j&&(Ie.onEnter=(0,Uc.Z)((function(){U(!1),Y&&Y()}),o.props.onEnter),Ie.onExited=(0,Uc.Z)((function(){U(!0),H&&H(),r&&ge()}),o.props.onExited));var oe=null!=(I=null!=a?a:K.root)?I:"div",le=is({elementType:oe,externalSlotProps:N.root,externalForwardedProps:x,additionalProps:{ref:D,role:"presentation",onKeyDown:function(e){k&&k(e),"Escape"===e.key&&$()&&(m||(e.stopPropagation(),X&&X(e,"escapeKeyDown")))}},className:ne.root,ownerState:te}),Ce=K.backdrop,re=is({elementType:Ce,externalSlotProps:N.backdrop,additionalProps:{"aria-hidden":!0,onClick:function(e){e.target===e.currentTarget&&(R&&R(e),X&&X(e,"backdropClick"))},open:J},className:ne.backdrop,ownerState:te});return S||J||j&&!M?(0,Yo.jsx)(Tc,{ref:ee,container:i,disablePortal:Z,children:(0,Yo.jsxs)(oe,(0,vo.Z)({},le,{children:[!f&&Ce?(0,Yo.jsx)(Ce,(0,vo.Z)({},re)):null,(0,Yo.jsx)(ns,{disableEnforceFocus:d,disableAutoFocus:s,disableRestoreFocus:h,isEnabled:$,open:J,children:e.cloneElement(o,Ie)})]}))}):null})),ds=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],As={entering:{opacity:1},entered:{opacity:1}},ms=e.forwardRef((function(g,t){var n=kc(),I={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},o=g.addEndListener,l=g.appear,C=void 0===l||l,r=g.children,a=g.easing,i=g.in,c=g.onEnter,s=g.onEntered,u=g.onEntering,d=g.onExit,A=g.onExited,m=g.onExiting,b=g.style,Z=g.timeout,p=void 0===Z?I:Z,h=g.TransitionComponent,G=void 0===h?Rc:h,y=(0,fo.Z)(g,ds),B=e.useRef(null),f=(0,cl.Z)(B,r.ref,t),v=function(e){return function(g){if(e){var t=B.current;void 0===g?e(t):e(t,g)}}},S=v(u),W=v((function(e,g){Jc(e);var t=Yc({style:b,timeout:p,easing:a},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),c&&c(e,g)})),V=v(s),R=v(m),X=v((function(e){var g=Yc({style:b,timeout:p,easing:a},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",g),e.style.transition=n.transitions.create("opacity",g),d&&d(e)})),k=v(A);return(0,Yo.jsx)(G,(0,vo.Z)({appear:C,in:i,nodeRef:B,onEnter:W,onEntered:V,onEntering:S,onExit:X,onExited:k,onExiting:R,addEndListener:function(e){o&&o(B.current,e)},timeout:p},y,{children:function(g,t){return e.cloneElement(r,(0,vo.Z)({style:(0,vo.Z)({opacity:0,visibility:"exited"!==g||i?void 0:"hidden"},As[g],b,r.props.style),ref:f},t))}}))})),bs=ms;function Zs(e){return(0,Vo.Z)("MuiBackdrop",e)}(0,nl.Z)("MuiBackdrop",["root","invisible"]);var ps=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],hs=(0,zo.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,t.invisible&&g.invisible]}})((function(e){var g=e.ownerState;return(0,vo.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},g.invisible&&{backgroundColor:"transparent"})})),Gs=e.forwardRef((function(e,g){var t,n,I,o=(0,Eo.Z)({props:e,name:"MuiBackdrop"}),l=o.children,C=o.className,r=o.component,a=void 0===r?"div":r,i=o.components,c=void 0===i?{}:i,s=o.componentsProps,u=void 0===s?{}:s,d=o.invisible,A=void 0!==d&&d,m=o.open,b=o.slotProps,Z=void 0===b?{}:b,p=o.slots,h=void 0===p?{}:p,G=o.TransitionComponent,y=void 0===G?bs:G,B=o.transitionDuration,f=(0,fo.Z)(o,ps),v=(0,vo.Z)({},o,{component:a,invisible:A}),S=function(e){var g=e.classes,t={root:["root",e.invisible&&"invisible"]};return(0,Ro.Z)(t,Zs,g)}(v),W=null!=(t=Z.root)?t:u.root;return(0,Yo.jsx)(y,(0,vo.Z)({in:m,timeout:B},f,{children:(0,Yo.jsx)(hs,(0,vo.Z)({"aria-hidden":!0},W,{as:null!=(n=null!=(I=h.root)?I:c.Root)?n:a,className:(0,So.Z)(S.root,C,null==W?void 0:W.className),ownerState:(0,vo.Z)({},v,null==W?void 0:W.ownerState),classes:S,ref:g,children:l}))}))})),ys=["BackdropComponent","BackdropProps","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],Bs=(0,zo.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,!t.open&&t.exited&&g.hidden]}})((function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)({position:"fixed",zIndex:(g.vars||g).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})})),fs=(0,zo.ZP)(Gs,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(e,g){return g.backdrop}})({zIndex:-1}),vs=e.forwardRef((function(g,t){var n,I,o,l,C,r,a=(0,Eo.Z)({name:"MuiModal",props:g}),i=a.BackdropComponent,c=void 0===i?fs:i,s=a.BackdropProps,u=a.closeAfterTransition,d=void 0!==u&&u,A=a.children,m=a.component,b=a.components,Z=void 0===b?{}:b,p=a.componentsProps,h=void 0===p?{}:p,G=a.disableAutoFocus,y=void 0!==G&&G,B=a.disableEnforceFocus,f=void 0!==B&&B,v=a.disableEscapeKeyDown,S=void 0!==v&&v,W=a.disablePortal,V=void 0!==W&&W,R=a.disableRestoreFocus,X=void 0!==R&&R,k=a.disableScrollLock,J=void 0!==k&&k,Y=a.hideBackdrop,H=void 0!==Y&&Y,w=a.keepMounted,N=void 0!==w&&w,F=a.slotProps,K=a.slots,x=a.theme,z=(0,fo.Z)(a,ys),E=e.useState(!0),M=(0,qn.Z)(E,2),U=M[0],Q=M[1],L={closeAfterTransition:d,disableAutoFocus:y,disableEnforceFocus:f,disableEscapeKeyDown:S,disablePortal:V,disableRestoreFocus:X,disableScrollLock:J,hideBackdrop:H,keepMounted:N},T=(0,vo.Z)({},a,L,{exited:U}),D=function(e){return e.classes}(T),j=null!=(n=null!=(I=null==K?void 0:K.root)?I:Z.Root)?n:Bs,P=null!=(o=null!=(l=null==K?void 0:K.backdrop)?l:Z.Backdrop)?o:c,O=null!=(C=null==F?void 0:F.root)?C:h.root,q=null!=(r=null==F?void 0:F.backdrop)?r:h.backdrop;return(0,Yo.jsx)(us,(0,vo.Z)({slots:{root:j,backdrop:P},slotProps:{root:function(){return(0,vo.Z)({},rs(O,T),!Wl(j)&&{as:m,theme:x})},backdrop:function(){return(0,vo.Z)({},s,rs(q,T))}},onTransitionEnter:function(){return Q(!1)},onTransitionExited:function(){return Q(!0)},ref:t},z,{classes:D},L,{children:A}))})),Ss=vs;function Ws(e){return(0,Vo.Z)("MuiPopover",e)}(0,nl.Z)("MuiPopover",["root","paper"]);var Vs=["onEntering"],Rs=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function Xs(e,g){var t=0;return"number"===typeof g?t=g:"center"===g?t=e.height/2:"bottom"===g&&(t=e.height),t}function ks(e,g){var t=0;return"number"===typeof g?t=g:"center"===g?t=e.width/2:"right"===g&&(t=e.width),t}function Js(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function Ys(e){return"function"===typeof e?e():e}var Hs=(0,zo.ZP)(Ss,{name:"MuiPopover",slot:"Root",overridesResolver:function(e,g){return g.root}})({}),ws=(0,zo.ZP)(Qi,{name:"MuiPopover",slot:"Paper",overridesResolver:function(e,g){return g.paper}})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Ns=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiPopover"}),I=n.action,o=n.anchorEl,l=n.anchorOrigin,C=void 0===l?{vertical:"top",horizontal:"left"}:l,r=n.anchorPosition,a=n.anchorReference,i=void 0===a?"anchorEl":a,c=n.children,s=n.className,u=n.container,d=n.elevation,A=void 0===d?8:d,m=n.marginThreshold,b=void 0===m?16:m,Z=n.open,p=n.PaperProps,h=void 0===p?{}:p,G=n.transformOrigin,y=void 0===G?{vertical:"top",horizontal:"left"}:G,B=n.TransitionComponent,f=void 0===B?xc:B,v=n.transitionDuration,S=void 0===v?"auto":v,W=n.TransitionProps,V=(void 0===W?{}:W).onEntering,R=(0,fo.Z)(n.TransitionProps,Vs),X=(0,fo.Z)(n,Rs),k=e.useRef(),J=(0,cl.Z)(k,h.ref),Y=(0,vo.Z)({},n,{anchorOrigin:C,anchorReference:i,elevation:A,marginThreshold:b,PaperProps:h,transformOrigin:y,TransitionComponent:f,transitionDuration:S,TransitionProps:R}),H=function(e){var g=e.classes;return(0,Ro.Z)({root:["root"],paper:["paper"]},Ws,g)}(Y),w=e.useCallback((function(){if("anchorPosition"===i)return r;var e=Ys(o),g=(e&&1===e.nodeType?e:(0,ac.Z)(k.current).body).getBoundingClientRect();return{top:g.top+Xs(g,C.vertical),left:g.left+ks(g,C.horizontal)}}),[o,C.horizontal,C.vertical,r,i]),N=e.useCallback((function(e){return{vertical:Xs(e,y.vertical),horizontal:ks(e,y.horizontal)}}),[y.horizontal,y.vertical]),F=e.useCallback((function(e){var g={width:e.offsetWidth,height:e.offsetHeight},t=N(g);if("none"===i)return{top:null,left:null,transformOrigin:Js(t)};var n=w(),I=n.top-t.vertical,l=n.left-t.horizontal,C=I+g.height,r=l+g.width,a=(0,hc.Z)(Ys(o)),c=a.innerHeight-b,s=a.innerWidth-b;if(I<b){var u=I-b;I-=u,t.vertical+=u}else if(C>c){var d=C-c;I-=d,t.vertical+=d}if(l<b){var A=l-b;l-=A,t.horizontal+=A}else if(r>s){var m=r-s;l-=m,t.horizontal+=m}return{top:"".concat(Math.round(I),"px"),left:"".concat(Math.round(l),"px"),transformOrigin:Js(t)}}),[o,i,w,N,b]),K=e.useState(Z),x=(0,qn.Z)(K,2),z=x[0],E=x[1],M=e.useCallback((function(){var e=k.current;if(e){var g=F(e);null!==g.top&&(e.style.top=g.top),null!==g.left&&(e.style.left=g.left),e.style.transformOrigin=g.transformOrigin,E(!0)}}),[F]);e.useEffect((function(){Z&&M()})),e.useImperativeHandle(I,(function(){return Z?{updatePosition:function(){M()}}:null}),[Z,M]),e.useEffect((function(){if(Z){var e=(0,pc.Z)((function(){M()})),g=(0,hc.Z)(o);return g.addEventListener("resize",e),function(){e.clear(),g.removeEventListener("resize",e)}}}),[o,Z,M]);var U=S;"auto"!==S||f.muiSupportAuto||(U=void 0);var Q=u||(o?(0,ac.Z)(Ys(o)).body:void 0);return(0,Yo.jsx)(Hs,(0,vo.Z)({BackdropProps:{invisible:!0},className:(0,So.Z)(H.root,s),container:Q,open:Z,ref:t,ownerState:Y},X,{children:(0,Yo.jsx)(f,(0,vo.Z)({appear:!0,in:Z,onEntering:function(e,g){V&&V(e,g),M()},onExited:function(){E(!1)},timeout:U},R,{children:(0,Yo.jsx)(ws,(0,vo.Z)({elevation:A},h,{ref:J,className:(0,So.Z)(H.paper,h.className)},z?void 0:{style:(0,vo.Z)({},h.style,{opacity:0})},{ownerState:Y,children:c}))}))}))})),Fs=Ns;function Ks(e){return(0,Vo.Z)("MuiMenu",e)}(0,nl.Z)("MuiMenu",["root","paper","list"]);var xs=["onEntering"],zs=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],Es={vertical:"top",horizontal:"right"},Ms={vertical:"top",horizontal:"left"},Us=(0,zo.ZP)(Fs,{shouldForwardProp:function(e){return(0,zo.FO)(e)||"classes"===e},name:"MuiMenu",slot:"Root",overridesResolver:function(e,g){return g.root}})({}),Qs=(0,zo.ZP)(Qi,{name:"MuiMenu",slot:"Paper",overridesResolver:function(e,g){return g.paper}})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Ls=(0,zo.ZP)(Zc,{name:"MuiMenu",slot:"List",overridesResolver:function(e,g){return g.list}})({outline:0}),Ts=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiMenu"}),I=n.autoFocus,o=void 0===I||I,l=n.children,C=n.disableAutoFocusItem,r=void 0!==C&&C,a=n.MenuListProps,i=void 0===a?{}:a,c=n.onClose,s=n.open,u=n.PaperProps,d=void 0===u?{}:u,A=n.PopoverClasses,m=n.transitionDuration,b=void 0===m?"auto":m,Z=n.TransitionProps,p=(void 0===Z?{}:Z).onEntering,h=n.variant,G=void 0===h?"selectedMenu":h,y=(0,fo.Z)(n.TransitionProps,xs),B=(0,fo.Z)(n,zs),f=kc(),v="rtl"===f.direction,S=(0,vo.Z)({},n,{autoFocus:o,disableAutoFocusItem:r,MenuListProps:i,onEntering:p,PaperProps:d,transitionDuration:b,TransitionProps:y,variant:G}),W=function(e){var g=e.classes;return(0,Ro.Z)({root:["root"],paper:["paper"],list:["list"]},Ks,g)}(S),V=o&&!r&&s,R=e.useRef(null),X=-1;return e.Children.map(l,(function(g,t){e.isValidElement(g)&&(g.props.disabled||("selectedMenu"===G&&g.props.selected||-1===X)&&(X=t))})),(0,Yo.jsx)(Us,(0,vo.Z)({onClose:c,anchorOrigin:{vertical:"bottom",horizontal:v?"right":"left"},transformOrigin:v?Es:Ms,PaperProps:(0,vo.Z)({component:Qs},d,{classes:(0,vo.Z)({},d.classes,{root:W.paper})}),className:W.root,open:s,ref:t,transitionDuration:b,TransitionProps:(0,vo.Z)({onEntering:function(e,g){R.current&&R.current.adjustStyleForScrollbar(e,f),p&&p(e,g)}},y),ownerState:S},B,{classes:A,children:(0,Yo.jsx)(Ls,(0,vo.Z)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),c&&c(e,"tabKeyDown"))},actions:R,autoFocus:o&&(-1===X||r),autoFocusItem:V,variant:G},i,{className:(0,So.Z)(W.list,i.className),children:l}))}))})),Ds=Ts;var js=(0,nl.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function Ps(e){return(0,Vo.Z)("MuiListItemIcon",e)}var Os=(0,nl.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);function qs(e){return(0,Vo.Z)("MuiListItemText",e)}var _s=(0,nl.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function $s(e){return(0,Vo.Z)("MuiMenuItem",e)}var eu,gu=(0,nl.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),tu=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],nu=(0,zo.ZP)(mC,{shouldForwardProp:function(e){return(0,zo.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,t.dense&&g.dense,t.divider&&g.divider,!t.disableGutters&&g.gutters]}})((function(e){var g,t=e.theme,n=e.ownerState;return(0,vo.Z)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},(g={"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,Bo.Z)(g,"&.".concat(gu.selected),(0,Bo.Z)({backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,Al.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)},"&.".concat(gu.focusVisible),{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Al.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)})),(0,Bo.Z)(g,"&.".concat(gu.selected,":hover"),{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,Al.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,Al.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}}),(0,Bo.Z)(g,"&.".concat(gu.focusVisible),{backgroundColor:(t.vars||t).palette.action.focus}),(0,Bo.Z)(g,"&.".concat(gu.disabled),{opacity:(t.vars||t).palette.action.disabledOpacity}),(0,Bo.Z)(g,"& + .".concat(js.root),{marginTop:t.spacing(1),marginBottom:t.spacing(1)}),(0,Bo.Z)(g,"& + .".concat(js.inset),{marginLeft:52}),(0,Bo.Z)(g,"& .".concat(_s.root),{marginTop:0,marginBottom:0}),(0,Bo.Z)(g,"& .".concat(_s.inset),{paddingLeft:36}),(0,Bo.Z)(g,"& .".concat(Os.root),{minWidth:36}),g),!n.dense&&(0,Bo.Z)({},t.breakpoints.up("sm"),{minHeight:"auto"}),n.dense&&(0,vo.Z)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,(0,Bo.Z)({},"& .".concat(Os.root," svg"),{fontSize:"1.25rem"})))})),Iu=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiMenuItem"}),I=n.autoFocus,o=void 0!==I&&I,l=n.component,C=void 0===l?"li":l,r=n.dense,a=void 0!==r&&r,i=n.divider,c=void 0!==i&&i,s=n.disableGutters,u=void 0!==s&&s,d=n.focusVisibleClassName,A=n.role,m=void 0===A?"menuitem":A,b=n.tabIndex,Z=n.className,p=(0,fo.Z)(n,tu),h=e.useContext(yl),G=e.useMemo((function(){return{dense:a||h.dense||!1,disableGutters:u}}),[h.dense,a,u]),y=e.useRef(null);(0,ZC.Z)((function(){o&&y.current&&y.current.focus()}),[o]);var B,f=(0,vo.Z)({},n,{dense:G.dense,divider:c,disableGutters:u}),v=function(e){var g=e.disabled,t=e.dense,n=e.divider,I=e.disableGutters,o=e.selected,l=e.classes,C={root:["root",t&&"dense",g&&"disabled",!I&&"gutters",n&&"divider",o&&"selected"]},r=(0,Ro.Z)(C,$s,l);return(0,vo.Z)({},l,r)}(n),S=(0,cl.Z)(y,t);return n.disabled||(B=void 0!==b?b:-1),(0,Yo.jsx)(yl.Provider,{value:G,children:(0,Yo.jsx)(nu,(0,vo.Z)({ref:S,role:m,tabIndex:B,component:C,focusVisibleClassName:(0,So.Z)(v.focusVisible,d),className:(0,So.Z)(v.root,Z)},p,{ownerState:f,classes:v}))})}));!function(e){e.MAIN="/",e.RETURNS="/returns",e.WAYBILLS="/waybills",e.SCANNER="/scanner",e.LOGIN="/auth/login",e.REGISTRATION="/auth/registration",e.NOT_FOUND="/404",e.BAD="*",e.PROFILE="/profile",e.ADMIN="/admin"}(eu||(eu={}));var ou={main:{name:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",route:eu.MAIN},return:{name:"\u0412\u043e\u0437\u0432\u0440\u0430\u0442",route:eu.RETURNS},scaner:{name:"\u0421\u043a\u0430\u043d\u0435\u0440",route:eu.SCANNER}};function lu(){return lu=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},lu.apply(this,arguments)}function Cu(e,g){if(null==e)return{};var t,n,I={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}var ru=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],au=["aria-current","caseSensitive","className","end","style","to","children"];function iu(g){var t,n=g.basename,I=g.children,o=g.window,l=e.useRef();null==l.current&&(l.current=(void 0===(t={window:o,v5Compat:!0})&&(t={}),AI((function(e,g){var t=e.location;return sI("",{pathname:t.pathname,search:t.search,hash:t.hash},g.state&&g.state.usr||null,g.state&&g.state.key||"default")}),(function(e,g){return"string"===typeof g?g:uI(g)}),null,t)));var C=l.current,r=e.useState({action:C.action,location:C.location}),a=(0,qn.Z)(r,2),i=a[0],c=a[1];return e.useLayoutEffect((function(){return C.listen(c)}),[C]),e.createElement(Go,{basename:n,children:I,location:i.location,navigationType:i.action,navigator:C})}var cu="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,su=e.forwardRef((function(g,t){var n,I=g.onClick,o=g.relative,l=g.reloadDocument,C=g.replace,r=g.state,a=g.target,i=g.to,c=g.preventScrollReset,s=Cu(g,ru),u=!1;if(cu&&"string"===typeof i&&/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(i)){n=i;var d=new URL(window.location.href),A=i.startsWith("//")?new URL(d.protocol+i):new URL(i);A.origin===d.origin?i=A.pathname+A.search+A.hash:u=!0}var m=function(g,t){var n=(void 0===t?{}:t).relative;no()||iI(!1);var I=e.useContext($I),o=I.basename,l=I.navigator,C=Co(g,{relative:n}),r=C.hash,a=C.pathname,i=C.search,c=a;return"/"!==o&&(c="/"===a?o:wI([o,a])),l.createHref({pathname:c,search:i,hash:r})}(i,{relative:o}),b=function(g,t){var n=void 0===t?{}:t,I=n.target,o=n.replace,l=n.state,C=n.preventScrollReset,r=n.relative,a=oo(),i=Io(),c=Co(g,{relative:r});return e.useCallback((function(e){if(function(e,g){return 0===e.button&&(!g||"_self"===g)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,I)){e.preventDefault();var t=void 0!==o?o:uI(i)===uI(c);a(g,{replace:t,state:l,preventScrollReset:C,relative:r})}}),[i,a,c,o,l,I,g,C,r])}(i,{replace:C,state:r,target:a,preventScrollReset:c,relative:o});return e.createElement("a",lu({},s,{href:n||m,onClick:u||l?I:function(e){I&&I(e),e.defaultPrevented||b(e)},ref:t,target:a}))}));var uu=e.forwardRef((function(g,t){var n=g["aria-current"],I=void 0===n?"page":n,o=g.caseSensitive,l=void 0!==o&&o,C=g.className,r=void 0===C?"":C,a=g.end,i=void 0!==a&&a,c=g.style,s=g.to,u=g.children,d=Cu(g,au),A=Co(s,{relative:d.relative}),m=Io(),b=e.useContext(qI),Z=e.useContext($I).navigator,p=Z.encodeLocation?Z.encodeLocation(A).pathname:A.pathname,h=m.pathname,G=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;l||(h=h.toLowerCase(),G=G?G.toLowerCase():null,p=p.toLowerCase());var y,B=h===p||!i&&h.startsWith(p)&&"/"===h.charAt(p.length),f=null!=G&&(G===p||!i&&G.startsWith(p)&&"/"===G.charAt(p.length)),v=B?I:void 0;y="function"===typeof r?r({isActive:B,isPending:f}):[r,B?"active":null,f?"pending":null].filter(Boolean).join(" ");var S="function"===typeof c?c({isActive:B,isPending:f}):c;return e.createElement(su,lu({},d,{"aria-current":v,className:y,ref:t,style:S,to:s}),"function"===typeof u?u({isActive:B,isPending:f}):u)}));var du,Au;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(du||(du={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Au||(Au={}));var mu=wi({Link:{padding:"0 8px",fontWeight:500,textDecoration:"none",transition:"all 0.3s ease","&.active":{textDecoration:"underline"}},NavLink:{color:"#fff"},BurgerLink:{color:"#000"}}),bu=function(e){var g=e.place,t=e.page,n=mu();return(0,Yo.jsx)(uu,{className:"BurgerLink"===g?"".concat(n.Link," ").concat(n.BurgerLink):"".concat(n.Link," ").concat(n.NavLink),to:t.route,children:t.name})},Zu=function(){var g=(0,e.useContext)(kB).user,t=e.useState(null),n=(0,qn.Z)(t,2),I=n[0],o=n[1],l=function(){o(null)};return(0,Yo.jsxs)(tl,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[(0,Yo.jsx)(rc,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},color:"inherit",children:(0,Yo.jsx)(nc.Z,{})}),(0,Yo.jsxs)(Ds,{anchorEl:I,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(I),onClose:l,sx:{display:{xs:"block",md:"none"}},children:[(0,Yo.jsx)(Iu,{onClick:l,children:(0,Yo.jsx)(bu,{page:ou.main,place:"BurgerLink"})}),(0,Yo.jsx)(Iu,{onClick:l,children:(0,Yo.jsx)(bu,{page:ou.scaner,place:"BurgerLink"})}),g.isAuth&&(0,Yo.jsx)(Iu,{onClick:l,children:(0,Yo.jsx)(bu,{page:ou.return,place:"BurgerLink"})})]})]})};function pu(e){if(null==e)return window;if("[object Window]"!==e.toString()){var g=e.ownerDocument;return g&&g.defaultView||window}return e}function hu(e){return e instanceof pu(e).Element||e instanceof Element}function Gu(e){return e instanceof pu(e).HTMLElement||e instanceof HTMLElement}function yu(e){return"undefined"!==typeof ShadowRoot&&(e instanceof pu(e).ShadowRoot||e instanceof ShadowRoot)}var Bu=Math.max,fu=Math.min,vu=Math.round;function Su(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function Wu(){return!/^((?!chrome|android).)*safari/i.test(Su())}function Vu(e,g,t){void 0===g&&(g=!1),void 0===t&&(t=!1);var n=e.getBoundingClientRect(),I=1,o=1;g&&Gu(e)&&(I=e.offsetWidth>0&&vu(n.width)/e.offsetWidth||1,o=e.offsetHeight>0&&vu(n.height)/e.offsetHeight||1);var l=(hu(e)?pu(e):window).visualViewport,C=!Wu()&&t,r=(n.left+(C&&l?l.offsetLeft:0))/I,a=(n.top+(C&&l?l.offsetTop:0))/o,i=n.width/I,c=n.height/o;return{width:i,height:c,top:a,right:r+i,bottom:a+c,left:r,x:r,y:a}}function Ru(e){var g=pu(e);return{scrollLeft:g.pageXOffset,scrollTop:g.pageYOffset}}function Xu(e){return e?(e.nodeName||"").toLowerCase():null}function ku(e){return((hu(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ju(e){return Vu(ku(e)).left+Ru(e).scrollLeft}function Yu(e){return pu(e).getComputedStyle(e)}function Hu(e){var g=Yu(e),t=g.overflow,n=g.overflowX,I=g.overflowY;return/auto|scroll|overlay|hidden/.test(t+I+n)}function wu(e,g,t){void 0===t&&(t=!1);var n=Gu(g),I=Gu(g)&&function(e){var g=e.getBoundingClientRect(),t=vu(g.width)/e.offsetWidth||1,n=vu(g.height)/e.offsetHeight||1;return 1!==t||1!==n}(g),o=ku(g),l=Vu(e,I,t),C={scrollLeft:0,scrollTop:0},r={x:0,y:0};return(n||!n&&!t)&&(("body"!==Xu(g)||Hu(o))&&(C=function(e){return e!==pu(e)&&Gu(e)?{scrollLeft:(g=e).scrollLeft,scrollTop:g.scrollTop}:Ru(e);var g}(g)),Gu(g)?((r=Vu(g,!0)).x+=g.clientLeft,r.y+=g.clientTop):o&&(r.x=Ju(o))),{x:l.left+C.scrollLeft-r.x,y:l.top+C.scrollTop-r.y,width:l.width,height:l.height}}function Nu(e){var g=Vu(e),t=e.offsetWidth,n=e.offsetHeight;return Math.abs(g.width-t)<=1&&(t=g.width),Math.abs(g.height-n)<=1&&(n=g.height),{x:e.offsetLeft,y:e.offsetTop,width:t,height:n}}function Fu(e){return"html"===Xu(e)?e:e.assignedSlot||e.parentNode||(yu(e)?e.host:null)||ku(e)}function Ku(e){return["html","body","#document"].indexOf(Xu(e))>=0?e.ownerDocument.body:Gu(e)&&Hu(e)?e:Ku(Fu(e))}function xu(e,g){var t;void 0===g&&(g=[]);var n=Ku(e),I=n===(null==(t=e.ownerDocument)?void 0:t.body),o=pu(n),l=I?[o].concat(o.visualViewport||[],Hu(n)?n:[]):n,C=g.concat(l);return I?C:C.concat(xu(Fu(l)))}function zu(e){return["table","td","th"].indexOf(Xu(e))>=0}function Eu(e){return Gu(e)&&"fixed"!==Yu(e).position?e.offsetParent:null}function Mu(e){for(var g=pu(e),t=Eu(e);t&&zu(t)&&"static"===Yu(t).position;)t=Eu(t);return t&&("html"===Xu(t)||"body"===Xu(t)&&"static"===Yu(t).position)?g:t||function(e){var g=/firefox/i.test(Su());if(/Trident/i.test(Su())&&Gu(e)&&"fixed"===Yu(e).position)return null;var t=Fu(e);for(yu(t)&&(t=t.host);Gu(t)&&["html","body"].indexOf(Xu(t))<0;){var n=Yu(t);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||g&&"filter"===n.willChange||g&&n.filter&&"none"!==n.filter)return t;t=t.parentNode}return null}(e)||g}var Uu="top",Qu="bottom",Lu="right",Tu="left",Du="auto",ju=[Uu,Qu,Lu,Tu],Pu="start",Ou="end",qu="clippingParents",_u="viewport",$u="popper",ed="reference",gd=ju.reduce((function(e,g){return e.concat([g+"-"+Pu,g+"-"+Ou])}),[]),td=[].concat(ju,[Du]).reduce((function(e,g){return e.concat([g,g+"-"+Pu,g+"-"+Ou])}),[]),nd=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Id(e){var g=new Map,t=new Set,n=[];function I(e){t.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!t.has(e)){var n=g.get(e);n&&I(n)}})),n.push(e)}return e.forEach((function(e){g.set(e.name,e)})),e.forEach((function(e){t.has(e.name)||I(e)})),n}function od(e){var g;return function(){return g||(g=new Promise((function(t){Promise.resolve().then((function(){g=void 0,t(e())}))}))),g}}var ld={placement:"bottom",modifiers:[],strategy:"absolute"};function Cd(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];return!g.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function rd(e){void 0===e&&(e={});var g=e,t=g.defaultModifiers,n=void 0===t?[]:t,I=g.defaultOptions,o=void 0===I?ld:I;return function(e,g,t){void 0===t&&(t=o);var I={placement:"bottom",orderedModifiers:[],options:Object.assign({},ld,o),modifiersData:{},elements:{reference:e,popper:g},attributes:{},styles:{}},l=[],C=!1,r={state:I,setOptions:function(t){var C="function"===typeof t?t(I.options):t;a(),I.options=Object.assign({},o,I.options,C),I.scrollParents={reference:hu(e)?xu(e):e.contextElement?xu(e.contextElement):[],popper:xu(g)};var i=function(e){var g=Id(e);return nd.reduce((function(e,t){return e.concat(g.filter((function(e){return e.phase===t})))}),[])}(function(e){var g=e.reduce((function(e,g){var t=e[g.name];return e[g.name]=t?Object.assign({},t,g,{options:Object.assign({},t.options,g.options),data:Object.assign({},t.data,g.data)}):g,e}),{});return Object.keys(g).map((function(e){return g[e]}))}([].concat(n,I.options.modifiers)));return I.orderedModifiers=i.filter((function(e){return e.enabled})),I.orderedModifiers.forEach((function(e){var g=e.name,t=e.options,n=void 0===t?{}:t,o=e.effect;if("function"===typeof o){var C=o({state:I,name:g,instance:r,options:n}),a=function(){};l.push(C||a)}})),r.update()},forceUpdate:function(){if(!C){var e=I.elements,g=e.reference,t=e.popper;if(Cd(g,t)){I.rects={reference:wu(g,Mu(t),"fixed"===I.options.strategy),popper:Nu(t)},I.reset=!1,I.placement=I.options.placement,I.orderedModifiers.forEach((function(e){return I.modifiersData[e.name]=Object.assign({},e.data)}));for(var n=0;n<I.orderedModifiers.length;n++)if(!0!==I.reset){var o=I.orderedModifiers[n],l=o.fn,a=o.options,i=void 0===a?{}:a,c=o.name;"function"===typeof l&&(I=l({state:I,options:i,name:c,instance:r})||I)}else I.reset=!1,n=-1}}},update:od((function(){return new Promise((function(e){r.forceUpdate(),e(I)}))})),destroy:function(){a(),C=!0}};if(!Cd(e,g))return r;function a(){l.forEach((function(e){return e()})),l=[]}return r.setOptions(t).then((function(e){!C&&t.onFirstUpdate&&t.onFirstUpdate(e)})),r}}var ad={passive:!0};function id(e){return e.split("-")[0]}function cd(e){return e.split("-")[1]}function sd(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ud(e){var g,t=e.reference,n=e.element,I=e.placement,o=I?id(I):null,l=I?cd(I):null,C=t.x+t.width/2-n.width/2,r=t.y+t.height/2-n.height/2;switch(o){case Uu:g={x:C,y:t.y-n.height};break;case Qu:g={x:C,y:t.y+t.height};break;case Lu:g={x:t.x+t.width,y:r};break;case Tu:g={x:t.x-n.width,y:r};break;default:g={x:t.x,y:t.y}}var a=o?sd(o):null;if(null!=a){var i="y"===a?"height":"width";switch(l){case Pu:g[a]=g[a]-(t[i]/2-n[i]/2);break;case Ou:g[a]=g[a]+(t[i]/2-n[i]/2)}}return g}var dd={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ad(e){var g,t=e.popper,n=e.popperRect,I=e.placement,o=e.variation,l=e.offsets,C=e.position,r=e.gpuAcceleration,a=e.adaptive,i=e.roundOffsets,c=e.isFixed,s=l.x,u=void 0===s?0:s,d=l.y,A=void 0===d?0:d,m="function"===typeof i?i({x:u,y:A}):{x:u,y:A};u=m.x,A=m.y;var b=l.hasOwnProperty("x"),Z=l.hasOwnProperty("y"),p=Tu,h=Uu,G=window;if(a){var y=Mu(t),B="clientHeight",f="clientWidth";if(y===pu(t)&&"static"!==Yu(y=ku(t)).position&&"absolute"===C&&(B="scrollHeight",f="scrollWidth"),I===Uu||(I===Tu||I===Lu)&&o===Ou)h=Qu,A-=(c&&y===G&&G.visualViewport?G.visualViewport.height:y[B])-n.height,A*=r?1:-1;if(I===Tu||(I===Uu||I===Qu)&&o===Ou)p=Lu,u-=(c&&y===G&&G.visualViewport?G.visualViewport.width:y[f])-n.width,u*=r?1:-1}var v,S=Object.assign({position:C},a&&dd),W=!0===i?function(e){var g=e.x,t=e.y,n=window.devicePixelRatio||1;return{x:vu(g*n)/n||0,y:vu(t*n)/n||0}}({x:u,y:A}):{x:u,y:A};return u=W.x,A=W.y,r?Object.assign({},S,((v={})[h]=Z?"0":"",v[p]=b?"0":"",v.transform=(G.devicePixelRatio||1)<=1?"translate("+u+"px, "+A+"px)":"translate3d("+u+"px, "+A+"px, 0)",v)):Object.assign({},S,((g={})[h]=Z?A+"px":"",g[p]=b?u+"px":"",g.transform="",g))}var md={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var g=e.state;Object.keys(g.elements).forEach((function(e){var t=g.styles[e]||{},n=g.attributes[e]||{},I=g.elements[e];Gu(I)&&Xu(I)&&(Object.assign(I.style,t),Object.keys(n).forEach((function(e){var g=n[e];!1===g?I.removeAttribute(e):I.setAttribute(e,!0===g?"":g)})))}))},effect:function(e){var g=e.state,t={popper:{position:g.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(g.elements.popper.style,t.popper),g.styles=t,g.elements.arrow&&Object.assign(g.elements.arrow.style,t.arrow),function(){Object.keys(g.elements).forEach((function(e){var n=g.elements[e],I=g.attributes[e]||{},o=Object.keys(g.styles.hasOwnProperty(e)?g.styles[e]:t[e]).reduce((function(e,g){return e[g]="",e}),{});Gu(n)&&Xu(n)&&(Object.assign(n.style,o),Object.keys(I).forEach((function(e){n.removeAttribute(e)})))}))}},requires:["computeStyles"]};var bd={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var g=e.state,t=e.options,n=e.name,I=t.offset,o=void 0===I?[0,0]:I,l=td.reduce((function(e,t){return e[t]=function(e,g,t){var n=id(e),I=[Tu,Uu].indexOf(n)>=0?-1:1,o="function"===typeof t?t(Object.assign({},g,{placement:e})):t,l=o[0],C=o[1];return l=l||0,C=(C||0)*I,[Tu,Lu].indexOf(n)>=0?{x:C,y:l}:{x:l,y:C}}(t,g.rects,o),e}),{}),C=l[g.placement],r=C.x,a=C.y;null!=g.modifiersData.popperOffsets&&(g.modifiersData.popperOffsets.x+=r,g.modifiersData.popperOffsets.y+=a),g.modifiersData[n]=l}},Zd={left:"right",right:"left",bottom:"top",top:"bottom"};function pd(e){return e.replace(/left|right|bottom|top/g,(function(e){return Zd[e]}))}var hd={start:"end",end:"start"};function Gd(e){return e.replace(/start|end/g,(function(e){return hd[e]}))}function yd(e,g){var t=g.getRootNode&&g.getRootNode();if(e.contains(g))return!0;if(t&&yu(t)){var n=g;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Bd(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function fd(e,g,t){return g===_u?Bd(function(e,g){var t=pu(e),n=ku(e),I=t.visualViewport,o=n.clientWidth,l=n.clientHeight,C=0,r=0;if(I){o=I.width,l=I.height;var a=Wu();(a||!a&&"fixed"===g)&&(C=I.offsetLeft,r=I.offsetTop)}return{width:o,height:l,x:C+Ju(e),y:r}}(e,t)):hu(g)?function(e,g){var t=Vu(e,!1,"fixed"===g);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(g,t):Bd(function(e){var g,t=ku(e),n=Ru(e),I=null==(g=e.ownerDocument)?void 0:g.body,o=Bu(t.scrollWidth,t.clientWidth,I?I.scrollWidth:0,I?I.clientWidth:0),l=Bu(t.scrollHeight,t.clientHeight,I?I.scrollHeight:0,I?I.clientHeight:0),C=-n.scrollLeft+Ju(e),r=-n.scrollTop;return"rtl"===Yu(I||t).direction&&(C+=Bu(t.clientWidth,I?I.clientWidth:0)-o),{width:o,height:l,x:C,y:r}}(ku(e)))}function vd(e,g,t,n){var I="clippingParents"===g?function(e){var g=xu(Fu(e)),t=["absolute","fixed"].indexOf(Yu(e).position)>=0&&Gu(e)?Mu(e):e;return hu(t)?g.filter((function(e){return hu(e)&&yd(e,t)&&"body"!==Xu(e)})):[]}(e):[].concat(g),o=[].concat(I,[t]),l=o[0],C=o.reduce((function(g,t){var I=fd(e,t,n);return g.top=Bu(I.top,g.top),g.right=fu(I.right,g.right),g.bottom=fu(I.bottom,g.bottom),g.left=Bu(I.left,g.left),g}),fd(e,l,n));return C.width=C.right-C.left,C.height=C.bottom-C.top,C.x=C.left,C.y=C.top,C}function Sd(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Wd(e,g){return g.reduce((function(g,t){return g[t]=e,g}),{})}function Vd(e,g){void 0===g&&(g={});var t=g,n=t.placement,I=void 0===n?e.placement:n,o=t.strategy,l=void 0===o?e.strategy:o,C=t.boundary,r=void 0===C?qu:C,a=t.rootBoundary,i=void 0===a?_u:a,c=t.elementContext,s=void 0===c?$u:c,u=t.altBoundary,d=void 0!==u&&u,A=t.padding,m=void 0===A?0:A,b=Sd("number"!==typeof m?m:Wd(m,ju)),Z=s===$u?ed:$u,p=e.rects.popper,h=e.elements[d?Z:s],G=vd(hu(h)?h:h.contextElement||ku(e.elements.popper),r,i,l),y=Vu(e.elements.reference),B=ud({reference:y,element:p,strategy:"absolute",placement:I}),f=Bd(Object.assign({},p,B)),v=s===$u?f:y,S={top:G.top-v.top+b.top,bottom:v.bottom-G.bottom+b.bottom,left:G.left-v.left+b.left,right:v.right-G.right+b.right},W=e.modifiersData.offset;if(s===$u&&W){var V=W[I];Object.keys(S).forEach((function(e){var g=[Lu,Qu].indexOf(e)>=0?1:-1,t=[Uu,Qu].indexOf(e)>=0?"y":"x";S[e]+=V[t]*g}))}return S}function Rd(e,g,t){return Bu(e,fu(g,t))}var Xd={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var g=e.state,t=e.options,n=e.name,I=t.mainAxis,o=void 0===I||I,l=t.altAxis,C=void 0!==l&&l,r=t.boundary,a=t.rootBoundary,i=t.altBoundary,c=t.padding,s=t.tether,u=void 0===s||s,d=t.tetherOffset,A=void 0===d?0:d,m=Vd(g,{boundary:r,rootBoundary:a,padding:c,altBoundary:i}),b=id(g.placement),Z=cd(g.placement),p=!Z,h=sd(b),G="x"===h?"y":"x",y=g.modifiersData.popperOffsets,B=g.rects.reference,f=g.rects.popper,v="function"===typeof A?A(Object.assign({},g.rects,{placement:g.placement})):A,S="number"===typeof v?{mainAxis:v,altAxis:v}:Object.assign({mainAxis:0,altAxis:0},v),W=g.modifiersData.offset?g.modifiersData.offset[g.placement]:null,V={x:0,y:0};if(y){if(o){var R,X="y"===h?Uu:Tu,k="y"===h?Qu:Lu,J="y"===h?"height":"width",Y=y[h],H=Y+m[X],w=Y-m[k],N=u?-f[J]/2:0,F=Z===Pu?B[J]:f[J],K=Z===Pu?-f[J]:-B[J],x=g.elements.arrow,z=u&&x?Nu(x):{width:0,height:0},E=g.modifiersData["arrow#persistent"]?g.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},M=E[X],U=E[k],Q=Rd(0,B[J],z[J]),L=p?B[J]/2-N-Q-M-S.mainAxis:F-Q-M-S.mainAxis,T=p?-B[J]/2+N+Q+U+S.mainAxis:K+Q+U+S.mainAxis,D=g.elements.arrow&&Mu(g.elements.arrow),j=D?"y"===h?D.clientTop||0:D.clientLeft||0:0,P=null!=(R=null==W?void 0:W[h])?R:0,O=Y+T-P,q=Rd(u?fu(H,Y+L-P-j):H,Y,u?Bu(w,O):w);y[h]=q,V[h]=q-Y}if(C){var _,$="x"===h?Uu:Tu,ee="x"===h?Qu:Lu,ge=y[G],te="y"===G?"height":"width",ne=ge+m[$],Ie=ge-m[ee],oe=-1!==[Uu,Tu].indexOf(b),le=null!=(_=null==W?void 0:W[G])?_:0,Ce=oe?ne:ge-B[te]-f[te]-le+S.altAxis,re=oe?ge+B[te]+f[te]-le-S.altAxis:Ie,ae=u&&oe?function(e,g,t){var n=Rd(e,g,t);return n>t?t:n}(Ce,ge,re):Rd(u?Ce:ne,ge,u?re:Ie);y[G]=ae,V[G]=ae-ge}g.modifiersData[n]=V}},requiresIfExists:["offset"]},kd=function(e,g){return Sd("number"!==typeof(e="function"===typeof e?e(Object.assign({},g.rects,{placement:g.placement})):e)?e:Wd(e,ju))};var Jd={name:"arrow",enabled:!0,phase:"main",fn:function(e){var g,t=e.state,n=e.name,I=e.options,o=t.elements.arrow,l=t.modifiersData.popperOffsets,C=id(t.placement),r=sd(C),a=[Tu,Lu].indexOf(C)>=0?"height":"width";if(o&&l){var i=kd(I.padding,t),c=Nu(o),s="y"===r?Uu:Tu,u="y"===r?Qu:Lu,d=t.rects.reference[a]+t.rects.reference[r]-l[r]-t.rects.popper[a],A=l[r]-t.rects.reference[r],m=Mu(o),b=m?"y"===r?m.clientHeight||0:m.clientWidth||0:0,Z=d/2-A/2,p=i[s],h=b-c[a]-i[u],G=b/2-c[a]/2+Z,y=Rd(p,G,h),B=r;t.modifiersData[n]=((g={})[B]=y,g.centerOffset=y-G,g)}},effect:function(e){var g=e.state,t=e.options.element,n=void 0===t?"[data-popper-arrow]":t;null!=n&&("string"!==typeof n||(n=g.elements.popper.querySelector(n)))&&yd(g.elements.popper,n)&&(g.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Yd(e,g,t){return void 0===t&&(t={x:0,y:0}),{top:e.top-g.height-t.y,right:e.right-g.width+t.x,bottom:e.bottom-g.height+t.y,left:e.left-g.width-t.x}}function Hd(e){return[Uu,Lu,Qu,Tu].some((function(g){return e[g]>=0}))}var wd=rd({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var g=e.state,t=e.instance,n=e.options,I=n.scroll,o=void 0===I||I,l=n.resize,C=void 0===l||l,r=pu(g.elements.popper),a=[].concat(g.scrollParents.reference,g.scrollParents.popper);return o&&a.forEach((function(e){e.addEventListener("scroll",t.update,ad)})),C&&r.addEventListener("resize",t.update,ad),function(){o&&a.forEach((function(e){e.removeEventListener("scroll",t.update,ad)})),C&&r.removeEventListener("resize",t.update,ad)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var g=e.state,t=e.name;g.modifiersData[t]=ud({reference:g.rects.reference,element:g.rects.popper,strategy:"absolute",placement:g.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var g=e.state,t=e.options,n=t.gpuAcceleration,I=void 0===n||n,o=t.adaptive,l=void 0===o||o,C=t.roundOffsets,r=void 0===C||C,a={placement:id(g.placement),variation:cd(g.placement),popper:g.elements.popper,popperRect:g.rects.popper,gpuAcceleration:I,isFixed:"fixed"===g.options.strategy};null!=g.modifiersData.popperOffsets&&(g.styles.popper=Object.assign({},g.styles.popper,Ad(Object.assign({},a,{offsets:g.modifiersData.popperOffsets,position:g.options.strategy,adaptive:l,roundOffsets:r})))),null!=g.modifiersData.arrow&&(g.styles.arrow=Object.assign({},g.styles.arrow,Ad(Object.assign({},a,{offsets:g.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:r})))),g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-placement":g.placement})},data:{}},md,bd,{name:"flip",enabled:!0,phase:"main",fn:function(e){var g=e.state,t=e.options,n=e.name;if(!g.modifiersData[n]._skip){for(var I=t.mainAxis,o=void 0===I||I,l=t.altAxis,C=void 0===l||l,r=t.fallbackPlacements,a=t.padding,i=t.boundary,c=t.rootBoundary,s=t.altBoundary,u=t.flipVariations,d=void 0===u||u,A=t.allowedAutoPlacements,m=g.options.placement,b=id(m),Z=r||(b===m||!d?[pd(m)]:function(e){if(id(e)===Du)return[];var g=pd(e);return[Gd(e),g,Gd(g)]}(m)),p=[m].concat(Z).reduce((function(e,t){return e.concat(id(t)===Du?function(e,g){void 0===g&&(g={});var t=g,n=t.placement,I=t.boundary,o=t.rootBoundary,l=t.padding,C=t.flipVariations,r=t.allowedAutoPlacements,a=void 0===r?td:r,i=cd(n),c=i?C?gd:gd.filter((function(e){return cd(e)===i})):ju,s=c.filter((function(e){return a.indexOf(e)>=0}));0===s.length&&(s=c);var u=s.reduce((function(g,t){return g[t]=Vd(e,{placement:t,boundary:I,rootBoundary:o,padding:l})[id(t)],g}),{});return Object.keys(u).sort((function(e,g){return u[e]-u[g]}))}(g,{placement:t,boundary:i,rootBoundary:c,padding:a,flipVariations:d,allowedAutoPlacements:A}):t)}),[]),h=g.rects.reference,G=g.rects.popper,y=new Map,B=!0,f=p[0],v=0;v<p.length;v++){var S=p[v],W=id(S),V=cd(S)===Pu,R=[Uu,Qu].indexOf(W)>=0,X=R?"width":"height",k=Vd(g,{placement:S,boundary:i,rootBoundary:c,altBoundary:s,padding:a}),J=R?V?Lu:Tu:V?Qu:Uu;h[X]>G[X]&&(J=pd(J));var Y=pd(J),H=[];if(o&&H.push(k[W]<=0),C&&H.push(k[J]<=0,k[Y]<=0),H.every((function(e){return e}))){f=S,B=!1;break}y.set(S,H)}if(B)for(var w=function(e){var g=p.find((function(g){var t=y.get(g);if(t)return t.slice(0,e).every((function(e){return e}))}));if(g)return f=g,"break"},N=d?3:1;N>0;N--){if("break"===w(N))break}g.placement!==f&&(g.modifiersData[n]._skip=!0,g.placement=f,g.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},Xd,Jd,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var g=e.state,t=e.name,n=g.rects.reference,I=g.rects.popper,o=g.modifiersData.preventOverflow,l=Vd(g,{elementContext:"reference"}),C=Vd(g,{altBoundary:!0}),r=Yd(l,n),a=Yd(C,I,o),i=Hd(r),c=Hd(a);g.modifiersData[t]={referenceClippingOffsets:r,popperEscapeOffsets:a,isReferenceHidden:i,hasPopperEscaped:c},g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-reference-hidden":i,"data-popper-escaped":c})}}]});function Nd(e){return(0,Vo.Z)("MuiPopperUnstyled",e)}(0,nl.Z)("MuiPopperUnstyled",["root"]);var Fd=["anchorEl","children","component","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","slotProps","slots","TransitionProps"],Kd=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function xd(e){return"function"===typeof e?e():e}function zd(e){return void 0!==e.nodeType}var Ed={},Md=e.forwardRef((function(g,t){var n,I=g.anchorEl,o=g.children,l=g.component,C=g.direction,r=g.disablePortal,a=g.modifiers,i=g.open,c=g.ownerState,s=g.placement,u=g.popperOptions,d=g.popperRef,A=g.slotProps,m=void 0===A?{}:A,b=g.slots,Z=void 0===b?{}:b,p=g.TransitionProps,h=(0,fo.Z)(g,Fd),G=e.useRef(null),y=(0,zc.Z)(G,t),B=e.useRef(null),f=(0,zc.Z)(B,d),v=e.useRef(f);(0,Qc.Z)((function(){v.current=f}),[f]),e.useImperativeHandle(d,(function(){return B.current}),[]);var S=function(e,g){if("ltr"===g)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(s,C),W=e.useState(S),V=(0,qn.Z)(W,2),R=V[0],X=V[1],k=e.useState(xd(I)),J=(0,qn.Z)(k,2),Y=J[0],H=J[1];e.useEffect((function(){B.current&&B.current.forceUpdate()})),e.useEffect((function(){I&&H(xd(I))}),[I]),(0,Qc.Z)((function(){if(Y&&i){var e=[{name:"preventOverflow",options:{altBoundary:r}},{name:"flip",options:{altBoundary:r}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:function(e){var g=e.state;X(g.placement)}}];null!=a&&(e=e.concat(a)),u&&null!=u.modifiers&&(e=e.concat(u.modifiers));var g=wd(Y,G.current,(0,vo.Z)({placement:S},u,{modifiers:e}));return v.current(g),function(){g.destroy(),v.current(null)}}}),[Y,r,a,i,u,S]);var w={placement:R};null!==p&&(w.TransitionProps=p);var N=(0,Ro.Z)({root:["root"]},Nd,{}),F=null!=(n=null!=l?l:Z.root)?n:"div",K=is({elementType:F,externalSlotProps:m.root,externalForwardedProps:h,additionalProps:{role:"tooltip",ref:y},ownerState:(0,vo.Z)({},g,c),className:N.root});return(0,Yo.jsx)(F,(0,vo.Z)({},K,{children:"function"===typeof o?o(w):o}))})),Ud=e.forwardRef((function(g,t){var n,I=g.anchorEl,o=g.children,l=g.container,C=g.direction,r=void 0===C?"ltr":C,a=g.disablePortal,i=void 0!==a&&a,c=g.keepMounted,s=void 0!==c&&c,u=g.modifiers,d=g.open,A=g.placement,m=void 0===A?"bottom":A,b=g.popperOptions,Z=void 0===b?Ed:b,p=g.popperRef,h=g.style,G=g.transition,y=void 0!==G&&G,B=g.slotProps,f=void 0===B?{}:B,v=g.slots,S=void 0===v?{}:v,W=(0,fo.Z)(g,Kd),V=e.useState(!0),R=(0,qn.Z)(V,2),X=R[0],k=R[1];if(!s&&!d&&(!y||X))return null;if(l)n=l;else if(I){var J=xd(I);n=J&&zd(J)?(0,Ec.Z)(J).body:(0,Ec.Z)(null).body}var Y=d||!s||y&&!X?void 0:"none",H=y?{in:d,onEnter:function(){k(!1)},onExited:function(){k(!0)}}:void 0;return(0,Yo.jsx)(Tc,{disablePortal:i,container:n,children:(0,Yo.jsx)(Md,(0,vo.Z)({anchorEl:I,direction:r,disablePortal:i,modifiers:u,ref:t,open:y?!X:d,placement:m,popperOptions:Z,popperRef:p,slotProps:f,slots:S},W,{style:(0,vo.Z)({position:"fixed",top:0,left:0,display:Y},h),TransitionProps:H,children:o}))})})),Qd=Ud,Ld=t(9120),Td=["components","componentsProps","slots","slotProps"],Dd=(0,zo.ZP)(Qd,{name:"MuiPopper",slot:"Root",overridesResolver:function(e,g){return g.root}})({}),jd=e.forwardRef((function(e,g){var t,n=(0,Ld.Z)(),I=(0,Eo.Z)({props:e,name:"MuiPopper"}),o=I.components,l=I.componentsProps,C=I.slots,r=I.slotProps,a=(0,fo.Z)(I,Td),i=null!=(t=null==C?void 0:C.root)?t:null==o?void 0:o.Root;return(0,Yo.jsx)(Dd,(0,vo.Z)({direction:null==n?void 0:n.direction,slots:{root:i},slotProps:null!=r?r:l},a,{ref:g}))})),Pd=jd,Od=t(7384),qd=t(8744);function _d(e){return(0,Vo.Z)("MuiTooltip",e)}var $d=(0,nl.Z)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),eA=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];var gA=(0,zo.ZP)(Pd,{name:"MuiTooltip",slot:"Popper",overridesResolver:function(e,g){var t=e.ownerState;return[g.popper,!t.disableInteractive&&g.popperInteractive,t.arrow&&g.popperArrow,!t.open&&g.popperClose]}})((function(e){var g,t=e.theme,n=e.ownerState,I=e.open;return(0,vo.Z)({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!n.disableInteractive&&{pointerEvents:"auto"},!I&&{pointerEvents:"none"},n.arrow&&(g={},(0,Bo.Z)(g,'&[data-popper-placement*="bottom"] .'.concat($d.arrow),{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}}),(0,Bo.Z)(g,'&[data-popper-placement*="top"] .'.concat($d.arrow),{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}}),(0,Bo.Z)(g,'&[data-popper-placement*="right"] .'.concat($d.arrow),(0,vo.Z)({},n.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}})),(0,Bo.Z)(g,'&[data-popper-placement*="left"] .'.concat($d.arrow),(0,vo.Z)({},n.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})),g))})),tA=(0,zo.ZP)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:function(e,g){var t=e.ownerState;return[g.tooltip,t.touch&&g.touch,t.arrow&&g.tooltipArrow,g["tooltipPlacement".concat((0,xo.Z)(t.placement.split("-")[0]))]]}})((function(e){var g,t,n=e.theme,I=e.ownerState;return(0,vo.Z)({backgroundColor:n.vars?n.vars.palette.Tooltip.bg:(0,Al.Fq)(n.palette.grey[700],.92),borderRadius:(n.vars||n).shape.borderRadius,color:(n.vars||n).palette.common.white,fontFamily:n.typography.fontFamily,padding:"4px 8px",fontSize:n.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:n.typography.fontWeightMedium},I.arrow&&{position:"relative",margin:0},I.touch&&{padding:"8px 16px",fontSize:n.typography.pxToRem(14),lineHeight:"".concat((t=16/14,Math.round(1e5*t)/1e5),"em"),fontWeight:n.typography.fontWeightRegular},(g={},(0,Bo.Z)(g,".".concat($d.popper,'[data-popper-placement*="left"] &'),(0,vo.Z)({transformOrigin:"right center"},I.isRtl?(0,vo.Z)({marginLeft:"14px"},I.touch&&{marginLeft:"24px"}):(0,vo.Z)({marginRight:"14px"},I.touch&&{marginRight:"24px"}))),(0,Bo.Z)(g,".".concat($d.popper,'[data-popper-placement*="right"] &'),(0,vo.Z)({transformOrigin:"left center"},I.isRtl?(0,vo.Z)({marginRight:"14px"},I.touch&&{marginRight:"24px"}):(0,vo.Z)({marginLeft:"14px"},I.touch&&{marginLeft:"24px"}))),(0,Bo.Z)(g,".".concat($d.popper,'[data-popper-placement*="top"] &'),(0,vo.Z)({transformOrigin:"center bottom",marginBottom:"14px"},I.touch&&{marginBottom:"24px"})),(0,Bo.Z)(g,".".concat($d.popper,'[data-popper-placement*="bottom"] &'),(0,vo.Z)({transformOrigin:"center top",marginTop:"14px"},I.touch&&{marginTop:"24px"})),g))})),nA=(0,zo.ZP)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:function(e,g){return g.arrow}})((function(e){var g=e.theme;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:g.vars?g.vars.palette.Tooltip.bg:(0,Al.Fq)(g.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}})),IA=!1,oA=null,lA={x:0,y:0};function CA(e,g){return function(t){g&&g(t),e(t)}}var rA=e.forwardRef((function(g,t){var n,I,o,l,C,r,a,i,c,s,u,d,A,m,b,Z,p,h,G,y=(0,Eo.Z)({props:g,name:"MuiTooltip"}),B=y.arrow,f=void 0!==B&&B,v=y.children,S=y.components,W=void 0===S?{}:S,V=y.componentsProps,R=void 0===V?{}:V,X=y.describeChild,k=void 0!==X&&X,J=y.disableFocusListener,Y=void 0!==J&&J,H=y.disableHoverListener,w=void 0!==H&&H,N=y.disableInteractive,F=void 0!==N&&N,K=y.disableTouchListener,x=void 0!==K&&K,z=y.enterDelay,E=void 0===z?100:z,M=y.enterNextDelay,U=void 0===M?0:M,Q=y.enterTouchDelay,L=void 0===Q?700:Q,T=y.followCursor,D=void 0!==T&&T,j=y.id,P=y.leaveDelay,O=void 0===P?0:P,q=y.leaveTouchDelay,_=void 0===q?1500:q,$=y.onClose,ee=y.onOpen,ge=y.open,te=y.placement,ne=void 0===te?"bottom":te,Ie=y.PopperComponent,oe=y.PopperProps,le=void 0===oe?{}:oe,Ce=y.slotProps,re=void 0===Ce?{}:Ce,ae=y.slots,ie=void 0===ae?{}:ae,ce=y.title,se=y.TransitionComponent,ue=void 0===se?xc:se,de=y.TransitionProps,Ae=(0,fo.Z)(y,eA),me=kc(),be="rtl"===me.direction,Ze=e.useState(),pe=(0,qn.Z)(Ze,2),he=pe[0],Ge=pe[1],ye=e.useState(null),Be=(0,qn.Z)(ye,2),fe=Be[0],ve=Be[1],Se=e.useRef(!1),We=F||D,Ve=e.useRef(),Re=e.useRef(),Xe=e.useRef(),ke=e.useRef(),Je=(0,qd.Z)({controlled:ge,default:!1,name:"Tooltip",state:"open"}),Ye=(0,qn.Z)(Je,2),He=Ye[0],we=Ye[1],Ne=He,Fe=(0,Od.Z)(j),Ke=e.useRef(),xe=e.useCallback((function(){void 0!==Ke.current&&(document.body.style.WebkitUserSelect=Ke.current,Ke.current=void 0),clearTimeout(ke.current)}),[]);e.useEffect((function(){return function(){clearTimeout(Ve.current),clearTimeout(Re.current),clearTimeout(Xe.current),xe()}}),[xe]);var ze=function(e){clearTimeout(oA),IA=!0,we(!0),ee&&!Ne&&ee(e)},Ee=(0,Vl.Z)((function(e){clearTimeout(oA),oA=setTimeout((function(){IA=!1}),800+O),we(!1),$&&Ne&&$(e),clearTimeout(Ve.current),Ve.current=setTimeout((function(){Se.current=!1}),me.transitions.duration.shortest)})),Me=function(e){Se.current&&"touchstart"!==e.type||(he&&he.removeAttribute("title"),clearTimeout(Re.current),clearTimeout(Xe.current),E||IA&&U?Re.current=setTimeout((function(){ze(e)}),IA?U:E):ze(e))},Ue=function(e){clearTimeout(Re.current),clearTimeout(Xe.current),Xe.current=setTimeout((function(){Ee(e)}),O)},Qe=(0,il.Z)(),Le=Qe.isFocusVisibleRef,Te=Qe.onBlur,De=Qe.onFocus,je=Qe.ref,Pe=e.useState(!1),Oe=(0,qn.Z)(Pe,2)[1],qe=function(e){Te(e),!1===Le.current&&(Oe(!1),Ue(e))},_e=function(e){he||Ge(e.currentTarget),De(e),!0===Le.current&&(Oe(!0),Me(e))},$e=function(e){Se.current=!0;var g=v.props;g.onTouchStart&&g.onTouchStart(e)},eg=Me,gg=Ue;e.useEffect((function(){if(Ne)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||Ee(e)}}),[Ee,Ne]);var tg=(0,cl.Z)(v.ref,je,Ge,t);ce||0===ce||(Ne=!1);var ng=e.useRef(),Ig={},og="string"===typeof ce;k?(Ig.title=Ne||!og||w?null:ce,Ig["aria-describedby"]=Ne?Fe:null):(Ig["aria-label"]=og?ce:null,Ig["aria-labelledby"]=Ne&&!og?Fe:null);var lg=(0,vo.Z)({},Ig,Ae,v.props,{className:(0,So.Z)(Ae.className,v.props.className),onTouchStart:$e,ref:tg},D?{onMouseMove:function(e){var g=v.props;g.onMouseMove&&g.onMouseMove(e),lA={x:e.clientX,y:e.clientY},ng.current&&ng.current.update()}}:{});var Cg={};x||(lg.onTouchStart=function(e){$e(e),clearTimeout(Xe.current),clearTimeout(Ve.current),xe(),Ke.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ke.current=setTimeout((function(){document.body.style.WebkitUserSelect=Ke.current,Me(e)}),L)},lg.onTouchEnd=function(e){v.props.onTouchEnd&&v.props.onTouchEnd(e),xe(),clearTimeout(Xe.current),Xe.current=setTimeout((function(){Ee(e)}),_)}),w||(lg.onMouseOver=CA(eg,lg.onMouseOver),lg.onMouseLeave=CA(gg,lg.onMouseLeave),We||(Cg.onMouseOver=eg,Cg.onMouseLeave=gg)),Y||(lg.onFocus=CA(_e,lg.onFocus),lg.onBlur=CA(qe,lg.onBlur),We||(Cg.onFocus=_e,Cg.onBlur=qe));var rg=e.useMemo((function(){var e,g=[{name:"arrow",enabled:Boolean(fe),options:{element:fe,padding:4}}];return null!=(e=le.popperOptions)&&e.modifiers&&(g=g.concat(le.popperOptions.modifiers)),(0,vo.Z)({},le.popperOptions,{modifiers:g})}),[fe,le]),ag=(0,vo.Z)({},y,{isRtl:be,arrow:f,disableInteractive:We,placement:ne,PopperComponentProp:Ie,touch:Se.current}),ig=function(e){var g=e.classes,t=e.disableInteractive,n=e.arrow,I=e.touch,o=e.placement,l={popper:["popper",!t&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",I&&"touch","tooltipPlacement".concat((0,xo.Z)(o.split("-")[0]))],arrow:["arrow"]};return(0,Ro.Z)(l,_d,g)}(ag),cg=null!=(n=null!=(I=ie.popper)?I:W.Popper)?n:gA,sg=null!=(o=null!=(l=null!=(C=ie.transition)?C:W.Transition)?l:ue)?o:xc,ug=null!=(r=null!=(a=ie.tooltip)?a:W.Tooltip)?r:tA,dg=null!=(i=null!=(c=ie.arrow)?c:W.Arrow)?i:nA,Ag=os(cg,(0,vo.Z)({},le,null!=(s=re.popper)?s:R.popper,{className:(0,So.Z)(ig.popper,null==le?void 0:le.className,null==(u=null!=(d=re.popper)?d:R.popper)?void 0:u.className)}),ag),mg=os(sg,(0,vo.Z)({},de,null!=(A=re.transition)?A:R.transition),ag),bg=os(ug,(0,vo.Z)({},null!=(m=re.tooltip)?m:R.tooltip,{className:(0,So.Z)(ig.tooltip,null==(b=null!=(Z=re.tooltip)?Z:R.tooltip)?void 0:b.className)}),ag),Zg=os(dg,(0,vo.Z)({},null!=(p=re.arrow)?p:R.arrow,{className:(0,So.Z)(ig.arrow,null==(h=null!=(G=re.arrow)?G:R.arrow)?void 0:h.className)}),ag);return(0,Yo.jsxs)(e.Fragment,{children:[e.cloneElement(v,lg),(0,Yo.jsx)(cg,(0,vo.Z)({as:null!=Ie?Ie:Pd,placement:ne,anchorEl:D?{getBoundingClientRect:function(){return{top:lA.y,left:lA.x,right:lA.x,bottom:lA.y,width:0,height:0}}}:he,popperRef:ng,open:!!he&&Ne,id:Fe,transition:!0},Cg,Ag,{popperOptions:rg,children:function(e){var g=e.TransitionProps;return(0,Yo.jsx)(sg,(0,vo.Z)({timeout:me.transitions.duration.shorter},g,mg,{children:(0,Yo.jsxs)(ug,(0,vo.Z)({},bg,{children:[ce,f?(0,Yo.jsx)(dg,(0,vo.Z)({},Zg,{ref:ve})):null]}))}))}}))]})})),aA=rA,iA=t(4223),cA=(0,iA.Z)((0,Yo.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function sA(e){return(0,Vo.Z)("MuiAvatar",e)}(0,nl.Z)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var uA=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],dA=(0,zo.ZP)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,g[t.variant],t.colorDefault&&g.colorDefault]}})((function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:g.typography.fontFamily,fontSize:g.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===t.variant&&{borderRadius:(g.vars||g).shape.borderRadius},"square"===t.variant&&{borderRadius:0},t.colorDefault&&(0,vo.Z)({color:(g.vars||g).palette.background.default},g.vars?{backgroundColor:g.vars.palette.Avatar.defaultBg}:{backgroundColor:"light"===g.palette.mode?g.palette.grey[400]:g.palette.grey[600]}))})),AA=(0,zo.ZP)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:function(e,g){return g.img}})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),mA=(0,zo.ZP)(cA,{name:"MuiAvatar",slot:"Fallback",overridesResolver:function(e,g){return g.fallback}})({width:"75%",height:"75%"});var bA=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiAvatar"}),I=n.alt,o=n.children,l=n.className,C=n.component,r=void 0===C?"div":C,a=n.imgProps,i=n.sizes,c=n.src,s=n.srcSet,u=n.variant,d=void 0===u?"circular":u,A=(0,fo.Z)(n,uA),m=null,b=function(g){var t=g.crossOrigin,n=g.referrerPolicy,I=g.src,o=g.srcSet,l=e.useState(!1),C=(0,qn.Z)(l,2),r=C[0],a=C[1];return e.useEffect((function(){if(I||o){a(!1);var e=!0,g=new Image;return g.onload=function(){e&&a("loaded")},g.onerror=function(){e&&a("error")},g.crossOrigin=t,g.referrerPolicy=n,g.src=I,o&&(g.srcset=o),function(){e=!1}}}),[t,n,I,o]),r}((0,vo.Z)({},a,{src:c,srcSet:s})),Z=c||s,p=Z&&"error"!==b,h=(0,vo.Z)({},n,{colorDefault:!p,component:r,variant:d}),G=function(e){var g=e.classes,t={root:["root",e.variant,e.colorDefault&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,Ro.Z)(t,sA,g)}(h);return m=p?(0,Yo.jsx)(AA,(0,vo.Z)({alt:I,src:c,srcSet:s,sizes:i,ownerState:h,className:G.img},a)):null!=o?o:Z&&I?I[0]:(0,Yo.jsx)(mA,{ownerState:h,className:G.fallback}),(0,Yo.jsx)(dA,(0,vo.Z)({as:r,ownerState:h,className:(0,So.Z)(G.root,l),ref:t},A,{children:m}))})),ZA=bA;function pA(){pA=function(){return e};var e={},g=Object.prototype,t=g.hasOwnProperty,n=Object.defineProperty||function(e,g,t){e[g]=t.value},I="function"==typeof Symbol?Symbol:{},o=I.iterator||"@@iterator",l=I.asyncIterator||"@@asyncIterator",C=I.toStringTag||"@@toStringTag";function r(e,g,t){return Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[g]}try{r({},"")}catch(V){r=function(e,g,t){return e[g]=t}}function a(e,g,t,I){var o=g&&g.prototype instanceof s?g:s,l=Object.create(o.prototype),C=new v(I||[]);return n(l,"_invoke",{value:G(e,t,C)}),l}function i(e,g,t){try{return{type:"normal",arg:e.call(g,t)}}catch(V){return{type:"throw",arg:V}}}e.wrap=a;var c={};function s(){}function u(){}function d(){}var A={};r(A,o,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(S([])));b&&b!==g&&t.call(b,o)&&(A=b);var Z=d.prototype=s.prototype=Object.create(A);function p(e){["next","throw","return"].forEach((function(g){r(e,g,(function(e){return this._invoke(g,e)}))}))}function h(e,g){function I(n,o,l,C){var r=i(e[n],e,o);if("throw"!==r.type){var a=r.arg,c=a.value;return c&&"object"==(0,jn.Z)(c)&&t.call(c,"__await")?g.resolve(c.__await).then((function(e){I("next",e,l,C)}),(function(e){I("throw",e,l,C)})):g.resolve(c).then((function(e){a.value=e,l(a)}),(function(e){return I("throw",e,l,C)}))}C(r.arg)}var o;n(this,"_invoke",{value:function(e,t){function n(){return new g((function(g,n){I(e,t,g,n)}))}return o=o?o.then(n,n):n()}})}function G(e,g,t){var n="suspendedStart";return function(I,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===I)throw o;return W()}for(t.method=I,t.arg=o;;){var l=t.delegate;if(l){var C=y(l,t);if(C){if(C===c)continue;return C}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===n)throw n="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);n="executing";var r=i(e,g,t);if("normal"===r.type){if(n=t.done?"completed":"suspendedYield",r.arg===c)continue;return{value:r.arg,done:t.done}}"throw"===r.type&&(n="completed",t.method="throw",t.arg=r.arg)}}}function y(e,g){var t=g.method,n=e.iterator[t];if(void 0===n)return g.delegate=null,"throw"===t&&e.iterator.return&&(g.method="return",g.arg=void 0,y(e,g),"throw"===g.method)||"return"!==t&&(g.method="throw",g.arg=new TypeError("The iterator does not provide a '"+t+"' method")),c;var I=i(n,e.iterator,g.arg);if("throw"===I.type)return g.method="throw",g.arg=I.arg,g.delegate=null,c;var o=I.arg;return o?o.done?(g[e.resultName]=o.value,g.next=e.nextLoc,"return"!==g.method&&(g.method="next",g.arg=void 0),g.delegate=null,c):o:(g.method="throw",g.arg=new TypeError("iterator result is not an object"),g.delegate=null,c)}function B(e){var g={tryLoc:e[0]};1 in e&&(g.catchLoc=e[1]),2 in e&&(g.finallyLoc=e[2],g.afterLoc=e[3]),this.tryEntries.push(g)}function f(e){var g=e.completion||{};g.type="normal",delete g.arg,e.completion=g}function v(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function S(e){if(e){var g=e[o];if(g)return g.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,I=function g(){for(;++n<e.length;)if(t.call(e,n))return g.value=e[n],g.done=!1,g;return g.value=void 0,g.done=!0,g};return I.next=I}}return{next:W}}function W(){return{value:void 0,done:!0}}return u.prototype=d,n(Z,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:u,configurable:!0}),u.displayName=r(d,C,"GeneratorFunction"),e.isGeneratorFunction=function(e){var g="function"==typeof e&&e.constructor;return!!g&&(g===u||"GeneratorFunction"===(g.displayName||g.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,r(e,C,"GeneratorFunction")),e.prototype=Object.create(Z),e},e.awrap=function(e){return{__await:e}},p(h.prototype),r(h.prototype,l,(function(){return this})),e.AsyncIterator=h,e.async=function(g,t,n,I,o){void 0===o&&(o=Promise);var l=new h(a(g,t,n,I),o);return e.isGeneratorFunction(t)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},p(Z),r(Z,C,"Generator"),r(Z,o,(function(){return this})),r(Z,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var g=Object(e),t=[];for(var n in g)t.push(n);return t.reverse(),function e(){for(;t.length;){var n=t.pop();if(n in g)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=S,v.prototype={constructor:v,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(f),!e)for(var g in this)"t"===g.charAt(0)&&t.call(this,g)&&!isNaN(+g.slice(1))&&(this[g]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var g=this;function n(t,n){return l.type="throw",l.arg=e,g.next=t,n&&(g.method="next",g.arg=void 0),!!n}for(var I=this.tryEntries.length-1;I>=0;--I){var o=this.tryEntries[I],l=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var C=t.call(o,"catchLoc"),r=t.call(o,"finallyLoc");if(C&&r){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(C){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!r)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,g){for(var n=this.tryEntries.length-1;n>=0;--n){var I=this.tryEntries[n];if(I.tryLoc<=this.prev&&t.call(I,"finallyLoc")&&this.prev<I.finallyLoc){var o=I;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=g&&g<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=e,l.arg=g,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(l)},complete:function(e,g){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&g&&(this.next=g),c},finish:function(e){for(var g=this.tryEntries.length-1;g>=0;--g){var t=this.tryEntries[g];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),f(t),c}},catch:function(e){for(var g=this.tryEntries.length-1;g>=0;--g){var t=this.tryEntries[g];if(t.tryLoc===e){var n=t.completion;if("throw"===n.type){var I=n.arg;f(t)}return I}}throw new Error("illegal catch attempt")},delegateYield:function(e,g,t){return this.delegate={iterator:S(e),resultName:g,nextLoc:t},"next"===this.method&&(this.arg=void 0),c}},e}function hA(e,g,t,n,I,o,l){try{var C=e[o](l),r=C.value}catch(a){return void t(a)}C.done?g(r):Promise.resolve(r).then(n,I)}function GA(e){return function(){var g=this,t=arguments;return new Promise((function(n,I){var o=e.apply(g,t);function l(e){hA(o,n,I,l,C,"next",e)}function C(e){hA(o,n,I,l,C,"throw",e)}l(void 0)}))}}function yA(e,g){return function(){return e.apply(g,arguments)}}var BA=Object.prototype.toString,fA=Object.getPrototypeOf,vA=function(e){return function(g){var t=BA.call(g);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())}}(Object.create(null)),SA=function(e){return e=e.toLowerCase(),function(g){return vA(g)===e}},WA=function(e){return function(g){return typeof g===e}},VA=Array.isArray,RA=WA("undefined");var XA=SA("ArrayBuffer");var kA=WA("string"),JA=WA("function"),YA=WA("number"),HA=function(e){return null!==e&&"object"===typeof e},wA=function(e){if("object"!==vA(e))return!1;var g=fA(e);return(null===g||g===Object.prototype||null===Object.getPrototypeOf(g))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},NA=SA("Date"),FA=SA("File"),KA=SA("Blob"),xA=SA("FileList"),zA=SA("URLSearchParams");function EA(e,g){var t,n,I=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,o=void 0!==I&&I;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),VA(e))for(t=0,n=e.length;t<n;t++)g.call(null,e[t],t,e);else{var l,C=o?Object.getOwnPropertyNames(e):Object.keys(e),r=C.length;for(t=0;t<r;t++)l=C[t],g.call(null,e[l],l,e)}}function MA(e,g){g=g.toLowerCase();for(var t,n=Object.keys(e),I=n.length;I-- >0;)if(g===(t=n[I]).toLowerCase())return t;return null}var UA="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,QA=function(e){return!RA(e)&&e!==UA};var LA,TA=(LA="undefined"!==typeof Uint8Array&&fA(Uint8Array),function(e){return LA&&e instanceof LA}),DA=SA("HTMLFormElement"),jA=function(e){var g=Object.prototype.hasOwnProperty;return function(e,t){return g.call(e,t)}}(),PA=SA("RegExp"),OA=function(e,g){var t=Object.getOwnPropertyDescriptors(e),n={};EA(t,(function(t,I){!1!==g(t,I,e)&&(n[I]=t)})),Object.defineProperties(e,n)},qA="abcdefghijklmnopqrstuvwxyz",_A="0123456789",$A={DIGIT:_A,ALPHA:qA,ALPHA_DIGIT:qA+qA.toUpperCase()+_A};var em={isArray:VA,isArrayBuffer:XA,isBuffer:function(e){return null!==e&&!RA(e)&&null!==e.constructor&&!RA(e.constructor)&&JA(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var g="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||BA.call(e)===g||JA(e.toString)&&e.toString()===g)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&XA(e.buffer)},isString:kA,isNumber:YA,isBoolean:function(e){return!0===e||!1===e},isObject:HA,isPlainObject:wA,isUndefined:RA,isDate:NA,isFile:FA,isBlob:KA,isRegExp:PA,isFunction:JA,isStream:function(e){return HA(e)&&JA(e.pipe)},isURLSearchParams:zA,isTypedArray:TA,isFileList:xA,forEach:EA,merge:function e(){for(var g=(QA(this)&&this||{}).caseless,t={},n=function(n,I){var o=g&&MA(t,I)||I;wA(t[o])&&wA(n)?t[o]=e(t[o],n):wA(n)?t[o]=e({},n):VA(n)?t[o]=n.slice():t[o]=n},I=0,o=arguments.length;I<o;I++)arguments[I]&&EA(arguments[I],n);return t},extend:function(e,g,t){return EA(g,(function(g,n){t&&JA(g)?e[n]=yA(g,t):e[n]=g}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,g,t,n){e.prototype=Object.create(g.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:g.prototype}),t&&Object.assign(e.prototype,t)},toFlatObject:function(e,g,t,n){var I,o,l,C={};if(g=g||{},null==e)return g;do{for(o=(I=Object.getOwnPropertyNames(e)).length;o-- >0;)l=I[o],n&&!n(l,e,g)||C[l]||(g[l]=e[l],C[l]=!0);e=!1!==t&&fA(e)}while(e&&(!t||t(e,g))&&e!==Object.prototype);return g},kindOf:vA,kindOfTest:SA,endsWith:function(e,g,t){e=String(e),(void 0===t||t>e.length)&&(t=e.length),t-=g.length;var n=e.indexOf(g,t);return-1!==n&&n===t},toArray:function(e){if(!e)return null;if(VA(e))return e;var g=e.length;if(!YA(g))return null;for(var t=new Array(g);g-- >0;)t[g]=e[g];return t},forEachEntry:function(e,g){for(var t,n=(e&&e[Symbol.iterator]).call(e);(t=n.next())&&!t.done;){var I=t.value;g.call(e,I[0],I[1])}},matchAll:function(e,g){for(var t,n=[];null!==(t=e.exec(g));)n.push(t);return n},isHTMLForm:DA,hasOwnProperty:jA,hasOwnProp:jA,reduceDescriptors:OA,freezeMethods:function(e){OA(e,(function(g,t){if(JA(e)&&-1!==["arguments","caller","callee"].indexOf(t))return!1;var n=e[t];JA(n)&&(g.enumerable=!1,"writable"in g?g.writable=!1:g.set||(g.set=function(){throw Error("Can not rewrite read-only method '"+t+"'")}))}))},toObjectSet:function(e,g){var t={},n=function(e){e.forEach((function(e){t[e]=!0}))};return VA(e)?n(e):n(String(e).split(g)),t},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,g,t){return g.toUpperCase()+t}))},noop:function(){},toFiniteNumber:function(e,g){return e=+e,Number.isFinite(e)?e:g},findKey:MA,global:UA,isContextDefined:QA,ALPHABET:$A,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$A.ALPHA_DIGIT,t="",n=g.length;e--;)t+=g[Math.random()*n|0];return t},isSpecCompliantForm:function(e){return!!(e&&JA(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var g=new Array(10);return function e(t,n){if(HA(t)){if(g.indexOf(t)>=0)return;if(!("toJSON"in t)){g[n]=t;var I=VA(t)?[]:{};return EA(t,(function(g,t){var o=e(g,n+1);!RA(o)&&(I[t]=o)})),g[n]=void 0,I}}return t}(e,0)}};function gm(e,g,t,n,I){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",g&&(this.code=g),t&&(this.config=t),n&&(this.request=n),I&&(this.response=I)}em.inherits(gm,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:em.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var tm=gm.prototype,nm={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){nm[e]={value:e}})),Object.defineProperties(gm,nm),Object.defineProperty(tm,"isAxiosError",{value:!0}),gm.from=function(e,g,t,n,I,o){var l=Object.create(tm);return em.toFlatObject(e,l,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),gm.call(l,e.message,g,t,n,I),l.cause=e,l.name=e.name,o&&Object.assign(l,o),l};var Im=gm,om=null;function lm(e){return em.isPlainObject(e)||em.isArray(e)}function Cm(e){return em.endsWith(e,"[]")?e.slice(0,-2):e}function rm(e,g,t){return e?e.concat(g).map((function(e,g){return e=Cm(e),!t&&g?"["+e+"]":e})).join(t?".":""):g}var am=em.toFlatObject(em,{},null,(function(e){return/^is[A-Z]/.test(e)}));var im=function(e,g,t){if(!em.isObject(e))throw new TypeError("target must be an object");g=g||new(om||FormData);var n=(t=em.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,g){return!em.isUndefined(g[e])}))).metaTokens,I=t.visitor||a,o=t.dots,l=t.indexes,C=(t.Blob||"undefined"!==typeof Blob&&Blob)&&em.isSpecCompliantForm(g);if(!em.isFunction(I))throw new TypeError("visitor must be a function");function r(e){if(null===e)return"";if(em.isDate(e))return e.toISOString();if(!C&&em.isBlob(e))throw new Im("Blob is not supported. Use a Buffer instead.");return em.isArrayBuffer(e)||em.isTypedArray(e)?C&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function a(e,t,I){var C=e;if(e&&!I&&"object"===typeof e)if(em.endsWith(t,"{}"))t=n?t:t.slice(0,-2),e=JSON.stringify(e);else if(em.isArray(e)&&function(e){return em.isArray(e)&&!e.some(lm)}(e)||(em.isFileList(e)||em.endsWith(t,"[]"))&&(C=em.toArray(e)))return t=Cm(t),C.forEach((function(e,n){!em.isUndefined(e)&&null!==e&&g.append(!0===l?rm([t],n,o):null===l?t:t+"[]",r(e))})),!1;return!!lm(e)||(g.append(rm(I,t,o),r(e)),!1)}var i=[],c=Object.assign(am,{defaultVisitor:a,convertValue:r,isVisitable:lm});if(!em.isObject(e))throw new TypeError("data must be an object");return function e(t,n){if(!em.isUndefined(t)){if(-1!==i.indexOf(t))throw Error("Circular reference detected in "+n.join("."));i.push(t),em.forEach(t,(function(t,o){!0===(!(em.isUndefined(t)||null===t)&&I.call(g,t,em.isString(o)?o.trim():o,n,c))&&e(t,n?n.concat(o):[o])})),i.pop()}}(e),g};function cm(e){var g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return g[e]}))}function sm(e,g){this._pairs=[],e&&im(e,this,g)}var um=sm.prototype;um.append=function(e,g){this._pairs.push([e,g])},um.toString=function(e){var g=e?function(g){return e.call(this,g,cm)}:cm;return this._pairs.map((function(e){return g(e[0])+"="+g(e[1])}),"").join("&")};var dm=sm;function Am(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function mm(e,g,t){if(!g)return e;var n,I=t&&t.encode||Am,o=t&&t.serialize;if(n=o?o(g,t):em.isURLSearchParams(g)?g.toString():new dm(g,t).toString(I)){var l=e.indexOf("#");-1!==l&&(e=e.slice(0,l)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}var bm=function(){function e(){zn(this,e),this.handlers=[]}return Un(e,[{key:"use",value:function(e,g,t){return this.handlers.push({fulfilled:e,rejected:g,synchronous:!!t&&t.synchronous,runWhen:t?t.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){em.forEach(this.handlers,(function(g){null!==g&&e(g)}))}}]),e}(),Zm={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pm={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:dm,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var hm=function(e){function g(e,t,n,I){var o=e[I++],l=Number.isFinite(+o),C=I>=e.length;return o=!o&&em.isArray(n)?n.length:o,C?(em.hasOwnProp(n,o)?n[o]=[n[o],t]:n[o]=t,!l):(n[o]&&em.isObject(n[o])||(n[o]=[]),g(e,t,n[o],I)&&em.isArray(n[o])&&(n[o]=function(e){var g,t,n={},I=Object.keys(e),o=I.length;for(g=0;g<o;g++)n[t=I[g]]=e[t];return n}(n[o])),!l)}if(em.isFormData(e)&&em.isFunction(e.entries)){var t={};return em.forEachEntry(e,(function(e,n){g(function(e){return em.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),n,t,0)})),t}return null},Gm={"Content-Type":void 0};var ym={transitional:Zm,adapter:["xhr","http"],transformRequest:[function(e,g){var t,n=g.getContentType()||"",I=n.indexOf("application/json")>-1,o=em.isObject(e);if(o&&em.isHTMLForm(e)&&(e=new FormData(e)),em.isFormData(e))return I&&I?JSON.stringify(hm(e)):e;if(em.isArrayBuffer(e)||em.isBuffer(e)||em.isStream(e)||em.isFile(e)||em.isBlob(e))return e;if(em.isArrayBufferView(e))return e.buffer;if(em.isURLSearchParams(e))return g.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,g){return im(e,new pm.classes.URLSearchParams,Object.assign({visitor:function(e,g,t,n){return pm.isNode&&em.isBuffer(e)?(this.append(g,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},g))}(e,this.formSerializer).toString();if((t=em.isFileList(e))||n.indexOf("multipart/form-data")>-1){var l=this.env&&this.env.FormData;return im(t?{"files[]":e}:e,l&&new l,this.formSerializer)}}return o||I?(g.setContentType("application/json",!1),function(e,g,t){if(em.isString(e))try{return(g||JSON.parse)(e),em.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(t||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var g=this.transitional||ym.transitional,t=g&&g.forcedJSONParsing,n="json"===this.responseType;if(e&&em.isString(e)&&(t&&!this.responseType||n)){var I=!(g&&g.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(o){if(I){if("SyntaxError"===o.name)throw Im.from(o,Im.ERR_BAD_RESPONSE,this,null,this.response);throw o}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pm.classes.FormData,Blob:pm.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};em.forEach(["delete","get","head"],(function(e){ym.headers[e]={}})),em.forEach(["post","put","patch"],(function(e){ym.headers[e]=em.merge(Gm)}));var Bm=ym,fm=em.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vm=Symbol("internals");function Sm(e){return e&&String(e).trim().toLowerCase()}function Wm(e){return!1===e||null==e?e:em.isArray(e)?e.map(Wm):String(e)}function Vm(e,g,t,n,I){return em.isFunction(n)?n.call(this,g,t):(I&&(g=t),em.isString(g)?em.isString(n)?-1!==g.indexOf(n):em.isRegExp(n)?n.test(g):void 0:void 0)}var Rm=function(e,g){function t(e){zn(this,t),e&&this.set(e)}return Un(t,[{key:"set",value:function(e,g,t){var n=this;function I(e,g,t){var I=Sm(g);if(!I)throw new Error("header name must be a non-empty string");var o=em.findKey(n,I);(!o||void 0===n[o]||!0===t||void 0===t&&!1!==n[o])&&(n[o||g]=Wm(e))}var o=function(e,g){return em.forEach(e,(function(e,t){return I(e,t,g)}))};return em.isPlainObject(e)||e instanceof this.constructor?o(e,g):em.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z]+$/.test(e.trim())?o(function(e){var g,t,n,I={};return e&&e.split("\n").forEach((function(e){n=e.indexOf(":"),g=e.substring(0,n).trim().toLowerCase(),t=e.substring(n+1).trim(),!g||I[g]&&fm[g]||("set-cookie"===g?I[g]?I[g].push(t):I[g]=[t]:I[g]=I[g]?I[g]+", "+t:t)})),I}(e),g):null!=e&&I(g,e,t),this}},{key:"get",value:function(e,g){if(e=Sm(e)){var t=em.findKey(this,e);if(t){var n=this[t];if(!g)return n;if(!0===g)return function(e){for(var g,t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;g=n.exec(e);)t[g[1]]=g[2];return t}(n);if(em.isFunction(g))return g.call(this,n,t);if(em.isRegExp(g))return g.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,g){if(e=Sm(e)){var t=em.findKey(this,e);return!(!t||void 0===this[t]||g&&!Vm(0,this[t],t,g))}return!1}},{key:"delete",value:function(e,g){var t=this,n=!1;function I(e){if(e=Sm(e)){var I=em.findKey(t,e);!I||g&&!Vm(0,t[I],I,g)||(delete t[I],n=!0)}}return em.isArray(e)?e.forEach(I):I(e),n}},{key:"clear",value:function(e){for(var g=Object.keys(this),t=g.length,n=!1;t--;){var I=g[t];e&&!Vm(0,this[I],I,e,!0)||(delete this[I],n=!0)}return n}},{key:"normalize",value:function(e){var g=this,t={};return em.forEach(this,(function(n,I){var o=em.findKey(t,I);if(o)return g[o]=Wm(n),void delete g[I];var l=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,g,t){return g.toUpperCase()+t}))}(I):String(I).trim();l!==I&&delete g[I],g[l]=Wm(n),t[l]=!0})),this}},{key:"concat",value:function(){for(var e,g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];return(e=this.constructor).concat.apply(e,[this].concat(t))}},{key:"toJSON",value:function(e){var g=Object.create(null);return em.forEach(this,(function(t,n){null!=t&&!1!==t&&(g[n]=e&&em.isArray(t)?t.join(", "):t)})),g}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var g=(0,qn.Z)(e,2);return g[0]+": "+g[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var g=new this(e),t=arguments.length,n=new Array(t>1?t-1:0),I=1;I<t;I++)n[I-1]=arguments[I];return n.forEach((function(e){return g.set(e)})),g}},{key:"accessor",value:function(e){var g=(this[vm]=this[vm]={accessors:{}}).accessors,t=this.prototype;function n(e){var n=Sm(e);g[n]||(!function(e,g){var t=em.toCamelCase(" "+g);["get","set","has"].forEach((function(n){Object.defineProperty(e,n+t,{value:function(e,t,I){return this[n].call(this,g,e,t,I)},configurable:!0})}))}(t,e),g[n]=!0)}return em.isArray(e)?e.forEach(n):n(e),this}}]),t}();Rm.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),em.freezeMethods(Rm.prototype),em.freezeMethods(Rm);var Xm=Rm;function km(e,g){var t=this||Bm,n=g||t,I=Xm.from(n.headers),o=n.data;return em.forEach(e,(function(e){o=e.call(t,o,I.normalize(),g?g.status:void 0)})),I.normalize(),o}function Jm(e){return!(!e||!e.__CANCEL__)}function Ym(e,g,t){Im.call(this,null==e?"canceled":e,Im.ERR_CANCELED,g,t),this.name="CanceledError"}em.inherits(Ym,Im,{__CANCEL__:!0});var Hm=Ym;var wm=pm.isStandardBrowserEnv?{write:function(e,g,t,n,I,o){var l=[];l.push(e+"="+encodeURIComponent(g)),em.isNumber(t)&&l.push("expires="+new Date(t).toGMTString()),em.isString(n)&&l.push("path="+n),em.isString(I)&&l.push("domain="+I),!0===o&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var g=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Nm(e,g){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(g)?function(e,g){return g?e.replace(/\/+$/,"")+"/"+g.replace(/^\/+/,""):e}(e,g):g}var Fm=pm.isStandardBrowserEnv?function(){var e,g=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");function n(e){var n=e;return g&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return e=n(window.location.href),function(g){var t=em.isString(g)?n(g):g;return t.protocol===e.protocol&&t.host===e.host}}():function(){return!0};var Km=function(e,g){e=e||10;var t,n=new Array(e),I=new Array(e),o=0,l=0;return g=void 0!==g?g:1e3,function(C){var r=Date.now(),a=I[l];t||(t=r),n[o]=C,I[o]=r;for(var i=l,c=0;i!==o;)c+=n[i++],i%=e;if((o=(o+1)%e)===l&&(l=(l+1)%e),!(r-t<g)){var s=a&&r-a;return s?Math.round(1e3*c/s):void 0}}};function xm(e,g){var t=0,n=Km(50,250);return function(I){var o=I.loaded,l=I.lengthComputable?I.total:void 0,C=o-t,r=n(C);t=o;var a={loaded:o,total:l,progress:l?o/l:void 0,bytes:C,rate:r||void 0,estimated:r&&l&&o<=l?(l-o)/r:void 0,event:I};a[g?"download":"upload"]=!0,e(a)}}var zm="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(g,t){var n,I=e.data,o=Xm.from(e.headers).normalize(),l=e.responseType;function C(){e.cancelToken&&e.cancelToken.unsubscribe(n),e.signal&&e.signal.removeEventListener("abort",n)}em.isFormData(I)&&(pm.isStandardBrowserEnv||pm.isStandardBrowserWebWorkerEnv)&&o.setContentType(!1);var r=new XMLHttpRequest;if(e.auth){var a=e.auth.username||"",i=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(a+":"+i))}var c=Nm(e.baseURL,e.url);function s(){if(r){var n=Xm.from("getAllResponseHeaders"in r&&r.getAllResponseHeaders());!function(e,g,t){var n=t.config.validateStatus;t.status&&n&&!n(t.status)?g(new Im("Request failed with status code "+t.status,[Im.ERR_BAD_REQUEST,Im.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t)):e(t)}((function(e){g(e),C()}),(function(e){t(e),C()}),{data:l&&"text"!==l&&"json"!==l?r.response:r.responseText,status:r.status,statusText:r.statusText,headers:n,config:e,request:r}),r=null}}if(r.open(e.method.toUpperCase(),mm(c,e.params,e.paramsSerializer),!0),r.timeout=e.timeout,"onloadend"in r?r.onloadend=s:r.onreadystatechange=function(){r&&4===r.readyState&&(0!==r.status||r.responseURL&&0===r.responseURL.indexOf("file:"))&&setTimeout(s)},r.onabort=function(){r&&(t(new Im("Request aborted",Im.ECONNABORTED,e,r)),r=null)},r.onerror=function(){t(new Im("Network Error",Im.ERR_NETWORK,e,r)),r=null},r.ontimeout=function(){var g=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||Zm;e.timeoutErrorMessage&&(g=e.timeoutErrorMessage),t(new Im(g,n.clarifyTimeoutError?Im.ETIMEDOUT:Im.ECONNABORTED,e,r)),r=null},pm.isStandardBrowserEnv){var u=(e.withCredentials||Fm(c))&&e.xsrfCookieName&&wm.read(e.xsrfCookieName);u&&o.set(e.xsrfHeaderName,u)}void 0===I&&o.setContentType(null),"setRequestHeader"in r&&em.forEach(o.toJSON(),(function(e,g){r.setRequestHeader(g,e)})),em.isUndefined(e.withCredentials)||(r.withCredentials=!!e.withCredentials),l&&"json"!==l&&(r.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&r.addEventListener("progress",xm(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&r.upload&&r.upload.addEventListener("progress",xm(e.onUploadProgress)),(e.cancelToken||e.signal)&&(n=function(g){r&&(t(!g||g.type?new Hm(null,e,r):g),r.abort(),r=null)},e.cancelToken&&e.cancelToken.subscribe(n),e.signal&&(e.signal.aborted?n():e.signal.addEventListener("abort",n)));var d=function(e){var g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return g&&g[1]||""}(c);d&&-1===pm.protocols.indexOf(d)?t(new Im("Unsupported protocol "+d+":",Im.ERR_BAD_REQUEST,e)):r.send(I||null)}))},Em={http:om,xhr:zm};em.forEach(Em,(function(e,g){if(e){try{Object.defineProperty(e,"name",{value:g})}catch(t){}Object.defineProperty(e,"adapterName",{value:g})}}));var Mm={getAdapter:function(e){for(var g,t,n=(e=em.isArray(e)?e:[e]).length,I=0;I<n&&(g=e[I],!(t=em.isString(g)?Em[g.toLowerCase()]:g));I++);if(!t){if(!1===t)throw new Im("Adapter ".concat(g," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(em.hasOwnProp(Em,g)?"Adapter '".concat(g,"' is not available in the build"):"Unknown adapter '".concat(g,"'"))}if(!em.isFunction(t))throw new TypeError("adapter is not a function");return t},adapters:Em};function Um(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Hm(null,e)}function Qm(e){return Um(e),e.headers=Xm.from(e.headers),e.data=km.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Mm.getAdapter(e.adapter||Bm.adapter)(e).then((function(g){return Um(e),g.data=km.call(e,e.transformResponse,g),g.headers=Xm.from(g.headers),g}),(function(g){return Jm(g)||(Um(e),g&&g.response&&(g.response.data=km.call(e,e.transformResponse,g.response),g.response.headers=Xm.from(g.response.headers))),Promise.reject(g)}))}var Lm=function(e){return e instanceof Xm?e.toJSON():e};function Tm(e,g){g=g||{};var t={};function n(e,g,t){return em.isPlainObject(e)&&em.isPlainObject(g)?em.merge.call({caseless:t},e,g):em.isPlainObject(g)?em.merge({},g):em.isArray(g)?g.slice():g}function I(e,g,t){return em.isUndefined(g)?em.isUndefined(e)?void 0:n(void 0,e,t):n(e,g,t)}function o(e,g){if(!em.isUndefined(g))return n(void 0,g)}function l(e,g){return em.isUndefined(g)?em.isUndefined(e)?void 0:n(void 0,e):n(void 0,g)}function C(t,I,o){return o in g?n(t,I):o in e?n(void 0,t):void 0}var r={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:C,headers:function(e,g){return I(Lm(e),Lm(g),!0)}};return em.forEach(Object.keys(e).concat(Object.keys(g)),(function(n){var o=r[n]||I,l=o(e[n],g[n],n);em.isUndefined(l)&&o!==C||(t[n]=l)})),t}var Dm="1.3.4",jm={};["object","boolean","number","function","string","symbol"].forEach((function(e,g){jm[e]=function(t){return typeof t===e||"a"+(g<1?"n ":" ")+e}}));var Pm={};jm.transitional=function(e,g,t){function n(e,g){return"[Axios v"+Dm+"] Transitional option '"+e+"'"+g+(t?". "+t:"")}return function(t,I,o){if(!1===e)throw new Im(n(I," has been removed"+(g?" in "+g:"")),Im.ERR_DEPRECATED);return g&&!Pm[I]&&(Pm[I]=!0,console.warn(n(I," has been deprecated since v"+g+" and will be removed in the near future"))),!e||e(t,I,o)}};var Om={assertOptions:function(e,g,t){if("object"!==typeof e)throw new Im("options must be an object",Im.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),I=n.length;I-- >0;){var o=n[I],l=g[o];if(l){var C=e[o],r=void 0===C||l(C,o,e);if(!0!==r)throw new Im("option "+o+" must be "+r,Im.ERR_BAD_OPTION_VALUE)}else if(!0!==t)throw new Im("Unknown option "+o,Im.ERR_BAD_OPTION)}},validators:jm},qm=Om.validators,_m=function(){function e(g){zn(this,e),this.defaults=g,this.interceptors={request:new bm,response:new bm}}return Un(e,[{key:"request",value:function(e,g){"string"===typeof e?(g=g||{}).url=e:g=e||{};var t,n=g=Tm(this.defaults,g),I=n.transitional,o=n.paramsSerializer,l=n.headers;void 0!==I&&Om.assertOptions(I,{silentJSONParsing:qm.transitional(qm.boolean),forcedJSONParsing:qm.transitional(qm.boolean),clarifyTimeoutError:qm.transitional(qm.boolean)},!1),void 0!==o&&Om.assertOptions(o,{encode:qm.function,serialize:qm.function},!0),g.method=(g.method||this.defaults.method||"get").toLowerCase(),(t=l&&em.merge(l.common,l[g.method]))&&em.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete l[e]})),g.headers=Xm.concat(t,l);var C=[],r=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(g)||(r=r&&e.synchronous,C.unshift(e.fulfilled,e.rejected))}));var a,i=[];this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)}));var c,s=0;if(!r){var u=[Qm.bind(this),void 0];for(u.unshift.apply(u,C),u.push.apply(u,i),c=u.length,a=Promise.resolve(g);s<c;)a=a.then(u[s++],u[s++]);return a}c=C.length;var d=g;for(s=0;s<c;){var A=C[s++],m=C[s++];try{d=A(d)}catch(b){m.call(this,b);break}}try{a=Qm.call(this,d)}catch(b){return Promise.reject(b)}for(s=0,c=i.length;s<c;)a=a.then(i[s++],i[s++]);return a}},{key:"getUri",value:function(e){return mm(Nm((e=Tm(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();em.forEach(["delete","get","head","options"],(function(e){_m.prototype[e]=function(g,t){return this.request(Tm(t||{},{method:e,url:g,data:(t||{}).data}))}})),em.forEach(["post","put","patch"],(function(e){function g(g){return function(t,n,I){return this.request(Tm(I||{},{method:e,headers:g?{"Content-Type":"multipart/form-data"}:{},url:t,data:n}))}}_m.prototype[e]=g(),_m.prototype[e+"Form"]=g(!0)}));var $m=_m,eb=function(){function e(g){if(zn(this,e),"function"!==typeof g)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){for(var g=n._listeners.length;g-- >0;)n._listeners[g](e);n._listeners=null}})),this.promise.then=function(e){var g,t=new Promise((function(e){n.subscribe(e),g=e})).then(e);return t.cancel=function(){n.unsubscribe(g)},t},g((function(e,g,I){n.reason||(n.reason=new Hm(e,g,I),t(n.reason))}))}return Un(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var g=this._listeners.indexOf(e);-1!==g&&this._listeners.splice(g,1)}}}],[{key:"source",value:function(){var g;return{token:new e((function(e){g=e})),cancel:g}}}]),e}(),gb=eb;var tb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tb).forEach((function(e){var g=(0,qn.Z)(e,2),t=g[0],n=g[1];tb[n]=t}));var nb=tb;var Ib=function e(g){var t=new $m(g),n=yA($m.prototype.request,t);return em.extend(n,$m.prototype,t,{allOwnKeys:!0}),em.extend(n,t,null,{allOwnKeys:!0}),n.create=function(t){return e(Tm(g,t))},n}(Bm);Ib.Axios=$m,Ib.CanceledError=Hm,Ib.CancelToken=gb,Ib.isCancel=Jm,Ib.VERSION=Dm,Ib.toFormData=im,Ib.AxiosError=Im,Ib.Cancel=Ib.CanceledError,Ib.all=function(e){return Promise.all(e)},Ib.spread=function(e){return function(g){return e.apply(null,g)}},Ib.isAxiosError=function(e){return em.isObject(e)&&!0===e.isAxiosError},Ib.mergeConfig=Tm,Ib.AxiosHeaders=Xm,Ib.formToJSON=function(e){return hm(em.isHTMLForm(e)?new FormData(e):e)},Ib.HttpStatusCode=nb,Ib.default=Ib;var ob=Ib,lb="http://localhost:5000/",Cb="".concat(lb,"qr"),rb="/user/registration",ab="/user/login",ib="/user/logout",cb="/token/refresh",sb="/profile/returns",ub=ob.create({withCredentials:!0,baseURL:Cb});ub.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e})),ub.interceptors.response.use((function(e){return e}),function(){var e=GA(pA().mark((function e(g){var t,n;return pA().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.config,401!=g.response.status||!g.config||g.config._isRetry){e.next=14;break}return t._isRetry=!0,e.prev=3,e.next=6,ob.get("".concat(Cb).concat(cb),{withCredentials:!0});case 6:return n=e.sent,localStorage.setItem("token",n.data.accessToken),e.abrupt("return",ub.request(t));case 11:e.prev=11,e.t0=e.catch(3),console.log("\u041d\u0415 \u0410\u0412\u0422\u041e\u0420\u0418\u0417\u041e\u0412\u0410\u041d");case 14:throw g;case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(g){return e.apply(this,arguments)}}());var db=ub,Ab={registration:function(e){return GA(pA().mark((function g(){var t;return pA().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,db.post(rb,e);case 2:return t=g.sent,g.abrupt("return",t.data);case 4:case"end":return g.stop()}}),g)})))()},login:function(e){return GA(pA().mark((function g(){var t;return pA().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,db.post(ab,e);case 2:return t=g.sent,g.abrupt("return",t.data);case 4:case"end":return g.stop()}}),g)})))()},logout:function(){return GA(pA().mark((function e(){var g;return pA().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,db.post(ib);case 2:return g=e.sent,e.abrupt("return",g.data);case 4:case"end":return e.stop()}}),e)})))()},checkAuth:function(){return GA(pA().mark((function e(){var g;return pA().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ob.get("".concat(Cb).concat(cb),{withCredentials:!0});case 2:return g=e.sent,e.abrupt("return",g.data);case 4:case"end":return e.stop()}}),e)})))()}},mb=function(){var g=(0,e.useContext)(kB).user,t=(0,o.useMutation)(["logout"],{mutationFn:function(){return Ab.logout()},onSuccess:function(e){localStorage.removeItem("token"),g.setUser({}),g.setIsAuth(!1),console.log(e)},onError:function(e){var g,t,n=e;console.log(null===(g=n.response)||void 0===g||null===(t=g.data)||void 0===t?void 0:t.message)}}),n=t.mutate,I=t.isSuccess,l=t.isLoading,C=t.error,r=function(){var e=GA(pA().mark((function e(){return pA().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{logout:r,isSuccess:I,isLoading:l,error:C}},bb=wi({MenuLink:{padding:"5px 0",color:"#000",textDecoration:"none"},MenuItem:{display:"flex",flexDirection:"column"}}),Zb=Kn((function(){var g=e.useState(null),t=(0,qn.Z)(g,2),n=t[0],I=t[1],o=bb(),l=(0,e.useContext)(kB).user,C=mb().logout,r=function(){I(null)};return(0,Yo.jsxs)(tl,{sx:{flexGrow:0},children:[(0,Yo.jsx)(aA,{title:"Open settings",children:(0,Yo.jsx)(rc,{onClick:function(e){I(e.currentTarget)},sx:{p:0},children:(0,Yo.jsx)(ZA,{alt:"user image",src:"/static/images/avatar/2.jpg"})})}),(0,Yo.jsx)(Ds,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(n),onClose:r,children:l.isAuth?(0,Yo.jsxs)(Iu,{className:o.MenuItem,onClick:r,children:[(0,Yo.jsx)(uu,{className:o.MenuLink,to:eu.PROFILE,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),(0,Yo.jsx)(uu,{className:o.MenuLink,to:eu.MAIN,onClick:function(){C()},children:"\u0412\u044b\u0439\u0442\u0438"})]}):(0,Yo.jsx)(Iu,{onClick:r,children:(0,Yo.jsx)(uu,{className:o.MenuLink,to:eu.LOGIN,children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"})})})]})})),pb=function(){var g=(0,e.useContext)(kB).user;return(0,Yo.jsxs)(tl,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:[(0,Yo.jsx)(bu,{page:ou.main,place:"NavLink"}),(0,Yo.jsx)(bu,{page:ou.scaner,place:"NavLink"}),g.isAuth&&(0,Yo.jsx)(bu,{page:ou.return,place:"NavLink"})]})},hb=function(){return(0,Yo.jsx)(Pi,{position:"fixed",children:(0,Yo.jsx)(Uo,{maxWidth:"xl",children:(0,Yo.jsxs)(ec,{disableGutters:!0,children:[(0,Yo.jsx)(tc,{isDesktop:!0}),(0,Yo.jsx)(Zu,{}),(0,Yo.jsx)(tc,{isDesktop:!1}),(0,Yo.jsx)(pb,{}),(0,Yo.jsx)(Zb,{})]})})})},Gb=wi({main:{position:"relative",padding:"60px 0 0 0",flex:"1 1 auto"}}),yb=function(){var e=Gb();return(0,Yo.jsxs)(Yo.Fragment,{children:[(0,Yo.jsx)(hb,{}),(0,Yo.jsx)("main",{className:e.main,children:(0,Yo.jsx)(ho,{})}),(0,Yo.jsx)(xi,{})]})},Bb=function(e){return[{element:(0,Yo.jsx)(yb,{}),children:e}]},fb=wi({App:{positon:"relative",minHeight:"100vh",display:"flex",flexDirection:"column",overflow:"hidden",color:"#294270"},SpinerBox:{position:"absolute",top:"50%",left:"50%",transform:"translate(50%,50%)"}});function vb(e){return(0,Vo.Z)("MuiCircularProgress",e)}(0,nl.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var Sb,Wb,Vb,Rb,Xb,kb,Jb,Yb,Hb=["className","color","disableShrink","size","style","thickness","value","variant"],wb=44,Nb=Ql(Xb||(Xb=Sb||(Sb=Rl(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),Fb=Ql(kb||(kb=Wb||(Wb=Rl(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),Kb=(0,zo.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,g[t.variant],g["color".concat((0,xo.Z)(t.color))]]}})((function(e){var g=e.ownerState,t=e.theme;return(0,vo.Z)({display:"inline-block"},"determinate"===g.variant&&{transition:t.transitions.create("transform")},"inherit"!==g.color&&{color:(t.vars||t).palette[g.color].main})}),(function(e){return"indeterminate"===e.ownerState.variant&&Ul(Jb||(Jb=Vb||(Vb=Rl(["\n      animation: "," 1.4s linear infinite;\n    "]))),Nb)})),xb=(0,zo.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:function(e,g){return g.svg}})({display:"block"}),zb=(0,zo.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:function(e,g){var t=e.ownerState;return[g.circle,g["circle".concat((0,xo.Z)(t.variant))],t.disableShrink&&g.circleDisableShrink]}})((function(e){var g=e.ownerState,t=e.theme;return(0,vo.Z)({stroke:"currentColor"},"determinate"===g.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===g.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(function(e){var g=e.ownerState;return"indeterminate"===g.variant&&!g.disableShrink&&Ul(Yb||(Yb=Rb||(Rb=Rl(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),Fb)})),Eb=e.forwardRef((function(e,g){var t=(0,Eo.Z)({props:e,name:"MuiCircularProgress"}),n=t.className,I=t.color,o=void 0===I?"primary":I,l=t.disableShrink,C=void 0!==l&&l,r=t.size,a=void 0===r?40:r,i=t.style,c=t.thickness,s=void 0===c?3.6:c,u=t.value,d=void 0===u?0:u,A=t.variant,m=void 0===A?"indeterminate":A,b=(0,fo.Z)(t,Hb),Z=(0,vo.Z)({},t,{color:o,disableShrink:C,size:a,thickness:s,value:d,variant:m}),p=function(e){var g=e.classes,t=e.variant,n=e.color,I=e.disableShrink,o={root:["root",t,"color".concat((0,xo.Z)(n))],svg:["svg"],circle:["circle","circle".concat((0,xo.Z)(t)),I&&"circleDisableShrink"]};return(0,Ro.Z)(o,vb,g)}(Z),h={},G={},y={};if("determinate"===m){var B=2*Math.PI*((wb-s)/2);h.strokeDasharray=B.toFixed(3),y["aria-valuenow"]=Math.round(d),h.strokeDashoffset="".concat(((100-d)/100*B).toFixed(3),"px"),G.transform="rotate(-90deg)"}return(0,Yo.jsx)(Kb,(0,vo.Z)({className:(0,So.Z)(p.root,n),style:(0,vo.Z)({width:a,height:a},G,i),ownerState:Z,ref:g,role:"progressbar"},y,b,{children:(0,Yo.jsx)(xb,{className:p.svg,ownerState:Z,viewBox:"".concat(22," ").concat(22," ").concat(wb," ").concat(wb),children:(0,Yo.jsx)(zb,{className:p.circle,style:h,ownerState:Z,cx:wb,cy:wb,r:(wb-s)/2,fill:"none",strokeWidth:s})})}))})),Mb=Eb,Ub=function(e){var g=e.className;return(0,Yo.jsx)(tl,{className:g,children:(0,Yo.jsx)(Mb,{})})},Qb=t(5735);function Lb(e){return(0,Vo.Z)("MuiButton",e)}var Tb=(0,nl.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var Db=e.createContext({}),jb=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Pb=function(e){return(0,vo.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},Ob=(0,zo.ZP)(mC,{shouldForwardProp:function(e){return(0,zo.FO)(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,g[t.variant],g["".concat(t.variant).concat((0,xo.Z)(t.color))],g["size".concat((0,xo.Z)(t.size))],g["".concat(t.variant,"Size").concat((0,xo.Z)(t.size))],"inherit"===t.color&&g.colorInherit,t.disableElevation&&g.disableElevation,t.fullWidth&&g.fullWidth]}})((function(e){var g,t,n,I=e.theme,o=e.ownerState;return(0,vo.Z)({},I.typography.button,(g={minWidth:64,padding:"6px 16px",borderRadius:(I.vars||I).shape.borderRadius,transition:I.transitions.create(["background-color","box-shadow","border-color","color"],{duration:I.transitions.duration.short}),"&:hover":(0,vo.Z)({textDecoration:"none",backgroundColor:I.vars?"rgba(".concat(I.vars.palette.text.primaryChannel," / ").concat(I.vars.palette.action.hoverOpacity,")"):(0,Al.Fq)(I.palette.text.primary,I.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===o.variant&&"inherit"!==o.color&&{backgroundColor:I.vars?"rgba(".concat(I.vars.palette[o.color].mainChannel," / ").concat(I.vars.palette.action.hoverOpacity,")"):(0,Al.Fq)(I.palette[o.color].main,I.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===o.variant&&"inherit"!==o.color&&{border:"1px solid ".concat((I.vars||I).palette[o.color].main),backgroundColor:I.vars?"rgba(".concat(I.vars.palette[o.color].mainChannel," / ").concat(I.vars.palette.action.hoverOpacity,")"):(0,Al.Fq)(I.palette[o.color].main,I.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===o.variant&&{backgroundColor:(I.vars||I).palette.grey.A100,boxShadow:(I.vars||I).shadows[4],"@media (hover: none)":{boxShadow:(I.vars||I).shadows[2],backgroundColor:(I.vars||I).palette.grey[300]}},"contained"===o.variant&&"inherit"!==o.color&&{backgroundColor:(I.vars||I).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(I.vars||I).palette[o.color].main}}),"&:active":(0,vo.Z)({},"contained"===o.variant&&{boxShadow:(I.vars||I).shadows[8]})},(0,Bo.Z)(g,"&.".concat(Tb.focusVisible),(0,vo.Z)({},"contained"===o.variant&&{boxShadow:(I.vars||I).shadows[6]})),(0,Bo.Z)(g,"&.".concat(Tb.disabled),(0,vo.Z)({color:(I.vars||I).palette.action.disabled},"outlined"===o.variant&&{border:"1px solid ".concat((I.vars||I).palette.action.disabledBackground)},"contained"===o.variant&&{color:(I.vars||I).palette.action.disabled,boxShadow:(I.vars||I).shadows[0],backgroundColor:(I.vars||I).palette.action.disabledBackground})),g),"text"===o.variant&&{padding:"6px 8px"},"text"===o.variant&&"inherit"!==o.color&&{color:(I.vars||I).palette[o.color].main},"outlined"===o.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===o.variant&&"inherit"!==o.color&&{color:(I.vars||I).palette[o.color].main,border:I.vars?"1px solid rgba(".concat(I.vars.palette[o.color].mainChannel," / 0.5)"):"1px solid ".concat((0,Al.Fq)(I.palette[o.color].main,.5))},"contained"===o.variant&&{color:I.vars?I.vars.palette.text.primary:null==(t=(n=I.palette).getContrastText)?void 0:t.call(n,I.palette.grey[300]),backgroundColor:(I.vars||I).palette.grey[300],boxShadow:(I.vars||I).shadows[2]},"contained"===o.variant&&"inherit"!==o.color&&{color:(I.vars||I).palette[o.color].contrastText,backgroundColor:(I.vars||I).palette[o.color].main},"inherit"===o.color&&{color:"inherit",borderColor:"currentColor"},"small"===o.size&&"text"===o.variant&&{padding:"4px 5px",fontSize:I.typography.pxToRem(13)},"large"===o.size&&"text"===o.variant&&{padding:"8px 11px",fontSize:I.typography.pxToRem(15)},"small"===o.size&&"outlined"===o.variant&&{padding:"3px 9px",fontSize:I.typography.pxToRem(13)},"large"===o.size&&"outlined"===o.variant&&{padding:"7px 21px",fontSize:I.typography.pxToRem(15)},"small"===o.size&&"contained"===o.variant&&{padding:"4px 10px",fontSize:I.typography.pxToRem(13)},"large"===o.size&&"contained"===o.variant&&{padding:"8px 22px",fontSize:I.typography.pxToRem(15)},o.fullWidth&&{width:"100%"})}),(function(e){var g;return e.ownerState.disableElevation&&(g={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,Bo.Z)(g,"&.".concat(Tb.focusVisible),{boxShadow:"none"}),(0,Bo.Z)(g,"&:active",{boxShadow:"none"}),(0,Bo.Z)(g,"&.".concat(Tb.disabled),{boxShadow:"none"}),g)})),qb=(0,zo.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,g){var t=e.ownerState;return[g.startIcon,g["iconSize".concat((0,xo.Z)(t.size))]]}})((function(e){var g=e.ownerState;return(0,vo.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===g.size&&{marginLeft:-2},Pb(g))})),_b=(0,zo.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,g){var t=e.ownerState;return[g.endIcon,g["iconSize".concat((0,xo.Z)(t.size))]]}})((function(e){var g=e.ownerState;return(0,vo.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===g.size&&{marginRight:-2},Pb(g))})),$b=e.forwardRef((function(g,t){var n=e.useContext(Db),I=(0,Qb.Z)(n,g),o=(0,Eo.Z)({props:I,name:"MuiButton"}),l=o.children,C=o.color,r=void 0===C?"primary":C,a=o.component,i=void 0===a?"button":a,c=o.className,s=o.disabled,u=void 0!==s&&s,d=o.disableElevation,A=void 0!==d&&d,m=o.disableFocusRipple,b=void 0!==m&&m,Z=o.endIcon,p=o.focusVisibleClassName,h=o.fullWidth,G=void 0!==h&&h,y=o.size,B=void 0===y?"medium":y,f=o.startIcon,v=o.type,S=o.variant,W=void 0===S?"text":S,V=(0,fo.Z)(o,jb),R=(0,vo.Z)({},o,{color:r,component:i,disabled:u,disableElevation:A,disableFocusRipple:b,fullWidth:G,size:B,type:v,variant:W}),X=function(e){var g=e.color,t=e.disableElevation,n=e.fullWidth,I=e.size,o=e.variant,l=e.classes,C={root:["root",o,"".concat(o).concat((0,xo.Z)(g)),"size".concat((0,xo.Z)(I)),"".concat(o,"Size").concat((0,xo.Z)(I)),"inherit"===g&&"colorInherit",t&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,xo.Z)(I))],endIcon:["endIcon","iconSize".concat((0,xo.Z)(I))]},r=(0,Ro.Z)(C,Lb,l);return(0,vo.Z)({},l,r)}(R),k=f&&(0,Yo.jsx)(qb,{className:X.startIcon,ownerState:R,children:f}),J=Z&&(0,Yo.jsx)(_b,{className:X.endIcon,ownerState:R,children:Z});return(0,Yo.jsxs)(Ob,(0,vo.Z)({ownerState:R,className:(0,So.Z)(n.className,X.root,c),component:i,disabled:u,focusRipple:!b,focusVisibleClassName:(0,So.Z)(X.focusVisible,p),ref:t,type:v},V,{classes:X,children:[k,l,J]}))})),eZ=t(8023);var gZ=function(g){var t=g.children,n=g.theme,I=(0,qr.Z)(),o=e.useMemo((function(){var e=null===I?n:function(e,g){return"function"===typeof g?g(e):(0,vo.Z)({},e,g)}(I,n);return null!=e&&(e[_r]=null!==I),e}),[n,I]);return(0,Yo.jsx)(eZ.Z.Provider,{value:o,children:t})},tZ={};function nZ(e){var g=(0,qo.Z)();return(0,Yo.jsx)(Kl.T.Provider,{value:"object"===typeof g?g:tZ,children:e.children})}var IZ,oZ=function(e){var g=e.children,t=e.theme;return(0,Yo.jsx)(gZ,{theme:t,children:(0,Yo.jsx)(nZ,{children:g})})},lZ=(0,el.Z)();lZ.typography.h3=(IZ={marginBottom:18,fontSize:"1.5rem",letterSpacing:"0.03rem",color:"#1B294B",textAlign:"center",lineHeight:"110%"},(0,Bo.Z)(IZ,lZ.breakpoints.up("sm"),{fontSize:"1.8rem",marginBottom:24}),(0,Bo.Z)(IZ,lZ.breakpoints.up("md"),{fontSize:"2.1rem",marginBottom:32}),IZ);var CZ=function(e){var g=e.content;return(0,Yo.jsx)(oZ,{theme:lZ,children:(0,Yo.jsx)(al,{variant:"h3",children:g})})},rZ=wi({section:{padding:"50px 0","@media (max-width: 480px)":{padding:"20px 0"}},firstSection:{paddingTop:"30px","@media (max-width: 480px)":{padding:"10px"}},createAcount:{backgroundColor:"#F7F8F9"},BoxContent:{display:"flex",justifyContent:"space-evenly",rowGap:20,columnGap:30,"@media (max-width: 992px)":{flexDirection:"column-reverse",alignItems:"center"}},typographyBox:{flex:"0 0 50%"},imageBox:{position:"relative",flex:"0 0 35%",paddingBottom:"40%","@media (max-width: 992px)":{width:"60%",paddingBottom:"65%"},"@media (max-width: 768px)":{width:"80%",paddingBottom:"80%"},"@media (max-width: 480px)":{width:"110%",paddingBottom:"100%"}},image:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},registrationContainer:{display:"flex",justifyContent:"center",padding:"0 15px"},registrationBox:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:600,padding:"15px 30px",backgroundColor:"#51cfff14",border:"3px solid #1974d217",borderRadius:"10px","@media (max-width: 480px)":{padding:"10px 15px"}},registrationLink:{textDecoration:"none",color:"#1974D2"}}),aZ=t(8683),iZ=function(){var e=rZ();return(0,Yo.jsxs)(Yo.Fragment,{children:[(0,Yo.jsx)("section",{className:e.firstSection,children:(0,Yo.jsxs)(Uo,{maxWidth:"xl",children:[(0,Yo.jsx)(CZ,{content:"\u041f\u0440\u0438\u0432\u0435\u0442, \u0432\u043f\u0435\u0440\u0432\u044b\u0435 \u043d\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0435?"}),(0,Yo.jsxs)(tl,{className:e.BoxContent,children:[(0,Yo.jsx)(tl,{className:e.imageBox,children:(0,Yo.jsx)("img",{className:e.image,src:"/client-qr-code./images/mainPage/hand-qrcodes.png",alt:"hand-qrcodes"})}),(0,Yo.jsxs)(tl,{className:e.typographyBox,children:[(0,Yo.jsx)(al,{variant:"h6",sx:{fontWeight:500,mb:2},children:"\u0427\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u0437\u043d\u0430\u0442\u044c?"}),(0,Yo.jsx)(al,{sx:{mb:3,fontSize:{xs:16,sm:18},letterSpacing:{xs:0,sm:.8},textAlign:"justify"},children:"QR-\u043a\u043e\u0434 \u2014 \u044d\u0442\u043e \u0434\u0432\u0443\u043c\u0435\u0440\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u0448\u0442\u0440\u0438\u0445-\u043a\u043e\u0434\u0430, \u043e\u0431\u044b\u0447\u043d\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u0449\u0430\u044f \u0438\u0437 \u0447\u0435\u0440\u043d\u044b\u0445 \u0438 \u0431\u0435\u043b\u044b\u0445 \u043f\u0438\u043a\u0441\u0435\u043b\u044c\u043d\u044b\u0445 \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432. Denso Wave, \u044f\u043f\u043e\u043d\u0441\u043a\u0430\u044f \u0434\u043e\u0447\u0435\u0440\u043d\u044f\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f Denso, \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0430 Toyota, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043b\u0430 \u0438\u0445 \u0434\u043b\u044f \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u0441 \u0446\u0435\u043b\u044c\u044e \u0443\u0441\u043a\u043e\u0440\u0435\u043d\u0438\u044f \u043b\u043e\u0433\u0438\u0441\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432 \u043f\u0440\u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0435 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439. \u0422\u0435\u043f\u0435\u0440\u044c \u043e\u043d \u043d\u0430\u0448\u0435\u043b \u0441\u0432\u043e\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0432 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u043c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433\u0435 \u0441 \u0448\u0438\u0440\u043e\u043a\u0438\u043c \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u0435\u043c \u0441\u043c\u0430\u0440\u0442\u0444\u043e\u043d\u043e\u0432. \xabQR\xbb \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \xab\u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u043e\u0442\u0432\u0435\u0442\xbb, \u0447\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u043c\u0433\u043d\u043e\u0432\u0435\u043d\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438, \u0441\u043a\u0440\u044b\u0442\u043e\u0439 \u0432 \u043a\u043e\u0434\u0435."}),(0,Yo.jsx)(uu,{to:eu.SCANNER,style:{textDecoration:"none"},children:(0,Yo.jsx)($b,{variant:"contained",endIcon:(0,Yo.jsx)(aZ.Z,{}),children:"\u0441\u043a\u0430\u043d\u0435\u0440"})})]})]})]})}),(0,Yo.jsx)("section",{className:"".concat(e.section," ").concat(e.createAcount),children:(0,Yo.jsx)(tl,{className:e.registrationContainer,children:(0,Yo.jsxs)(tl,{className:e.registrationBox,children:[(0,Yo.jsxs)(tl,{children:[(0,Yo.jsx)(CZ,{content:"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0443\u043f\u0440\u043e\u0441\u0442\u0438\u0442 \u0432\u0430\u043c \u0436\u0438\u0437\u043d\u044c"}),(0,Yo.jsx)(al,{sx:{mb:2,fontWeight:500,letterSpacing:"0.08rem",textAlign:"center"},children:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Neque temporibus id nesciunt at, totam cupiditate inventore eius quisquam nisi dolor mollitia libero sunt illum nemo. Quibusdam ex ipsum iure obcaecati?"})]}),(0,Yo.jsx)($b,{variant:"outlined",children:(0,Yo.jsx)(uu,{className:e.registrationLink,to:eu.REGISTRATION,children:"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"})})]})})})]})};function cZ(e){return(0,Vo.Z)("MuiListSubheader",e)}(0,nl.Z)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);var sZ=["className","color","component","disableGutters","disableSticky","inset"],uZ=(0,zo.ZP)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,"default"!==t.color&&g["color".concat((0,xo.Z)(t.color))],!t.disableGutters&&g.gutters,t.inset&&g.inset,!t.disableSticky&&g.sticky]}})((function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(g.vars||g).palette.text.secondary,fontFamily:g.typography.fontFamily,fontWeight:g.typography.fontWeightMedium,fontSize:g.typography.pxToRem(14)},"primary"===t.color&&{color:(g.vars||g).palette.primary.main},"inherit"===t.color&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(g.vars||g).palette.background.paper})})),dZ=e.forwardRef((function(e,g){var t=(0,Eo.Z)({props:e,name:"MuiListSubheader"}),n=t.className,I=t.color,o=void 0===I?"default":I,l=t.component,C=void 0===l?"li":l,r=t.disableGutters,a=void 0!==r&&r,i=t.disableSticky,c=void 0!==i&&i,s=t.inset,u=void 0!==s&&s,d=(0,fo.Z)(t,sZ),A=(0,vo.Z)({},t,{color:o,component:C,disableGutters:a,disableSticky:c,inset:u}),m=function(e){var g=e.classes,t=e.color,n=e.disableGutters,I=e.inset,o=e.disableSticky,l={root:["root","default"!==t&&"color".concat((0,xo.Z)(t)),!n&&"gutters",I&&"inset",!o&&"sticky"]};return(0,Ro.Z)(l,cZ,g)}(A);return(0,Yo.jsx)(uZ,(0,vo.Z)({as:C,className:(0,So.Z)(m.root,n),ref:g,ownerState:A},d))})),AZ=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],mZ=(0,zo.ZP)(mC,{shouldForwardProp:function(e){return(0,zo.FO)(e)||"classes"===e},name:"MuiListItemButton",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,t.dense&&g.dense,"flex-start"===t.alignItems&&g.alignItemsFlexStart,t.divider&&g.divider,!t.disableGutters&&g.gutters]}})((function(e){var g,t=e.theme,n=e.ownerState;return(0,vo.Z)((g={display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,Bo.Z)(g,"&.".concat(yC.selected),(0,Bo.Z)({backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,Al.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)},"&.".concat(yC.focusVisible),{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Al.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)})),(0,Bo.Z)(g,"&.".concat(yC.selected,":hover"),{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,Al.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,Al.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}}),(0,Bo.Z)(g,"&.".concat(yC.focusVisible),{backgroundColor:(t.vars||t).palette.action.focus}),(0,Bo.Z)(g,"&.".concat(yC.disabled),{opacity:(t.vars||t).palette.action.disabledOpacity}),g),n.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},"flex-start"===n.alignItems&&{alignItems:"flex-start"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.dense&&{paddingTop:4,paddingBottom:4})})),bZ=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiListItemButton"}),I=n.alignItems,o=void 0===I?"center":I,l=n.autoFocus,C=void 0!==l&&l,r=n.component,a=void 0===r?"div":r,i=n.children,c=n.dense,s=void 0!==c&&c,u=n.disableGutters,d=void 0!==u&&u,A=n.divider,m=void 0!==A&&A,b=n.focusVisibleClassName,Z=n.selected,p=void 0!==Z&&Z,h=n.className,G=(0,fo.Z)(n,AZ),y=e.useContext(yl),B=e.useMemo((function(){return{dense:s||y.dense||!1,alignItems:o,disableGutters:d}}),[o,y.dense,s,d]),f=e.useRef(null);(0,ZC.Z)((function(){C&&f.current&&f.current.focus()}),[C]);var v=(0,vo.Z)({},n,{alignItems:o,dense:B.dense,disableGutters:d,divider:m,selected:p}),S=function(e){var g=e.alignItems,t=e.classes,n=e.dense,I=e.disabled,o={root:["root",n&&"dense",!e.disableGutters&&"gutters",e.divider&&"divider",I&&"disabled","flex-start"===g&&"alignItemsFlexStart",e.selected&&"selected"]},l=(0,Ro.Z)(o,GC,t);return(0,vo.Z)({},t,l)}(v),W=(0,cl.Z)(f,t);return(0,Yo.jsx)(yl.Provider,{value:B,children:(0,Yo.jsx)(mZ,(0,vo.Z)({ref:W,href:G.href||G.to,component:(G.href||G.to)&&"div"===a?"a":a,focusVisibleClassName:(0,So.Z)(S.focusVisible,b),ownerState:v,className:(0,So.Z)(S.root,h)},G,{classes:S,children:i}))})})),ZZ=["className"],pZ=(0,zo.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,"flex-start"===t.alignItems&&g.alignItemsFlexStart]}})((function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)({minWidth:56,color:(g.vars||g).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===t.alignItems&&{marginTop:8})})),hZ=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiListItemIcon"}),I=n.className,o=(0,fo.Z)(n,ZZ),l=e.useContext(yl),C=(0,vo.Z)({},n,{alignItems:l.alignItems}),r=function(e){var g=e.alignItems,t=e.classes,n={root:["root","flex-start"===g&&"alignItemsFlexStart"]};return(0,Ro.Z)(n,Ps,t)}(C);return(0,Yo.jsx)(pZ,(0,vo.Z)({className:(0,So.Z)(r.root,I),ownerState:C,ref:t},o))})),GZ=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],yZ=(0,zo.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[(0,Bo.Z)({},"& .".concat(_s.primary),g.primary),(0,Bo.Z)({},"& .".concat(_s.secondary),g.secondary),g.root,t.inset&&g.inset,t.primary&&t.secondary&&g.multiline,t.dense&&g.dense]}})((function(e){var g=e.ownerState;return(0,vo.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},g.primary&&g.secondary&&{marginTop:6,marginBottom:6},g.inset&&{paddingLeft:56})})),BZ=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiListItemText"}),I=n.children,o=n.className,l=n.disableTypography,C=void 0!==l&&l,r=n.inset,a=void 0!==r&&r,i=n.primary,c=n.primaryTypographyProps,s=n.secondary,u=n.secondaryTypographyProps,d=(0,fo.Z)(n,GZ),A=e.useContext(yl).dense,m=null!=i?i:I,b=s,Z=(0,vo.Z)({},n,{disableTypography:C,inset:a,primary:!!m,secondary:!!b,dense:A}),p=function(e){var g=e.classes,t=e.inset,n=e.primary,I=e.secondary,o={root:["root",t&&"inset",e.dense&&"dense",n&&I&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,Ro.Z)(o,qs,g)}(Z);return null==m||m.type===al||C||(m=(0,Yo.jsx)(al,(0,vo.Z)({variant:A?"body2":"body1",className:p.primary,component:null!=c&&c.variant?void 0:"span",display:"block"},c,{children:m}))),null==b||b.type===al||C||(b=(0,Yo.jsx)(al,(0,vo.Z)({variant:"body2",className:p.secondary,color:"text.secondary",display:"block"},u,{children:b}))),(0,Yo.jsxs)(yZ,(0,vo.Z)({className:(0,So.Z)(p.root,o),ownerState:Z,ref:t},d,{children:[m,b]}))})),fZ=t(1370),vZ=(0,iA.Z)((0,Yo.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),SZ=(0,iA.Z)((0,Yo.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),WZ=t(1314);function VZ(e){return(0,Vo.Z)("MuiCollapse",e)}(0,nl.Z)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);var RZ=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],XZ=(0,zo.ZP)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,g[t.orientation],"entered"===t.state&&g.entered,"exited"===t.state&&!t.in&&"0px"===t.collapsedSize&&g.hidden]}})((function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)({height:0,overflow:"hidden",transition:g.transitions.create("height")},"horizontal"===t.orientation&&{height:"auto",width:0,transition:g.transitions.create("width")},"entered"===t.state&&(0,vo.Z)({height:"auto",overflow:"visible"},"horizontal"===t.orientation&&{width:"auto"}),"exited"===t.state&&!t.in&&"0px"===t.collapsedSize&&{visibility:"hidden"})})),kZ=(0,zo.ZP)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:function(e,g){return g.wrapper}})((function(e){var g=e.ownerState;return(0,vo.Z)({display:"flex",width:"100%"},"horizontal"===g.orientation&&{width:"auto",height:"100%"})})),JZ=(0,zo.ZP)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:function(e,g){return g.wrapperInner}})((function(e){var g=e.ownerState;return(0,vo.Z)({width:"100%"},"horizontal"===g.orientation&&{width:"auto",height:"100%"})})),YZ=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiCollapse"}),I=n.addEndListener,o=n.children,l=n.className,C=n.collapsedSize,r=void 0===C?"0px":C,a=n.component,i=n.easing,c=n.in,s=n.onEnter,u=n.onEntered,d=n.onEntering,A=n.onExit,m=n.onExited,b=n.onExiting,Z=n.orientation,p=void 0===Z?"vertical":Z,h=n.style,G=n.timeout,y=void 0===G?WZ.x9.standard:G,B=n.TransitionComponent,f=void 0===B?Rc:B,v=(0,fo.Z)(n,RZ),S=(0,vo.Z)({},n,{orientation:p,collapsedSize:r}),W=function(e){var g=e.orientation,t=e.classes,n={root:["root","".concat(g)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(g)],wrapperInner:["wrapperInner","".concat(g)]};return(0,Ro.Z)(n,VZ,t)}(S),V=kc(),R=e.useRef(),X=e.useRef(null),k=e.useRef(),J="number"===typeof r?"".concat(r,"px"):r,Y="horizontal"===p,H=Y?"width":"height";e.useEffect((function(){return function(){clearTimeout(R.current)}}),[]);var w=e.useRef(null),N=(0,cl.Z)(t,w),F=function(e){return function(g){if(e){var t=w.current;void 0===g?e(t):e(t,g)}}},K=function(){return X.current?X.current[Y?"clientWidth":"clientHeight"]:0},x=F((function(e,g){X.current&&Y&&(X.current.style.position="absolute"),e.style[H]=J,s&&s(e,g)})),z=F((function(e,g){var t=K();X.current&&Y&&(X.current.style.position="");var n=Yc({style:h,timeout:y,easing:i},{mode:"enter"}),I=n.duration,o=n.easing;if("auto"===y){var l=V.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(l,"ms"),k.current=l}else e.style.transitionDuration="string"===typeof I?I:"".concat(I,"ms");e.style[H]="".concat(t,"px"),e.style.transitionTimingFunction=o,d&&d(e,g)})),E=F((function(e,g){e.style[H]="auto",u&&u(e,g)})),M=F((function(e){e.style[H]="".concat(K(),"px"),A&&A(e)})),U=F(m),Q=F((function(e){var g=K(),t=Yc({style:h,timeout:y,easing:i},{mode:"exit"}),n=t.duration,I=t.easing;if("auto"===y){var o=V.transitions.getAutoHeightDuration(g);e.style.transitionDuration="".concat(o,"ms"),k.current=o}else e.style.transitionDuration="string"===typeof n?n:"".concat(n,"ms");e.style[H]=J,e.style.transitionTimingFunction=I,b&&b(e)}));return(0,Yo.jsx)(f,(0,vo.Z)({in:c,onEnter:x,onEntered:E,onEntering:z,onExit:M,onExited:U,onExiting:Q,addEndListener:function(e){"auto"===y&&(R.current=setTimeout(e,k.current||0)),I&&I(w.current,e)},nodeRef:w,timeout:"auto"===y?null:y},v,{children:function(e,g){return(0,Yo.jsx)(XZ,(0,vo.Z)({as:a,className:(0,So.Z)(W.root,l,{entered:W.entered,exited:!c&&"0px"===J&&W.hidden}[e]),style:(0,vo.Z)((0,Bo.Z)({},Y?"minWidth":"minHeight",J),h),ownerState:(0,vo.Z)({},S,{state:e}),ref:N},g,{children:(0,Yo.jsx)(kZ,{ownerState:(0,vo.Z)({},S,{state:e}),className:W.wrapper,ref:X,children:(0,Yo.jsx)(JZ,{ownerState:(0,vo.Z)({},S,{state:e}),className:W.wrapperInner,children:o})})}))}}))}));YZ.muiSupportAuto=!0;var HZ,wZ,NZ=YZ,FZ=t(8698),KZ={create:function(e){return GA(pA().mark((function g(){var t;return pA().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,db.post(sb,e);case 2:return t=g.sent,g.abrupt("return",t.data);case 4:case"end":return g.stop()}}),g)})))()},getAll:function(e){return GA(pA().mark((function g(){var t;return pA().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,db.get("".concat(sb,"/").concat(e));case 2:return t=g.sent,g.abrupt("return",t.data);case 4:case"end":return g.stop()}}),g)})))()},delete:function(e){return GA(pA().mark((function g(){var t,n;return pA().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,db.delete(sb,{params:{id:e}});case 2:return t=g.sent,n=t.data,g.abrupt("return",n);case 5:case"end":return g.stop()}}),g)})))()}},xZ=function(){var g=(0,e.useContext)(kB).user,t=(0,o.useQuery)({queryKey:["return list","return"],queryFn:function(){return KZ.getAll(g.user.id)}});return{userReturns:t.data,isLoading:t.isLoading,error:t.error}},zZ=Kn((function(){var g=(0,e.useContext)(kB),t=g.userReturn,n=g.profile,I=e.useState(!0),o=(0,qn.Z)(I,2),l=o[0],C=o[1],r=xZ(),a=r.userReturns;r.isLoading,r.error;return(0,Yo.jsxs)(Yo.Fragment,{children:[(0,Yo.jsxs)(bZ,{sx:{bgcolor:"#f7f7f7"},onClick:function(){C(!l)},children:[(0,Yo.jsx)(hZ,{children:(0,Yo.jsx)(FZ.Z,{})}),(0,Yo.jsx)(BZ,{primary:"\u0412\u043e\u0437\u0432\u0440\u0430\u0442\u044b"}),l?(0,Yo.jsx)(vZ,{}):(0,Yo.jsx)(SZ,{})]}),(0,Yo.jsx)(NZ,{in:l,timeout:"auto",unmountOnExit:!0,children:a&&a.map((function(e){return(0,Yo.jsx)(Sl,{component:"div",disablePadding:!0,children:(0,Yo.jsx)(bZ,{onClick:function(){return g=e,t.setReturn(g),void n.setIsOpen(!1);var g},sx:{pl:4},children:(0,Yo.jsx)(BZ,{primary:e.reason})})},e.id)}))})]})})),EZ=function(){var g=(0,e.useContext)(kB).profile;return(0,Yo.jsxs)(Sl,{sx:{width:"100%",bgcolor:"background.paper"},component:"nav","aria-labelledby":"nested-list-subheader",subheader:(0,Yo.jsx)(dZ,{component:"div",id:"nested-list-subheader",children:"\u041c\u0435\u043d\u044e"}),children:[(0,Yo.jsxs)(bZ,{sx:{bgcolor:"#f7f7f7"},onClick:function(){g.setIsOpen(!0)},children:[(0,Yo.jsx)(hZ,{children:(0,Yo.jsx)(fZ.Z,{})}),(0,Yo.jsx)(BZ,{primary:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})]}),(0,Yo.jsx)(zZ,{})]})},MZ=wi({BoxInfo:{display:"flex",flexDirection:"column",gap:5},span:{fontSize:18,color:"rgba(10,10,10, 70%)"},DeleteBox:{position:"absolute",top:"40%",left:"60%",display:"flex",flexDirection:"column",alignItems:"center","@media (max-width: 600px)":{position:"static"}}}),UZ=Object.defineProperty,QZ=Object.getOwnPropertySymbols,LZ=Object.prototype.hasOwnProperty,TZ=Object.prototype.propertyIsEnumerable,DZ=function(e,g,t){return g in e?UZ(e,g,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[g]=t},jZ=function(e,g){for(var t in g||(g={}))LZ.call(g,t)&&DZ(e,t,g[t]);if(QZ){var n,I=II(QZ(g));try{for(I.s();!(n=I.n()).done;){t=n.value;TZ.call(g,t)&&DZ(e,t,g[t])}}catch(o){I.e(o)}finally{I.f()}}return e},PZ=function(e,g){var t={};for(var n in e)LZ.call(e,n)&&g.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&QZ){var I,o=II(QZ(e));try{for(o.s();!(I=o.n()).done;){n=I.value;g.indexOf(n)<0&&TZ.call(e,n)&&(t[n]=e[n])}}catch(l){o.e(l)}finally{o.f()}}return t};!function(e){var g=function(){function g(e,t,n,I){if(zn(this,g),this.version=e,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],e<g.MIN_VERSION||e>g.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=4*e+17;for(var l=[],C=0;C<this.size;C++)l.push(!1);for(var r=0;r<this.size;r++)this.modules.push(l.slice()),this.isFunction.push(l.slice());this.drawFunctionPatterns();var a=this.addEccAndInterleave(n);if(this.drawCodewords(a),-1==I)for(var i=1e9,c=0;c<8;c++){this.applyMask(c),this.drawFormatBits(c);var s=this.getPenaltyScore();s<i&&(I=c,i=s),this.applyMask(c)}o(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}return Un(g,[{key:"getModule",value:function(e,g){return 0<=e&&e<this.size&&0<=g&&g<this.size&&this.modules[g][e]}},{key:"getModules",value:function(){return this.modules}},{key:"drawFunctionPatterns",value:function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var g=this.getAlignmentPatternPositions(),t=g.length,n=0;n<t;n++)for(var I=0;I<t;I++)0==n&&0==I||0==n&&I==t-1||n==t-1&&0==I||this.drawAlignmentPattern(g[n],g[I]);this.drawFormatBits(0),this.drawVersion()}},{key:"drawFormatBits",value:function(e){for(var g=this.errorCorrectionLevel.formatBits<<3|e,t=g,n=0;n<10;n++)t=t<<1^1335*(t>>>9);var l=21522^(g<<10|t);o(l>>>15==0);for(var C=0;C<=5;C++)this.setFunctionModule(8,C,I(l,C));this.setFunctionModule(8,7,I(l,6)),this.setFunctionModule(8,8,I(l,7)),this.setFunctionModule(7,8,I(l,8));for(var r=9;r<15;r++)this.setFunctionModule(14-r,8,I(l,r));for(var a=0;a<8;a++)this.setFunctionModule(this.size-1-a,8,I(l,a));for(var i=8;i<15;i++)this.setFunctionModule(8,this.size-15+i,I(l,i));this.setFunctionModule(8,this.size-8,!0)}},{key:"drawVersion",value:function(){if(!(this.version<7)){for(var e=this.version,g=0;g<12;g++)e=e<<1^7973*(e>>>11);var t=this.version<<12|e;o(t>>>18==0);for(var n=0;n<18;n++){var l=I(t,n),C=this.size-11+n%3,r=Math.floor(n/3);this.setFunctionModule(C,r,l),this.setFunctionModule(r,C,l)}}}},{key:"drawFinderPattern",value:function(e,g){for(var t=-4;t<=4;t++)for(var n=-4;n<=4;n++){var I=Math.max(Math.abs(n),Math.abs(t)),o=e+n,l=g+t;0<=o&&o<this.size&&0<=l&&l<this.size&&this.setFunctionModule(o,l,2!=I&&4!=I)}}},{key:"drawAlignmentPattern",value:function(e,g){for(var t=-2;t<=2;t++)for(var n=-2;n<=2;n++)this.setFunctionModule(e+n,g+t,1!=Math.max(Math.abs(n),Math.abs(t)))}},{key:"setFunctionModule",value:function(e,g,t){this.modules[g][e]=t,this.isFunction[g][e]=!0}},{key:"addEccAndInterleave",value:function(e){var t=this.version,n=this.errorCorrectionLevel;if(e.length!=g.getNumDataCodewords(t,n))throw new RangeError("Invalid argument");for(var I=g.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t],l=g.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t],C=Math.floor(g.getNumRawDataModules(t)/8),r=I-C%I,a=Math.floor(C/I),i=[],c=g.reedSolomonComputeDivisor(l),s=0,u=0;s<I;s++){var d=e.slice(u,u+a-l+(s<r?0:1));u+=d.length;var A=g.reedSolomonComputeRemainder(d,c);s<r&&d.push(0),i.push(d.concat(A))}for(var m=[],b=function(e){i.forEach((function(g,t){(e!=a-l||t>=r)&&m.push(g[e])}))},Z=0;Z<i[0].length;Z++)b(Z);return o(m.length==C),m}},{key:"drawCodewords",value:function(e){if(e.length!=Math.floor(g.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var t=0,n=this.size-1;n>=1;n-=2){6==n&&(n=5);for(var l=0;l<this.size;l++)for(var C=0;C<2;C++){var r=n-C,a=0==(n+1&2)?this.size-1-l:l;!this.isFunction[a][r]&&t<8*e.length&&(this.modules[a][r]=I(e[t>>>3],7-(7&t)),t++)}}o(t==8*e.length)}},{key:"applyMask",value:function(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(var g=0;g<this.size;g++)for(var t=0;t<this.size;t++){var n=void 0;switch(e){case 0:n=(t+g)%2==0;break;case 1:n=g%2==0;break;case 2:n=t%3==0;break;case 3:n=(t+g)%3==0;break;case 4:n=(Math.floor(t/3)+Math.floor(g/2))%2==0;break;case 5:n=t*g%2+t*g%3==0;break;case 6:n=(t*g%2+t*g%3)%2==0;break;case 7:n=((t+g)%2+t*g%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[g][t]&&n&&(this.modules[g][t]=!this.modules[g][t])}}},{key:"getPenaltyScore",value:function(){for(var e=0,t=0;t<this.size;t++){for(var n=!1,I=0,l=[0,0,0,0,0,0,0],C=0;C<this.size;C++)this.modules[t][C]==n?5==++I?e+=g.PENALTY_N1:I>5&&e++:(this.finderPenaltyAddHistory(I,l),n||(e+=this.finderPenaltyCountPatterns(l)*g.PENALTY_N3),n=this.modules[t][C],I=1);e+=this.finderPenaltyTerminateAndCount(n,I,l)*g.PENALTY_N3}for(var r=0;r<this.size;r++){for(var a=!1,i=0,c=[0,0,0,0,0,0,0],s=0;s<this.size;s++)this.modules[s][r]==a?5==++i?e+=g.PENALTY_N1:i>5&&e++:(this.finderPenaltyAddHistory(i,c),a||(e+=this.finderPenaltyCountPatterns(c)*g.PENALTY_N3),a=this.modules[s][r],i=1);e+=this.finderPenaltyTerminateAndCount(a,i,c)*g.PENALTY_N3}for(var u=0;u<this.size-1;u++)for(var d=0;d<this.size-1;d++){var A=this.modules[u][d];A==this.modules[u][d+1]&&A==this.modules[u+1][d]&&A==this.modules[u+1][d+1]&&(e+=g.PENALTY_N2)}var m,b=0,Z=II(this.modules);try{for(Z.s();!(m=Z.n()).done;){b=m.value.reduce((function(e,g){return e+(g?1:0)}),b)}}catch(G){Z.e(G)}finally{Z.f()}var p=this.size*this.size,h=Math.ceil(Math.abs(20*b-10*p)/p)-1;return o(0<=h&&h<=9),o(0<=(e+=h*g.PENALTY_N4)&&e<=2568888),e}},{key:"getAlignmentPatternPositions",value:function(){if(1==this.version)return[];for(var e=Math.floor(this.version/7)+2,g=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2)),t=[6],n=this.size-7;t.length<e;n-=g)t.splice(1,0,n);return t}},{key:"finderPenaltyCountPatterns",value:function(e){var g=e[1];o(g<=3*this.size);var t=g>0&&e[2]==g&&e[3]==3*g&&e[4]==g&&e[5]==g;return(t&&e[0]>=4*g&&e[6]>=g?1:0)+(t&&e[6]>=4*g&&e[0]>=g?1:0)}},{key:"finderPenaltyTerminateAndCount",value:function(e,g,t){return e&&(this.finderPenaltyAddHistory(g,t),g=0),g+=this.size,this.finderPenaltyAddHistory(g,t),this.finderPenaltyCountPatterns(t)}},{key:"finderPenaltyAddHistory",value:function(e,g){0==g[0]&&(e+=this.size),g.pop(),g.unshift(e)}}],[{key:"encodeText",value:function(t,n){var I=e.QrSegment.makeSegments(t);return g.encodeSegments(I,n)}},{key:"encodeBinary",value:function(t,n){var I=e.QrSegment.makeBytes(t);return g.encodeSegments([I],n)}},{key:"encodeSegments",value:function(e,t){var I,C,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(g.MIN_VERSION<=r&&r<=a&&a<=g.MAX_VERSION)||i<-1||i>7)throw new RangeError("Invalid value");for(I=r;;I++){var s=8*g.getNumDataCodewords(I,t),u=l.getTotalBits(e,I);if(u<=s){C=u;break}if(I>=a)throw new RangeError("Data too long")}for(var d=0,A=[g.Ecc.MEDIUM,g.Ecc.QUARTILE,g.Ecc.HIGH];d<A.length;d++){var m=A[d];c&&C<=8*g.getNumDataCodewords(I,m)&&(t=m)}var b,Z=[],p=II(e);try{for(p.s();!(b=p.n()).done;){var h=b.value;n(h.mode.modeBits,4,Z),n(h.numChars,h.mode.numCharCountBits(I),Z);var G,y=II(h.getData());try{for(y.s();!(G=y.n()).done;){var B=G.value;Z.push(B)}}catch(W){y.e(W)}finally{y.f()}}}catch(W){p.e(W)}finally{p.f()}o(Z.length==C);var f=8*g.getNumDataCodewords(I,t);o(Z.length<=f),n(0,Math.min(4,f-Z.length),Z),n(0,(8-Z.length%8)%8,Z),o(Z.length%8==0);for(var v=236;Z.length<f;v^=253)n(v,8,Z);for(var S=[];8*S.length<Z.length;)S.push(0);return Z.forEach((function(e,g){return S[g>>>3]|=e<<7-(7&g)})),new g(I,t,S,i)}},{key:"getNumRawDataModules",value:function(e){if(e<g.MIN_VERSION||e>g.MAX_VERSION)throw new RangeError("Version number out of range");var t=(16*e+128)*e+64;if(e>=2){var n=Math.floor(e/7)+2;t-=(25*n-10)*n-55,e>=7&&(t-=36)}return o(208<=t&&t<=29648),t}},{key:"getNumDataCodewords",value:function(e,t){return Math.floor(g.getNumRawDataModules(e)/8)-g.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e]*g.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e]}},{key:"reedSolomonComputeDivisor",value:function(e){if(e<1||e>255)throw new RangeError("Degree out of range");for(var t=[],n=0;n<e-1;n++)t.push(0);t.push(1);for(var I=1,o=0;o<e;o++){for(var l=0;l<t.length;l++)t[l]=g.reedSolomonMultiply(t[l],I),l+1<t.length&&(t[l]^=t[l+1]);I=g.reedSolomonMultiply(I,2)}return t}},{key:"reedSolomonComputeRemainder",value:function(e,t){var n,I=t.map((function(e){return 0})),o=II(e);try{var l=function(){var e=n.value^I.shift();I.push(0),t.forEach((function(t,n){return I[n]^=g.reedSolomonMultiply(t,e)}))};for(o.s();!(n=o.n()).done;)l()}catch(C){o.e(C)}finally{o.f()}return I}},{key:"reedSolomonMultiply",value:function(e,g){if(e>>>8!=0||g>>>8!=0)throw new RangeError("Byte out of range");for(var t=0,n=7;n>=0;n--)t=t<<1^285*(t>>>7),t^=(g>>>n&1)*e;return o(t>>>8==0),t}}]),g}(),t=g;function n(e,g,t){if(g<0||g>31||e>>>g!=0)throw new RangeError("Value out of range");for(var n=g-1;n>=0;n--)t.push(e>>>n&1)}function I(e,g){return 0!=(e>>>g&1)}function o(e){if(!e)throw new Error("Assertion error")}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;var l=function(){function e(g,t,n){if(zn(this,e),this.mode=g,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}return Un(e,[{key:"getData",value:function(){return this.bitData.slice()}}],[{key:"makeBytes",value:function(g){var t,I=[],o=II(g);try{for(o.s();!(t=o.n()).done;){n(t.value,8,I)}}catch(l){o.e(l)}finally{o.f()}return new e(e.Mode.BYTE,g.length,I)}},{key:"makeNumeric",value:function(g){if(!e.isNumeric(g))throw new RangeError("String contains non-numeric characters");for(var t=[],I=0;I<g.length;){var o=Math.min(g.length-I,3);n(parseInt(g.substr(I,o),10),3*o+1,t),I+=o}return new e(e.Mode.NUMERIC,g.length,t)}},{key:"makeAlphanumeric",value:function(g){if(!e.isAlphanumeric(g))throw new RangeError("String contains unencodable characters in alphanumeric mode");var t,I=[];for(t=0;t+2<=g.length;t+=2){var o=45*e.ALPHANUMERIC_CHARSET.indexOf(g.charAt(t));n(o+=e.ALPHANUMERIC_CHARSET.indexOf(g.charAt(t+1)),11,I)}return t<g.length&&n(e.ALPHANUMERIC_CHARSET.indexOf(g.charAt(t)),6,I),new e(e.Mode.ALPHANUMERIC,g.length,I)}},{key:"makeSegments",value:function(g){return""==g?[]:e.isNumeric(g)?[e.makeNumeric(g)]:e.isAlphanumeric(g)?[e.makeAlphanumeric(g)]:[e.makeBytes(e.toUtf8ByteArray(g))]}},{key:"makeEci",value:function(g){var t=[];if(g<0)throw new RangeError("ECI assignment value out of range");if(g<128)n(g,8,t);else if(g<16384)n(2,2,t),n(g,14,t);else{if(!(g<1e6))throw new RangeError("ECI assignment value out of range");n(6,3,t),n(g,21,t)}return new e(e.Mode.ECI,0,t)}},{key:"isNumeric",value:function(g){return e.NUMERIC_REGEX.test(g)}},{key:"isAlphanumeric",value:function(g){return e.ALPHANUMERIC_REGEX.test(g)}},{key:"getTotalBits",value:function(e,g){var t,n=0,I=II(e);try{for(I.s();!(t=I.n()).done;){var o=t.value,l=o.mode.numCharCountBits(g);if(o.numChars>=1<<l)return 1/0;n+=4+l+o.bitData.length}}catch(C){I.e(C)}finally{I.f()}return n}},{key:"toUtf8ByteArray",value:function(e){e=encodeURI(e);for(var g=[],t=0;t<e.length;t++)"%"!=e.charAt(t)?g.push(e.charCodeAt(t)):(g.push(parseInt(e.substr(t+1,2),16)),t+=2);return g}}]),e}();l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=l}(HZ||(HZ={})),function(e){var g=Un((function e(g,t){zn(this,e),this.ordinal=g,this.formatBits=t})),t=g;t.LOW=new g(0,1),t.MEDIUM=new g(1,0),t.QUARTILE=new g(2,3),t.HIGH=new g(3,2),e.Ecc=t}((wZ=HZ||(HZ={})).QrCode||(wZ.QrCode={})),function(e){!function(e){var g=function(){function e(g,t){zn(this,e),this.modeBits=g,this.numBitsCharCount=t}return Un(e,[{key:"numCharCountBits",value:function(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}}]),e}(),t=g;t.NUMERIC=new g(1,[10,12,14]),t.ALPHANUMERIC=new g(2,[9,11,13]),t.BYTE=new g(4,[8,16,16]),t.KANJI=new g(8,[8,10,12]),t.ECI=new g(7,[0,0,0]),e.Mode=t}(e.QrSegment||(e.QrSegment={}))}(HZ||(HZ={}));var OZ=HZ,qZ={L:OZ.QrCode.Ecc.LOW,M:OZ.QrCode.Ecc.MEDIUM,Q:OZ.QrCode.Ecc.QUARTILE,H:OZ.QrCode.Ecc.HIGH},_Z=128,$Z="L",ep="#FFFFFF",gp="#000000",tp=!1,np=4,Ip=.1;function op(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=[];return e.forEach((function(e,n){var I=null;e.forEach((function(o,l){if(!o&&null!==I)return t.push("M".concat(I+g," ").concat(n+g,"h").concat(l-I,"v1H").concat(I+g,"z")),void(I=null);if(l!==e.length-1)o&&null===I&&(I=l);else{if(!o)return;null===I?t.push("M".concat(l+g,",").concat(n+g," h1v1H").concat(l+g,"z")):t.push("M".concat(I+g,",").concat(n+g," h").concat(l+1-I,"v1H").concat(I+g,"z"))}}))})),t.join("")}function lp(e,g){return e.slice().map((function(e,t){return t<g.y||t>=g.y+g.h?e:e.map((function(e,t){return(t<g.x||t>=g.x+g.w)&&e}))}))}function Cp(e,g,t,n){if(null==n)return null;var I=t?np:0,o=e.length+2*I,l=Math.floor(g*Ip),C=o/g,r=(n.width||l)*C,a=(n.height||l)*C,i=null==n.x?e.length/2-r/2:n.x*C,c=null==n.y?e.length/2-a/2:n.y*C,s=null;if(n.excavate){var u=Math.floor(i),d=Math.floor(c);s={x:u,y:d,w:Math.ceil(r+i-u),h:Math.ceil(a+c-d)}}return{x:i,y:c,h:a,w:r,excavation:s}}!function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}}();function rp(g){var t=g,n=t.value,I=t.size,o=void 0===I?_Z:I,l=t.level,C=void 0===l?$Z:l,r=t.bgColor,a=void 0===r?ep:r,i=t.fgColor,c=void 0===i?gp:i,s=t.includeMargin,u=void 0===s?tp:s,d=t.imageSettings,A=PZ(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]),m=OZ.QrCode.encodeText(n,qZ[C]).getModules(),b=u?np:0,Z=m.length+2*b,p=Cp(m,o,u,d),h=null;null!=d&&null!=p&&(null!=p.excavation&&(m=lp(m,p.excavation)),h=e.createElement("image",{xlinkHref:d.src,height:p.h,width:p.w,x:p.x+b,y:p.y+b,preserveAspectRatio:"none"}));var G=op(m,b);return e.createElement("svg",jZ({height:o,width:o,viewBox:"0 0 ".concat(Z," ").concat(Z)},A),e.createElement("path",{fill:a,d:"M0,0 h".concat(Z,"v").concat(Z,"H0z"),shapeRendering:"crispEdges"}),e.createElement("path",{fill:c,d:G,shapeRendering:"crispEdges"}),h)}var ap=wi({content:{position:"absolute",top:"50%",left:"50%",width:"300px",height:"300px",transform:"translate(-50%, -50%)"},qrCode:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},PrintButton:{position:"absolute",bottom:"-115%",left:"50%",transform:"translate(-50%, 0)"}}),ip=t(1146),cp=Kn((function(g){var t=g.id,n=(0,e.useContext)(kB).modal,I=ap(),o=I.content,l=I.qrCode,C=I.PrintButton,r=(0,e.useRef)(null),a=(0,ip.useReactToPrint)({content:function(){return r.current},pageStyle:"padding: 15px"});return(0,Yo.jsx)("div",{children:(0,Yo.jsx)(Ss,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:n.isOpen,onClose:function(){n.isOpen&&n.setIsOpen(!1)},closeAfterTransition:!0,slots:{backdrop:Gs},slotProps:{backdrop:{timeout:500}},children:(0,Yo.jsx)(bs,{in:n.isOpen,children:(0,Yo.jsxs)("div",{className:o,children:[(0,Yo.jsx)("div",{ref:r,children:(0,Yo.jsx)(rp,{className:l,value:"".concat(Cb,"/pdf?id=").concat(t)})}),(0,Yo.jsx)($b,{className:C,variant:"contained",onClick:a,children:"\u0440\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c QR-\u043a\u043e\u0434"}),(0,Yo.jsx)("div",{})]})})})})})),sp=function(){var e=(0,o.useQueryClient)(),g=(0,o.useMutation)({mutationKey:["return"],mutationFn:function(e){return KZ.delete(e)},onSuccess:function(){e.invalidateQueries({queryKey:["return list","return"]})}}),t=g.mutate,n=g.isLoading,I=g.isSuccess,l=g.error,C=function(){var e=GA(pA().mark((function e(g){return pA().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(g);case 2:case"end":return e.stop()}}),e)})));return function(g){return e.apply(this,arguments)}}();return{deleteReturn:C,isLoading:n,isSuccess:I,err:l}},up=t(7247),dp=Kn((function(){var g=(0,e.useContext)(kB),t=g.userReturn,n=g.modal,I=MZ(),o=I.BoxInfo,l=I.span,C=I.DeleteBox,r=sp(),a=r.deleteReturn,i=r.err,c=t.currentReturn.id,s=t.currentReturn.reason,u=t.currentReturn.userName,d=t.currentReturn.country,A=t.currentReturn.address,m=t.currentReturn.postalCode;return console.log(t.currentReturn.address),i?(0,Yo.jsx)(al,{children:i.message}):(0,Yo.jsxs)(Yo.Fragment,{children:[(0,Yo.jsx)(cp,{id:Number(c)}),(0,Yo.jsx)(Yo.Fragment,{children:u?(0,Yo.jsxs)(tl,{children:[(0,Yo.jsxs)(tl,{className:o,children:[(0,Yo.jsxs)(al,{variant:"h5",sx:{fontWeight:500,letterSpacing:"0.08rem"},children:["\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430:",(0,Yo.jsx)("span",{className:l,children:s})]}),(0,Yo.jsx)(tl,{children:(0,Yo.jsxs)(al,{variant:"h6",children:["\u0424\u0418\u041e: ",(0,Yo.jsx)("span",{className:l,children:u})]})}),(0,Yo.jsx)(tl,{children:(0,Yo.jsxs)(al,{variant:"h6",children:["\u0421\u0442\u0440\u0430\u043d\u0430: ",(0,Yo.jsx)("span",{className:l,children:d})]})}),(0,Yo.jsx)(tl,{children:(0,Yo.jsxs)(al,{variant:"h6",children:["\u0410\u0434\u0440\u0435\u0441\u0441: ",(0,Yo.jsx)("span",{className:l,children:A})]})}),(0,Yo.jsx)(tl,{children:(0,Yo.jsxs)(al,{variant:"h6",children:["\u041f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u0434: ",(0,Yo.jsx)("span",{className:l,children:m})]})}),(0,Yo.jsxs)(tl,{children:[(0,Yo.jsx)(al,{variant:"h6",children:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430:"}),(0,Yo.jsx)(tl,{component:"img",sx:{height:500,width:350,maxHeight:{xs:400,sm:500},maxWidth:{xs:290,sm:350}},alt:"returns product",src:lb+t.currentReturn.image})]})]}),(0,Yo.jsxs)(tl,{sx:{mt:2},children:[(0,Yo.jsx)($b,{sx:{mr:3},variant:"contained",onClick:function(){return n.setIsOpen(!0)},children:"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c QR-\u043a\u043e\u0434"}),(0,Yo.jsx)($b,{variant:"outlined",color:"error",onClick:function(){t.setReturn({}),a(c)},children:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"})]})]}):(0,Yo.jsxs)(tl,{className:C,children:[(0,Yo.jsx)(up.Z,{sx:{fontSize:100}}),(0,Yo.jsx)(al,{variant:"h6",children:"\u0432\u043e\u0437\u0432\u0440\u0430\u0442 \u0431\u044b\u043b \u0443\u0434\u0430\u043b\u0451\u043d"})]})})]})})),Ap=t(1184);var mp=e.createContext();function bp(e){return(0,Vo.Z)("MuiGrid",e)}var Zp=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],pp=(0,nl.Z)("MuiGrid",["root","container","item","zeroMinWidth"].concat((0,lI.Z)([0,1,2,3,4,5,6,7,8,9,10].map((function(e){return"spacing-xs-".concat(e)}))),(0,lI.Z)(["column-reverse","column","row-reverse","row"].map((function(e){return"direction-xs-".concat(e)}))),(0,lI.Z)(["nowrap","wrap-reverse","wrap"].map((function(e){return"wrap-xs-".concat(e)}))),(0,lI.Z)(Zp.map((function(e){return"grid-xs-".concat(e)}))),(0,lI.Z)(Zp.map((function(e){return"grid-sm-".concat(e)}))),(0,lI.Z)(Zp.map((function(e){return"grid-md-".concat(e)}))),(0,lI.Z)(Zp.map((function(e){return"grid-lg-".concat(e)}))),(0,lI.Z)(Zp.map((function(e){return"grid-xl-".concat(e)}))))),hp=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Gp(e){var g=parseFloat(e);return"".concat(g).concat(String(e).replace(String(g),"")||"px")}function yp(e){var g=e.breakpoints,t=e.values,n="";Object.keys(t).forEach((function(e){""===n&&0!==t[e]&&(n=e)}));var I=Object.keys(g).sort((function(e,t){return g[e]-g[t]}));return I.slice(0,I.indexOf(n))}var Bp=(0,zo.ZP)("div",{name:"MuiGrid",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState,n=t.container,I=t.direction,o=t.item,l=t.spacing,C=t.wrap,r=t.zeroMinWidth,a=t.breakpoints,i=[];n&&(i=function(e,g){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[t["spacing-xs-".concat(String(e))]];var n=[];return g.forEach((function(g){var I=e[g];Number(I)>0&&n.push(t["spacing-".concat(g,"-").concat(String(I))])})),n}(l,a,g));var c=[];return a.forEach((function(e){var n=t[e];n&&c.push(g["grid-".concat(e,"-").concat(String(n))])})),[g.root,n&&g.container,o&&g.item,r&&g.zeroMinWidth].concat((0,lI.Z)(i),["row"!==I&&g["direction-xs-".concat(String(I))],"wrap"!==C&&g["wrap-xs-".concat(String(C))]],c)}})((function(e){var g=e.ownerState;return(0,vo.Z)({boxSizing:"border-box"},g.container&&{display:"flex",flexWrap:"wrap",width:"100%"},g.item&&{margin:0},g.zeroMinWidth&&{minWidth:0},"wrap"!==g.wrap&&{flexWrap:g.wrap})}),(function(e){var g=e.theme,t=e.ownerState,n=(0,Ap.P$)({values:t.direction,breakpoints:g.breakpoints.values});return(0,Ap.k9)({theme:g},n,(function(e){var g={flexDirection:e};return 0===e.indexOf("column")&&(g["& > .".concat(pp.item)]={maxWidth:"none"}),g}))}),(function(e){var g=e.theme,t=e.ownerState,n=t.container,I=t.rowSpacing,o={};if(n&&0!==I){var l,C=(0,Ap.P$)({values:I,breakpoints:g.breakpoints.values});"object"===typeof C&&(l=yp({breakpoints:g.breakpoints.values,values:C})),o=(0,Ap.k9)({theme:g},C,(function(e,t){var n,I=g.spacing(e);return"0px"!==I?(0,Bo.Z)({marginTop:"-".concat(Gp(I))},"& > .".concat(pp.item),{paddingTop:Gp(I)}):null!=(n=l)&&n.includes(t)?{}:(0,Bo.Z)({marginTop:0},"& > .".concat(pp.item),{paddingTop:0})}))}return o}),(function(e){var g=e.theme,t=e.ownerState,n=t.container,I=t.columnSpacing,o={};if(n&&0!==I){var l,C=(0,Ap.P$)({values:I,breakpoints:g.breakpoints.values});"object"===typeof C&&(l=yp({breakpoints:g.breakpoints.values,values:C})),o=(0,Ap.k9)({theme:g},C,(function(e,t){var n,I=g.spacing(e);return"0px"!==I?(0,Bo.Z)({width:"calc(100% + ".concat(Gp(I),")"),marginLeft:"-".concat(Gp(I))},"& > .".concat(pp.item),{paddingLeft:Gp(I)}):null!=(n=l)&&n.includes(t)?{}:(0,Bo.Z)({width:"100%",marginLeft:0},"& > .".concat(pp.item),{paddingLeft:0})}))}return o}),(function(e){var g,t=e.theme,n=e.ownerState;return t.breakpoints.keys.reduce((function(e,I){var o={};if(n[I]&&(g=n[I]),!g)return e;if(!0===g)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===g)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{var l=(0,Ap.P$)({values:n.columns,breakpoints:t.breakpoints.values}),C="object"===typeof l?l[I]:l;if(void 0===C||null===C)return e;var r="".concat(Math.round(g/C*1e8)/1e6,"%"),a={};if(n.container&&n.item&&0!==n.columnSpacing){var i=t.spacing(n.columnSpacing);if("0px"!==i){var c="calc(".concat(r," + ").concat(Gp(i),")");a={flexBasis:c,maxWidth:c}}}o=(0,vo.Z)({flexBasis:r,flexGrow:0,maxWidth:r},a)}return 0===t.breakpoints.values[I]?Object.assign(e,o):e[t.breakpoints.up(I)]=o,e}),{})}));var fp=function(e){var g=e.classes,t=e.container,n=e.direction,I=e.item,o=e.spacing,l=e.wrap,C=e.zeroMinWidth,r=e.breakpoints,a=[];t&&(a=function(e,g){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return["spacing-xs-".concat(String(e))];var t=[];return g.forEach((function(g){var n=e[g];if(Number(n)>0){var I="spacing-".concat(g,"-").concat(String(n));t.push(I)}})),t}(o,r));var i=[];r.forEach((function(g){var t=e[g];t&&i.push("grid-".concat(g,"-").concat(String(t)))}));var c={root:["root",t&&"container",I&&"item",C&&"zeroMinWidth"].concat((0,lI.Z)(a),["row"!==n&&"direction-xs-".concat(String(n)),"wrap"!==l&&"wrap-xs-".concat(String(l))],i)};return(0,Ro.Z)(c,bp,g)},vp=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiGrid"}),I=kc().breakpoints,o=Oo(n),l=o.className,C=o.columns,r=o.columnSpacing,a=o.component,i=void 0===a?"div":a,c=o.container,s=void 0!==c&&c,u=o.direction,d=void 0===u?"row":u,A=o.item,m=void 0!==A&&A,b=o.rowSpacing,Z=o.spacing,p=void 0===Z?0:Z,h=o.wrap,G=void 0===h?"wrap":h,y=o.zeroMinWidth,B=void 0!==y&&y,f=(0,fo.Z)(o,hp),v=b||p,S=r||p,W=e.useContext(mp),V=s?C||12:W,R={},X=(0,vo.Z)({},f);I.keys.forEach((function(e){null!=f[e]&&(R[e]=f[e],delete X[e])}));var k=(0,vo.Z)({},o,{columns:V,container:s,direction:d,item:m,rowSpacing:v,columnSpacing:S,wrap:G,zeroMinWidth:B,spacing:p},R,{breakpoints:I.keys}),J=fp(k);return(0,Yo.jsx)(mp.Provider,{value:V,children:(0,Yo.jsx)(Bp,(0,vo.Z)({ownerState:k,className:(0,So.Z)(J.root,l),as:i,ref:t},X))})})),Sp=vp,Wp=function(){var g=(0,e.useContext)(kB).user;return(0,Yo.jsxs)(tl,{children:[(0,Yo.jsxs)(al,{variant:"h6",children:["\u0424\u0418\u041e: ",(0,Yo.jsx)("span",{children:g.user.name})]}),(0,Yo.jsxs)(al,{variant:"h6",children:["Email: ",(0,Yo.jsx)("span",{children:g.user.email})]})]})},Vp=Kn((function(){var g=(0,e.useContext)(kB).profile;return(0,Yo.jsx)(Uo,{maxWidth:"xl",children:(0,Yo.jsxs)(Sp,{container:!0,item:!0,xs:12,sm:12,pt:3,children:[(0,Yo.jsx)(Sp,{item:!0,xs:12,sm:4,sx:{mr:{xs:0,sm:2,sx:4}},children:(0,Yo.jsx)(EZ,{})}),(0,Yo.jsx)(Sp,{item:!0,xs:12,sm:7,children:g.isOpen?(0,Yo.jsx)(Wp,{}):(0,Yo.jsx)(dp,{})})]})})}));function Rp(e){return(0,Vo.Z)("MuiStepper",e)}(0,nl.Z)("MuiStepper",["root","horizontal","vertical","alternativeLabel"]);var Xp=e.createContext({});var kp=Xp,Jp=e.createContext({});var Yp=Jp;function Hp(e){return(0,Vo.Z)("MuiStepConnector",e)}(0,nl.Z)("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);var wp=["className"],Np=(0,zo.ZP)("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,g[t.orientation],t.alternativeLabel&&g.alternativeLabel,t.completed&&g.completed]}})((function(e){var g=e.ownerState;return(0,vo.Z)({flex:"1 1 auto"},"vertical"===g.orientation&&{marginLeft:12},g.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})})),Fp=(0,zo.ZP)("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:function(e,g){var t=e.ownerState;return[g.line,g["line".concat((0,xo.Z)(t.orientation))]]}})((function(e){var g=e.ownerState,t=e.theme,n="light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600];return(0,vo.Z)({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:n},"horizontal"===g.orientation&&{borderTopStyle:"solid",borderTopWidth:1},"vertical"===g.orientation&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})})),Kp=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiStepConnector"}),I=n.className,o=(0,fo.Z)(n,wp),l=e.useContext(kp),C=l.alternativeLabel,r=l.orientation,a=void 0===r?"horizontal":r,i=e.useContext(Yp),c=i.active,s=i.disabled,u=i.completed,d=(0,vo.Z)({},n,{alternativeLabel:C,orientation:a,active:c,completed:u,disabled:s}),A=function(e){var g=e.classes,t=e.orientation,n={root:["root",t,e.alternativeLabel&&"alternativeLabel",e.active&&"active",e.completed&&"completed",e.disabled&&"disabled"],line:["line","line".concat((0,xo.Z)(t))]};return(0,Ro.Z)(n,Hp,g)}(d);return(0,Yo.jsx)(Np,(0,vo.Z)({className:(0,So.Z)(A.root,I),ref:t,ownerState:d},o,{children:(0,Yo.jsx)(Fp,{className:A.line,ownerState:d})}))})),xp=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],zp=(0,zo.ZP)("div",{name:"MuiStepper",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,g[t.orientation],t.alternativeLabel&&g.alternativeLabel]}})((function(e){var g=e.ownerState;return(0,vo.Z)({display:"flex"},"horizontal"===g.orientation&&{flexDirection:"row",alignItems:"center"},"vertical"===g.orientation&&{flexDirection:"column"},g.alternativeLabel&&{alignItems:"flex-start"})})),Ep=(0,Yo.jsx)(Kp,{}),Mp=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiStepper"}),I=n.activeStep,o=void 0===I?0:I,l=n.alternativeLabel,C=void 0!==l&&l,r=n.children,a=n.className,i=n.component,c=void 0===i?"div":i,s=n.connector,u=void 0===s?Ep:s,d=n.nonLinear,A=void 0!==d&&d,m=n.orientation,b=void 0===m?"horizontal":m,Z=(0,fo.Z)(n,xp),p=(0,vo.Z)({},n,{alternativeLabel:C,orientation:b,component:c}),h=function(e){var g=e.orientation,t=e.alternativeLabel,n=e.classes,I={root:["root",g,t&&"alternativeLabel"]};return(0,Ro.Z)(I,Rp,n)}(p),G=e.Children.toArray(r).filter(Boolean),y=G.map((function(g,t){return e.cloneElement(g,(0,vo.Z)({index:t,last:t+1===G.length},g.props))})),B=e.useMemo((function(){return{activeStep:o,alternativeLabel:C,connector:u,nonLinear:A,orientation:b}}),[o,C,u,A,b]);return(0,Yo.jsx)(kp.Provider,{value:B,children:(0,Yo.jsx)(zp,(0,vo.Z)({as:c,ownerState:p,className:(0,So.Z)(h.root,a),ref:t},Z,{children:y}))})})),Up=Mp;function Qp(e){return(0,Vo.Z)("MuiStep",e)}(0,nl.Z)("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);var Lp=["active","children","className","component","completed","disabled","expanded","index","last"],Tp=(0,zo.ZP)("div",{name:"MuiStep",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,g[t.orientation],t.alternativeLabel&&g.alternativeLabel,t.completed&&g.completed]}})((function(e){var g=e.ownerState;return(0,vo.Z)({},"horizontal"===g.orientation&&{paddingLeft:8,paddingRight:8},g.alternativeLabel&&{flex:1,position:"relative"})})),Dp=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiStep"}),I=n.active,o=n.children,l=n.className,C=n.component,r=void 0===C?"div":C,a=n.completed,i=n.disabled,c=n.expanded,s=void 0!==c&&c,u=n.index,d=n.last,A=(0,fo.Z)(n,Lp),m=e.useContext(kp),b=m.activeStep,Z=m.connector,p=m.alternativeLabel,h=m.orientation,G=m.nonLinear,y=void 0!==I&&I,B=void 0!==a&&a,f=void 0!==i&&i;b===u?y=void 0===I||I:!G&&b>u?B=void 0===a||a:!G&&b<u&&(f=void 0===i||i);var v=e.useMemo((function(){return{index:u,last:d,expanded:s,icon:u+1,active:y,completed:B,disabled:f}}),[u,d,s,y,B,f]),S=(0,vo.Z)({},n,{active:y,orientation:h,alternativeLabel:p,completed:B,disabled:f,expanded:s,component:r}),W=function(e){var g=e.classes,t={root:["root",e.orientation,e.alternativeLabel&&"alternativeLabel",e.completed&&"completed"]};return(0,Ro.Z)(t,Qp,g)}(S),V=(0,Yo.jsxs)(Tp,(0,vo.Z)({as:r,className:(0,So.Z)(W.root,l),ref:t,ownerState:S},A,{children:[Z&&p&&0!==u?Z:null,o]}));return(0,Yo.jsx)(Yp.Provider,{value:v,children:Z&&!p&&0!==u?(0,Yo.jsxs)(e.Fragment,{children:[Z,V]}):V})})),jp=Dp,Pp=(0,iA.Z)((0,Yo.jsx)("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Op=(0,iA.Z)((0,Yo.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning"),qp=t(9259);function _p(e){return(0,Vo.Z)("MuiStepIcon",e)}var $p,eh=(0,nl.Z)("MuiStepIcon",["root","active","completed","error","text"]),gh=["active","className","completed","error","icon"],th=(0,zo.ZP)(qp.Z,{name:"MuiStepIcon",slot:"Root",overridesResolver:function(e,g){return g.root}})((function(e){var g,t=e.theme;return g={display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),color:(t.vars||t).palette.text.disabled},(0,Bo.Z)(g,"&.".concat(eh.completed),{color:(t.vars||t).palette.primary.main}),(0,Bo.Z)(g,"&.".concat(eh.active),{color:(t.vars||t).palette.primary.main}),(0,Bo.Z)(g,"&.".concat(eh.error),{color:(t.vars||t).palette.error.main}),g})),nh=(0,zo.ZP)("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:function(e,g){return g.text}})((function(e){var g=e.theme;return{fill:(g.vars||g).palette.primary.contrastText,fontSize:g.typography.caption.fontSize,fontFamily:g.typography.fontFamily}})),Ih=e.forwardRef((function(e,g){var t=(0,Eo.Z)({props:e,name:"MuiStepIcon"}),n=t.active,I=void 0!==n&&n,o=t.className,l=t.completed,C=void 0!==l&&l,r=t.error,a=void 0!==r&&r,i=t.icon,c=(0,fo.Z)(t,gh),s=(0,vo.Z)({},t,{active:I,completed:C,error:a}),u=function(e){var g=e.classes,t={root:["root",e.active&&"active",e.completed&&"completed",e.error&&"error"],text:["text"]};return(0,Ro.Z)(t,_p,g)}(s);if("number"===typeof i||"string"===typeof i){var d=(0,So.Z)(o,u.root);return a?(0,Yo.jsx)(th,(0,vo.Z)({as:Op,className:d,ref:g,ownerState:s},c)):C?(0,Yo.jsx)(th,(0,vo.Z)({as:Pp,className:d,ref:g,ownerState:s},c)):(0,Yo.jsxs)(th,(0,vo.Z)({className:d,ref:g,ownerState:s},c,{children:[$p||($p=(0,Yo.jsx)("circle",{cx:"12",cy:"12",r:"12"})),(0,Yo.jsx)(nh,{className:u.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:s,children:i})]}))}return i}));function oh(e){return(0,Vo.Z)("MuiStepLabel",e)}var lh=(0,nl.Z)("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),Ch=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],rh=(0,zo.ZP)("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,g[t.orientation]]}})((function(e){var g,t=e.ownerState;return(0,vo.Z)((g={display:"flex",alignItems:"center"},(0,Bo.Z)(g,"&.".concat(lh.alternativeLabel),{flexDirection:"column"}),(0,Bo.Z)(g,"&.".concat(lh.disabled),{cursor:"default"}),g),"vertical"===t.orientation&&{textAlign:"left",padding:"8px 0"})})),ah=(0,zo.ZP)("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:function(e,g){return g.label}})((function(e){var g,t=e.theme;return(0,vo.Z)({},t.typography.body2,(g={display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest})},(0,Bo.Z)(g,"&.".concat(lh.active),{color:(t.vars||t).palette.text.primary,fontWeight:500}),(0,Bo.Z)(g,"&.".concat(lh.completed),{color:(t.vars||t).palette.text.primary,fontWeight:500}),(0,Bo.Z)(g,"&.".concat(lh.alternativeLabel),{marginTop:16}),(0,Bo.Z)(g,"&.".concat(lh.error),{color:(t.vars||t).palette.error.main}),g))})),ih=(0,zo.ZP)("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:function(e,g){return g.iconContainer}})((function(){return(0,Bo.Z)({flexShrink:0,display:"flex",paddingRight:8},"&.".concat(lh.alternativeLabel),{paddingRight:0})})),ch=(0,zo.ZP)("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:function(e,g){return g.labelContainer}})((function(e){var g=e.theme;return(0,Bo.Z)({width:"100%",color:(g.vars||g).palette.text.secondary},"&.".concat(lh.alternativeLabel),{textAlign:"center"})})),sh=e.forwardRef((function(g,t){var n,I=(0,Eo.Z)({props:g,name:"MuiStepLabel"}),o=I.children,l=I.className,C=I.componentsProps,r=void 0===C?{}:C,a=I.error,i=void 0!==a&&a,c=I.icon,s=I.optional,u=I.slotProps,d=void 0===u?{}:u,A=I.StepIconComponent,m=I.StepIconProps,b=(0,fo.Z)(I,Ch),Z=e.useContext(kp),p=Z.alternativeLabel,h=Z.orientation,G=e.useContext(Yp),y=G.active,B=G.disabled,f=G.completed,v=G.icon,S=c||v,W=A;S&&!W&&(W=Ih);var V=(0,vo.Z)({},I,{active:y,alternativeLabel:p,completed:f,disabled:B,error:i,orientation:h}),R=function(e){var g=e.classes,t=e.orientation,n=e.active,I=e.completed,o=e.error,l=e.disabled,C=e.alternativeLabel,r={root:["root",t,o&&"error",l&&"disabled",C&&"alternativeLabel"],label:["label",n&&"active",I&&"completed",o&&"error",l&&"disabled",C&&"alternativeLabel"],iconContainer:["iconContainer",n&&"active",I&&"completed",o&&"error",l&&"disabled",C&&"alternativeLabel"],labelContainer:["labelContainer",C&&"alternativeLabel"]};return(0,Ro.Z)(r,oh,g)}(V),X=null!=(n=d.label)?n:r.label;return(0,Yo.jsxs)(rh,(0,vo.Z)({className:(0,So.Z)(R.root,l),ref:t,ownerState:V},b,{children:[S||W?(0,Yo.jsx)(ih,{className:R.iconContainer,ownerState:V,children:(0,Yo.jsx)(W,(0,vo.Z)({completed:f,active:y,error:i,icon:S},m))}):null,(0,Yo.jsxs)(ch,{className:R.labelContainer,ownerState:V,children:[o?(0,Yo.jsx)(ah,(0,vo.Z)({ownerState:V},X,{className:(0,So.Z)(R.label,null==X?void 0:X.className),children:o})):null,s]})]}))}));sh.muiName="StepLabel";var uh=sh,dh=t(6248),Ah=t(6189),mh=t(3981),bh=["onChange","maxRows","minRows","style","value"];function Zh(e,g){return parseInt(e[g],10)||0}var ph={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function hh(e){return void 0===e||null===e||0===Object.keys(e).length}var Gh=e.forwardRef((function(g,t){var n=g.onChange,I=g.maxRows,o=g.minRows,l=void 0===o?1:o,C=g.style,r=g.value,a=(0,fo.Z)(g,bh),i=e.useRef(null!=r).current,c=e.useRef(null),s=(0,zc.Z)(t,c),u=e.useRef(null),d=e.useRef(0),A=e.useState({}),m=(0,qn.Z)(A,2),b=m[0],Z=m[1],p=e.useCallback((function(){var e=c.current,t=(0,Dc.Z)(e).getComputedStyle(e);if("0px"===t.width)return{};var n=u.current;n.style.width=t.width,n.value=e.value||g.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");var o=t["box-sizing"],C=Zh(t,"padding-bottom")+Zh(t,"padding-top"),r=Zh(t,"border-bottom-width")+Zh(t,"border-top-width"),a=n.scrollHeight;n.value="x";var i=n.scrollHeight,s=a;return l&&(s=Math.max(Number(l)*i,s)),I&&(s=Math.min(Number(I)*i,s)),{outerHeightStyle:(s=Math.max(s,i))+("border-box"===o?C+r:0),overflow:Math.abs(s-a)<=1}}),[I,l,g.placeholder]),h=function(e,g){var t=g.outerHeightStyle,n=g.overflow;return d.current<20&&(t>0&&Math.abs((e.outerHeightStyle||0)-t)>1||e.overflow!==n)?(d.current+=1,{overflow:n,outerHeightStyle:t}):e},G=e.useCallback((function(){var e=p();hh(e)||Z((function(g){return h(g,e)}))}),[p]);e.useEffect((function(){var e,g=(0,mh.Z)((function(){d.current=0,c.current&&function(){var e=p();hh(e)||(0,bn.flushSync)((function(){Z((function(g){return h(g,e)}))}))}()})),t=(0,Dc.Z)(c.current);return t.addEventListener("resize",g),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(g)).observe(c.current),function(){g.clear(),t.removeEventListener("resize",g),e&&e.disconnect()}})),(0,Qc.Z)((function(){G()})),e.useEffect((function(){d.current=0}),[r]);return(0,Yo.jsxs)(e.Fragment,{children:[(0,Yo.jsx)("textarea",(0,vo.Z)({value:r,onChange:function(e){d.current=0,i||G(),n&&n(e)},ref:s,rows:l,style:(0,vo.Z)({height:b.outerHeightStyle,overflow:b.overflow?"hidden":null},C)},a)),(0,Yo.jsx)("textarea",{"aria-hidden":!0,className:g.className,readOnly:!0,ref:u,tabIndex:-1,style:(0,vo.Z)({},ph,C,{padding:0})})]})})),yh=Gh;function Bh(e){var g=e.props,t=e.states,n=e.muiFormControl;return t.reduce((function(e,t){return e[t]=g[t],n&&"undefined"===typeof g[t]&&(e[t]=n[t]),e}),{})}var fh=e.createContext(void 0);function vh(){return e.useContext(fh)}function Sh(e){var g=e.styles,t=e.defaultTheme,n=void 0===t?{}:t,I="function"===typeof g?function(e){return g(void 0===(t=e)||null===t||0===Object.keys(t).length?n:e);var t}:g;return(0,Yo.jsx)(Ml,{styles:I})}var Wh=function(e){return(0,Yo.jsx)(Sh,(0,vo.Z)({},e,{defaultTheme:Xc.Z}))};function Vh(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function Rh(e){var g=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Vh(e.value)&&""!==e.value||g&&Vh(e.defaultValue)&&""!==e.defaultValue)}function Xh(e){return(0,Vo.Z)("MuiInputBase",e)}var kh=(0,nl.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Jh=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Yh=function(e,g){var t=e.ownerState;return[g.root,t.formControl&&g.formControl,t.startAdornment&&g.adornedStart,t.endAdornment&&g.adornedEnd,t.error&&g.error,"small"===t.size&&g.sizeSmall,t.multiline&&g.multiline,t.color&&g["color".concat((0,xo.Z)(t.color))],t.fullWidth&&g.fullWidth,t.hiddenLabel&&g.hiddenLabel]},Hh=function(e,g){var t=e.ownerState;return[g.input,"small"===t.size&&g.inputSizeSmall,t.multiline&&g.inputMultiline,"search"===t.type&&g.inputTypeSearch,t.startAdornment&&g.inputAdornedStart,t.endAdornment&&g.inputAdornedEnd,t.hiddenLabel&&g.inputHiddenLabel]},wh=(0,zo.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Yh})((function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)({},g.typography.body1,(0,Bo.Z)({color:(g.vars||g).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat(kh.disabled),{color:(g.vars||g).palette.text.disabled,cursor:"default"}),t.multiline&&(0,vo.Z)({padding:"4px 0 5px"},"small"===t.size&&{paddingTop:1}),t.fullWidth&&{width:"100%"})})),Nh=(0,zo.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Hh})((function(e){var g,t=e.theme,n=e.ownerState,I="light"===t.palette.mode,o=(0,vo.Z)({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:I?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),l={opacity:"0 !important"},C=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:I?.42:.5};return(0,vo.Z)((g={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},(0,Bo.Z)(g,"label[data-shrink=false] + .".concat(kh.formControl," &"),{"&::-webkit-input-placeholder":l,"&::-moz-placeholder":l,"&:-ms-input-placeholder":l,"&::-ms-input-placeholder":l,"&:focus::-webkit-input-placeholder":C,"&:focus::-moz-placeholder":C,"&:focus:-ms-input-placeholder":C,"&:focus::-ms-input-placeholder":C}),(0,Bo.Z)(g,"&.".concat(kh.disabled),{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled}),(0,Bo.Z)(g,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),g),"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),Fh=(0,Yo.jsx)(Wh,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Kh=e.forwardRef((function(g,t){var n,I=(0,Eo.Z)({props:g,name:"MuiInputBase"}),o=I["aria-describedby"],l=I.autoComplete,C=I.autoFocus,r=I.className,a=I.components,i=void 0===a?{}:a,c=I.componentsProps,s=void 0===c?{}:c,u=I.defaultValue,d=I.disabled,A=I.disableInjectingGlobalStyles,m=I.endAdornment,b=I.fullWidth,Z=void 0!==b&&b,p=I.id,h=I.inputComponent,G=void 0===h?"input":h,y=I.inputProps,B=void 0===y?{}:y,f=I.inputRef,v=I.maxRows,S=I.minRows,W=I.multiline,V=void 0!==W&&W,R=I.name,X=I.onBlur,k=I.onChange,J=I.onClick,Y=I.onFocus,H=I.onKeyDown,w=I.onKeyUp,N=I.placeholder,F=I.readOnly,K=I.renderSuffix,x=I.rows,z=I.slotProps,E=void 0===z?{}:z,M=I.slots,U=void 0===M?{}:M,Q=I.startAdornment,L=I.type,T=void 0===L?"text":L,D=I.value,j=(0,fo.Z)(I,Jh),P=null!=B.value?B.value:D,O=e.useRef(null!=P).current,q=e.useRef(),_=e.useCallback((function(e){0}),[]),$=(0,cl.Z)(q,f,B.ref,_),ee=e.useState(!1),ge=(0,qn.Z)(ee,2),te=ge[0],ne=ge[1],Ie=vh();var oe=Bh({props:I,muiFormControl:Ie,states:["color","disabled","error","hiddenLabel","size","required","filled"]});oe.focused=Ie?Ie.focused:te,e.useEffect((function(){!Ie&&d&&te&&(ne(!1),X&&X())}),[Ie,d,te,X]);var le=Ie&&Ie.onFilled,Ce=Ie&&Ie.onEmpty,re=e.useCallback((function(e){Rh(e)?le&&le():Ce&&Ce()}),[le,Ce]);(0,ZC.Z)((function(){O&&re({value:P})}),[P,re,O]);e.useEffect((function(){re(q.current)}),[]);var ae=G,ie=B;V&&"input"===ae&&(ie=x?(0,vo.Z)({type:void 0,minRows:x,maxRows:x},ie):(0,vo.Z)({type:void 0,maxRows:v,minRows:S},ie),ae=yh);e.useEffect((function(){Ie&&Ie.setAdornedStart(Boolean(Q))}),[Ie,Q]);var ce=(0,vo.Z)({},I,{color:oe.color||"primary",disabled:oe.disabled,endAdornment:m,error:oe.error,focused:oe.focused,formControl:Ie,fullWidth:Z,hiddenLabel:oe.hiddenLabel,multiline:V,size:oe.size,startAdornment:Q,type:T}),se=function(e){var g=e.classes,t=e.color,n=e.disabled,I=e.error,o=e.endAdornment,l=e.focused,C=e.formControl,r=e.fullWidth,a=e.hiddenLabel,i=e.multiline,c=e.readOnly,s=e.size,u=e.startAdornment,d=e.type,A={root:["root","color".concat((0,xo.Z)(t)),n&&"disabled",I&&"error",r&&"fullWidth",l&&"focused",C&&"formControl","small"===s&&"sizeSmall",i&&"multiline",u&&"adornedStart",o&&"adornedEnd",a&&"hiddenLabel",c&&"readOnly"],input:["input",n&&"disabled","search"===d&&"inputTypeSearch",i&&"inputMultiline","small"===s&&"inputSizeSmall",a&&"inputHiddenLabel",u&&"inputAdornedStart",o&&"inputAdornedEnd",c&&"readOnly"]};return(0,Ro.Z)(A,Xh,g)}(ce),ue=U.root||i.Root||wh,de=E.root||s.root||{},Ae=U.input||i.Input||Nh;return ie=(0,vo.Z)({},ie,null!=(n=E.input)?n:s.input),(0,Yo.jsxs)(e.Fragment,{children:[!A&&Fh,(0,Yo.jsxs)(ue,(0,vo.Z)({},de,!Wl(ue)&&{ownerState:(0,vo.Z)({},ce,de.ownerState)},{ref:t,onClick:function(e){q.current&&e.currentTarget===e.target&&q.current.focus(),J&&J(e)}},j,{className:(0,So.Z)(se.root,de.className,r),children:[Q,(0,Yo.jsx)(fh.Provider,{value:null,children:(0,Yo.jsx)(Ae,(0,vo.Z)({ownerState:ce,"aria-invalid":oe.error,"aria-describedby":o,autoComplete:l,autoFocus:C,defaultValue:u,disabled:oe.disabled,id:p,onAnimationStart:function(e){re("mui-auto-fill-cancel"===e.animationName?q.current:{value:"x"})},name:R,placeholder:N,readOnly:F,required:oe.required,rows:x,value:P,onKeyDown:H,onKeyUp:w,type:T},ie,!Wl(Ae)&&{as:ae,ownerState:(0,vo.Z)({},ce,ie.ownerState)},{ref:$,className:(0,So.Z)(se.input,ie.className),onBlur:function(e){X&&X(e),B.onBlur&&B.onBlur(e),Ie&&Ie.onBlur?Ie.onBlur(e):ne(!1)},onChange:function(e){if(!O){var g=e.target||q.current;if(null==g)throw new Error((0,Ah.Z)(1));re({value:g.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),I=1;I<t;I++)n[I-1]=arguments[I];B.onChange&&B.onChange.apply(B,[e].concat(n)),k&&k.apply(void 0,[e].concat(n))},onFocus:function(e){oe.disabled?e.stopPropagation():(Y&&Y(e),B.onFocus&&B.onFocus(e),Ie&&Ie.onFocus?Ie.onFocus(e):ne(!0))}}))}),m,K?K((0,vo.Z)({},oe,{startAdornment:Q})):null]}))]})})),xh=Kh;function zh(e){return(0,Vo.Z)("MuiInput",e)}var Eh=(0,vo.Z)({},kh,(0,nl.Z)("MuiInput",["root","underline","input"])),Mh=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Uh=(0,zo.ZP)(wh,{shouldForwardProp:function(e){return(0,zo.FO)(e)||"classes"===e},name:"MuiInput",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[].concat((0,lI.Z)(Yh(e,g)),[!t.disableUnderline&&g.underline])}})((function(e){var g,t=e.theme,n=e.ownerState,I="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(I="rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")")),(0,vo.Z)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&(g={"&:after":{borderBottom:"2px solid ".concat((t.vars||t).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"}},(0,Bo.Z)(g,"&.".concat(Eh.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,Bo.Z)(g,"&.".concat(Eh.error),{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}}),(0,Bo.Z)(g,"&:before",{borderBottom:"1px solid ".concat(I),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"}),(0,Bo.Z)(g,"&:hover:not(.".concat(Eh.disabled,", .").concat(Eh.error,"):before"),{borderBottom:"2px solid ".concat((t.vars||t).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(I)}}),(0,Bo.Z)(g,"&.".concat(Eh.disabled,":before"),{borderBottomStyle:"dotted"}),g))})),Qh=(0,zo.ZP)(Nh,{name:"MuiInput",slot:"Input",overridesResolver:Hh})({}),Lh=e.forwardRef((function(e,g){var t,n,I,o,l=(0,Eo.Z)({props:e,name:"MuiInput"}),C=l.disableUnderline,r=l.components,a=void 0===r?{}:r,i=l.componentsProps,c=l.fullWidth,s=void 0!==c&&c,u=l.inputComponent,d=void 0===u?"input":u,A=l.multiline,m=void 0!==A&&A,b=l.slotProps,Z=l.slots,p=void 0===Z?{}:Z,h=l.type,G=void 0===h?"text":h,y=(0,fo.Z)(l,Mh),B=function(e){var g=e.classes,t={root:["root",!e.disableUnderline&&"underline"],input:["input"]},n=(0,Ro.Z)(t,zh,g);return(0,vo.Z)({},g,n)}(l),f={root:{ownerState:{disableUnderline:C}}},v=(null!=b?b:i)?(0,To.Z)(null!=b?b:i,f):f,S=null!=(t=null!=(n=p.root)?n:a.Root)?t:Uh,W=null!=(I=null!=(o=p.input)?o:a.Input)?I:Qh;return(0,Yo.jsx)(xh,(0,vo.Z)({slots:{root:S,input:W},slotProps:v,fullWidth:s,inputComponent:d,multiline:m,ref:g,type:G},y,{classes:B}))}));Lh.muiName="Input";var Th=Lh;function Dh(e){return(0,Vo.Z)("MuiFilledInput",e)}var jh=(0,vo.Z)({},kh,(0,nl.Z)("MuiFilledInput",["root","underline","input"])),Ph=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Oh=(0,zo.ZP)(wh,{shouldForwardProp:function(e){return(0,zo.FO)(e)||"classes"===e},name:"MuiFilledInput",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[].concat((0,lI.Z)(Yh(e,g)),[!t.disableUnderline&&g.underline])}})((function(e){var g,t,n,I=e.theme,o=e.ownerState,l="light"===I.palette.mode,C=l?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=l?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=l?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",i=l?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,vo.Z)((g={position:"relative",backgroundColor:I.vars?I.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(I.vars||I).shape.borderRadius,borderTopRightRadius:(I.vars||I).shape.borderRadius,transition:I.transitions.create("background-color",{duration:I.transitions.duration.shorter,easing:I.transitions.easing.easeOut}),"&:hover":{backgroundColor:I.vars?I.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:I.vars?I.vars.palette.FilledInput.bg:r}}},(0,Bo.Z)(g,"&.".concat(jh.focused),{backgroundColor:I.vars?I.vars.palette.FilledInput.bg:r}),(0,Bo.Z)(g,"&.".concat(jh.disabled),{backgroundColor:I.vars?I.vars.palette.FilledInput.disabledBg:i}),g),!o.disableUnderline&&(t={"&:after":{borderBottom:"2px solid ".concat(null==(n=(I.vars||I).palette[o.color||"primary"])?void 0:n.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:I.transitions.create("transform",{duration:I.transitions.duration.shorter,easing:I.transitions.easing.easeOut}),pointerEvents:"none"}},(0,Bo.Z)(t,"&.".concat(jh.focused,":after"),{transform:"scaleX(1) translateX(0)"}),(0,Bo.Z)(t,"&.".concat(jh.error),{"&:before, &:after":{borderBottomColor:(I.vars||I).palette.error.main}}),(0,Bo.Z)(t,"&:before",{borderBottom:"1px solid ".concat(I.vars?"rgba(".concat(I.vars.palette.common.onBackgroundChannel," / ").concat(I.vars.opacity.inputUnderline,")"):C),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:I.transitions.create("border-bottom-color",{duration:I.transitions.duration.shorter}),pointerEvents:"none"}),(0,Bo.Z)(t,"&:hover:not(.".concat(jh.disabled,", .").concat(jh.error,"):before"),{borderBottom:"1px solid ".concat((I.vars||I).palette.text.primary)}),(0,Bo.Z)(t,"&.".concat(jh.disabled,":before"),{borderBottomStyle:"dotted"}),t),o.startAdornment&&{paddingLeft:12},o.endAdornment&&{paddingRight:12},o.multiline&&(0,vo.Z)({padding:"25px 12px 8px"},"small"===o.size&&{paddingTop:21,paddingBottom:4},o.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),qh=(0,zo.ZP)(Nh,{name:"MuiFilledInput",slot:"Input",overridesResolver:Hh})((function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!g.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===g.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===g.palette.mode?null:"#fff",caretColor:"light"===g.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},g.vars&&(0,Bo.Z)({"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},g.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===t.size&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&"small"===t.size&&{paddingTop:8,paddingBottom:9})})),_h=e.forwardRef((function(e,g){var t,n,I,o,l=(0,Eo.Z)({props:e,name:"MuiFilledInput"}),C=l.components,r=void 0===C?{}:C,a=l.componentsProps,i=l.fullWidth,c=void 0!==i&&i,s=l.inputComponent,u=void 0===s?"input":s,d=l.multiline,A=void 0!==d&&d,m=l.slotProps,b=l.slots,Z=void 0===b?{}:b,p=l.type,h=void 0===p?"text":p,G=(0,fo.Z)(l,Ph),y=(0,vo.Z)({},l,{fullWidth:c,inputComponent:u,multiline:A,type:h}),B=function(e){var g=e.classes,t={root:["root",!e.disableUnderline&&"underline"],input:["input"]},n=(0,Ro.Z)(t,Dh,g);return(0,vo.Z)({},g,n)}(l),f={root:{ownerState:y},input:{ownerState:y}},v=(null!=m?m:a)?(0,To.Z)(null!=m?m:a,f):f,S=null!=(t=null!=(n=Z.root)?n:r.Root)?t:Oh,W=null!=(I=null!=(o=Z.input)?o:r.Input)?I:qh;return(0,Yo.jsx)(xh,(0,vo.Z)({slots:{root:S,input:W},componentsProps:v,fullWidth:c,inputComponent:u,multiline:A,ref:g,type:h},G,{classes:B}))}));_h.muiName="Input";var $h,eG=_h,gG=["children","classes","className","label","notched"],tG=(0,zo.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),nG=(0,zo.ZP)("legend")((function(e){var g=e.ownerState,t=e.theme;return(0,vo.Z)({float:"unset",width:"auto",overflow:"hidden"},!g.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},g.withLabel&&(0,vo.Z)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},g.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}))}));function IG(e){return(0,Vo.Z)("MuiOutlinedInput",e)}var oG=(0,vo.Z)({},kh,(0,nl.Z)("MuiOutlinedInput",["root","notchedOutline","input"])),lG=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],CG=(0,zo.ZP)(wh,{shouldForwardProp:function(e){return(0,zo.FO)(e)||"classes"===e},name:"MuiOutlinedInput",slot:"Root",overridesResolver:Yh})((function(e){var g,t=e.theme,n=e.ownerState,I="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,vo.Z)((g={position:"relative",borderRadius:(t.vars||t).shape.borderRadius},(0,Bo.Z)(g,"&:hover .".concat(oG.notchedOutline),{borderColor:(t.vars||t).palette.text.primary}),(0,Bo.Z)(g,"@media (hover: none)",(0,Bo.Z)({},"&:hover .".concat(oG.notchedOutline),{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):I})),(0,Bo.Z)(g,"&.".concat(oG.focused," .").concat(oG.notchedOutline),{borderColor:(t.vars||t).palette[n.color].main,borderWidth:2}),(0,Bo.Z)(g,"&.".concat(oG.error," .").concat(oG.notchedOutline),{borderColor:(t.vars||t).palette.error.main}),(0,Bo.Z)(g,"&.".concat(oG.disabled," .").concat(oG.notchedOutline),{borderColor:(t.vars||t).palette.action.disabled}),g),n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,vo.Z)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),rG=(0,zo.ZP)((function(e){var g=e.className,t=e.label,n=e.notched,I=(0,fo.Z)(e,gG),o=null!=t&&""!==t,l=(0,vo.Z)({},e,{notched:n,withLabel:o});return(0,Yo.jsx)(tG,(0,vo.Z)({"aria-hidden":!0,className:g,ownerState:l},I,{children:(0,Yo.jsx)(nG,{ownerState:l,children:o?(0,Yo.jsx)("span",{children:t}):$h||($h=(0,Yo.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:function(e,g){return g.notchedOutline}})((function(e){var g=e.theme,t="light"===g.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:g.vars?"rgba(".concat(g.vars.palette.common.onBackgroundChannel," / 0.23)"):t}})),aG=(0,zo.ZP)(Nh,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Hh})((function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)({padding:"16.5px 14px"},!g.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===g.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===g.palette.mode?null:"#fff",caretColor:"light"===g.palette.mode?null:"#fff",borderRadius:"inherit"}},g.vars&&(0,Bo.Z)({"&:-webkit-autofill":{borderRadius:"inherit"}},g.getColorSchemeSelector("dark"),{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}),"small"===t.size&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})})),iG=e.forwardRef((function(g,t){var n,I,o,l,C,r=(0,Eo.Z)({props:g,name:"MuiOutlinedInput"}),a=r.components,i=void 0===a?{}:a,c=r.fullWidth,s=void 0!==c&&c,u=r.inputComponent,d=void 0===u?"input":u,A=r.label,m=r.multiline,b=void 0!==m&&m,Z=r.notched,p=r.slots,h=void 0===p?{}:p,G=r.type,y=void 0===G?"text":G,B=(0,fo.Z)(r,lG),f=function(e){var g=e.classes,t=(0,Ro.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},IG,g);return(0,vo.Z)({},g,t)}(r),v=vh(),S=Bh({props:r,muiFormControl:v,states:["required"]}),W=(0,vo.Z)({},r,{color:S.color||"primary",disabled:S.disabled,error:S.error,focused:S.focused,formControl:v,fullWidth:s,hiddenLabel:S.hiddenLabel,multiline:b,size:S.size,type:y}),V=null!=(n=null!=(I=h.root)?I:i.Root)?n:CG,R=null!=(o=null!=(l=h.input)?l:i.Input)?o:aG;return(0,Yo.jsx)(xh,(0,vo.Z)({slots:{root:V,input:R},renderSuffix:function(g){return(0,Yo.jsx)(rG,{ownerState:W,className:f.notchedOutline,label:null!=A&&""!==A&&S.required?C||(C=(0,Yo.jsxs)(e.Fragment,{children:[A,"\xa0","*"]})):A,notched:"undefined"!==typeof Z?Z:Boolean(g.startAdornment||g.filled||g.focused)})},fullWidth:s,inputComponent:d,multiline:b,ref:t,type:y},B,{classes:(0,vo.Z)({},f,{notchedOutline:null})}))}));iG.muiName="Input";var cG=iG;function sG(e){return(0,Vo.Z)("MuiFormLabel",e)}var uG=(0,nl.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),dG=["children","className","color","component","disabled","error","filled","focused","required"],AG=(0,zo.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return(0,vo.Z)({},g.root,"secondary"===t.color&&g.colorSecondary,t.filled&&g.filled)}})((function(e){var g,t=e.theme,n=e.ownerState;return(0,vo.Z)({color:(t.vars||t).palette.text.secondary},t.typography.body1,(g={lineHeight:"1.4375em",padding:0,position:"relative"},(0,Bo.Z)(g,"&.".concat(uG.focused),{color:(t.vars||t).palette[n.color].main}),(0,Bo.Z)(g,"&.".concat(uG.disabled),{color:(t.vars||t).palette.text.disabled}),(0,Bo.Z)(g,"&.".concat(uG.error),{color:(t.vars||t).palette.error.main}),g))})),mG=(0,zo.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:function(e,g){return g.asterisk}})((function(e){var g=e.theme;return(0,Bo.Z)({},"&.".concat(uG.error),{color:(g.vars||g).palette.error.main})})),bG=e.forwardRef((function(e,g){var t=(0,Eo.Z)({props:e,name:"MuiFormLabel"}),n=t.children,I=t.className,o=t.component,l=void 0===o?"label":o,C=(0,fo.Z)(t,dG),r=Bh({props:t,muiFormControl:vh(),states:["color","required","focused","disabled","error","filled"]}),a=(0,vo.Z)({},t,{color:r.color||"primary",component:l,disabled:r.disabled,error:r.error,filled:r.filled,focused:r.focused,required:r.required}),i=function(e){var g=e.classes,t=e.color,n=e.focused,I=e.disabled,o=e.error,l=e.filled,C=e.required,r={root:["root","color".concat((0,xo.Z)(t)),I&&"disabled",o&&"error",l&&"filled",n&&"focused",C&&"required"],asterisk:["asterisk",o&&"error"]};return(0,Ro.Z)(r,sG,g)}(a);return(0,Yo.jsxs)(AG,(0,vo.Z)({as:l,ownerState:a,className:(0,So.Z)(i.root,I),ref:g},C,{children:[n,r.required&&(0,Yo.jsxs)(mG,{ownerState:a,"aria-hidden":!0,className:i.asterisk,children:["\u2009","*"]})]}))}));function ZG(e){return(0,Vo.Z)("MuiInputLabel",e)}(0,nl.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var pG=["disableAnimation","margin","shrink","variant","className"],hG=(0,zo.ZP)(bG,{shouldForwardProp:function(e){return(0,zo.FO)(e)||"classes"===e},name:"MuiInputLabel",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[(0,Bo.Z)({},"& .".concat(uG.asterisk),g.asterisk),g.root,t.formControl&&g.formControl,"small"===t.size&&g.sizeSmall,t.shrink&&g.shrink,!t.disableAnimation&&g.animated,g[t.variant]]}})((function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===t.size&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:g.transitions.create(["color","transform","max-width"],{duration:g.transitions.duration.shorter,easing:g.transitions.easing.easeOut})},"filled"===t.variant&&(0,vo.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===t.size&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&(0,vo.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===t.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===t.variant&&(0,vo.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===t.size&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))})),GG=e.forwardRef((function(e,g){var t=(0,Eo.Z)({name:"MuiInputLabel",props:e}),n=t.disableAnimation,I=void 0!==n&&n,o=t.shrink,l=t.className,C=(0,fo.Z)(t,pG),r=vh(),a=o;"undefined"===typeof a&&r&&(a=r.filled||r.focused||r.adornedStart);var i=Bh({props:t,muiFormControl:r,states:["size","variant","required"]}),c=(0,vo.Z)({},t,{disableAnimation:I,formControl:r,shrink:a,size:i.size,variant:i.variant,required:i.required}),s=function(e){var g=e.classes,t=e.formControl,n=e.size,I=e.shrink,o={root:["root",t&&"formControl",!e.disableAnimation&&"animated",I&&"shrink","small"===n&&"sizeSmall",e.variant],asterisk:[e.required&&"asterisk"]},l=(0,Ro.Z)(o,ZG,g);return(0,vo.Z)({},g,l)}(c);return(0,Yo.jsx)(hG,(0,vo.Z)({"data-shrink":a,ownerState:c,ref:g,className:(0,So.Z)(s.root,l)},C,{classes:s}))}));function yG(e){return(0,Vo.Z)("MuiFormControl",e)}(0,nl.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var BG=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],fG=(0,zo.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return(0,vo.Z)({},g.root,g["margin".concat((0,xo.Z)(t.margin))],t.fullWidth&&g.fullWidth)}})((function(e){var g=e.ownerState;return(0,vo.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===g.margin&&{marginTop:16,marginBottom:8},"dense"===g.margin&&{marginTop:8,marginBottom:4},g.fullWidth&&{width:"100%"})})),vG=e.forwardRef((function(g,t){var n=(0,Eo.Z)({props:g,name:"MuiFormControl"}),I=n.children,o=n.className,l=n.color,C=void 0===l?"primary":l,r=n.component,a=void 0===r?"div":r,i=n.disabled,c=void 0!==i&&i,s=n.error,u=void 0!==s&&s,d=n.focused,A=n.fullWidth,m=void 0!==A&&A,b=n.hiddenLabel,Z=void 0!==b&&b,p=n.margin,h=void 0===p?"none":p,G=n.required,y=void 0!==G&&G,B=n.size,f=void 0===B?"medium":B,v=n.variant,S=void 0===v?"outlined":v,W=(0,fo.Z)(n,BG),V=(0,vo.Z)({},n,{color:C,component:a,disabled:c,error:u,fullWidth:m,hiddenLabel:Z,margin:h,required:y,size:f,variant:S}),R=function(e){var g=e.classes,t=e.margin,n=e.fullWidth,I={root:["root","none"!==t&&"margin".concat((0,xo.Z)(t)),n&&"fullWidth"]};return(0,Ro.Z)(I,yG,g)}(V),X=e.useState((function(){var g=!1;return I&&e.Children.forEach(I,(function(e){if((0,bC.Z)(e,["Input","Select"])){var t=(0,bC.Z)(e,["Select"])?e.props.input:e;t&&t.props.startAdornment&&(g=!0)}})),g})),k=(0,qn.Z)(X,2),J=k[0],Y=k[1],H=e.useState((function(){var g=!1;return I&&e.Children.forEach(I,(function(e){(0,bC.Z)(e,["Input","Select"])&&Rh(e.props,!0)&&(g=!0)})),g})),w=(0,qn.Z)(H,2),N=w[0],F=w[1],K=e.useState(!1),x=(0,qn.Z)(K,2),z=x[0],E=x[1];c&&z&&E(!1);var M,U=void 0===d||c?z:d,Q=e.useMemo((function(){return{adornedStart:J,setAdornedStart:Y,color:C,disabled:c,error:u,filled:N,focused:U,fullWidth:m,hiddenLabel:Z,size:f,onBlur:function(){E(!1)},onEmpty:function(){F(!1)},onFilled:function(){F(!0)},onFocus:function(){E(!0)},registerEffect:M,required:y,variant:S}}),[J,C,c,u,N,U,m,Z,M,y,f,S]);return(0,Yo.jsx)(fh.Provider,{value:Q,children:(0,Yo.jsx)(fG,(0,vo.Z)({as:a,ownerState:V,className:(0,So.Z)(R.root,o),ref:t},W,{children:I}))})}));function SG(e){return(0,Vo.Z)("MuiFormHelperText",e)}var WG,VG=(0,nl.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),RG=["children","className","component","disabled","error","filled","focused","margin","required","variant"],XG=(0,zo.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,t.size&&g["size".concat((0,xo.Z)(t.size))],t.contained&&g.contained,t.filled&&g.filled]}})((function(e){var g,t=e.theme,n=e.ownerState;return(0,vo.Z)({color:(t.vars||t).palette.text.secondary},t.typography.caption,(g={textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0},(0,Bo.Z)(g,"&.".concat(VG.disabled),{color:(t.vars||t).palette.text.disabled}),(0,Bo.Z)(g,"&.".concat(VG.error),{color:(t.vars||t).palette.error.main}),g),"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),kG=e.forwardRef((function(e,g){var t=(0,Eo.Z)({props:e,name:"MuiFormHelperText"}),n=t.children,I=t.className,o=t.component,l=void 0===o?"p":o,C=(0,fo.Z)(t,RG),r=Bh({props:t,muiFormControl:vh(),states:["variant","size","disabled","error","filled","focused","required"]}),a=(0,vo.Z)({},t,{component:l,contained:"filled"===r.variant||"outlined"===r.variant,variant:r.variant,size:r.size,disabled:r.disabled,error:r.error,filled:r.filled,focused:r.focused,required:r.required}),i=function(e){var g=e.classes,t=e.contained,n=e.size,I=e.disabled,o=e.error,l=e.filled,C=e.focused,r=e.required,a={root:["root",I&&"disabled",o&&"error",n&&"size".concat((0,xo.Z)(n)),t&&"contained",C&&"focused",l&&"filled",r&&"required"]};return(0,Ro.Z)(a,SG,g)}(a);return(0,Yo.jsx)(XG,(0,vo.Z)({as:l,ownerState:a,className:(0,So.Z)(i.root,I),ref:g},C,{children:" "===n?WG||(WG=(0,Yo.jsx)("span",{className:"notranslate",children:"\u200b"})):n}))}));function JG(e){return(0,Vo.Z)("MuiNativeSelect",e)}var YG=(0,nl.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),HG=["className","disabled","IconComponent","inputRef","variant"],wG=function(e){var g,t=e.ownerState,n=e.theme;return(0,vo.Z)((g={MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,vo.Z)({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"}},(0,Bo.Z)(g,"&.".concat(YG.disabled),{cursor:"default"}),(0,Bo.Z)(g,"&[multiple]",{height:"auto"}),(0,Bo.Z)(g,"&:not([multiple]) option, &:not([multiple]) optgroup",{backgroundColor:(n.vars||n).palette.background.paper}),(0,Bo.Z)(g,"&&&",{paddingRight:24,minWidth:16}),g),"filled"===t.variant&&{"&&&":{paddingRight:32}},"outlined"===t.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},NG=(0,zo.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:zo.FO,overridesResolver:function(e,g){var t=e.ownerState;return[g.select,g[t.variant],(0,Bo.Z)({},"&.".concat(YG.multiple),g.multiple)]}})(wG),FG=function(e){var g=e.ownerState,t=e.theme;return(0,vo.Z)((0,Bo.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active},"&.".concat(YG.disabled),{color:(t.vars||t).palette.action.disabled}),g.open&&{transform:"rotate(180deg)"},"filled"===g.variant&&{right:7},"outlined"===g.variant&&{right:7})},KG=(0,zo.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:function(e,g){var t=e.ownerState;return[g.icon,t.variant&&g["icon".concat((0,xo.Z)(t.variant))],t.open&&g.iconOpen]}})(FG),xG=e.forwardRef((function(g,t){var n=g.className,I=g.disabled,o=g.IconComponent,l=g.inputRef,C=g.variant,r=void 0===C?"standard":C,a=(0,fo.Z)(g,HG),i=(0,vo.Z)({},g,{disabled:I,variant:r}),c=function(e){var g=e.classes,t=e.variant,n=e.disabled,I=e.multiple,o=e.open,l={select:["select",t,n&&"disabled",I&&"multiple"],icon:["icon","icon".concat((0,xo.Z)(t)),o&&"iconOpen",n&&"disabled"]};return(0,Ro.Z)(l,JG,g)}(i);return(0,Yo.jsxs)(e.Fragment,{children:[(0,Yo.jsx)(NG,(0,vo.Z)({ownerState:i,className:(0,So.Z)(c.select,n),disabled:I,ref:l||t},a)),g.multiple?null:(0,Yo.jsx)(KG,{as:o,ownerState:i,className:c.icon})]})}));function zG(e){return(0,Vo.Z)("MuiSelect",e)}var EG,MG=(0,nl.Z)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),UG=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],QG=(0,zo.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:function(e,g){var t=e.ownerState;return[(0,Bo.Z)({},"&.".concat(MG.select),g.select),(0,Bo.Z)({},"&.".concat(MG.select),g[t.variant]),(0,Bo.Z)({},"&.".concat(MG.multiple),g.multiple)]}})(wG,(0,Bo.Z)({},"&.".concat(MG.select),{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),LG=(0,zo.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:function(e,g){var t=e.ownerState;return[g.icon,t.variant&&g["icon".concat((0,xo.Z)(t.variant))],t.open&&g.iconOpen]}})(FG),TG=(0,zo.ZP)("input",{shouldForwardProp:function(e){return(0,zo.Dz)(e)&&"classes"!==e},name:"MuiSelect",slot:"NativeInput",overridesResolver:function(e,g){return g.nativeInput}})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function DG(e,g){return"object"===typeof g&&null!==g?e===g:String(e)===String(g)}function jG(e){return null==e||"string"===typeof e&&!e.trim()}var PG,OG,qG=e.forwardRef((function(g,t){var n=g["aria-describedby"],I=g["aria-label"],o=g.autoFocus,l=g.autoWidth,C=g.children,r=g.className,a=g.defaultOpen,i=g.defaultValue,c=g.disabled,s=g.displayEmpty,u=g.IconComponent,d=g.inputRef,A=g.labelId,m=g.MenuProps,b=void 0===m?{}:m,Z=g.multiple,p=g.name,h=g.onBlur,G=g.onChange,y=g.onClose,B=g.onFocus,f=g.onOpen,v=g.open,S=g.readOnly,W=g.renderValue,V=g.SelectDisplayProps,R=void 0===V?{}:V,X=g.tabIndex,k=g.value,J=g.variant,Y=void 0===J?"standard":J,H=(0,fo.Z)(g,UG),w=(0,qd.Z)({controlled:k,default:i,name:"Select"}),N=(0,qn.Z)(w,2),F=N[0],K=N[1],x=(0,qd.Z)({controlled:v,default:a,name:"Select"}),z=(0,qn.Z)(x,2),E=z[0],M=z[1],U=e.useRef(null),Q=e.useRef(null),L=e.useState(null),T=(0,qn.Z)(L,2),D=T[0],j=T[1],P=e.useRef(null!=v).current,O=e.useState(),q=(0,qn.Z)(O,2),_=q[0],$=q[1],ee=(0,cl.Z)(t,d),ge=e.useCallback((function(e){Q.current=e,e&&j(e)}),[]),te=null==D?void 0:D.parentNode;e.useImperativeHandle(ee,(function(){return{focus:function(){Q.current.focus()},node:U.current,value:F}}),[F]),e.useEffect((function(){a&&E&&D&&!P&&($(l?null:te.clientWidth),Q.current.focus())}),[D,l]),e.useEffect((function(){o&&Q.current.focus()}),[o]),e.useEffect((function(){if(A){var e=(0,ac.Z)(Q.current).getElementById(A);if(e){var g=function(){getSelection().isCollapsed&&Q.current.focus()};return e.addEventListener("click",g),function(){e.removeEventListener("click",g)}}}}),[A]);var ne,Ie,oe=function(e,g){e?f&&f(g):y&&y(g),P||($(l?null:te.clientWidth),M(e))},le=e.Children.toArray(C),Ce=function(e){return function(g){var t;if(g.currentTarget.hasAttribute("tabindex")){if(Z){t=Array.isArray(F)?F.slice():[];var n=F.indexOf(e.props.value);-1===n?t.push(e.props.value):t.splice(n,1)}else t=e.props.value;if(e.props.onClick&&e.props.onClick(g),F!==t&&(K(t),G)){var I=g.nativeEvent||g,o=new I.constructor(I.type,I);Object.defineProperty(o,"target",{writable:!0,value:{value:t,name:p}}),G(o,e)}Z||oe(!1,g)}}},re=null!==D&&E;delete H["aria-invalid"];var ae=[],ie=!1;(Rh({value:F})||s)&&(W?ne=W(F):ie=!0);var ce=le.map((function(g,t,n){var I,o,l,C,r;if(!e.isValidElement(g))return null;if(Z){if(!Array.isArray(F))throw new Error((0,Ah.Z)(2));(r=F.some((function(e){return DG(e,g.props.value)})))&&ie&&ae.push(g.props.children)}else(r=DG(F,g.props.value))&&ie&&(Ie=g.props.children);if(r&&!0,void 0===g.props.value)return e.cloneElement(g,{"aria-readonly":!0,role:"option"});return e.cloneElement(g,{"aria-selected":r?"true":"false",onClick:Ce(g),onKeyUp:function(e){" "===e.key&&e.preventDefault(),g.props.onKeyUp&&g.props.onKeyUp(e)},role:"option",selected:void 0===(null==(I=n[0])||null==(o=I.props)?void 0:o.value)||!0===(null==(l=n[0])||null==(C=l.props)?void 0:C.disabled)?function(){if(F)return r;var e=n.find((function(e){var g;return void 0!==(null==e||null==(g=e.props)?void 0:g.value)&&!0!==e.props.disabled}));return g===e||r}():r,value:void 0,"data-value":g.props.value})}));ie&&(ne=Z?0===ae.length?null:ae.reduce((function(e,g,t){return e.push(g),t<ae.length-1&&e.push(", "),e}),[]):Ie);var se,ue=_;!l&&P&&D&&(ue=te.clientWidth),se="undefined"!==typeof X?X:c?null:0;var de=R.id||(p?"mui-component-select-".concat(p):void 0),Ae=(0,vo.Z)({},g,{variant:Y,value:F,open:re}),me=function(e){var g=e.classes,t=e.variant,n=e.disabled,I=e.multiple,o=e.open,l={select:["select",t,n&&"disabled",I&&"multiple"],icon:["icon","icon".concat((0,xo.Z)(t)),o&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return(0,Ro.Z)(l,zG,g)}(Ae);return(0,Yo.jsxs)(e.Fragment,{children:[(0,Yo.jsx)(QG,(0,vo.Z)({ref:ge,tabIndex:se,role:"button","aria-disabled":c?"true":void 0,"aria-expanded":re?"true":"false","aria-haspopup":"listbox","aria-label":I,"aria-labelledby":[A,de].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:function(e){if(!S){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),oe(!0,e))}},onMouseDown:c||S?null:function(e){0===e.button&&(e.preventDefault(),Q.current.focus(),oe(!0,e))},onBlur:function(e){!re&&h&&(Object.defineProperty(e,"target",{writable:!0,value:{value:F,name:p}}),h(e))},onFocus:B},R,{ownerState:Ae,className:(0,So.Z)(R.className,me.select,r),id:de,children:jG(ne)?EG||(EG=(0,Yo.jsx)("span",{className:"notranslate",children:"\u200b"})):ne})),(0,Yo.jsx)(TG,(0,vo.Z)({value:Array.isArray(F)?F.join(","):F,name:p,ref:U,"aria-hidden":!0,onChange:function(e){var g=le.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==g){var t=le[g];K(t.props.value),G&&G(e,t)}},tabIndex:-1,disabled:c,className:me.nativeInput,autoFocus:o,ownerState:Ae},H)),(0,Yo.jsx)(LG,{as:u,className:me.icon,ownerState:Ae}),(0,Yo.jsx)(Ds,(0,vo.Z)({id:"menu-".concat(p||""),anchorEl:te,open:re,onClose:function(e){oe(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},b,{MenuListProps:(0,vo.Z)({"aria-labelledby":A,role:"listbox",disableListWrap:!0},b.MenuListProps),PaperProps:(0,vo.Z)({},b.PaperProps,{style:(0,vo.Z)({minWidth:ue},null!=b.PaperProps?b.PaperProps.style:null)}),children:ce}))]})})),_G=qG,$G=(0,iA.Z)((0,Yo.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),ey=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],gy={name:"MuiSelect",overridesResolver:function(e,g){return g.root},shouldForwardProp:function(e){return(0,zo.FO)(e)&&"variant"!==e},slot:"Root"},ty=(0,zo.ZP)(Th,gy)(""),ny=(0,zo.ZP)(cG,gy)(""),Iy=(0,zo.ZP)(eG,gy)(""),oy=e.forwardRef((function(g,t){var n=(0,Eo.Z)({name:"MuiSelect",props:g}),I=n.autoWidth,o=void 0!==I&&I,l=n.children,C=n.classes,r=void 0===C?{}:C,a=n.className,i=n.defaultOpen,c=void 0!==i&&i,s=n.displayEmpty,u=void 0!==s&&s,d=n.IconComponent,A=void 0===d?$G:d,m=n.id,b=n.input,Z=n.inputProps,p=n.label,h=n.labelId,G=n.MenuProps,y=n.multiple,B=void 0!==y&&y,f=n.native,v=void 0!==f&&f,S=n.onClose,W=n.onOpen,V=n.open,R=n.renderValue,X=n.SelectDisplayProps,k=n.variant,J=void 0===k?"outlined":k,Y=(0,fo.Z)(n,ey),H=v?xG:_G,w=Bh({props:n,muiFormControl:vh(),states:["variant"]}).variant||J,N=b||{standard:PG||(PG=(0,Yo.jsx)(ty,{})),outlined:(0,Yo.jsx)(ny,{label:p}),filled:OG||(OG=(0,Yo.jsx)(Iy,{}))}[w],F=function(e){return e.classes}((0,vo.Z)({},n,{variant:w,classes:r})),K=(0,cl.Z)(t,N.ref);return(0,Yo.jsx)(e.Fragment,{children:e.cloneElement(N,(0,vo.Z)({inputComponent:H,inputProps:(0,vo.Z)({children:l,IconComponent:A,variant:w,type:void 0,multiple:B},v?{id:m}:{autoWidth:o,defaultOpen:c,displayEmpty:u,labelId:h,MenuProps:G,onClose:S,onOpen:W,open:V,renderValue:R,SelectDisplayProps:(0,vo.Z)({id:m},X)},Z,{classes:Z?(0,To.Z)(F,Z.classes):F},b?b.props.inputProps:{})},B&&v&&"outlined"===w?{notched:!0}:{},{ref:K,className:(0,So.Z)(N.props.className,a)},!b&&{variant:w},Y))})}));oy.muiName="Select";var ly=oy;function Cy(e){return(0,Vo.Z)("MuiTextField",e)}(0,nl.Z)("MuiTextField",["root"]);var ry=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],ay={standard:Th,filled:eG,outlined:cG},iy=(0,zo.ZP)(vG,{name:"MuiTextField",slot:"Root",overridesResolver:function(e,g){return g.root}})({}),cy=e.forwardRef((function(e,g){var t=(0,Eo.Z)({props:e,name:"MuiTextField"}),n=t.autoComplete,I=t.autoFocus,o=void 0!==I&&I,l=t.children,C=t.className,r=t.color,a=void 0===r?"primary":r,i=t.defaultValue,c=t.disabled,s=void 0!==c&&c,u=t.error,d=void 0!==u&&u,A=t.FormHelperTextProps,m=t.fullWidth,b=void 0!==m&&m,Z=t.helperText,p=t.id,h=t.InputLabelProps,G=t.inputProps,y=t.InputProps,B=t.inputRef,f=t.label,v=t.maxRows,S=t.minRows,W=t.multiline,V=void 0!==W&&W,R=t.name,X=t.onBlur,k=t.onChange,J=t.onFocus,Y=t.placeholder,H=t.required,w=void 0!==H&&H,N=t.rows,F=t.select,K=void 0!==F&&F,x=t.SelectProps,z=t.type,E=t.value,M=t.variant,U=void 0===M?"outlined":M,Q=(0,fo.Z)(t,ry),L=(0,vo.Z)({},t,{autoFocus:o,color:a,disabled:s,error:d,fullWidth:b,multiline:V,required:w,select:K,variant:U}),T=function(e){var g=e.classes;return(0,Ro.Z)({root:["root"]},Cy,g)}(L);var D={};"outlined"===U&&(h&&"undefined"!==typeof h.shrink&&(D.notched=h.shrink),D.label=f),K&&(x&&x.native||(D.id=void 0),D["aria-describedby"]=void 0);var j=(0,dh.Z)(p),P=Z&&j?"".concat(j,"-helper-text"):void 0,O=f&&j?"".concat(j,"-label"):void 0,q=ay[U],_=(0,Yo.jsx)(q,(0,vo.Z)({"aria-describedby":P,autoComplete:n,autoFocus:o,defaultValue:i,fullWidth:b,multiline:V,name:R,rows:N,maxRows:v,minRows:S,type:z,value:E,id:j,inputRef:B,onBlur:X,onChange:k,onFocus:J,placeholder:Y,inputProps:G},D,y));return(0,Yo.jsxs)(iy,(0,vo.Z)({className:(0,So.Z)(T.root,C),disabled:s,error:d,fullWidth:b,ref:g,required:w,color:a,variant:U,ownerState:L},Q,{children:[null!=f&&""!==f&&(0,Yo.jsx)(GG,(0,vo.Z)({htmlFor:j,id:O},h,{children:f})),K?(0,Yo.jsx)(ly,(0,vo.Z)({"aria-describedby":P,id:j,labelId:O,value:E,input:_},x,{children:l})):_,Z&&(0,Yo.jsx)(kG,(0,vo.Z)({id:P},A,{children:Z}))]}))}));function sy(e){return(0,Vo.Z)("MuiFormControlLabel",e)}var uy=(0,nl.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),dy=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","slotProps","value"],Ay=(0,zo.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[(0,Bo.Z)({},"& .".concat(uy.label),g.label),g.root,g["labelPlacement".concat((0,xo.Z)(t.labelPlacement))]]}})((function(e){var g=e.theme,t=e.ownerState;return(0,vo.Z)((0,Bo.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16},"&.".concat(uy.disabled),{cursor:"default"}),"start"===t.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===t.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===t.labelPlacement&&{flexDirection:"column",marginLeft:16},(0,Bo.Z)({},"& .".concat(uy.label),(0,Bo.Z)({},"&.".concat(uy.disabled),{color:(g.vars||g).palette.text.disabled})))})),my=e.forwardRef((function(g,t){var n,I=(0,Eo.Z)({props:g,name:"MuiFormControlLabel"}),o=I.className,l=I.componentsProps,C=void 0===l?{}:l,r=I.control,a=I.disabled,i=I.disableTypography,c=I.label,s=I.labelPlacement,u=void 0===s?"end":s,d=I.slotProps,A=void 0===d?{}:d,m=(0,fo.Z)(I,dy),b=vh(),Z=a;"undefined"===typeof Z&&"undefined"!==typeof r.props.disabled&&(Z=r.props.disabled),"undefined"===typeof Z&&b&&(Z=b.disabled);var p={disabled:Z};["checked","name","onChange","value","inputRef"].forEach((function(e){"undefined"===typeof r.props[e]&&"undefined"!==typeof I[e]&&(p[e]=I[e])}));var h=Bh({props:I,muiFormControl:b,states:["error"]}),G=(0,vo.Z)({},I,{disabled:Z,labelPlacement:u,error:h.error}),y=function(e){var g=e.classes,t=e.disabled,n=e.labelPlacement,I=e.error,o={root:["root",t&&"disabled","labelPlacement".concat((0,xo.Z)(n)),I&&"error"],label:["label",t&&"disabled"]};return(0,Ro.Z)(o,sy,g)}(G),B=null!=(n=A.typography)?n:C.typography,f=c;return null==f||f.type===al||i||(f=(0,Yo.jsx)(al,(0,vo.Z)({component:"span"},B,{className:(0,So.Z)(y.label,null==B?void 0:B.className),children:f}))),(0,Yo.jsxs)(Ay,(0,vo.Z)({className:(0,So.Z)(y.root,o),ownerState:G,ref:t},m,{children:[e.cloneElement(r,p),f]}))})),by=my;function Zy(e){return(0,Vo.Z)("PrivateSwitchBase",e)}(0,nl.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var py=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],hy=(0,zo.ZP)(mC)((function(e){var g=e.ownerState;return(0,vo.Z)({padding:9,borderRadius:"50%"},"start"===g.edge&&{marginLeft:"small"===g.size?-3:-12},"end"===g.edge&&{marginRight:"small"===g.size?-3:-12})})),Gy=(0,zo.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),yy=e.forwardRef((function(e,g){var t=e.autoFocus,n=e.checked,I=e.checkedIcon,o=e.className,l=e.defaultChecked,C=e.disabled,r=e.disableFocusRipple,a=void 0!==r&&r,i=e.edge,c=void 0!==i&&i,s=e.icon,u=e.id,d=e.inputProps,A=e.inputRef,m=e.name,b=e.onBlur,Z=e.onChange,p=e.onFocus,h=e.readOnly,G=e.required,y=void 0!==G&&G,B=e.tabIndex,f=e.type,v=e.value,S=(0,fo.Z)(e,py),W=(0,qd.Z)({controlled:n,default:Boolean(l),name:"SwitchBase",state:"checked"}),V=(0,qn.Z)(W,2),R=V[0],X=V[1],k=vh(),J=C;k&&"undefined"===typeof J&&(J=k.disabled);var Y="checkbox"===f||"radio"===f,H=(0,vo.Z)({},e,{checked:R,disabled:J,disableFocusRipple:a,edge:c}),w=function(e){var g=e.classes,t=e.checked,n=e.disabled,I=e.edge,o={root:["root",t&&"checked",n&&"disabled",I&&"edge".concat((0,xo.Z)(I))],input:["input"]};return(0,Ro.Z)(o,Zy,g)}(H);return(0,Yo.jsxs)(hy,(0,vo.Z)({component:"span",className:(0,So.Z)(w.root,o),centerRipple:!0,focusRipple:!a,disabled:J,tabIndex:null,role:void 0,onFocus:function(e){p&&p(e),k&&k.onFocus&&k.onFocus(e)},onBlur:function(e){b&&b(e),k&&k.onBlur&&k.onBlur(e)},ownerState:H,ref:g},S,{children:[(0,Yo.jsx)(Gy,(0,vo.Z)({autoFocus:t,checked:n,defaultChecked:l,className:w.input,disabled:J,id:Y?u:void 0,name:m,onChange:function(e){if(!e.nativeEvent.defaultPrevented){var g=e.target.checked;X(g),Z&&Z(e,g)}},readOnly:h,ref:A,required:y,ownerState:H,tabIndex:B,type:f},"checkbox"===f&&void 0===v?{}:{value:v},d)),R?I:s]}))})),By=(0,iA.Z)((0,Yo.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),fy=(0,iA.Z)((0,Yo.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),vy=(0,iA.Z)((0,Yo.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Sy(e){return(0,Vo.Z)("MuiCheckbox",e)}var Wy,Vy=(0,nl.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),Ry=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Xy=(0,zo.ZP)(yy,{shouldForwardProp:function(e){return(0,zo.FO)(e)||"classes"===e},name:"MuiCheckbox",slot:"Root",overridesResolver:function(e,g){var t=e.ownerState;return[g.root,t.indeterminate&&g.indeterminate,"default"!==t.color&&g["color".concat((0,xo.Z)(t.color))]]}})((function(e){var g,t=e.theme,n=e.ownerState;return(0,vo.Z)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Al.Fq)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&(g={},(0,Bo.Z)(g,"&.".concat(Vy.checked,", &.").concat(Vy.indeterminate),{color:(t.vars||t).palette[n.color].main}),(0,Bo.Z)(g,"&.".concat(Vy.disabled),{color:(t.vars||t).palette.action.disabled}),g))})),ky=(0,Yo.jsx)(fy,{}),Jy=(0,Yo.jsx)(By,{}),Yy=(0,Yo.jsx)(vy,{}),Hy=e.forwardRef((function(g,t){var n,I,o=(0,Eo.Z)({props:g,name:"MuiCheckbox"}),l=o.checkedIcon,C=void 0===l?ky:l,r=o.color,a=void 0===r?"primary":r,i=o.icon,c=void 0===i?Jy:i,s=o.indeterminate,u=void 0!==s&&s,d=o.indeterminateIcon,A=void 0===d?Yy:d,m=o.inputProps,b=o.size,Z=void 0===b?"medium":b,p=o.className,h=(0,fo.Z)(o,Ry),G=u?A:c,y=u?A:C,B=(0,vo.Z)({},o,{color:a,indeterminate:u,size:Z}),f=function(e){var g=e.classes,t=e.indeterminate,n=e.color,I={root:["root",t&&"indeterminate","color".concat((0,xo.Z)(n))]},o=(0,Ro.Z)(I,Sy,g);return(0,vo.Z)({},g,o)}(B);return(0,Yo.jsx)(Xy,(0,vo.Z)({type:"checkbox",inputProps:(0,vo.Z)({"data-indeterminate":u},m),icon:e.cloneElement(G,{fontSize:null!=(n=G.props.fontSize)?n:Z}),checkedIcon:e.cloneElement(y,{fontSize:null!=(I=y.props.fontSize)?I:Z}),ownerState:B,ref:t,className:(0,So.Z)(f.root,p)},h,{classes:f}))})),wy=t(2419),Ny=function(e){var g=e.file,t=e.inputName,n=e.setFile;return(0,Yo.jsxs)(tl,{sx:{display:"flex",alignItems:"center",gap:3},children:[(0,Yo.jsxs)($b,{variant:"contained",startIcon:(0,Yo.jsx)(wy.Z,{}),color:"secondary",component:"label",children:[t,(0,Yo.jsx)("input",{hidden:!0,type:"file",onChange:function(e){return n(e)}})]}),(0,Yo.jsx)(tl,{children:null===g||void 0===g?void 0:g.name})]})},Fy=function(){var g=(0,e.useContext)(kB).userReturn,t=(0,o.useMutation)({mutationKey:["return"],mutationFn:function(e){return KZ.create(e)},onSuccess:function(){g.setSuccess(!0)},onError:function(e){var t=e;g.setServerError(t)}}),n=t.mutate,I=t.isLoading,l=t.isSuccess,C=t.error,r=function(){var e=GA(pA().mark((function e(g){return pA().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(g);case 2:case"end":return e.stop()}}),e)})));return function(g){return e.apply(this,arguments)}}();return{createReturn:r,isLoading:I,isSuccess:l,err:C}},Ky=Kn((function(){var g=(0,e.useState)(""),t=(0,qn.Z)(g,2),n=t[0],I=t[1],o=(0,e.useState)(""),l=(0,qn.Z)(o,2),C=l[0],r=l[1],a=(0,e.useState)(!0),i=(0,qn.Z)(a,2),c=i[0],s=i[1],u=(0,e.useState)(""),d=(0,qn.Z)(u,2),A=d[0],m=d[1],b=(0,e.useState)(""),Z=(0,qn.Z)(b,2),p=Z[0],h=Z[1],G=(0,e.useState)(""),y=(0,qn.Z)(G,2),B=y[0],f=y[1],v=(0,e.useState)(null),S=(0,qn.Z)(v,2),W=S[0],V=S[1],R=(0,e.useState)(""),X=(0,qn.Z)(R,2),k=X[0],J=X[1],Y=(0,e.useContext)(kB),H=Y.user,w=Y.userReturn,N=Fy().createReturn;return(0,e.useEffect)((function(){if(w.isFormSubmit){var e=function(e){var g=e.name,t=e.country,n=e.agreement,I=e.city,o=e.zip,l=e.adress,C=e.image,r=e.reasonReturn,a=[];return g.split(" ").length<3&&a.push("*\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041e \u0447\u0435\u0440\u0435\u0437 \u043f\u0440\u043e\u0431\u0435\u043b\u044b"),""===t&&a.push("*\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0430"),n||a.push("*\u041f\u0440\u0438\u043c\u0438\u0442\u0435 \u0441\u043e\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435"),""===I&&a.push("*\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434"),""===o&&a.push("*\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u0434"),""===l&&a.push("*\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441\u0441"),C||a.push("*\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0438\u0442\u044c \u0444\u043e\u0442\u043e \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438"),""===r&&a.push("*\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430"),a}({name:n,country:C,agreement:c,city:A,zip:p,adress:B,image:W,reasonReturn:k});if(0!==e.length)return w.setFormErrors(e),w.setFormValidate(!1),void w.setFormSubmit(!1);var g=new FormData;g.append("userName",n),g.append("country",C),g.append("address","".concat(A,", ").concat(B)),g.append("reason",k),g.append("postalCode",p),g.append("image",W),g.append("userId",H.user.id.toString()),N(g),w.setFormValidate(!0)}}),[w.isFormSubmit]),(0,Yo.jsx)(Yo.Fragment,{children:(0,Yo.jsxs)(Yo.Fragment,{children:[(0,Yo.jsx)(al,{variant:"h6",gutterBottom:!0,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),(0,Yo.jsx)(tl,{children:w.formErrors&&w.formErrors.map((function(e,g){return(0,Yo.jsx)("p",{style:{color:"red"},children:e},g)}))}),(0,Yo.jsxs)(Sp,{container:!0,spacing:3,children:[(0,Yo.jsx)(Sp,{item:!0,xs:12,children:(0,Yo.jsx)(cy,{onChange:function(e){return I(e.target.value)},value:n,required:!0,label:"\u0424\u0418\u041e",fullWidth:!0,variant:"standard"})}),(0,Yo.jsx)(Sp,{item:!0,xs:12,children:(0,Yo.jsxs)(vG,{required:!0,variant:"standard",fullWidth:!0,sx:{minWidth:120},children:[(0,Yo.jsx)(GG,{children:"\u0421\u0442\u0440\u0430\u043d\u0430"}),(0,Yo.jsxs)(ly,{value:C,onChange:function(e){return r(e.target.value)},label:"\u0421\u0442\u0440\u0430\u043d\u0430",children:[(0,Yo.jsx)(Iu,{value:"",children:(0,Yo.jsx)("em",{children:"\u0421\u0431\u0440\u043e\u0441"})}),(0,Yo.jsx)(Iu,{value:"bun",children:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u044c"}),(0,Yo.jsx)(Iu,{value:"ru",children:"\u0420\u043e\u0441\u0441\u0438\u044f"}),(0,Yo.jsx)(Iu,{value:"ykr",children:"\u0423\u043a\u0440\u0430\u0438\u043d\u0430"})]})]})}),(0,Yo.jsx)(Sp,{item:!0,xs:12,sm:6,children:(0,Yo.jsx)(cy,{onChange:function(e){return m(e.target.value)},value:A,required:!0,label:"\u0413\u043e\u0440\u043e\u0434",fullWidth:!0,variant:"standard"})}),(0,Yo.jsx)(Sp,{item:!0,xs:12,sm:6,children:(0,Yo.jsx)(cy,{onChange:function(e){return h(e.target.value)},value:p,required:!0,label:"Zip / \u043f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u043a\u043e\u0434",fullWidth:!0,variant:"standard"})}),(0,Yo.jsx)(Sp,{item:!0,xs:12,children:(0,Yo.jsx)(cy,{onChange:function(e){return f(e.target.value)},value:B,required:!0,label:"\u0410\u0434\u0440\u0435\u0441",fullWidth:!0,variant:"standard"})}),(0,Yo.jsx)(Sp,{item:!0,xs:12,children:(0,Yo.jsx)(cy,{onChange:function(e){return J(e.target.value)},value:k,required:!0,label:"\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430",fullWidth:!0,variant:"standard"})}),(0,Yo.jsx)(Sp,{item:!0,xs:12,children:(0,Yo.jsx)(Ny,{file:W,setFile:function(e){var g=e.target.files;if(g){var t=g[0];V(t)}},inputName:"\u0444\u043e\u0442\u043e"})}),(0,Yo.jsx)(Sp,{item:!0,xs:12,children:(0,Yo.jsx)(by,{control:(0,Yo.jsx)(Hy,{color:"secondary",onChange:function(e){return s(e.target.checked)},checked:c}),label:"\u0421\u043e\u0433\u043b\u0430\u0448\u0430\u044e\u0441\u044c \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445"})})]})]})})})),xy=Ky,zy=wi({successCheckmark:{width:"80px",height:"115p",margin:"0 auto"},checkIcon:{position:"relative",width:"80px",height:"80px",borderRadius:"50%",boxSizing:"content-box"},iconLine:{height:"5px",backgroundColor:"#4CAF50",display:"block",borderRadius:"2px",position:"absolute",zIndex:10},lineTip:{top:"46px",left:"14px",width:"25px",transform:"rotate(45deg)",animation:"$iconLineTip 0.75s"},lineLong:{top:"38px",right:"8px",width:"47px",transform:"rotate(-45deg)",animation:"$iconLineLong 0.75s"},iconCircle:{position:"absolute",top:"-4px",left:"-4px",width:"80px",height:"80px",borderRadius:"50%",boxSizing:"content-box",border:"4px solid #4CAF50",animation:"$rotateCircle 4.25s ease-in"},"@keyframes iconLineTip":{"0%":{width:0,left:"1px",top:"19px"},"54%":{width:0,left:"1px",top:"19px"},"70%":{width:"50px",left:"-8px",top:"37px"},"84%":{width:"17px",left:"21px",top:"48px"},"100%":{width:"25px",left:"14px",top:"45px"}},"@keyframes iconLineLong":{"0%":{width:0,right:"46px",top:"54px"},"65%":{width:0,right:"46px",top:"54px"},"84%":{width:"55px",right:"0px",top:"35px"},"100%":{width:"47px",right:"8px",top:"38px"}},"@keyframes rotateCircle":{"0%":{opacity:0},"12%":{opacity:.8},"100%":{opacity:1}}}),Ey=function(e){var g=e.display,t=zy();return(0,Yo.jsx)("div",{className:t.successCheckmark,style:{display:g},children:(0,Yo.jsxs)("div",{className:t.checkIcon,children:[(0,Yo.jsx)("span",{className:"".concat(t.iconLine," ").concat(t.lineTip)}),(0,Yo.jsx)("span",{className:"".concat(t.iconLine," ").concat(t.lineLong)}),(0,Yo.jsx)("div",{className:t.iconCircle})]})})},My=Kn((function(g){var t,n=g.spinerDisplay,I=(0,e.useContext)(kB).userReturn;return(0,Yo.jsx)(Yo.Fragment,{children:I.success?(0,Yo.jsxs)(Yo.Fragment,{children:[(0,Yo.jsx)(al,{variant:"h5",gutterBottom:!0,children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"}),(0,Yo.jsxs)(al,{variant:"subtitle1",sx:{mb:4,lineHeight:1.6},children:["\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0438\u0445 \u0432 \u043b\u0438\u0447\u043d\u043e\u043c ",(0,Yo.jsx)(uu,{to:eu.PROFILE,children:"\u043f\u0440\u043e\u0444\u0438\u043b\u0435"}),", \u0442\u0430\u043c \u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c QR-\u043a\u043e\u0434 \u0438 \u0440\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0435\u0433\u043e"]}),(0,Yo.jsx)(Ey,{display:n})]}):(0,Yo.jsxs)(Yo.Fragment,{children:[(0,Yo.jsx)(al,{variant:"h5",gutterBottom:!0,children:"\u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u043d\u0435 \u0431\u044b\u043b \u0441\u043e\u0437\u0434\u0430\u043d"}),(0,Yo.jsxs)(al,{gutterBottom:!0,children:["\u041e\u0448\u0438\u0431\u043a\u0430: ",null===(t=I.serverError)||void 0===t?void 0:t.message]})]})})})),Uy=["\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445","\u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438"],Qy=function(e,g){switch(e){case 0:return(0,Yo.jsx)(xy,{});case 1:return(0,Yo.jsx)(My,{spinerDisplay:g});default:throw new Error("Unknown step")}},Ly=Kn((function(){var g=(0,e.useState)(0),t=(0,qn.Z)(g,2),n=t[0],I=t[1],o=(0,e.useState)(qi.none),l=(0,qn.Z)(o,2),C=l[0],r=l[1],a=(0,e.useContext)(kB).userReturn;return(0,e.useEffect)((function(){a.formValidate&&I(n+1)}),[a.formValidate]),(0,e.useEffect)((function(){n===Uy.length-1?r(qi.block):r(qi.none)}),[n]),(0,Yo.jsx)(Yo.Fragment,{children:(0,Yo.jsx)(Uo,{component:"section",maxWidth:"sm",sx:{mb:4},children:(0,Yo.jsxs)(Qi,{variant:"outlined",sx:{my:{xs:3,md:6},p:{xs:2,md:3}},children:[(0,Yo.jsx)(al,{component:"h1",variant:"h4",align:"center",children:"\u0412\u043e\u0437\u0432\u0440\u0430\u0442 \u0442\u043e\u0432\u0430\u0440\u0430"}),(0,Yo.jsx)(Up,{activeStep:n,sx:{pt:3,pb:5},children:Uy.map((function(e){return(0,Yo.jsx)(jp,{children:(0,Yo.jsx)(uh,{children:e})},e)}))}),(0,Yo.jsxs)(Yo.Fragment,{children:[Qy(n,C),(0,Yo.jsxs)(tl,{sx:{display:"flex",justifyContent:"flex-end"},children:[0!==n&&(0,Yo.jsx)($b,{onClick:function(){I(n-1),a.setFormSubmit(!1),a.setFormValidate(!1)},sx:{mt:3,ml:1},children:"\u043d\u0430\u0437\u0430\u0434"}),(0,Yo.jsx)($b,{variant:"contained",disabled:n===Uy.length-1,onClick:function(){a.setFormErrors([]),a.setFormSubmit(!0)},sx:{mt:3,ml:1},children:"\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439"})]})]})]})})})})),Ty=function(){return(0,Yo.jsx)(Yo.Fragment,{children:(0,Yo.jsx)(Ly,{})})},Dy=function(){return(0,Yo.jsx)(Sp,{item:!0,xs:!1,sm:4,md:7,sx:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"}})},jy=function(){var g=(0,e.useContext)(kB).user,t=(0,o.useMutation)(["login"],{mutationFn:function(e){return Ab.login(e)},onSuccess:function(e){localStorage.setItem("token",e.accessToken),g.setUser(e.user),g.setIsAuth(!0)},onError:function(e){var g,t,n=e;console.log(null===(g=n.response)||void 0===g||null===(t=g.data)||void 0===t?void 0:t.message)}}),n=t.mutate,I=t.isSuccess,l=t.isLoading,C=t.error,r=function(){var e=GA(pA().mark((function e(g){return pA().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(g);case 2:case"end":return e.stop()}}),e)})));return function(g){return e.apply(this,arguments)}}();return{login:r,isSuccess:I,isLoading:l,error:C}},Py=function(){var g=(0,e.useState)(""),t=(0,qn.Z)(g,2),n=t[0],I=t[1],o=(0,e.useState)(""),l=(0,qn.Z)(o,2),C=l[0],r=l[1],a=jy(),i=a.login,c=a.isSuccess,s=a.isLoading,u=(a.error,oo());return(0,Yo.jsx)(Yo.Fragment,{children:s?(0,Yo.jsx)(Ub,{className:"Spiner"}):(0,Yo.jsx)(tl,{onSubmit:function(e){e.preventDefault(),i({email:n,password:C})},component:"form",sx:{mt:1},children:c?(0,Yo.jsx)($b,{variant:"outlined",onClick:function(){return u(eu.PROFILE)},children:"\u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}):(0,Yo.jsxs)(Yo.Fragment,{children:[(0,Yo.jsx)(cy,{error:!1,value:n,onChange:function(e){return I(e.target.value)},margin:"normal",required:!0,fullWidth:!0,label:"Email \u0430\u0434\u0440\u0435\u0441",autoComplete:"email",autoFocus:!0}),(0,Yo.jsx)(cy,{error:!1,value:C,onChange:function(e){return r(e.target.value)},margin:"normal",required:!0,fullWidth:!0,label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",autoComplete:"current-password"}),(0,Yo.jsx)($b,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"}),(0,Yo.jsx)(Sp,{container:!0,children:(0,Yo.jsx)(Sp,{item:!0,children:(0,Yo.jsx)(uu,{to:eu.REGISTRATION,children:"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"})})})]})})})},Oy=function(){var g=(0,e.useContext)(kB).user,t=(0,o.useMutation)(["registration"],{mutationFn:function(e){return Ab.registration(e)},onSuccess:function(e){localStorage.setItem("token",e.accessToken),g.setUser(e.user),g.setIsAuth(!0)},onError:function(e){var g,t,n=e;console.log(null===(g=n.response)||void 0===g||null===(t=g.data)||void 0===t?void 0:t.message)}}),n=t.mutate,I=t.isSuccess,l=t.isLoading,C=t.error,r=function(){var e=GA(pA().mark((function e(g){return pA().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(g);case 2:case"end":return e.stop()}}),e)})));return function(g){return e.apply(this,arguments)}}();return{registration:r,isSuccess:I,isLoading:l,error:C}},qy=function(){var g=(0,e.useState)(""),t=(0,qn.Z)(g,2),n=t[0],I=t[1],o=(0,e.useState)(""),l=(0,qn.Z)(o,2),C=l[0],r=l[1],a=(0,e.useState)(""),i=(0,qn.Z)(a,2),c=i[0],s=i[1],u=(0,e.useState)(""),d=(0,qn.Z)(u,2),A=d[0],m=d[1],b=(0,e.useState)(!1),Z=(0,qn.Z)(b,2),p=Z[0],h=Z[1],G=(0,e.useState)(!1),y=(0,qn.Z)(G,2),B=y[0],f=y[1],v=oo(),S=Oy(),W=S.registration,V=S.isLoading,R=S.isSuccess;S.error;return(0,e.useEffect)((function(){h(c!==A)}),[c,A]),(0,e.useEffect)((function(){C.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?f(!1):f(!0)}),[C]),(0,Yo.jsx)(Yo.Fragment,{children:V?(0,Yo.jsx)(Ub,{className:"Spiner"}):(0,Yo.jsx)(tl,{onSubmit:function(e){e.preventDefault(),p||B||W({name:n,email:C,password:c})},component:"form",sx:{mt:1},children:R?(0,Yo.jsx)($b,{variant:"outlined",onClick:function(){return v(eu.PROFILE)},children:"\u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}):(0,Yo.jsxs)(Yo.Fragment,{children:[(0,Yo.jsx)(cy,{error:!1,value:n,onChange:function(e){return I(e.target.value)},margin:"normal",required:!0,fullWidth:!0,label:"\u0418\u043c\u044f",autoFocus:!0}),(0,Yo.jsx)(cy,{error:B,value:C,onChange:function(e){return r(e.target.value)},margin:"normal",required:!0,fullWidth:!0,label:"Email \u0430\u0434\u0440\u0435\u0441",autoComplete:"email"}),(0,Yo.jsx)(cy,{error:!1,value:c,onChange:function(e){return s(e.target.value)},margin:"normal",required:!0,fullWidth:!0,label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password"}),(0,Yo.jsx)(cy,{error:p,value:A,onChange:function(e){return m(e.target.value)},margin:"normal",required:!0,fullWidth:!0,label:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password"}),(0,Yo.jsx)($b,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"}),(0,Yo.jsx)(Sp,{container:!0,children:(0,Yo.jsx)(Sp,{item:!0,children:(0,Yo.jsx)(uu,{to:eu.LOGIN,children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"})})})]})})})},_y=t(403),$y=function(){return(0,Yo.jsx)(ZA,{sx:{m:1,bgcolor:"secondary.main"},children:(0,Yo.jsx)(_y.Z,{})})},eB=function(){var e=Io().pathname;return(0,Yo.jsx)(Sp,{item:!0,xs:12,sm:8,md:5,children:(0,Yo.jsxs)(tl,{sx:{my:8,mx:5,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,Yo.jsx)($y,{}),(0,Yo.jsx)(al,{component:"h1",variant:"h5",children:e===eu.LOGIN?"\u0412\u043e\u0439\u0434\u0438\u0442\u0435":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c"}),e===eu.LOGIN?(0,Yo.jsx)(Py,{}):(0,Yo.jsx)(qy,{})]})})},gB=function(){return(0,Yo.jsxs)(Sp,{container:!0,component:"main",sx:{height:"100vh"},children:[(0,Yo.jsx)(Dy,{}),(0,Yo.jsx)(eB,{})]})},tB=wi({ScanerButtonBack:{top:"92%",left:"50%",transform:"translate(-50%, -50%)"}}),nB=t(7317),IB=function(e){return e?"flex":"none"},oB=Kn((function(){var g=(0,e.useContext)(kB).scaner,t=tB().ScanerButtonBack;return(0,Yo.jsx)(Yo.Fragment,{children:(0,Yo.jsx)($b,{className:t,style:{position:"absolute",display:IB(g.isScan)},onClick:function(){g.setIsScan(!1),g.setVisibility(!0),g.setLoadingScan(!0)},variant:"contained",children:(0,Yo.jsx)(nB.Z,{})})})})),lB=oB,CB=t(9008),rB=t.n(CB),aB=wi({Scaner:{position:"static"},qrReader:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"},spiner:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10}}),iB=wi({ScanerSvgBox:{position:"absolute",top:"50%",left:"50%",width:300,height:300,transform:"translate(-50%, -50%)",zIndex:10},ScanerSvg:{position:"absolute",top:0,left:0,width:"100%",height:"100%",fill:"none",stroke:"#f0b51b",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",boxShadow:"0 -1px 0 #ffffff21, 0 0 6px #ffffff21, 0 1px 1px #ffffff21",borderRadius:20,padding:2},ScanerPlate:{position:"absolute",top:0,left:"50%",transform:"translate(-50%, 0%)",display:"block",width:215,height:4,background:"#e4b312",borderRadius:20,transition:"all .2s linear",animation:"$scaner 3s linear infinite",boxShadow:"0 0 30px 5px #e4b312"},"@keyframes scaner":{"0%":{top:"100%"},"50%":{top:0},"100%":{top:"100%"}}}),cB=function(){var e=iB(),g=e.ScanerSvgBox,t=e.ScanerSvg,n=e.ScanerPlate;return(0,Yo.jsxs)("div",{className:g,children:[(0,Yo.jsx)("svg",{className:t,viewBox:"0 0 238 238",preserveAspectRatio:"none",children:(0,Yo.jsx)("path",{d:"M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"})}),(0,Yo.jsx)("div",{className:n})]})};!function(e){e.front="user",e.back="environment"}(Wy||(Wy={}));var sB=function(){var g=e.useState(Wy.back),t=(0,qn.Z)(g,2),n=t[0],I=t[1];return(0,Yo.jsx)("div",{children:(0,Yo.jsxs)(vG,{sx:{mb:4,minWidth:130},children:[(0,Yo.jsx)(GG,{children:"camera"}),(0,Yo.jsxs)(ly,{value:n,label:"camera",onChange:function(e){I(e.target.value)},children:[(0,Yo.jsx)(Iu,{value:Wy.back,children:"\u0417\u0430\u0434\u043d\u044f\u044f \u043a\u0430\u043c\u0435\u0440\u0430"}),(0,Yo.jsx)(Iu,{value:Wy.front,children:"\u041f\u0435\u0440\u0435\u0434\u043d\u044f\u044f \u043a\u0430\u043c\u0435\u0440\u0430"})]}),(0,Yo.jsx)(kG,{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0434 \u043a\u0430\u043c\u0435\u0440\u0443"})]})})},uB=wi({container:{display:"flex",flexDirection:"column",alignItems:"center",padding:"40px 24px 0 24px","@media (max-width: 768px)":{padding:"20px 24px 0 24px"}},title:{margin:"0 0 30px 0",fontSize:"24px",textAlign:"center","@media (max-width: 768px)":{margin:"0 0 25px 0",fontSize:"18px"},"@media (max-width: 480px)":{fontSize:"16px"}},imageBox:{position:"relative",width:400,height:400,marginBottom:80,"@media (max-width: 992px)":{width:300,height:300,marginBottom:60},"@media (max-width: 768px)":{width:250,height:250,marginBottom:30}},image:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},fileLink:{margin:"15px 0"}}),dB=t(1883),AB=Kn((function(){var g,t=(0,e.useContext)(kB).scaner,n=uB(),I=n.container,o=n.title,l=n.imageBox,C=n.image,r=n.fileLink;return(0,Yo.jsx)(Yo.Fragment,{children:t.visibility&&(0,Yo.jsx)(Yo.Fragment,{children:(0,Yo.jsxs)("div",{className:I,children:[(0,Yo.jsx)("h4",{className:o,children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u0441\u043b\u0435 \u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"}),(0,Yo.jsx)(sB,{}),null!==t.data?(0,Yo.jsx)(Yo.Fragment,{children:(g=t.data.text,/^(ftp|http|https):\/\/[^ "]+$/.test(g)?(0,Yo.jsx)(hl,{href:t.data.text,className:r,children:"\u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0444\u0430\u0439\u043b"}):(0,Yo.jsx)("p",{children:t.data.text}))}):(0,Yo.jsx)(tl,{className:l,children:(0,Yo.jsx)("img",{className:C,src:"/client-qr-code./images/scaner/start_scan.svg",alt:"imafe start scan"})}),(0,Yo.jsx)($b,{style:{display:IB(!t.isScan)},onClick:function(){t.setIsScan(!0),t.setVisibility(!1),t.setData(null)},variant:"outlined",startIcon:(0,Yo.jsx)(dB.Z,{}),children:"C\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})})})})),mB=Kn((function(){var g=(0,e.useContext)(kB).scaner,t=aB(),n=t.Scaner,I=t.qrReader,o=t.spiner,l=function(){var e=GA(pA().mark((function e(t){return pA().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.setLoadingScan(!1),t&&null!==t&&(g.setData(t),g.setIsScan(!1),g.setLoadingScan(!0),g.setVisibility(!0));case 2:case"end":return e.stop()}}),e)})));return function(g){return e.apply(this,arguments)}}();return(0,Yo.jsxs)("div",{className:n,children:[g.isScan&&(0,Yo.jsxs)(Yo.Fragment,{children:[g.loadingScan?(0,Yo.jsx)(Ub,{className:o}):(0,Yo.jsx)(cB,{}),(0,Yo.jsx)(rB(),{facingmode:g.selectedCamera,delay:1e3,onError:function(e){console.error(e)},onScan:l,className:I})]}),(0,Yo.jsx)(lB,{}),(0,Yo.jsx)(AB,{})]})})),bB=mB,ZB=[{path:eu.MAIN,element:(0,Yo.jsx)(iZ,{})},{path:eu.LOGIN,element:(0,Yo.jsx)(gB,{})},{path:eu.REGISTRATION,element:(0,Yo.jsx)(gB,{})},{path:eu.SCANNER,element:(0,Yo.jsx)(bB,{})},{path:eu.NOT_FOUND,element:(0,Yo.jsx)("div",{children:"not found page"})},{path:eu.BAD,element:(0,Yo.jsx)(po,{to:eu.NOT_FOUND,replace:!0})}],pB=[{path:eu.PROFILE,element:(0,Yo.jsx)(Vp,{})},{path:eu.RETURNS,element:(0,Yo.jsx)(Ty,{})}],hB=new o.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}}),GB=Kn((function(){var g=(0,e.useContext)(kB).user,t=ro(Bb(g.isAuth?[].concat((0,lI.Z)(pB),(0,lI.Z)(ZB)):ZB)),n=fb();return(0,e.useEffect)((function(){localStorage.getItem("token")&&g.checkAuth()}),[]),g.isLoading?(0,Yo.jsx)("div",{className:n.SpinerBox,children:(0,Yo.jsx)(Ub,{className:"Spiner"})}):(0,Yo.jsx)(o.QueryClientProvider,{client:hB,children:(0,Yo.jsx)("div",{className:n.App,children:t})})})),yB=function(e){e&&e instanceof Function&&t.e(787).then(t.bind(t,787)).then((function(g){var t=g.getCLS,n=g.getFID,I=g.getFCP,o=g.getLCP,l=g.getTTFB;t(e),n(e),I(e),o(e),l(e)}))},BB=function(){function e(){zn(this,e),this._data=void 0,this._loadingScan=void 0,this._isScan=void 0,this._visibility=void 0,this._selectedCamera=void 0,this._data=null,this._isScan=!1,this._loadingScan=!0,this._visibility=!0,this._selectedCamera="environment",bt(this)}return Un(e,[{key:"setData",value:function(e){this._data=e}},{key:"data",get:function(){return this._data}},{key:"setIsScan",value:function(e){this._isScan=e}},{key:"isScan",get:function(){return this._isScan}},{key:"setLoadingScan",value:function(e){this._loadingScan=e}},{key:"loadingScan",get:function(){return this._loadingScan}},{key:"setVisibility",value:function(e){this._visibility=e}},{key:"visibility",get:function(){return this._visibility}},{key:"setSelectedCamera",value:function(e){this._selectedCamera=e}},{key:"selectedCamera",get:function(){return this._selectedCamera}}]),e}(),fB=function(){function e(){zn(this,e),this._currentReturn=void 0,this._isFormValidate=void 0,this._isFormSubmit=void 0,this._isSuccess=void 0,this._formErrors=void 0,this._serverError=void 0,this._currentReturn={},this._isFormValidate=!1,this._isFormSubmit=!1,this._isSuccess=!1,this._formErrors=[],this._serverError=null,bt(this)}return Un(e,[{key:"setServerError",value:function(e){this._serverError=e}},{key:"setReturn",value:function(e){this._currentReturn=e}},{key:"setFormValidate",value:function(e){this._isFormValidate=e}},{key:"setFormSubmit",value:function(e){this._isFormSubmit=e}},{key:"setFormErrors",value:function(e){this._formErrors=e}},{key:"setSuccess",value:function(e){this._isSuccess=e}},{key:"serverError",get:function(){return this._serverError}},{key:"success",get:function(){return this._isSuccess}},{key:"currentReturn",get:function(){return this._currentReturn}},{key:"formValidate",get:function(){return this._isFormValidate}},{key:"isFormSubmit",get:function(){return this._isFormSubmit}},{key:"formErrors",get:function(){return this._formErrors}}]),e}(),vB=fB,SB=function(){function e(){zn(this,e),this._isLoading=void 0,this._isAuth=void 0,this._user=void 0,this._isLoading=!1,this._isAuth=!1,this._user={},bt(this)}return Un(e,[{key:"setIsAuth",value:function(e){this._isAuth=e}},{key:"setUser",value:function(e){this._user=e}},{key:"setLoading",value:function(e){this._isLoading=e}},{key:"isLoading",get:function(){return this._isLoading}},{key:"isAuth",get:function(){return this._isAuth}},{key:"user",get:function(){return this._user}},{key:"checkAuth",value:function(){var e=GA(pA().mark((function e(){var g,t,n,I;return pA().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setLoading(!0),e.prev=1,e.next=4,ob.get("".concat(Cb).concat(cb),{withCredentials:!0});case 4:g=e.sent,localStorage.setItem("token",g.data.accessToken),this.setIsAuth(!0),this.setUser(g.data.user),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),I=e.t0,console.log(null===(t=I.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message);case 14:return e.prev=14,this.setLoading(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,10,14,17]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),WB=SB,VB=function(){function e(){zn(this,e),this._isOpen=void 0,this._isOpen=!0,bt(this)}return Un(e,[{key:"setIsOpen",value:function(e){this._isOpen=e}},{key:"isOpen",get:function(){return this._isOpen}}]),e}(),RB=function(){function e(){zn(this,e),this._isOpen=void 0,this._isOpen=!1,bt(this)}return Un(e,[{key:"setIsOpen",value:function(e){this._isOpen=e}},{key:"isOpen",get:function(){return this._isOpen}}]),e}(),XB=I.createRoot(document.getElementById("root")),kB=(0,e.createContext)({});XB.render((0,Yo.jsx)(kB.Provider,{value:{scaner:new BB,userReturn:new vB,user:new WB,profile:new VB,modal:new RB},children:(0,Yo.jsx)(iu,{children:(0,Yo.jsx)(GB,{})})})),yB()}()}();
//# sourceMappingURL=main.bc2a89f9.js.map